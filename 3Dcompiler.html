<html lang="en" oncontextmenu="return false;openCustomMenu();">
<head>
<body>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>UYC Compiler</title>



<div id="engineArea" style="
position: absolute;
z-index: 5;
"></div>
<h3 id="info"></h3>
<h3 id="cameraInfo"></h3>
<script src="Data/rendering/3D/Engine/WebEngine.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.9.1/firebase.js"></script>
<script type="text/javascript" src="Data/rendering/3D/Renderers/CSS3D.js"></script>
<script type="text/javascript" src="Data/rendering/3D/Exporters/OBJ.js"></script>
<script type="text/javascript" src="Data/rendering/3D/Renderers/Raytracing.js"></script>
<script type="text/javascript" src="Data/rendering/3D/Window/WindowResize.js"></script>
<script type="text/javascript" src="Data/rendering/3D/Effects/EffectComposer2.js"></script>
<script type="text/javascript" src="Data/rendering/3D/Objects/Bubbles.js"></script>
<script type="text/javascript" src="Data/rendering/3D/Shaders/AnaglyphShader2.js"></script>
<script type="text/javascript" src="Data/rendering/3D/Objects/LaserBeam.js"></script>
<script type="text/javascript" src="Data/rendering/3D/Renderers/HTMLMixer.js"></script>
<script type="text/javascript" src="Data/rendering/3D/Objects/LaserCookedTest.js"></script>
<script type="text/javascript" src="Data/rendering/3D/Effects/GlowEffect.js"></script>
<script type="text/javascript" src="Data/rendering/3D/Geometry/DilateGeometry.js"></script>
<script type="text/javascript" src="Data/rendering/3D/Geometry/HollowGeometry.js"></script>
<script type="text/javascript" src="Data/rendering/3D/UI/RenderStats.js"></script>
<script type="text/javascript" src="Data/rendering/3D/Renderers/Stats.js"></script>
<script type="text/javascript" src="Data/rendering/3D/Material/AtmosphereMaterial.js"></script>
<script type="text/javascript" src="Data/rendering/3D/Keyboard/KeyboardState.js"></script>
<script type="text/javascript" src="Data/rendering/3D/UI/GUI.js"></script>
<script type="text/javascript" src="Data/rendering/3D/Shaders/Shader2.js"></script>
<script type="text/javascript" src="Data/rendering/3D/Shaders/CopyShader2.js"></script>
<script type="text/javascript" src="Data/rendering/3D/Effects/ShaderPass.js"></script>
<script type="text/javascript" src="Data/rendering/3D/Effects/RenderPass.js"></script>
<script type="text/javascript" src="Data/rendering/3D/Shaders/ConvolutionShader2.js"></script>
<script type="text/javascript" src="Data/rendering/3D/Effects/GlitchPass3.js"></script>
<script type="text/javascript" src="Data/rendering/3D/Effects/MaskPass2.js"></script>
<script type="text/javascript" src="Data/rendering/3D/Shaders/BleachBypassShader2.js"></script>
<script type="text/javascript" src="Data/rendering/3D/Shaders/EdgeShader.js"></script>
<script type="text/javascript" src="Data/rendering/3D/Shaders/FXAAShader2.js"></script>
<script type="text/javascript" src="Data/rendering/3D/Shaders/FocusShader.js"></script>
<script type="text/javascript" src="Data/rendering/3D/Shaders/UnicodeShader.js"></script>
<script type="text/javascript" src="Data/rendering/3D/Shaders/PixelShader.js"></script>
<script type="text/javascript" src="Data/rendering/3D/Effects/ASCIIEffect.js"></script>
<script type="text/javascript" src="Data/rendering/3D/Loaders/ColladaLoader.js"></script>
<script type="text/javascript" src="Data/rendering/3D/Effects/FilmPass2.js"></script>
<script type="text/javascript" src="Data/rendering/3D/Shaders/FilmShader3.js"></script>
<script type="text/javascript" src="Data/rendering/3D/Shaders/customShader.js"></script>
<script type="text/javascript" src="Data/rendering/3D/Lighting/VolumetricSpotlight.js"></script>
<script type="text/javascript" src="Data/rendering/3D/Renderers/Photorealism.js"></script>
<script type="text/javascript" src="Data/rendering/3D/Shaders/BloomShaders.js"></script>
<script type="text/javascript" src="Data/rendering/3D/Shaders/LuminosityHighPassShader.js"></script>
<script type="text/javascript" src="Data/rendering/3D/Effects/DigitalGlitch.js"></script>
<script type="text/javascript" src="Data/rendering/3D/Objects/Reflector.js"></script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/three@0.112.0/examples/js/objects/Refractor.js"></script>
<script type="text/javascript" src="Data/rendering/3D/Objects/Water3s.js"></script>
<script type="text/javascript" src="Data/rendering/3D/Objects/Sky.js"></script>
<script type="text/javascript" src="Data/rendering/3D/Colors/NTC.js"></script>
<script type="text/javascript" src="Data/rendering/3D/Noises/improved-noise.js"></script>
<script type="text/javascript" src="Data/rendering/3D/Buffers/BufferGeometryUtils.js"></script>
<script src="Data/rendering/3D/Noises/simplex-noise.js"></script>
<script type="text/javascript" src="Data/rendering/3D/Physics/physi4.js"></script>
<script src="Data/rendering/3D/Loaders/GLTFLoader.js"></script>
<script src="Data/rendering/3D/Camera/OrbitalCamera.js"></script>
<script src="Data/rendering/3D/Camera/GamepadSupport.js"></script>
<script src="Data/rendering/3D/Camera/FlyCamera.js"></script>
<script src="Data/rendering/3D/Loaders/MTLLoader.js"></script>
<script src="Data/rendering/3D/Loaders/OBJLoader.js"></script>
<!-- <script src="Data/rendering/3D/Requirements/Compressor/Inflate.js"></script> -->
<script src="Data/rendering/3D/Requirements/FBX/Compressor/fflate.js"></script>
<script src="Data/rendering/3D/Requirements/Inflate.js"></script>
<script src="Data/rendering/3D/Loaders/FBXLoader6.js"></script>
<script src="Data/rendering/3D/Loaders/STLLoader.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/tween.js/16.11.0/Tween.min.js"></script>
<script src="https://cywarr.github.io/small-shop/zb/zb0.js"></script>
<script src="https://cywarr.github.io/small-shop/zb/zb1.js"></script>
<script src="https://cywarr.github.io/small-shop/zb/zb2.js"></script>
<script src="Data/rendering/3D/Physics/breaker/ConvexObjectBreaker3.js"></script>
<script src="Data/rendering/3D/Geometry/ConvexGeometry.js"></script>
<script src="Data/rendering/3D/Math/ConvexHull.js"></script>
<script src="Data/rendering/3D/Physics/cannon.js"></script>
<script src="Data/rendering/3D/Physics/cannonUtils.js"></script>
<div ondblclick="changeCounter()" id="graphBg">
<div id="graph"></div>
<h3 id="fpsTxt">Loading...</h3>
</div>

<div id="customContextMenu">

</div>

<div id="toast"><div id="toastImg"></div><div id="toastMsg"></div></div>
<div id="gdiTab" style="visibility: hidden;position:absolute;top:10%;">
<h5 id="gamepad_aPressed" style="z-Index:100">a:</h5>
 <h5 id="gamepad_bPressed" style="z-Index:100">b:</h5>
 <h5 id="gamepad_xPressed" style="z-Index:100">x:</h5>
 <h5 id="gamepad_yPressed" style="z-Index:100">y:</h5>
 <h5 id="gamepad_upPressed" style="z-Index:100">up:</h5>
 <h5 id="gamepad_downPressed" style="z-Index:100">down:</h5>
 <h5 id="gamepad_leftPressed" style="z-Index:100">left:</h5>
 <h5 id="gamepad_rightPressed" style="z-Index:100">right:</h5>
 <h5 id="gamepad_leftAxisMoving" style="z-Index:100">left axis:</h5>
 <h5 id="gamepad_rightAxisMoving" style="z-Index:100">right axis:</h5>
 <h5 id="gamepad_leftAxisX" style="z-Index:100">left axis (X):</h5>
 <h5 id="gamepad_leftAxisY" style="z-Index:100">left axis (Y):</h5>
 <h5 id="gamepad_rightAxisX" style="z-Index:100">right axis (X):</h5>
 <h5 id="gamepad_rightAxisY" style="z-Index:100">right axis (Y):</h5>
 <h5 id="gamepad_lbPressed" style="z-Index:100">LB:</h5>
 <h5 id="gamepad_rbPressed" style="z-Index:100">RB:</h5>
 <h5 id="gamepad_ltPressed" style="z-Index:100">LT:</h5>
 <h5 id="gamepad_rtPressed" style="z-Index:100">RT:</h5>
 <h5 id="gamepad_ltValue" style="z-Index:100">LT (value):</h5>
 <h5 id="gamepad_rtValue" style="z-Index:100">RT (value):</h5>
</div>

<div id="CI_Tab" style="visibility: hidden;">
 <h1 id="controllerInfo"></h1>
 <button onclick="displayControllerInfo_onscreen()" id="dCI_on">Display controller data</button>
 <button onclick="alwaysDisplayData()" id="alwaysDisplayBtn"></button>
 <h4 id="cdire">Controller data is refreshing every:</h4>
 <div class="range-wrap">
  <input type="range" id="CD_fps" value="1000" min="0" max="10000">
  <output class="bubble"></output>
 </div>
 <button onclick="setDataSpeed()" id="setdataspeedBtn">SET</button>
 <button onclick="resetDataSpeed()" id="resetdataspeedBtn">RESET</button>
 <h6 id="CD_Time"></h6>
</div>


  <div id="optionsTab" style="visibility:hidden;position: absolute;z-index: 44;padding: 468px;top: 0%;">
  <h1 id="compilerDataTxt">Compiler Data:</h1>
    <div id="compDataOptions">
    <button onclick="autosave()" id="autosaveBtn" style="text-shadow: rgb(0, 0, 0) 0px 0px 2px; color: rgb(0, 255, 0);">AutoSave: ???</button>
    <button onclick="autoload()" id="autoloadBtn" style="text-shadow: rgb(0, 0, 0) 0px 0px 2px; color: rgb(0, 255, 0);">AutoLoad: ???</button>
    <button onclick="savecode()" id="savecodeBtn" style="text-shadow: rgb(0, 0, 0) 0px 0px 2px; color: rgb(255, 255, 255);">Save code: ???</button>
    <!-- <button id="stringColorBtn" oncontextmenu="resetCompilerColor('string');" onclick="colorString.click();" style="text-shadow: rgb(0, 0, 0) 0px 0px 2px; color: rgb(255, 255, 255);">String color: ???</button>
    <button id="numberColorBtn" oncontextmenu="resetCompilerColor('number');" onclick="colorNumber.click();" style="text-shadow: rgb(0, 0, 0) 0px 0px 2px; color: rgb(255, 255, 255);">Number color: ???</button>
    <button id="keywordColorBtn" oncontextmenu="resetCompilerColor('keyword');" onclick="colorKeyword.click();" style="text-shadow: rgb(0, 0, 0) 0px 0px 2px; color: rgb(255, 255, 255);">Keyword color: ???</button>
    <button id="propertyColorBtn" oncontextmenu="resetCompilerColor('property');" onclick="colorProperty.click();" style="text-shadow: rgb(0, 0, 0) 0px 0px 2px; color: rgb(255, 255, 255);">Property color: ???</button>
    <button id="variableColorBtn" oncontextmenu="resetCompilerColor('variable');" onclick="colorVariable.click();" style="text-shadow: rgb(0, 0, 0) 0px 0px 2px; color: rgb(255, 255, 255);">Variable color: ???</button>
    <button id="commentColorBtn" oncontextmenu="resetCompilerColor('comment');" onclick="colorComment.click();" style="text-shadow: rgb(0, 0, 0) 0px 0px 2px; color: rgb(255, 255, 255);">Comment color: ???</button>
    <button id="operatorColorBtn" oncontextmenu="resetCompilerColor('operator');" onclick="colorOperator.click();" style="text-shadow: rgb(0, 0, 0) 0px 0px 2px; color: rgb(255, 255, 255);">Operator color: ???</button>
    <button id="customCompilerBtn" onclick="openCustomCompiler();" style="text-shadow: rgb(0, 0, 0) 0px 0px 2px; color: rgb(255, 255, 255);" disabled>Custom</button>
    <input onchange="changeColorOf('string')" style="visibility:hidden;position:absolute;left:385;width:135;height:30;opacity:0;cursor:pointer;" id="colorString" type="color" value="#fded02">
    <input onchange="changeColorOf('number')" style="visibility:hidden;position:absolute;left:525;width:151;height:30;opacity:0;cursor:pointer;" id="colorNumber" type="color" value="#a16a94">
    <input onchange="changeColorOf('keyword')" style="visibility:hidden;position:absolute;left:680;width:156;height:30;opacity:0;cursor:pointer;" id="colorKeyword" type="color" value="#db2d20">
    <input onchange="changeColorOf('property')" style="visibility:hidden;position:absolute;left:841;width:154;height:30;opacity:0;cursor:pointer;" id="colorProperty" type="color" value="#01a252">
    <input onchange="changeColorOf('variable')" style="visibility:hidden;position:absolute;left:1076;width:190;height:30;opacity:0;cursor:pointer;" id="colorVariable" type="color" value="#01a252">
    <input onchange="changeColorOf('comment')" style="visibility:hidden;position:absolute;left:1270;width:154;height:30;opacity:0;cursor:pointer;" id="colorComment" type="color" value="#cdab53">
    <input onchange="changeColorOf('operator')" style="visibility:hidden;position:absolute;left:1429;width:160;height:30;opacity:0;cursor:pointer;" id="colorOperator" type="color" value="#d6d5d4"> -->
    </div>

  <h1 id="terminalTxt">Terminal:</h1>
    <div id="terminalOptions">
    <button onclick="changeTerminalPos()" id="terminalPositionBtn">Position: up</button>
    <button onclick="autoOpenTerminal()" id="terminalAutoOpenBtn" style="color: lime;">Auto-Open: yes</button>  
    <button onclick="backgroundColorTerminal.click()" id="terminalBackgroundBtn" style="color: rgb(0, 0, 0);">Background: #000000</button>  
    <button onclick="colorTerminal.click();" id="terminalColorBtn" style="color: rgb(255, 255, 255);">Color: #ffffff</button>  
    <input onchange="changeBackgroundTerminal()" style="position:absolute;left:221;width:144;height:30;opacity:0;cursor:pointer;" id="backgroundColorTerminal" type="color" value="#000000">
    <input onchange="changeColorTerminal()" style="position:absolute;left:345;width:80;height:30;opacity:0;cursor:pointer;" id="colorTerminal" type="color" value="#ffffff">
    <!-- <img src="Images/arrayOpen.png" id="optionsArrayOpen" style="position:absolute;top:-3;left:579;z-Index: -1"></img> -->
    <!-- <img src="Images/arrayClosed.png" id="optionsArrayClosed" style="position:absolute;top:-3;left:855;z-Index: -1"></img> -->
    <button onclick="showhideLogs()" id="terminalShowHideBtn">??? terminal logs</button>
    <button onclick="showhideErrors()" id="errorShowHideBtn">Errors: ???</button>
    <button onclick="showhideInfo()" id="infoShowHideBtn">Info: ???</button>
    <button onclick="showhideSuccess()" id="successShowHideBtn">Success: ???</button>
    <button onclick="showhideWarn()" id="warnShowHideBtn">Warn: ???</button>
  </div>
  

  <div>
  <h1 id="creationsText">Creations:</h1>
  <button onclick="openContextMenuCreation()" id="contextMenuBtn">Context menu</button>
  <button onclick="openCustomGeometryCreation()" id="customGeometryBtn">Custom geometry</button>
  <button onclick="openAudioCreation()" id="audioBtn">Audio</button>
  <h1 id="infoText" style="
    position: absolute;
    left: 0.5%;
    top: 40%;
">Info:</h1><button onclick="infosConfiguration()" id="infoBtn">Don't show</button>
<span style="
    position: absolute;
    left: 10;
    top: 500;
    font-family: monospace;
">Or use "showInfo()" in the compiler to display the informations and hideInfo() to hide.</span>
</div>

    <div id="controllerOptions">
      <h1 id="gamepadTxt">Gamepad:</h1>
    <button onclick="window.open('UYC_CONTROLLER_TEST.html')" id="testControllerBtn">Test controller</button>
    <button onclick="showControllerInformations()" id="controllerInformationsBtn">Controller informations</button>
    </div>

    <h1 id="_fpsText">FPS:</h1>
    <div id="fpsOptions">
    <button onclick="displayFps_onscreen()" id="displayFpsBtn">Display FPS</button>
    <button onclick="alwaysDisplayFPS()" id="alwaysDisplayFpsBtn">Always display FPS</button>
    <button onclick="setFPSStyle()" id="oldStyleFpsBtn">Old style: yes</button>
    </div>
  </div>

   <button onclick="terminal.clear();this.style.left=-1000;terminalCancelBtn.style.left=-1000" style="
    width:5%;
    height:3%;
    border:none;
    cursor:pointer;
    position:absolute;
    left:-1000px;
    bottom:0px;
    z-Index:7;
    background:#ffffff;
    font-weight: 800;
    font-Size:15px;
   " id="terminalClearBtn">CLEAR</button>
   <button onclick="terminalClearBtn.style.left=-1000;this.style.left=-1000" style="
   width:5%;
   height:3%;
   border:none;
   cursor:pointer;
   position:absolute;
   left:-1000px;
   bottom:0px;
   z-Index:7;
   background:#ffffff;
   font-weight: 800;
   font-Size:15px;
  " id="terminalCancelBtn">CANCEL</button>
  <div id="terminalTab">
    <div id="_terminal" pos="up" style="visibility: hidden;">
      <table id="terminalTable">
        <tr id="table_tT">
       </table>
    <input oncontextmenu="openTerminalContent(event)" id="terminalBox" placeholder="Type &quot;terminal.help()&quot; to provide help information for UYC terminal." style="top: 0%; left: 0%; background: rgb(0, 0, 0); color: rgb(255, 255, 255);">
    <span id="terminalInfo" style="top: 5.5%;">Press "ESC" to </span>
  </div>
  
  </div>

  <div id="myAssetsTab" style="visibility: hidden;">
   <div id="myAssetsBg"><h1 id="numOfAssets">You have: + numberofassets + assets</h1></div>
  </div>
  <div id="assetsTab" style="visibility: hidden;">
   <h1 style="text-align:center;text-decoration: underline;" id="assetsTabTitle">Assets</h1>
   <div id="createAssetBg" style="visibility: hidden;">
       <div id="creatingOptions">
    <h1 id="createText">Create:</h1>
    <button id="spriteBtn" onclick="selectSprite()">Sprite</button>
    <button id="pluginBtn" onclick="selectScript()">Plugin</button>
    <button id="themeBtn" disabled="">Theme</button>
    </div>
    <div id="cao" style="visibility: hidden;">
     <h3 id="presstxt"></h3>
     <h1 id="typeTxt">Type:</h1>
     <h1 id="idTxt">ID:</h1>
     <h1 id="titleTxt">Title:</h1>
     <h1 id="descTxt">Desc:</h1>
     <h1 id="imageTxt">Image:</h1>
     <img id="imagePreview">
     <h1 id="imagepathTxt">Image path:</h1>
     <h1 id="imagesizeTxt">Image size:</h1>
     <h1 id="priceTxt">Price:</h1>
    </div>
    <div id="caBg" style="visibility: hidden;"></div>
    <div id="createSpriteTab" style="visibility: hidden;">
      <input id="titleVal" placeholder="Title" type="text" autocomplete="off">
      <input id="descVal" placeholder="Description (optional)" type="text" autocomplete="off">
      <button id="imageValCover">Add Image</button>
      <input id="imageVal" type="file" accept="image/*, .jpg,.png" *="">
      <input id="priceVal" placeholder="Price" type="number" autocomplete="off">
      <input type="checkbox" id="freeCB" onclick="cbPrice()">
      <h3 id="freeCBtxt">FREE</h3>
      <button id="createSpriteBtn" onclick="createNewSprite()">Create</button>
      <h1 id="assetMSG"></h1>
  </div>
  
  
  
  
  
  
  
  <div id="createPluginTab" style="visibility: hidden;">
    <input id="titleVal2" placeholder="Title" type="text" autocomplete="off">
    <input id="descVal2" placeholder="Description (optional)" type="text" autocomplete="off">
    <button id="scriptValCover">Add Plugin</button>
    <input id="scriptVal" type="file" accept=".txt" *="">
    <input id="priceVal2" placeholder="Price" type="number" autocomplete="off">
    <input type="checkbox" id="freeCB2" onclick="cbPrice2()">
    <h3 id="freeCBtxt2">FREE</h3>
    <button id="createpluginBtn" onclick="createNewScript()">Create</button>
    <h1 id="assetMSG2"></h1>
  </div>
  <div id="cao2" style="visibility: hidden;">
    <h3 id="presstxt2"></h3>
    <h1 id="typeTxt2">Type:</h1>
    <h1 id="idTxt2">ID:</h1>
    <h1 id="titleTxt2">Title:</h1>
    <h1 id="descTxt2">Desc:</h1>
    <h1 id="scriptTxt">Script:</h1>
    <button id="scriptPreview" onclick="viewScript()">View Script</button><span style="position: absolute;top: 54%;font-size: 16px; visibility: hidden">(the script will appear in web console)</span>
    <h1 id="scriptpathTxt">File path:</h1>
    <h1 id="scriptsizeTxt">Plugin size:</h1>
    <h1 id="priceTxt2">Price:</h1>
   </div>
   <textarea id="vScr" style="visibility: hidden; user-select: none" readonly>
    
   </textarea>
   <div id="caBg2"></div>
  
  
  
  
  
  
  
  
  
  
   </div>
   </div>
   <div id="assetsBg" style="visibility: hidden;">
    <button onclick="createAsset()" id="createAssetBtn" style="visibility: hidden;">Create new asset</button>
    <div id="asset1Bg" class="AFS" asset-type="sprite" onclick="buyAsset1()">
    <img src="Images/smileyface.png" id="asset1img">
    <h2 id="asset1title">smileyface</h2>
    <h6 id="asset1desc">This is a free asset made by the owner of UYC.</h6>
    <h6 id="asset1author">Author: Pirvu Alex</h6>
    <h6 id="asset1price">Price: <span style="color:#0f0">FREE</span></h6>
  </div>
  </div>
  
  <div id="assetDialog1" style="visibility:hidden" title="Confirm Purchase">
  <p id="purchasingAsset1"></p>
  </div>
  
  
  <div id="themesTab" style="visibility: hidden;">
   <!-- <h1 id="la" style="font-Size:100" onclick="decTheme()"><</h1> -->
  <!-- <a href="#themeSelectorBtn2"><button id="themeSelectorBtn" onclick="loadTheme(this.innerHTML);GTNB()"></button></a> -->
   <!-- <a href="#themeSelectorBtn"><button id="themeSelectorBtn2" onclick="loadTheme(this.innerHTML);GTPB()"></button></a> -->
   <!-- <h1 id="ra" style="font-Size:100" onclick="incTheme()">></h1> -->
   <h3 id="_CUT"></h3>
   <button id="useThemeBtn" onclick="useTheme()"></button>
   <button id="previewThemeBtn" onclick="previewTheme()"></button>
  </div>

  <div id="allCompilerArea" style="visibility: visible;">
  <h1 id="codeStatus" onmouseover="showStatus()" style="color: rgb(255, 255, 0);">code status: stopped</h1>
  <h1 id="controllerStatus" onmouseover="showConStatus()" style="color: rgb(255, 255, 0);">controller status: not connected</h1>
  <h1 id="challengeStatus" style="color: rgb(0, 255, 0);"></h1>
  <div id="compiler">
  <div id="compilerBg">
  <div id="itemsTab" style="background: rgb(24, 24, 29);">
  
   <button onclick="execute();addExe();" id="executionBtn">EXECUTE</button>
   <!-- <button onclick="download(editor.getValue())" id="downloadBtn">Download</button>-->
   <button onclick="openMyScripts()" id="scriptsBtn">Scripts</button>
   <button onclick="openTutorial()" id="tutorialBtn">Tutorial</button>
   <button onclick="openAssets()" id="assetsBtn">Assets</button>
   <button onclick="openMyAssets()" id="myassetsBtn">My assets</button>
   <button onclick="openThemes()" id="themesBtn">Themes</button>
   <button onclick="openOptions()" id="optionsBtn">Options</button>
   <button onclick="openChallenges()" id="challengesBtn">Challenges</button>
  
  </div>
  <textarea id="compilerTextArea"></textarea>
  </div>
  </div>
  <!-- <button onclick="ts();addExe()" id="executionBtn">EXE</button> -->
  <h1 id="qqq"></h1>
  <div id="outputComp" contenteditable="true" aria-readonly="true"></div>
  </div>
  <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css2?family=Roboto:wght@700&amp;display=swap">
  <link rel="icon" href="Images/my-Icon-VERYSMALL.png">
  <link rel="stylesheet" href="Data/style/comp.css">
  <link rel="stylesheet" href="Data/style/jqueryUI/dialog.css">

  <link rel="stylesheet" href="Data/style/Themes/abcdef.css">
  <link rel="stylesheet" href="Data/style/Themes/ambiance.css">
  <link rel="stylesheet" href="Data/style/Themes/base16-dark.css">
  <link rel="stylesheet" href="Data/style/Themes/bespin.css">
  <link rel="stylesheet" href="Data/style/Themes/blackboard.css">
  <link rel="stylesheet" href="Data/style/Themes/cobalt.css">
  <link rel="stylesheet" href="Data/style/Themes/colorforth.css">
  <link rel="stylesheet" href="Data/style/Themes/dracula.css">
  <link rel="stylesheet" href="Data/style/Themes/erlang-dark.css">
  <link rel="stylesheet" href="Data/style/Themes/hopscotch.css">
  <link rel="stylesheet" href="Data/style/Themes/icecoder.css">
  <link rel="stylesheet" href="Data/style/Themes/isotope.css">
  <link rel="stylesheet" href="Data/style/Themes/lesser-dark.css">
  <link rel="stylesheet" href="Data/style/Themes/liquibyte.css">
  <link rel="stylesheet" href="Data/style/Themes/material.css">
  <link rel="stylesheet" href="Data/style/Themes/mbo.css">
  <link rel="stylesheet" href="Data/style/Themes/mdn-like.css">
  <link rel="stylesheet" href="Data/style/Themes/monokai.css">
  
  <!-- <link rel="stylesheet" href="https://esironal.github.io/cmtouch/lib/codemirror.css"> -->
  <link rel="stylesheet" href="https://esironal.github.io/cmtouch/addon/hint/show-hint.css">
  <script src="Data/compilerDataBase/comp6.js"></script>
  <script src="Data/style/jqueryUI/dialog.js"></script>
  <script src="Data/style/jqueryUI/dialogUI.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
  <!-- <script src="https://esironal.github.io/cmtouch/lib/codemirror.js"></script> -->
  <script src="Data/compilerDataBase/comp1Test.js"></script>
  <script src="Data/compilerDataBase/JS.js"></script>
  <script src="Data/compilerDataBase/comments.js"></script>
  <script src="https://esironal.github.io/cmtouch/addon/hint/show-hint.js"></script>
  <!-- <script src="https://codemirror.net/addon/hint/show-hint.js"></script> -->
  <!-- <script src="https://codemirror.net/addon/selection/active-line.js"></script> -->
  <script src="https://esironal.github.io/cmtouch/addon/selection/active-line.js"></script>
  <script src="https://esironal.github.io/cmtouch/addon/edit/matchbrackets.js"></script>
  <!-- <script src="https://codemirror.net/addon/lint/lint.js"></script> -->
  <script src="Data/compilerDataBase/simple.js"></script>
  <script src="https://dragselect.com/v2/ds.min.js"></script>

  <style>
  html {
   scroll-behavior: smooth;
  }
  body {
   overflow-x:hidden;
   overflow-y:hidden;
   margin:0;
   user-select: none;
   font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
   /*src: url("Fonts/Roboto/Roboto-Medium.ttf");*/
  }
  .function:nth-child(1) .property-name {
   width: 100%;
  }
  .function:nth-child(2) .property-name {
   width: 100%;
  }
  .function:nth-child(3) .property-name {
   width: 100%;
  }
  .cm-style1 { color: #c2a3c2; }
  .cm-style2 { color: #72a0df; }
  .cm-style3 { color: #81b772; }
  .squaredText {
   background:gray;
   width:initial;
   height:initial;
   display:flex;
   justify-content: center;
   align-items: center;
  }
  .highlightedText {
   background:#eeeeee;
   color:#333333;
  }
  .codeMode {
   border-top: 1px solid #000000;
   border-left: 5px solid #000000;
   border-right: 1px solid #000000;
   border-bottom: 1px solid #000000;
  }






  .CodeMirror-hints {
  position: absolute;
  z-index: 10;
  overflow: hidden;
  list-style: none;

  margin: 0;
  padding: 2px;

  -webkit-box-shadow: 2px 3px 5px rgba(0,0,0,.2);
  -moz-box-shadow: 2px 3px 5px rgba(0,0,0,.2);
  box-shadow: 2px 3px 5px rgba(0,0,0,.2);
  border-radius: 3px;
  border: 1px solid silver;

  background: white;
  font-size: 90%;
  font-family: monospace;

  max-height: 20em;
  overflow-y: auto;
}

.CodeMirror-hint {
  margin: 0;
  padding: 0 4px;
  border-radius: 2px;
  white-space: pre;
  color: black;
  cursor: pointer;
}

li.CodeMirror-hint-active {
  background: #08f;
  color: white;
}
li.CodeMirror-hint-active:hover {
  opacity:0.8;
}








  .squaredText::after {
   content:":";
  }
  table {
 font-family: arial, sans-serif;
 border-collapse: collapse;
 width: 100%;
 z-Index:5;
 position:absolute;
 left:0px;
 bottom:0px;
}
#table_tT {
 background:#a0a0a0;
 color:white;
}
td, th {
 border: 1px solid #dddddd;
 text-align: left;
 padding: 8px;
 border: 1.1px solid #000;
 /*text-Shadow: 1px 1px 3px #000;*/
}
tr:nth-child(even) {
 background-color: #dddddd;
}
  #toast {
    visibility: hidden;
    max-width: 50px;
    height: 50px;
    /*margin-left: -125px;*/
    margin: auto;
    background-color: #333;
    color: #fff;
    text-align: center;
    border-radius: 2px;
    position: fixed;
    z-index: 999;
    left: 0;right:0;
    bottom: 30px;
    font-size: 17px;
    white-space: nowrap;
}
#toast #toastImg{
	width: initial;
	height: 50px;
    float: left;
    padding-top: 16px;
    padding-bottom: 16px;
    box-sizing: border-box;
    background-color: #111;
    color: #fff;
}
#toast #toastMsg{
    color: #fff;
    padding: 16px;
    opacity:0;
    overflow: hidden;
	  white-space: nowrap;
}
#toast.show {
    visibility: visible;
    -webkit-animation: fadein 0.5s, expand 0.5s 0.5s,stay 3s 1s, shrink 0.5s 2s, fadeout 0.5s 2.5s;
    animation: fadein 0.5s, expand 0.5s 0.5s,stay 3s 1s, shrink 0.5s 4s, fadeout 0.5s 4.5s;
}
@-webkit-keyframes fadein {
    from {bottom: 0; opacity: 0;} 
    to {bottom: 30px; opacity: 1;}
}
@keyframes fadein {
    from {bottom: 0; opacity: 0;}
    to {bottom: 30px; opacity: 1;}
}
@-webkit-keyframes expand {
    from {min-width: 50px} 
    to {min-width: 350px}
}
@keyframes expand {
    from {min-width: 50px}
    to {min-width: 350px}
}
@-webkit-keyframes stay {
    from {min-width: 350px} 
    to {min-width: 350px}
}
@keyframes stay {
    from {min-width: 350px}
    to {min-width: 350px}
}
@-webkit-keyframes shrink {
    from {min-width: 350px;} 
    to {min-width: 50px;}
}
@keyframes shrink {
    from {min-width: 350px;} 
    to {min-width: 50px;}
}
@-webkit-keyframes fadeout {
    from {bottom: 30px; opacity: 1;} 
    to {bottom: 60px; opacity: 0;}
}
@keyframes fadeout {
    from {bottom: 30px; opacity: 1;}
    to {bottom: 60px; opacity: 0;}
}
  #typeTxt {
   position:absolute;
   left:30%;
   top:10%;
  }
  #terminalClearBtn:hover {
   filter: brightness(0.8);
  }
  #terminalCancelBtn:hover {
   filter: brightness(0.8);
  }
  #CONDIV {
   padding: 500;
   position: absolute;
   top:945%;
   z-index: -1;
  }
  #idTxt {
   position:absolute;
   left:30%;
   top:20%;
  }
  #typeTxt2 {
   position:absolute;
   left:30%;
   top:10%;
  }
  #idTxt2 {
   position:absolute;
   left:30%;
   top:20%;
  }
  .range-wrap {
  margin: 0 auto 3rem;
  position:absolute;
  left:15%;
  top:26.3%;
}
#CD_fps {
  width: 100%;
}
.bubble {
  background: transparent;
  box-Shadow: 0 0 10px gray,inset 0 0 5px gray;
  border:1px solid gray;
  color: black;
  padding: 4px 8px;
  position: absolute;
  border-radius: 4px;
  left: 50%;
  transform: translateX(-50%);
}
  #titleTxt {
   position:absolute;
   left:30%;
   top:30%;
  }
  #descTxt {
   position:absolute;
   left:30%;
   top:40%;
  }
  #titleTxt2 {
   position:absolute;
   left:30%;
   top:30%;
  }
  #descTxt2 {
   position:absolute;
   left:30%;
   top:40%;
  }
  #_CUT {
   position:fixed;
   right:30;
   bottom:100;
   color:#ffffff;
  }
  #imageTxt {
   position:absolute;
   left:30%;
   top:50%;
  }
  #scriptTxt {
   position:absolute;
   left:30%;
   top:50%;
  }
  #assetMSG {
   position:absolute;
   top:1%;
   left:36.5%;
  }
  #assetMSG2 {
   position:absolute;
  }
  #imagePreview {
   position:absolute;
   left:37.5%;
   top:53%;
   width:50;
   height:50;
  }
  #scriptPreview {
   position:absolute;
   left:37.5%;
   top:53%;
   width:50;
   height:50;
   font-weight: bold;
   cursor:pointer;
  }
  #imagesizeTxt {
   position:absolute;
   left:30%;
   top:70%;
  }
  #imagepathTxt {
   position:absolute;
   left:30%;
   top:60%;
  }
  #scriptsizeTxt {
   position:absolute;
   left:30%;
   top:70%;
  }
  #scriptpathTxt {
   position:absolute;
   left:30%;
   top:60%;
  }
  #presstxt {
   position:absolute;
   left:32%;
   top:5%;
   /* animation:blink 1s infinite; */
  }
  #presstxt2 {
   position:absolute;
   left:32%;
   top:5%;
   /* animation:blink 1s infinite; */
  }
  /* @keyframes blink {
      0%{     color: #000;    }
      49%{    color: #000; }
      60%{    color: transparent; }
      99%{    color:transparent;  }
      100%{   color: #000;    }
  } */
  #priceTxt {
   position:absolute;
   left:30%;
   top:80%;
  }
  #priceTxt2 {
   position:absolute;
   left:30%;
   top:80%;
  }
  #titleVal2 {
   position:absolute;
   left:30%;
   top:10%;
   width:500;
   height:50;
   text-align: center;
   outline:none;
   font-Size:25;
   border-Radius:5%;
  }
  #titleVal {
   position:absolute;
   left:30%;
   top:10%;
   width:500;
   height:50;
   text-align: center;
   outline:none;
   font-Size:25;
   border-Radius:5%;
  }
  #descVal2 {
   position:absolute;
   left:30%;
   top:20%;
   width:500;
   height:50;
   text-align: center;
   outline:none;
   font-Size:25;
   border-Radius:5%;
  }
  #descVal {
   position:absolute;
   left:30%;
   top:20%;
   width:500;
   height:50;
   text-align: center;
   outline:none;
   font-Size:25;
   border-Radius:5%;
  }
  #freeCB {
   position:absolute;
   left:63%;
   top:42%;
  }
  #freeCBtxt {
   position:absolute;
   left:64.5%;
   top:39.1%;
  }
  #freeCB2 {
   position:absolute;
   left:63%;
   top:42%;
  }
  #freeCBtxt2 {
   position:absolute;
   left:64.5%;
   top:39.1%;
  }
  #createpluginBtn {
   background:gray;
   width:400;
   height:50;
   border:none;
   outline:none;
   color:#ffffff;
   cursor:pointer;
   z-Index:2;
   opacity:0.8;
   position:absolute;
   left:33%;
   top:50%;
   font-Size:20;
   box-Shadow: inset 0 0 3px gray, 0 0 3px gray;
  }
  #createpluginBtn:hover {
      opacity:1;
  }
  #createSpriteBtn {
   background:gray;
   width:400;
   height:50;
   border:none;
   outline:none;
   color:#ffffff;
   cursor:pointer;
   z-Index:2;
   opacity:0.8;
   position:absolute;
   left:33%;
   top:50%;
   font-Size:20;
   box-Shadow: inset 0 0 3px gray, 0 0 3px gray;
  }
  #createSpriteBtn:hover {
      opacity:1;
  }
  #imageValCover {
   background:#ffffff;
   width:500;
   height:50;
   border:none;
   outline:none;
   color:#757575;
   cursor:pointer;
   z-Index:2;
   opacity:1;
   position:absolute;
   left:30%;
   top:30%;
   font-Size:25;
   /*box-Shadow: inset 0 0 3px gray, 0 0 3px gray;*/
  }
  #imageValCover:hover {
      opacity:1;
  }
  #imageVal {
   position:absolute;
   left:30%;
   cursor:pointer;
   z-Index:3;
   top:30%;
   width:500;
   height:50;
   text-align: center;
   outline:none;
   font-Size:25;
   border-Radius:5%;
   opacity:0;
   background:transparent;
  }
  #scriptValCover {
   background:#ffffff;
   width:500;
   height:50;
   border:none;
   outline:none;
   color:#757575;
   cursor:pointer;
   z-Index:2;
   opacity:1;
   position:absolute;
   left:30%;
   top:30%;
   font-Size:25;
   /*box-Shadow: inset 0 0 3px gray, 0 0 3px gray;*/
  }
  #scriptValCover:hover {
      opacity:1;
  }
  #scriptVal {
   position:absolute;
   left:30%;
   cursor:pointer;
   z-Index:3;
   top:30%;
   width:500;
   height:50;
   text-align: center;
   outline:none;
   font-Size:25;
   border-Radius:5%;
   opacity:0;
   background:transparent;
  }
  #priceVal2 {
   position:absolute;
   left:30%;
   top:40%;
   width:500;
   height:50;
   text-align: center;
   outline:none;
   font-Size:25;
   border-Radius:5%;
  }
  #priceVal2:after {
      content: '$';
  }
  #priceVal {
   position:absolute;
   left:30%;
   top:40%;
   width:500;
   height:50;
   text-align: center;
   outline:none;
   font-Size:25;
   border-Radius:5%;
  }
  #priceVal:after {
      content: '$';
  }
  #createAssetBtn {
   background:gray;
   width:150;
   height:50;
   border:none;
   outline:none;
   color:#ffffff;
   cursor:pointer;
   z-Index:2;
   position:absolute;
   right:1%;
   top:1%;
   font-Size:15;
   box-Shadow: inset 0 0 3px #ffffff, 0 0 3px #ffffff;
  }
  .assetBtn {
   background:gray;
   width:150;
   height:50;
   border:none;
   outline:none;
   color:#ffffff;
   cursor:pointer;
   z-Index:2;
   font-Size:15;
   box-Shadow: inset 0 0 3px #ffffff, 0 0 3px #ffffff;
  }
  .assetBtn:active {
   transform:translateY(4px) translateX(4px);
  }
  .assetBtn:hover {
   opacity:0.8;
  }
  #pluginBtn {
   background:gray;
   width:150;
   height:50;
   border:none;
   outline:none;
   color:#ffffff;
   cursor:pointer;
   z-Index:2;
   opacity:0.8;
   position:absolute;
   left:5%;
   top:20%;
   font-Size:20;
   box-Shadow: inset 0 0 3px gray, 0 0 3px gray;
  }
  #pluginBtn:hover {
   opacity:1;
  }
  .time-neon {
    color: #FFFFFF;
  text-shadow: 0 0 5px #FFF, 0 0 10px #FFF, 0 0 15px #FFF, 0 0 20px #49ff18, 0 0 30px #49FF18, 0 0 40px #49FF18, 0 0 55px #49FF18, 0 0 75px #49ff18;
  }
  .time-flaming {
    color: #FFFFFF;
  text-shadow: 0 -1px 4px #FFF, 0 -2px 10px #ff0, 0 -10px 20px #ff8000, 0 -18px 40px #F00;}
  .time-lux {
    color: #131313;
  letter-spacing: .15em;
  text-shadow: 1px -1px 0 #767676, -1px 2px 1px #737272, -2px 4px 1px #767474, -3px 6px 1px #787777, -4px 8px 1px #7b7a7a, -5px 10px 1px #7f7d7d, -6px 12px 1px #828181, -7px 14px 1px #868585, -8px 16px 1px #8b8a89, -9px 18px 1px #8f8e8d, -10px 20px 1px #949392, -11px 22px 1px #999897, -12px 24px 1px #9e9c9c, -13px 26px 1px #a3a1a1, -14px 28px 1px #a8a6a6, -15px 30px 1px #adabab, -16px 32px 1px #b2b1b0, -17px 34px 1px #b7b6b5, -18px 36px 1px #bcbbba, -19px 38px 1px #c1bfbf, -20px 40px 1px #c6c4c4, -21px 42px 1px #cbc9c8, -22px 44px 1px #cfcdcd, -23px 46px 1px #d4d2d1, -24px 48px 1px #d8d6d5, -25px 50px 1px #dbdad9, -26px 52px 1px #dfdddc, -27px 54px 1px #e2e0df, -28px 56px 1px #e4e3e2;}
  .time-smooth {
    color: #444444;
  text-shadow: 1px 0px 1px #CCCCCC, 0px 1px 1px #EEEEEE, 2px 1px 1px #CCCCCC, 1px 2px 1px #EEEEEE, 3px 2px 1px #CCCCCC, 2px 3px 1px #EEEEEE, 4px 3px 1px #CCCCCC, 3px 4px 1px #EEEEEE, 5px 4px 1px #CCCCCC, 4px 5px 1px #EEEEEE, 6px 5px 1px #CCCCCC, 5px 6px 1px #EEEEEE, 7px 6px 1px #CCCCCC;}
  .time-retro {
    color: #FFFFFF;
  text-shadow: 4px 3px 0 #7A7A7A;
  }
  .time-glowing {
    color: #FFFFFF;
  text-shadow: 0 0 10px #FFFFFF;
  }
  .time-tacticle {
    color: #d9d9d9;
  text-shadow: -1px -1px 1px rgba(255,255,255,.1), 1px 1px 1px rgba(0,0,0,.5);
  }
  .time-news {
    color: #333333;
  text-shadow: 2px 2px 0px #FFFFFF, 5px 4px 0px rgba(0,0,0,0.15);
  }
  .time-candy {
    color: #FFFFFF;
  text-shadow: 4px 3px 0px #7A7A7A;
  }
  .time-floating {
    color: #FFFFFF;
  text-shadow: 3px 5px 2px #474747;
  }
  .time-80s {
    color: #000000;
  text-shadow: 2px 2px 0 #bcbcbc, 4px 4px 0 #9c9c9c;
  }
  .time-distant {
    color: #FFFFFF;
  text-shadow: 1px 3px 0 #969696, 1px 13px 5px #aba8a8;
  }
  .time-outline {
    color: #18181d;
  text-shadow: 2px 2px 0 #4074b5, 2px -2px 0 #4074b5, -2px 2px 0 #4074b5, -2px -2px 0 #4074b5, 2px 0px 0 #4074b5, 0px 2px 0 #4074b5, -2px 0px 0 #4074b5, 0px -2px 0 #4074b5;
  }
  .time-love {
    color: #A7DD3C;
  text-shadow: 2px 0 0px #800040, 3px 2px 0px rgba(77,0,38,0.5), 3px 0 3px #FF002B, 5px 0 3px #800015, 6px 2px 3px rgba(77,0,13,0.5), 6px 0 9px #FF5500, 8px 0 9px #802A00, 9px 2px 9px rgba(77,25,0,0.5), 9px 0 18px #FFD500, 11px 0 18px #806A00, 12px 2px 18px rgba(77,66,0,0.5), 12px 0 30px #D4FF00, 14px 0 30px #6A8000, 15px 2px 30px rgba(64,77,0,0.5), 15px 0 45px #80FF00, 17px 0 45px #408000, 17px 2px 45px rgba(38,77,0,0.5);
  }
  .time-inset {
    color: #616161;
  text-shadow: #e0e0e0 1px 1px 0;
  }
  .time-blocks {
    color: #FFFFFF;
  text-shadow: 0 1px 0 #CCCCCC, 0 2px 0 #c9c9c9, 0 3px 0 #bbb, 0 4px 0 #b9b9b9, 0 5px 0 #aaa, 0 6px 1px rgba(0,0,0,.1), 0 0 5px rgba(0,0,0,.1), 0 1px 3px rgba(0,0,0,.3), 0 3px 5px rgba(0,0,0,.2), 0 5px 10px rgba(0,0,0,.25), 0 10px 10px rgba(0,0,0,.2), 0 20px 20px rgba(0,0,0,.15);
  }
  .time-grave {
    color: #202c2d;
  text-shadow: 0 1px #808d93, -1px 0 #cdd2d5, -1px 2px #808d93, -2px 1px #cdd2d5, -2px 3px #808d93, -3px 2px #cdd2d5, -3px 4px #808d93, -4px 3px #cdd2d5, -4px 5px #808d93, -5px 4px #cdd2d5, -5px 6px #808d93, -6px 5px #cdd2d5, -6px 7px #808d93, -7px 6px #cdd2d5, -7px 8px #808d93, -8px 7px #cdd2d5;
  }
  .time-solid {
    color: #FFFFFF;
  text-shadow: #474747 3px 5px 2px;
  }
  .time-cartoon {
    color: #005900;
  text-shadow: #FFFCA8 2px 2px 0px, #9C9C9C 4px 4px 0px;
  }
  .time-vegas {
    color: #FFFFFF;
  text-shadow: #FFF 0px 0px 5px, #FFF 0px 0px 10px, #FFF 0px 0px 15px, #FF2D95 0px 0px 20px, #FF2D95 0px 0px 30px, #FF2D95 0px 0px 40px, #FF2D95 0px 0px 50px, #FF2D95 0px 0px 75px;
  }
  .time-comic {
    color: #bc2e1e;
  text-shadow: 0 1px 0px #378ab4, 1px 0 0px #5dabcd, 1px 2px 1px #378ab4, 2px 1px 1px #5dabcd, 2px 3px 2px #378ab4, 3px 2px 2px #5dabcd, 3px 4px 2px #378ab4, 4px 3px 3px #5dabcd, 4px 5px 3px #378ab4, 5px 4px 2px #5dabcd, 5px 6px 2px #378ab4, 6px 5px 2px #5dabcd, 6px 7px 1px #378ab4, 7px 6px 1px #5dabcd, 7px 8px 0px #378ab4, 8px 7px 0px #5dabcd;
  }
  .time-deep {
    color: #e0dfdc;
  letter-spacing: .1em;
  text-shadow: 0 -1px 0 #fff, 0 1px 0 #2e2e2e, 0 2px 0 #2c2c2c, 0 3px 0 #2a2a2a, 0 4px 0 #282828, 0 5px 0 #262626, 0 6px 0 #242424, 0 7px 0 #222, 0 8px 0 #202020, 0 9px 0 #1e1e1e, 0 10px 0 #1c1c1c, 0 11px 0 #1a1a1a, 0 12px 0 #181818, 0 13px 0 #161616, 0 14px 0 #141414, 0 15px 0 #121212, 0 22px 30px rgba(0,0,0,0.9);
  }
  .time-mummy {
    color: #e0eff2;
  font: italic bold Georgia, Serif;
  text-shadow: -4px 3px 0 #3a50d9, -14px 7px 0 #0a0e27;
  }
  .time-hero {
    color: #FFFFFF;
  text-shadow: -5px 5px 0px #00e6e6, -10px 10px 0px #01cccc, -15px 15px 0px #00bdbd;
  }
  .time-dracula {
    color: #92a5de;
  text-shadow: 0px 0px 0 #899CD5, 1px 1px 0 #8194CD, 2px 2px 0 #788BC4, 3px 3px 0 #6F82BB, 4px 4px 0 #677AB3, 5px 5px 0 #5E71AA, 6px 6px 0 #5568A1, 7px 7px 0 #4C5F98, 8px 8px 0 #445790, 9px 9px 0 #3B4E87, 10px 10px 0 #32457E, 11px 11px 0 #2A3D76, 12px 12px 0 #21346D, 13px 13px 0 #182B64, 14px 14px 0 #0F225B, 15px 15px 0 #071A53, 16px 16px 0 #02114A, 17px 17px 0 #0B0841, 18px 18px 0 #130039, 19px 19px 0 #1C0930, 20px 20px 0 #251227, 21px 21px 20px rgba(0,0,0,1), 21px 21px 1px rgba(0,0,0,0.5), 0px 0px 20px rgba(0,0,0,.2);
  }
  .time-blurry {
    color: rgba(255,255,255,.3);
  text-shadow: 0 0 15px rgba(255,255,255,.5), 0 0 10px rgba(255,255,255,.5);
  }
  .time-emboss {
    color: rgba(0,0,0,0.6);
  text-shadow: 2px 8px 6px rgba(0,0,0,0.2), 0px -5px 35px rgba(255,255,255,0.3);
  }
  .time-press {
    color: rgba(0,0,0,.6);
  text-shadow: 3px 2px 3px rgba(255,255,255,.2);
  }
  .time-carve {
    color: transparent;
  -webkit-background-clip: text;
  -moz-background-clip: text;
  background-clip: text;
  text-shadow: 0px 3px 3px rgba(255,255,255,0.5);
  }
  .time-ghost {
    color: transparent;
  text-shadow: -4px 4px rgba(179,179,179,.4), -3px 3px rgba(153,153,153,.2), -2px 2px rgba(179,179,179,.2), -1px 1px rgba(179,179,179,.2), 0px 0px rgba(128,128,128,.5), 1px -1px rgba(77,77,77,.6), 2px -2px rgba(77,77,77,.7), 3px -3px rgba(82,82,82,.8), 4px -4px rgba(77,77,77,.9), 5px -5px rgba(77,77,77,1);
  }
  /*
  #time {
    font: bold 100px arial, sans-serif;
    background-color: #565656;
    color: transparent;
    text-shadow: 2px 2px 3px rgba(255,255,255,0.5);
    -webkit-background-clip: text;
       -moz-background-clip: text;
            background-clip: text;
  }
  */
  #themeBtn {
   background:gray;
   width:150;
   height:50;
   border:none;
   outline:none;
   color:#ffffff;
   cursor:not-allowed;
   z-Index:2;
   opacity:0.8;
   position:absolute;
   left:5%;
   top:30%;
   font-Size:20;
   box-Shadow: inset 0 0 3px gray, 0 0 3px gray;
  }
  #themeBtn:hover {
   opacity:1;
  }
  #spriteBtn {
   background:rgba(136,136,136,1);
   width:150;
   height:50;
   border:none;
   outline:none;
   color:#ffffff;
   cursor:pointer;
   z-Index:2;
   opacity:0.8;
   position:absolute;
   left:5%;
   top:10%;
   font-Size:20;
   box-Shadow: inset 0 0 3px gray, 0 0 3px gray;
  }
  #spriteBtn:hover {
   opacity:1;
  }
  #creatingOptions {
   background:darkgray;
   position:absolute;
   box-Shadow: inset 0 0 3px gray, 0 0 3px gray;
   display:flex;
   justify-content: center;
   align-items:center;
   overflow:auto;
   height:98%;
   width:10%;
   left:1%;
   top:1%;
  }
  #createSpriteTab {
   background:darkgray;
   position:absolute;
   box-Shadow: inset 0 0 3px gray, 0 0 3px gray;
   display:flex;
   justify-content: center;
   align-items:center;
   overflow:auto;
   height:98%;
   width:88%;
   left:11.5%;
   top:1%;
  }
  #createPluginTab {
   background:darkgray;
   position:absolute;
   box-Shadow: inset 0 0 3px gray, 0 0 3px gray;
   display:flex;
   justify-content: center;
   align-items:center;
   overflow:auto;
   height:98%;
   width:88%;
   left:11.5%;
   top:1%;
  }
  #caBg {
   background:darkgray;
   position:absolute;
   box-Shadow: inset 0 0 3px gray, 0 0 3px gray;
   display:flex;
   justify-content: center;
   align-items:center;
   overflow:auto;
   height:98%;
   width:88%;
   left:11.5%;
   top:1%;
  }
  #cao {
   background:darkgray;
   position:absolute;
   box-Shadow: inset 0 0 3px gray, 0 0 3px gray;
   display:flex;
   justify-content: center;
   align-items:center;
   overflow:auto;
   height:98%;
   width:88%;
   left:11.5%;
   top:1%;
  }
  #cao2 {
   background:darkgray;
   position:absolute;
   box-Shadow: inset 0 0 3px gray, 0 0 3px gray;
   display:flex;
   justify-content: center;
   align-items:center;
   overflow:auto;
   height:98%;
   width:88%;
   left:11.5%;
   top:1%;
  }
  #vScr {
   background:darkgray;
   position:absolute;
   box-Shadow: inset 0 0 3px gray, 0 0 3px gray;
   display:flex;
   justify-content: center;
   align-items:center;
   overflow:auto;
   height:100%;
   width:100%;
   left:0.5%;
   top:1%;
   z-Index:2;
  }
  #createText {
   position:absolute;
   top:-2%;
   left:17%;
  }
  #createAssetBtn:active {
   transform:translateY(4px) translateX(4px);
  }
  #createAssetBtn:hover {
   opacity:0.8;
  }
  #assetsBg {
      display: inline-block;
      padding-left:10px;
      padding-top:8px;
      justify-content: left;
      align-items:center;
      background:rgba(90, 90, 90,0.2);
      overflow:auto;
      width:90%;
      height:90%;
      position:absolute;
      left:5%;
      top:5%;
  }
  #myAssetsBg {
    display: inline-block;
      padding-left:10px;
      padding-top:8px;
      justify-content: left;
      align-items:center;
      background:rgba(90, 90, 90,0.2);
      overflow:auto;
      width:90%;
      height:90%;
      position:absolute;
      left:5%;
      top:5%;
  }
#graphBg {
 background:#191d37;/*#21351a*/
 position:fixed;
 visibility: hidden;
 top:0%;
 left:0%;
 z-index: 6;
 cursor:pointer;
 width:100%;
 height:100;
 justify-content:left;
 align-items:center;
 display:flex;
}
#fpsTxt {
 color:#6ff8fc;
 position:absolute;
 top:-20%;
 font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
 src: url("Fonts/Roboto/Roboto-Medium.ttf");
 left:50%;
}
#graph {
 width:100%;
 background:#1d324b;/*#28481b*/
 height:50;
 justify-content:left;
/*align-items: stretch|center|flex-start|flex-end|baseline|initial|inherit;*/
 align-items:flex-end;
 bottom:250;
 box-Shadow: inset 0px 0px 10px cyan;
 display:flex;
}
  /* #numOfAssets {
   
  } */
  #createAssetBg {
      background:rgba(90, 90, 90,0.2);
      overflow:auto;
      width:90%;
      height:90%;
      position:absolute;
      left:5%;
      top:5%;
  }
  #asset1Bg {
   background: rgb(90, 90, 90);
   width:200;
   height:300;
   overflow:auto;
   display:inline-block;
   cursor:pointer;
   opacity:0.8;
   justify-content:center;
   align-items:center;
   position:absolute;
  }
  #asset1price {
   position:absolute;
   bottom:1%;
   right:1%;
   margin:0;
  }
  #asset1Bg:hover {
   opacity:1;
  }
  #asset1title {
   opacity:1;
   position:absolute;
   left:20%;
   top:32%;
  }
  #asset1desc {
   opacity:1;
   position:absolute;
   left:1%;
   top:52%;
  }
  #asset1author {
   opacity:1;
   position:absolute;
   left:1%;
   font-Size:12;
   top:65%;
  }
  #asset1img {
   border: 2px solid #000000;
   opacity:0.6;
   position:absolute;
   left:25%;
   top:5%;
   width:100;
   height:100;
  }
  #previewThemeBtn {
   background:#000000;
   width:300;
   height:100;
   font-Size:20;
   outline:none;
   left:0%;
   cursor:pointer;
   bottom:0%;
   border:none;
   position:fixed;
   color:#ffffff;
   box-Shadow: 0 0 10px gray;
   opacity:0.8;
  }
  #previewThemeBtn:hover {
   opacity:1;
   box-Shadow:inset 0 0 10px gray,0 0 10px gray;
  }
  #useThemeBtn {
   background:#000000;
   width:300;
   height:100;
   font-Size:20;
   outline:none;
   right:0%;
   cursor:pointer;
   bottom:0%;
   border:none;
   position:fixed;
   color:#ffffff;
   box-Shadow: 0 0 10px gray;
   opacity:0.8;
  }
  #useThemeBtn:hover {
   opacity:1;
   box-Shadow:inset 0 0 10px gray,0 0 10px gray;
  }
  #codeStatus {
   z-index: 6;
   position:absolute;
   top:0%;
   font-Size:15;
   right:0.5%;
   color:#0f0;
   cursor:help;
  }
  #cdire {
   position:absolute;
   left:1%;
   top:24%;
  }
  #CD_Time {
    position: absolute;
    left: 303px;
    top: 22%;
  }
  #controllerStatus {
   z-index: 6;
   position:absolute;
   top:4%;
   font-Size:15;
   right:0.5%;
   cursor:help;
  }
  #challengeStatus {
   z-index: 6;
   position:absolute;
   top:8%;
   cursor:help;
   font-Size:15;
   right:0.5%;
  }
  #la {
   position:absolute;
   left:40%;
   top:-3%;
   opacity:0.8;
   cursor:pointer;
  }
  #la:hover {
      opacity:1
  }
  #_terminal {
   visibility:hidden;
  }
  
  
  
  
  
  
  
  
  
  
  
  

  
  
  
  
  
  
  
  
  
  
  
  
  
  #gamepadTxt {
   position:absolute;
   left:0.5%;
   top:-150%;
   visibility:hidden;
  }
  #alwaysDisplayFpsBtn {
   background:gray;
   width:initial;
   height:30;
   border:none;
   box-shadow: inset 0 0 5px #000000;
   outline:none;
   color:#ffffff;
   cursor:pointer;
   transition:opacity, box-Shadow 0.3s;
   opacity:0.8;
  }
  #oldStyleFpsBtn {
    background:gray;
   width:initial;
   height:30;
   border:none;
   box-shadow: inset 0 0 5px #000000;
   outline:none;
   color:#ffffff;
   cursor:pointer;
   transition:opacity, box-Shadow 0.3s;
   opacity:0.8;
  }
  #oldStyleFpsBtn:disabled {
   cursor:not-allowed;
  }
  #oldStyleFpsBtn:hover {
   opacity:1;
   box-shadow: inset 0 0 5px #000000, 0 0 5px #ffffff;
  }
  #alwaysDisplayFpsBtn:hover {
   opacity:1;
   box-shadow: inset 0 0 5px #000000, 0 0 5px #ffffff;
  }
  #displayFpsBtn {
   background:gray;
   width:initial;
   height:30;
   border:none;
   box-shadow: inset 0 0 5px #000000;
   outline:none;
   color:#ffffff;
   cursor:pointer;
   transition:opacity, box-Shadow 0.3s;
   opacity:0.8;
  }
  #displayFpsBtn:hover {
   opacity:1;
   box-shadow: inset 0 0 5px #000000, 0 0 5px #ffffff;
  }
  #_fpsText {
   position:absolute;
   left:0.5%;
   top:20%;
  }
  #creationsText {
   position:absolute;
   left:0.5%;
   top:30%;
  }
  #contextMenuBtn {
   background:gray;
   width:initial;
   height:30;
   border:none;
   box-shadow: inset 0 0 5px #000000;
   outline:none;
   color:#ffffff;
   cursor:pointer;
   transition:opacity, box-Shadow 0.3s;
   opacity:0.8;
   position: absolute;
   top:39%;
   left:12;
  }
  #customGeometryBtn {
   background:gray;
   width:initial;
   height:30;
   border:none;
   box-shadow: inset 0 0 5px #000000;
   outline:none;
   color:#ffffff;
   cursor:pointer;
   transition:opacity, box-Shadow 0.3s;
   opacity:0.8;
   position: absolute;
   top:39%;
   left:112;
  }
  #audioBtn {
   background:gray;
   width:initial;
   height:30;
   border:none;
   box-shadow: inset 0 0 5px #000000;
   outline:none;
   color:#ffffff;
   cursor:pointer;
   transition:opacity, box-Shadow 0.3s;
   opacity:0.8;
   position: absolute;
   top:39%;
   left:233;
  }
  #testControllerBtn {
   background:gray;
   width:initial;
   height:30;
   border:none;
   box-shadow: inset 0 0 5px #000000;
   outline:none;
   color:#ffffff;
   cursor:pointer;
   transition:opacity, box-Shadow 0.3s;
   opacity:0.8;
  }
  #testControllerBtn:hover {
   opacity:1;
   box-shadow: inset 0 0 5px #000000, 0 0 5px #ffffff;
  }
  #controllerInfo {
    position:absolute;
    left:1%;
  }

  #gamepad_aPressed {
 position:fixed;
 right:0.5%;
 top:-2%;
}
#gamepad_bPressed {
 position:fixed;
 right:0.5%;
 top:-0.5%;
}
#gamepad_xPressed {
 position:fixed;
 right:0.5%;
 top:1%;
}
#gamepad_yPressed
{
 position:fixed;
 right:0.5%;
 top:2.5%;
}
#gamepad_upPressed {
 position:fixed;
 right:0.5%;
 top:4.5%;
}
#gamepad_downPressed {
 position:fixed;
 right:0.5%;
 top:6.5%;
}
#gamepad_leftPressed {
 position:fixed;
 right:0.5%;
 top:8.5%;
}
#gamepad_rightPressed {
 position:fixed;
 right:0.5%;
 top:10.5%;
}
#gamepad_leftAxisMoving {
 position:fixed;
 right:0.5%;
 top:12.5%;
}
#gamepad_rightAxisMoving {
 position:fixed;
 right:0.5%;
 top:14.5%;
}
#gamepad_leftAxisX {
 position:fixed;
 right:0.5%;
 top:16.5%;
}
#gamepad_leftAxisY {
 position:fixed;
 right:0.5%;
 top:18.5%;
}
#gamepad_rightAxisX {
 position:fixed;
 right:0.5%;
 top:20.5%;
}
#gamepad_rightAxisY {
 position:fixed;
 right:0.5%;
 top:22.5%;
}
#gamepad_lbPressed {
 position:fixed;
 right:0.5%;
 top:24.5%;
}
#gamepad_rbPressed {
 position:fixed;
 right:0.5%;
 top:26.5%;
}
#gamepad_ltPressed {
 position:fixed;
 right:0.5%;
 top:28.5%;
}
#gamepad_rtPressed {
 position:fixed;
 right:0.5%;
 top:30.5%;
}
#gamepad_ltValue {
 position:fixed;
 right:0.5%;
 top:32.5%;
}
#gamepad_rtValue {
 position:fixed;
 right:0.5%;
 top:34.5%;
}

  #controllerInformationsBtn {
   background:gray;
   width:initial;
   height:30;
   border:none;
   box-shadow: inset 0 0 5px #000000;
   outline:none;
   color:#ffffff;
   cursor:pointer;
   transition:opacity, box-Shadow 0.3s;
   opacity:0.8;
  }
  #controllerInformationsBtn:hover {
   opacity:1;
   box-shadow: inset 0 0 5px #000000, 0 0 5px #ffffff;
  }
  #dCI_on {
   background:gray;
   width:initial;
   height:30;
   border:none;
   box-shadow: inset 0 0 5px #000000;
   outline:none;
   color:#ffffff;
   cursor:pointer;
   transition:opacity, box-Shadow 0.3s;
   opacity:0.8;
   position:absolute;
   left:1%;
   top:22%;
  }
  #dCI_on:hover {
   opacity:1;
   box-shadow: inset 0 0 5px #000000, 0 0 5px #ffffff;
  }
  #alwaysDisplayBtn {
   background:gray;
   width:initial;
   height:30;
   border:none;
   box-shadow: inset 0 0 5px #000000;
   outline:none;
   color:#ffffff;
   cursor:pointer;
   transition:opacity, box-Shadow 0.3s;
   opacity:0.8;
   position:absolute;
   left:9%;
   top:22%;
  }
  #alwaysDisplayBtn:hover {
   opacity:1;
   box-shadow: inset 0 0 5px #000000, 0 0 5px #ffffff;
  }
  #setdataspeedBtn {
   background:gray;
   width:100;
   height:25;
   border:none;
   box-shadow: inset 0 0 5px #000000;
   outline:none;
   color:#ffffff;
   cursor:pointer;
   transition:opacity, box-Shadow 0.3s;
   opacity:0.8;
   position:absolute;
   left:22.5%;
   top:26%;
  }
  #setdataspeedBtn:hover {
   opacity:1;
   box-shadow: inset 0 0 5px #000000, 0 0 5px #ffffff;
  }
  #resetdataspeedBtn {
   background:gray;
   width:100;
   height:25;
   border:none;
   box-shadow: inset 0 0 5px #000000;
   outline:none;
   color:#ffffff;
   cursor:pointer;
   transition:opacity, box-Shadow 0.3s;
   opacity:0.8;
   position:absolute;
   left:28%;
   top:26%;
  }
  #resetdataspeedBtn:hover {
   opacity:1;
   box-shadow: inset 0 0 5px #000000, 0 0 5px #ffffff;
  }
  #terminalBox {
   position:absolute;
   background:#000000;
   filter:inevrt(1);
   color:#ffffff;
   border:none;
   width:100%;
   left:0%;
   bottom:0%;
   z-Index:6;
   height:5%;
   outline:none;
   resize:none;
   text-align: center;
   /* -webkit-text-stroke: 0.1px #000000;
   -webkit-text-fill-color: #000000; */
  }
  #terminalBox::placeholder {
    color:gray;
    letter-spacing: 3;
  }
  #terminalBox:disabled {
    background:#0c0c0f;
    color:gray;
  }
  #terminalInfo {
    color:#ffffff;
    position:absolute;
    z-Index:5;
    bottom:5.5%;
    visibility: hidden;
    left:1%;
  }
  #ra {
   position:absolute;
   left:56.3%;
   top:-3%;
   opacity:0.8;
   cursor:pointer;
  }
  #ra:hover {
      opacity:1
  }
  #themesTab {
      display:flex;
      justify-content: center;
      align-items: center;
  }
  #themeSelectorBtn2 {
      background:#3d3d3d;
      width:100%;
      height:50;
      font-Size:20;
      outline:none;
      border:none;
      position: absolute;
      left:100%;
      top:0%;
      cursor:pointer;
      color:#ffffff;
      left:0%;
      top:100%;
      box-Shadow: inset 0 0 10px gray;
      opacity:0.8;
  }
  #themeSelectorBtn2:hover {
      opacity:1;
  }
  #themeSelectorBtn {
      background:#3d3d3d;
      width:1800%;
      height:50;
      font-Size:20;
      outline:none;
      left:0%;
      top:0%;
      border:none;
      cursor:pointer;
      color:#ffffff;
      box-Shadow: inset 0 0 10px gray;
      opacity:0.8;
  }
  #themeSelectorBtn:hover {
      opacity:1;
  }
  #tutorialIntro {
   position:absolute;
   left:40%;
   top:-2%;
   text-decoration: underline;
   z-Index:3;
  }
  #itemsTab{
      position:absolute;
      top:0%;
      left:0%;
      z-index: 1;
      /* display:flex; */
      display: inline-block;
      padding-left:10px;
      padding-top:8px;
      justify-content: left;
      align-items:center;
      box-shadow: inset 0 0 30px #000000;
      height:4.2%;
      width:100%;
  }
  #executionBtn {
   background:gray;
   width:100;
   height:30;
   border:none;
   box-shadow: inset 0 0 5px #000000;
   outline:none;
   color:#ffffff;
   cursor:pointer;
   transition:opacity, box-Shadow 0.3s;
   opacity:0.8;
  }
  #executionBtn:hover {
   opacity:1;
   box-shadow: inset 0 0 5px #000000, 0 0 5px #ffffff;
  }
  #autosaveBtn {
   background:gray;
   width:100;
   height:30;
   border:none;
   box-shadow: inset 0 0 5px #000000;
   outline:none;
   color:#ffffff;
   cursor:pointer;
   transition:opacity, box-Shadow 0.3s;
   opacity:0.8;
  }
  #autosaveBtn:hover {
   opacity:1;
   box-shadow: inset 0 0 5px #000000, 0 0 5px #ffffff;
  }
  #autoloadBtn {
   background:gray;
   width:100;
   height:30;
   border:none;
   box-shadow: inset 0 0 5px #000000;
   outline:none;
   color:#ffffff;
   cursor:pointer;
   transition:opacity, box-Shadow 0.3s;
   opacity:0.8;
  }
  #autoloadBtn:hover {
   opacity:1;
   box-shadow: inset 0 0 5px #000000, 0 0 5px #ffffff;
  }
  #savecodeBtn {
   background:gray;
   width:162.5;
   height:30;
   border:none;
   box-shadow: inset 0 0 5px #000000;
   outline:none;
   color:#ffffff;
   cursor:pointer;
   transition:opacity, box-Shadow 0.3s;
   opacity:0.8;
  }
  #savecodeBtn:hover {
   opacity:1;
   box-shadow: inset 0 0 5px #000000, 0 0 5px #ffffff;
  }
  #stringColorBtn {
   background:gray;
   width:initial;
   height:30;
   border:none;
   box-shadow: inset 0 0 5px #000000;
   outline:none;
   color:#ffffff;
   cursor:pointer;
   transition:opacity, box-Shadow 0.3s;
   opacity:0.8;
  }
  #stringColorBtn:hover {
   opacity:1;
   box-shadow: inset 0 0 5px #000000, 0 0 5px #ffffff;
  }
  #numberColorBtn {
   background:gray;
   width:initial;
   height:30;
   border:none;
   box-shadow: inset 0 0 5px #000000;
   outline:none;
   color:#ffffff;
   cursor:pointer;
   transition:opacity, box-Shadow 0.3s;
   opacity:0.8;
  }
  #numberColorBtn:hover {
   opacity:1;
   box-shadow: inset 0 0 5px #000000, 0 0 5px #ffffff;
  }
  #keywordColorBtn {
   background:gray;
   width:initial;
   height:30;
   border:none;
   box-shadow: inset 0 0 5px #000000;
   outline:none;
   color:#ffffff;
   cursor:pointer;
   transition:opacity, box-Shadow 0.3s;
   opacity:0.8;
  }
  #keywordColorBtn:hover {
   opacity:1;
   box-shadow: inset 0 0 5px #000000, 0 0 5px #ffffff;
  }
  #propertyColorBtn {
   background:gray;
   width:initial;
   height:30;
   border:none;
   box-shadow: inset 0 0 5px #000000;
   outline:none;
   color:#ffffff;
   cursor:pointer;
   transition:opacity, box-Shadow 0.3s;
   opacity:0.8;
  }
  #propertyColorBtn:hover {
   opacity:1;
   box-shadow: inset 0 0 5px #000000, 0 0 5px #ffffff;
  }
  #variableColorBtn {
   background:gray;
   width:initial;
   height:30;
   border:none;
   box-shadow: inset 0 0 5px #000000;
   outline:none;
   color:#ffffff;
   cursor:pointer;
   transition:opacity, box-Shadow 0.3s;
   opacity:0.8;
  }
  #variableColorBtn:hover {
   opacity:1;
   box-shadow: inset 0 0 5px #000000, 0 0 5px #ffffff;
  }
  #commentColorBtn {
   background:gray;
   width:initial;
   height:30;
   border:none;
   box-shadow: inset 0 0 5px #000000;
   outline:none;
   color:#ffffff;
   cursor:pointer;
   transition:opacity, box-Shadow 0.3s;
   opacity:0.8;
  }
  #commentColorBtn:hover {
   opacity:1;
   box-shadow: inset 0 0 5px #000000, 0 0 5px #ffffff;
  }
  #operatorColorBtn {
   background:gray;
   width:initial;
   height:30;
   border:none;
   box-shadow: inset 0 0 5px #000000;
   outline:none;
   color:#ffffff;
   cursor:pointer;
   transition:opacity, box-Shadow 0.3s;
   opacity:0.8;
  }
  #operatorColorBtn:hover {
   opacity:1;
   box-shadow: inset 0 0 5px #000000, 0 0 5px #ffffff;
  }
  #customCompilerBtn {
   background:gray;
   width:initial;
   height:30;
   border:none;
   box-shadow: inset 0 0 5px #000000;
   outline:none;
   color:#ffffff;
   cursor:pointer;
   transition:opacity, box-Shadow 0.3s;
   opacity:0.8;
  }
  #customCompilerBtn:hover {
   opacity:1;
   box-shadow: inset 0 0 5px #000000, 0 0 5px #ffffff;
  }
  #customCompilerBtn:disabled {
   filter: brightness(0.7);
   cursor: not-allowed;
  }
  #downloadBtn {
   background:gray;
   width:100;
   height:30;
   border:none;
   box-shadow: inset 0 0 5px #000000;
   outline:none;
   color:#ffffff;
   cursor:pointer;
   transition:opacity, box-Shadow 0.3s;
   opacity:0.8;
  }
  #downloadBtn:hover {
   opacity:1;
   box-shadow: inset 0 0 5px #000000, 0 0 5px #ffffff;
  }
  #scriptsBtn {
   background:gray;
   width:100;
   height:30;
   border:none;
   box-shadow: inset 0 0 5px #000000;
   outline:none;
   color:#ffffff;
   cursor:pointer;
   transition:opacity, box-Shadow 0.3s;
   opacity:0.8;
  }
  #scriptsBtn:hover {
   opacity:1;
   box-shadow: inset 0 0 5px #000000, 0 0 5px #ffffff;
  }
  #tutorialBtn {
   background:gray;
   width:100;
   height:30;
   border:none;
   box-shadow: inset 0 0 5px #000000;
   outline:none;
   color:#ffffff;
   cursor:pointer;
   transition:opacity, box-Shadow 0.3s;
   opacity:0.8;
  }
  #tutorialBtn:disabled {
   filter:brightness(0.7);
  }
  #tutorialBtn:hover {
   opacity:1;
   box-shadow: inset 0 0 5px #000000, 0 0 5px #ffffff;
  }
  #assetsBtn {
   background:gray;
   width:100;
   height:30;
   border:none;
   box-shadow: inset 0 0 5px #000000;
   outline:none;
   color:#ffffff;
   cursor:pointer;
   transition:opacity, box-Shadow 0.3s;
   opacity:0.8;
  }
  #assetsBtn:hover {
   opacity:1;
   box-shadow: inset 0 0 5px #000000, 0 0 5px #ffffff;
  }
  #myAssetsBtn {
   background:gray;
   width:100;
   height:30;
   border:none;
   box-shadow: inset 0 0 5px #000000;
   outline:none;
   color:#ffffff;
   cursor:pointer;
   transition:opacity, box-Shadow 0.3s;
   opacity:0.8;
  }
  #myAssetsBtn:hover {
   opacity:1;
   box-shadow: inset 0 0 5px #000000, 0 0 5px #ffffff;
  }
  #themesBtn {
   background:gray;
   width:100;
   height:30;
   visibility: visible;
   border:none;
   box-shadow: inset 0 0 5px #000000;
   outline:none;
   color:#ffffff;
   cursor:pointer;
   transition:opacity, box-Shadow 0.3s;
   opacity:0.8;
  }
  #themesBtn:hover {
   opacity:1;
   box-shadow: inset 0 0 5px #000000, 0 0 5px #ffffff;
  }
  #contextMenuBtn:hover {
   opacity:1;
   box-shadow: inset 0 0 5px #000000, 0 0 5px #ffffff;
  }
  #customGeometryBtn:hover {
   opacity:1;
   box-shadow: inset 0 0 5px #000000, 0 0 5px #ffffff;
  }
  #audioBtn:hover {
   opacity:1;
   box-shadow: inset 0 0 5px #000000, 0 0 5px #ffffff;
  }
  #infoBtn {
    background: gray;
    width: initial;
    height: 30;
    border: none;
    box-shadow: inset 0 0 5px #000000;
    outline: none;
    color: #ffffff;
    cursor: pointer;
    transition: opacity, box-Shadow 0.3s;
    opacity: 0.8;
    position: absolute;
    top: 49%;
    left: 12;
  }
  #infoBtn:hover {
   opacity:1;
   box-shadow: inset 0 0 5px #000000, 0 0 5px #ffffff;
  }
  #terminalPositionBtn {
   background:gray;
   width:initial;
   height:30;
   border:none;
   box-shadow: inset 0 0 5px #000000;
   outline:none;
   color:#ffffff;
   cursor:pointer;
   transition:opacity, box-Shadow 0.3s;
   opacity:0.8;
  }
  #terminalPositionBtn:hover {
   opacity:1;
   box-shadow: inset 0 0 5px #000000, 0 0 5px #ffffff;
  }
  #terminalAutoOpenBtn {
   background:gray;
   width:initial;
   height:30;
   border:none;
   box-shadow: inset 0 0 5px #000000;
   outline:none;
   color:#ffffff;
   cursor:pointer;
   transition:opacity, box-Shadow 0.3s;
   opacity:0.8;
  }
  #terminalAutoOpenBtn:hover {
   opacity:1;
   box-shadow: inset 0 0 5px #000000, 0 0 5px #ffffff;
  }
  #terminalBackgroundBtn {
   background:gray;
   width:initial;
   height:30;
   border:none;
   box-shadow: inset 0 0 5px #000000;
   outline:none;
   color:#ffffff;
   cursor:pointer;
   transition:opacity, box-Shadow 0.3s;
   opacity:0.8;
  }
  #terminalBackgroundBtn:hover {
   opacity:1;
   box-shadow: inset 0 0 5px #000000, 0 0 5px #ffffff;
  }
  #terminalColorBtn {
   background:gray;
   width:initial;
   height:30;
   border:none;
   box-shadow: inset 0 0 5px #000000;
   outline:none;
   color:#ffffff;
   cursor:pointer;
   transition:opacity, box-Shadow 0.3s;
   opacity:0.8;
  }
  #terminalColorBtn:hover {
   opacity:1;
   box-shadow: inset 0 0 5px #000000, 0 0 5px #ffffff;
  }
  #terminalShowHideBtn {
   background:gray;
   width:initial;
   height:30;
   border:none;
   box-shadow: inset 0 0 5px #000000;
   outline:none;
   color:#ffffff;
   cursor:pointer;
   transition:opacity, box-Shadow 0.3s;
   opacity:0.8;
  }
  #terminalShowHideBtn:hover {
   opacity:1;
   box-shadow: inset 0 0 5px #000000, 0 0 5px #ffffff;
  }
  #errorShowHideBtn {
   background:gray;
   width:initial;
   height:30;
   border:none;
   box-shadow: inset 0 0 5px #000000;
   outline:none;
   color:#ffffff;
   cursor:pointer;
   transition:opacity, box-Shadow 0.3s;
   opacity:0.8;
  }
  #errorShowHideBtn:hover {
   opacity:1;
   box-shadow: inset 0 0 5px #000000, 0 0 5px #ffffff;
  }
  #infoShowHideBtn {
   background:gray;
   width:initial;
   height:30;
   border:none;
   box-shadow: inset 0 0 5px #000000;
   outline:none;
   color:#ffffff;
   cursor:pointer;
   transition:opacity, box-Shadow 0.3s;
   opacity:0.8;
  }
  #infoShowHideBtn:hover {
   opacity:1;
   box-shadow: inset 0 0 5px #000000, 0 0 5px #ffffff;
  }
  #successShowHideBtn {
   background:gray;
   width:initial;
   height:30;
   border:none;
   box-shadow: inset 0 0 5px #000000;
   outline:none;
   color:#ffffff;
   cursor:pointer;
   transition:opacity, box-Shadow 0.3s;
   opacity:0.8;
  }
  #successShowHideBtn:hover {
   opacity:1;
   box-shadow: inset 0 0 5px #000000, 0 0 5px #ffffff;
  }
  #warnShowHideBtn {
   background:gray;
   width:initial;
   height:30;
   border:none;
   box-shadow: inset 0 0 5px #000000;
   outline:none;
   color:#ffffff;
   cursor:pointer;
   transition:opacity, box-Shadow 0.3s;
   opacity:0.8;
  }
  #warnShowHideBtn:hover {
   opacity:1;
   box-shadow: inset 0 0 5px #000000, 0 0 5px #ffffff;
  }
  #optionsBtn {
   background:gray;
   width:100;
   height:30;
   visibility: visible;
   border:none;
   box-shadow: inset 0 0 5px #000000;
   outline:none;
   color:#ffffff;
   cursor:pointer;
   transition:opacity, box-Shadow 0.3s;
   opacity:0.8;
  }
  #optionsBtn:hover {
   opacity:1;
   box-shadow: inset 0 0 5px #000000, 0 0 5px #ffffff;
  }
  #challengesBtn {
   background:gray;
   width:100;
   height:30;
   visibility: visible;
   border:none;
   box-shadow: inset 0 0 5px #000000;
   outline:none;
   color:#ffffff;
   cursor:pointer;
   transition:opacity, box-Shadow 0.3s;
   opacity:0.8;
  }
  #challengesBtn:hover {
   opacity:1;
   box-shadow: inset 0 0 5px #000000, 0 0 5px #ffffff;
  }
  #output {
      position:absolute;
  }
  #outputComp {
      position:absolute;
      right:0%;
      /* cursor:default; */
      top:0%;
      width:50%;
      height:100%;
      outline:none;
      border:none;
      color:transparent;
      background:transparent;
      opacity:0;
      z-index: 5;
  }
  #compiler {
      position:absolute;
      left:0;
      top:0;
      background:gray;
      width:100%;
      height:100%;
  }
  #compilerDataTxt {
    position:absolute;
    left:0.5%;
    top:-1%;
  }
  #terminalTxt {
    position:absolute;
    left:0.5%;
    top:10%;
  }
  #controllerOptions {
      position:absolute;
      top:60%;
      left:0.5%;
      z-index: 1;
      visibility:hidden;
      /* display:flex; */
      display: inline-block;
      padding-left:10px;
      padding-top:8px;
      justify-content: left;
      align-items:center;
      height:4.1%;
      width:100%;
  }
  #fpsOptions {
      position:absolute;
      top:28%;
      left:0.5%;
      z-index: 1;
      /* display:flex; */
      display: inline-block;
      padding-left:10px;
      padding-top:8px;
      justify-content: left;
      align-items:center;
      height:4.1%;
      width:100%;
  }
  #compDataOptions {
      position:absolute;
      top:7%;
      left:0.5%;
      z-index: 1;
      /* display:flex; */
      display: inline-block;
      padding-left:10px;
      padding-top:8px;
      justify-content: left;
      align-items:center;
      height:4.1%;
      width:200%;
  }
  #terminalOptions {
      position:absolute;
      top:17%;
      left:0.5%;
      z-index: 1;
      /* display:flex; */
      display: inline-block;
      padding-left:10px;
      padding-top:8px;
      justify-content: left;
      align-items:center;
      height:4.1%;
      width:100%;
  }
  #compilerBg {
      position:absolute;
      left:1%;
      overflow: hidden;
      top:1.5%;
      background:#fff;
      width:48%;
      height:96%;
  }
  #compilerTextArea {
  z-Index:20;
  width:100%;
  position:absolute;
  left:0;
  top:0;
  background:#303030;
  color:#ffffff;
  border:none;
  outline:none;
  height:100%;
  }
  #qqq {
      position:absolute;
      left:500;
      color:#ffffff;
      top:0;
  }
  </style>
  <script id="water_vertexShader" type="x-shader/x-vertex">
    varying vec2 vUv;
    void main() 
    { 
        vUv = uv;
        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
    }
    </script>
    <script id="water_fragmentShader" type="x-shader/x-vertex"> 
    uniform sampler2D baseTexture;
    uniform float baseSpeed;
    uniform sampler2D noiseTexture;
    uniform float noiseScale;
    uniform float alpha;
    uniform float time;
    varying vec2 vUv;
    void main() 
    {
      vec2 uvTimeShift = vUv + vec2( -0.7, 1.5 ) * time * baseSpeed;	
      vec4 noiseGeneratorTimeShift = texture2D( noiseTexture, uvTimeShift );
      vec2 uvNoiseTimeShift = vUv + noiseScale * vec2( noiseGeneratorTimeShift.r, noiseGeneratorTimeShift.b );
      vec4 baseColor = texture2D( baseTexture, uvNoiseTimeShift );
      baseColor.a = alpha;
      gl_FragColor = baseColor;
    }  
    </script>
  <script id="fireball_vertexShader" type="x-shader/x-vertex">
    uniform sampler2D noiseTexture;
    uniform float noiseScale;
    uniform sampler2D bumpTexture;
    uniform float bumpSpeed;
    uniform float bumpScale;
    uniform float time;
    varying vec2 vUv;
    void main() 
    { 
        vUv = uv;
      vec2 uvTimeShift = vUv + vec2( 1.1, 1.9 ) * time * bumpSpeed;
      vec4 noiseGeneratorTimeShift = texture2D( noiseTexture, uvTimeShift );
      vec2 uvNoiseTimeShift = vUv + noiseScale * vec2( noiseGeneratorTimeShift.r, noiseGeneratorTimeShift.g );
      // below, using uvTimeShift seems to result in more of a "rippling" effect
      //   while uvNoiseTimeShift seems to result in more of a "shivering" effect
      vec4 bumpData = texture2D( bumpTexture, uvTimeShift );
      // move the position along the normal
      //  but displace the vertices at the poles by the same amount
      float displacement = ( vUv.y > 0.999 || vUv.y < 0.001 ) ? 
        bumpScale * (0.3 + 0.02 * sin(time)) :  
        bumpScale * bumpData.r;
        vec3 newPosition = position + normal * displacement;
      gl_Position = projectionMatrix * modelViewMatrix * vec4( newPosition, 1.0 );
    }
    </script>
    
    <script id="fireball_fragmentShader" type="x-shader/x-vertex"> 
    uniform sampler2D baseTexture;
    uniform float baseSpeed;
    uniform float repeatS;
    uniform float repeatT;
    uniform sampler2D noiseTexture;
    uniform float noiseScale;
    uniform sampler2D blendTexture;
    uniform float blendSpeed;
    uniform float blendOffset;
    uniform float time;
    uniform float alpha;
    varying vec2 vUv;
    void main() 
    {
      vec2 uvTimeShift = vUv + vec2( -0.7, 1.5 ) * time * baseSpeed;	
      vec4 noiseGeneratorTimeShift = texture2D( noiseTexture, uvTimeShift );
      vec2 uvNoiseTimeShift = vUv + noiseScale * vec2( noiseGeneratorTimeShift.r, noiseGeneratorTimeShift.b );
      vec4 baseColor = texture2D( baseTexture, uvNoiseTimeShift * vec2(repeatS, repeatT) );
    
      vec2 uvTimeShift2 = vUv + vec2( 1.3, -1.7 ) * time * blendSpeed;	
      vec4 noiseGeneratorTimeShift2 = texture2D( noiseTexture, uvTimeShift2 );
      vec2 uvNoiseTimeShift2 = vUv + noiseScale * vec2( noiseGeneratorTimeShift2.g, noiseGeneratorTimeShift2.b );
      vec4 blendColor = texture2D( blendTexture, uvNoiseTimeShift2 * vec2(repeatS, repeatT) ) - blendOffset * vec4(1.0, 1.0, 1.0, 1.0);
    
      vec4 theColor = baseColor + blendColor;
      theColor.a = alpha;
      gl_FragColor = theColor;
    }  
    </script>
  <script type="x-shader/x-fragment" id="fragmentShaderDepth">
    #include <packing>
    uniform sampler2D texture;
    varying vec2 vUV;
    void main() {
      vec4 pixel = texture2D( texture, vUV );
      if ( pixel.a < 0.5 ) discard;
      gl_FragData[ 0 ] = packDepthToRGBA( gl_FragCoord.z );
  
    }
  </script>
  
  <script type="x-shader/x-vertex" id="vertexShaderDepth">
  
    varying vec2 vUV;
  
    void main() {
  
      vUV = 0.75 * uv;
  
      vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );
  
      gl_Position = projectionMatrix * mvPosition;
  
    }
  
  </script>
  <script id="vertex_shader" type="x-shader/x-vertex">
   #define NVERTS 4
   varying vec3 vNormal;
   varying vec3 vViewPosition;
   void main() {
    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );
    vNormal = normalize( normalMatrix * normal );
    vViewPosition = -mvPosition.xyz;
    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
   }
  </script> 
  <script id="fragment_shader" type="x-shader/x-fragment">
    #define NVERTS 4
    uniform vec3 color;
    uniform vec3 lightColor;
    uniform float lightIntensity;
    uniform vec3 lightverts[ NVERTS ];
    uniform mat4 lightMatrixWorld;
    varying vec3 vNormal;
    varying vec3 vViewPosition;
    void main() {
     vec3 normal = normalize( vNormal );
     vec4 lPosition[ NVERTS ];
     vec3 lVector[ NVERTS ];
     vec3 ambient = color * vec3( 0.2 );
    for( int i = 0; i < NVERTS; i ++ ) {
     lPosition[ i ] = viewMatrix * lightMatrixWorld * vec4( lightverts[ i ], 1.0 );
     lVector[ i ] = normalize( lPosition[ i ].xyz + vViewPosition.xyz );
    }
    float tmp = dot( lVector[ 0 ], cross( ( lPosition[ 2 ] - lPosition[ 0 ] ).xyz, ( lPosition[ 1 ] - lPosition[ 0 ] ).xyz ) );
    if ( tmp > 0.0 ) {
     gl_FragColor = vec4( ambient, 1.0 );
     return;
    }
    vec3 lightVec = vec3( 0.0 );
    for( int i = 0; i < NVERTS; i ++ ) {
     vec3 v0 = lVector[ i ];
     vec3 v1 = lVector[ int( mod( float( i + 1 ), float( NVERTS ) ) ) ];
     lightVec += acos( dot( v0, v1 ) ) * normalize( cross( v0, v1 ) );
    }
    float factor = max( dot( lightVec, normal ), 0.0 ) / ( 2.0 * 3.14159265 );
    vec3 diffuse = color * lightColor * lightIntensity * factor;
    gl_FragColor = vec4( ambient + diffuse, 1.0 );
    }
    </script> 
  <script>
  var cd
  var audioContext
  var micLevel
  var audioLevel=0
  var audio= {
    system: {
      level:function() {
        return false
      },
      getWaveform: function(id, spectrum_data) {
        return false     
    }
  },
    microphone: {
      level:function(){return micLevel}
    }
  }
  var audioConverter
  var fR
  var n_fR
  var n_fR2
  var EP
  var upVar
  var downVar
  var fpsLoading=false;
  var lowFps=false;
  var FB=false;
  var OC=false;
  var FC=false;
  var thirdPersonRotation=true;
  var tableActive=false;
  var refreshInUse = false;
  var canGoBack=false
  var canGoBack2=false
  var canGoBack3=false
  var canGoBack4=false
  var canGoBack5=false
  var canGoBack6=false
  var canGoBack7=false
  var canGoBack8=false
  var canGoBack9=false
  var _terminalData;
  var CameraAttach;
  var previousXpos=null;
  var previousYpos=null;
  var previousZpos=null;
  var previousXrot=null;
  var previousYrot=null;
  var previousZrot=null;
  var cameraAttachment=false;
  var cameraAttachmentRotation=false;
  var terminalSuccess=false;
  var terminalDetail=false;
  var terminalWarn=false;
  var terminalError=false;
  var infoDisplaying
  var fpsDisplaying
  var fpsStyle="old";
  var multipleCameras=false;
  var alreadyDisplayed=false
  var left_axesMoved=false
  var right_axesMoved=false
  var canShowControllerData=false
  var codeRunning=false
  var errorDetected
  if( /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) ) {
   var meta=document.createElement("meta")
   meta.name="viewport"
   meta.content="width=device-width, initial-scale=1.0"
   document.body.appendChild(meta)
  }
  var uL=['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z']
  var lL=['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z']
  var rID

// function getAssetTarget() {
//  if(document.querySelectorAll(".AFS")){
//   return true;
//  }
//  else {
//    return false;
//  }
// }


// var ds = new DragSelect({
  // selectables: document.querySelectorAll(".AFS"),
  // area: document.getElementById("assetsBg"),
  // callback: e => e[0].style.opacity=1//console.log(e[0].children[1].innerHTML)
// });



function HL(data) {
for(var x=0;x<CONDIV.children.length;x++){
 CONDIV.children[x].style.background=null
}
setTimeout(function(){
 eval("var HighlightInterval=setInterval(function(){if(document.getElementById('"+data.split(" ").join("")+"TutBG')){clearInterval(HighlightInterval);"+data.split(" ").join("")+"TutBG.style.background='gray';"+data.split(" ").join("")+"TutBG.style.visibility='visible';"+data.split(" ").join("")+"TutBG.style.opacity=0.5;}})")
 console.log("var HighlightInterval=setInterval(function(){if(document.getElementById('"+data.split(" ").join("")+"TutBG')){clearInterval(HighlightInterval);"+data.split(" ").join("")+"TutBG.style.background='gray';"+data.split(" ").join("")+"TutBG.style.visibility='visible';"+data.split(" ").join("")+"TutBG.style.opacity=0.5;}})")
},3)
}
function HLC(){
  for(var x=0;x<CONDIV.children.length;x++){
 CONDIV.children[x].style.background=null
}
setTimeout(function(){
 eval("customobjectTutBG.style.visibility='visible';customobjectTutBG.style.background='gray';customobjectTutBG.style.opacity=0.5")
},3)
}
assetsBg.ondblclick=function() {
  if(document.querySelectorAll(".AFS")[0].style.opacity==1){
  document.querySelectorAll(".AFS")[document.querySelectorAll(".AFS").length-1].style.opacity=0.8
  }
}
  // isFullscreen=false
  // window.onresize=function(){
  //   if(isFullscreen){
  //     setTimeout(function(){isFullscreen=false},3)
  //   }
  //   if(!isFullscreen){
  //     setTimeout(function(){isFullscreen=true},3)
  //   }
  // }
  // window.onclick=function(){document.body.requestFullscreen()}
  var statsRenderer = {
   position: {
    
   }
  };
  var fpsStats = {
   position: {
    
   }
  };
  var a_ID;
  setInterval(() => {
  // e.innerHTML=audioLevel
  // if(!isFullscreen){document.getElementsByTagName("canvas")[0].width=960;CONDIV.style.top="825%"}
  // if(isFullscreen){document.getElementsByTagName("canvas")[0].width=850;CONDIV.style.top="875%"}
  // if(localStorage.getItem("I D") && localStorage.getItem("ID") == "NaN" && !localStorage.getItem("ID") == 0 || localStorage.getItem("ID") && localStorage.getItem("ID") == "NaN" && !localStorage.getItem("ID") == 1 || localStorage.getItem("ID") && localStorage.getItem("ID") == "NaN" && !localStorage.getItem("ID") == 2 || localStorage.getItem("ID") && localStorage.getItem("ID") == "NaN" && !localStorage.getItem("ID") == 3 || localStorage.getItem("ID") && localStorage.getItem("ID") == "NaN" && !localStorage.getItem("ID") == 4 || localStorage.getItem("ID") && localStorage.getItem("ID") == "NaN" && !localStorage.getItem("ID") == 5 || localStorage.getItem("ID") && localStorage.getItem("ID") == "NaN" && !localStorage.getItem("ID") == 6 || localStorage.getItem("ID") && localStorage.getItem("ID") == "NaN" && !localStorage.getItem("ID") == 7 || localStorage.getItem("ID") && localStorage.getItem("ID") == "NaN" && !localStorage.getItem("ID") == 8 || localStorage.getItem("ID") && localStorage.getItem("ID") == "NaN" && !localStorage.getItem("ID") == 9) {
  //  a_ID = 1;
  //  localStorage.setItem("ID", a_ID);
  // };
  // if(typeof localStorage.getItem("token") !== 'string') { // [fix]: get a better processor ? XD
  //  window.location.href='../';
  // };
  // if(typeof UYC.gamepad !== 'object') {
  //  UYC["controller"]={};
  //  UYC["controller"]["connected"]=false;
  // }
  // else {
  //   UYC["controller"]["connected"]=true;
  // };
  if(typeof UYC === 'object' && typeof UYC.controller === 'object' && typeof cS === 'string') {
   UYC.controller.status=cS;
   if(typeof gamepad === 'object') {
    UYC.controller["axes"]={left:{x:gamepad.axes[0],y:gamepad.axes[1]},right:{x:gamepad.axes[2],y:gamepad.axes[3]}};
   };
   //here
  };
  if(typeof gui === 'object') {
   gui.domElement.style.visibility=UYC.GUI.visible.toString().split("true").join("visible").split("false").join("hidden");
   UYC.GUI["closed"]=gui.closed;
  //  UYC.GUI["open"]=!gui.closed;
  };
  if(typeof game === 'object') {
  for(var o = 0; o < game.bodies.length; o++) {
   if(typeof getBodyByIndex(o) === 'object' && getBodyByIndex(o).type == "Mesh") {
    getBodyByIndex(o)['getRotation']=function(){return [this.rotation.x,this.rotation.y,this.rotation.z]};
   };
  };
 };
  if(typeof document.getElementsByClassName(_a)[0] === 'object') {
   itemsTab.style.background = getComputedStyle(document.getElementsByClassName(_a)[0]).backgroundColor;
  };
   if(typeof document.getElementsByClassName('CodeMirror-selected')[0] === 'object') {
    for(var s = 0; s < document.getElementsByClassName("CodeMirror-selected").length; s++) {
     document.getElementsByClassName('CodeMirror-selected')[s].style.background='gray';
    };
   };
  // if(!localStorage.getItem("stringColor") || localStorage.getItem("stringColor") == "") {
  //    colorString.value = "#fded02";
  //    localStorage.setItem("stringColor",colorString.value)
  //   }
  //   if(!localStorage.getItem("numberColor") || localStorage.getItem("numberColor") == "") {
  //    colorNumber.value = "#a16a94";
  //    localStorage.setItem("numberColor",colorNumber.value)
  //   }
  //   if(!localStorage.getItem("keywordColor") || localStorage.getItem("keywordColor") == "") {
  //    colorKeyword.value = "#db2d20";
  //    localStorage.setItem("keywordColor",colorKeyword.value)
  //   }
  //   if(!localStorage.getItem("propertyColor") || localStorage.getItem("propertyColor") == "") {
  //    colorProperty.value = "#01a252";
  //    localStorage.setItem("propertyColor",colorProperty.value)
  //   }
  //   if(!localStorage.getItem("variableColor") || localStorage.getItem("variableColor") == "") {
  //    colorVariable.value = "#01a252";
  //    localStorage.setItem("variableColor",colorVariable.value)
  //   }
  //   if(!localStorage.getItem("commentColor") || localStorage.getItem("commentColor") == "") {
  //    colorComment.value = "#cdab53";
  //    localStorage.setItem("commentColor",colorComment.value)
  //   }
  //   if(!localStorage.getItem("operatorColor") || localStorage.getItem("operatorColor") == "") {
  //    colorOperator.value = "#d6d5d4";
  //    localStorage.setItem("operatorColor",colorOperator.value)
  //   }
  // stringColorBtn.style.color = localStorage.getItem("stringColor");
  // numberColorBtn.style.color = localStorage.getItem("numberColor");
  // keywordColorBtn.style.color = localStorage.getItem("keywordColor");
  // propertyColorBtn.style.color = localStorage.getItem("propertyColor");
  // variableColorBtn.style.color = localStorage.getItem("variableColor");
  // commentColorBtn.style.color = localStorage.getItem("commentColor");
  // operatorColorBtn.style.color = localStorage.getItem("operatorColor");
  if(typeof document.getElementsByClassName('cm-string')[0] === 'object') {
   for(var i = 0; i < document.getElementsByClassName('cm-string').length; i++) {
    document.getElementsByClassName('cm-string')[i].style.color = localStorage.getItem("stringColor");
   };
  };
  if(typeof document.getElementsByClassName('cm-number')[0] === 'object') {
   for(var i = 0; i < document.getElementsByClassName('cm-number').length; i++) {
    document.getElementsByClassName('cm-number')[i].style.color = localStorage.getItem("numberColor");
   };
  };
  if(typeof document.getElementsByClassName('cm-keyword')[0] === 'object') {
   for(var i = 0; i < document.getElementsByClassName('cm-keyword').length; i++) {
    document.getElementsByClassName('cm-keyword')[i].style.color = localStorage.getItem("keywordColor");
   };
  };
  if(typeof document.getElementsByClassName('cm-string')[0] === 'object') {
   for(var i = 0; i < document.getElementsByClassName('cm-property').length; i++) {
    document.getElementsByClassName('cm-property')[i].style.color = localStorage.getItem("propertyColor");
   };
  };
  if(typeof document.getElementsByClassName('cm-string')[0] === 'object') {
   for(var i = 0; i < document.getElementsByClassName('cm-variable').length; i++) {
    document.getElementsByClassName('cm-variable')[i].style.color = localStorage.getItem("variableColor");
   };
  };
  if(typeof document.getElementsByClassName('cm-comment')[0] === 'object') {
   for(var i = 0; i < document.getElementsByClassName('cm-comment').length; i++) {
    document.getElementsByClassName('cm-comment')[i].style.color = localStorage.getItem("commentColor");
   };
  };
  if(typeof document.getElementsByClassName('cm-operator')[0] === 'object') {
   for(var i = 0; i < document.getElementsByClassName('cm-operator').length; i++) {
    document.getElementsByClassName('cm-operator')[i].style.color = localStorage.getItem("operatorColor");
   };
  };
    assetsLength=(localStorage.getItem("assets").match(new RegExp("asset_", "g")) || []).length
    if(assetsLength==1){
     numOfAssets.innerHTML="You have "+(localStorage.getItem("assets").match(new RegExp("asset_", "g")) || []).length+" asset ("+localStorage.getItem("assets").split("asset_").join("")+")"
    };
  if(localStorage.getItem("lastTitle2") && localStorage.getItem("lastTitle2").startsWith(",")) {
   localStorage.setItem("lastTitle2", localStorage.getItem("lastTitle2").substring(1));
  };
  if(!localStorage.getItem("ID")) {
   a_ID = 1;
   localStorage.setItem("ID", a_ID);
  };
  if(a_ID == "NaN") {
   a_ID = 1;
  };
  if(localStorage.getItem("ID") && localStorage.getItem("ID") !== "NaN") {
   a_ID = localStorage.getItem("ID");
  //  localStorage.setItem("ID", a_ID);
  };
  // if(localStorage.getItem("ID") == null) {
  //  a_ID = 1;
  //  localStorage.setItem("ID", a_ID);
  // };
  if(typeof UYC === 'object' && typeof UYC.assets === 'object') {
   if(UYC.assets.includes('asset_')) {
    UYC.assets.remove('asset_');
   };
  };
  if(controls) {
   controls.maxPolarAngle=UYC.controls.maxPolarAngle;
   controls.minPolarAngle=UYC.controls.minPolarAngle;
  }
  if(gamepad && gamepad.id.includes("WHEEL")) {
   _sTgP = ", <img src='Images/UpArrow.png' id='stWheel' width='50' height='50'><br>";
  };
  if(gamepad && !gamepad.id.includes("WHEEL")) {
   _sTgP = ", <br>";
  };
  if(typeof stWheel === 'object') {
   stWheel.style.transform = "rotate("+Number(gamepad_leftAxisX.innerHTML.split("left axis (X): ").join("")) * 50+"deg)";
  };
  if(gdiTab.style.visibility == "visible") {
    dCI_on.innerHTML="Concealment controller data"
    alwaysDisplayBtn.style.left="11%"
  }
  if(gdiTab.style.visibility == "hidden") {
    dCI_on.innerHTML="Display controller data"
    alwaysDisplayBtn.style.left="9%"
  }
  if(localStorage.getItem("terminalLogs")=="Show") {
   _terminalData = {
    errors: JSON.parse(localStorage.getItem("terminalData")).errors,
    info: JSON.parse(localStorage.getItem("terminalData")).info,
    success: JSON.parse(localStorage.getItem("terminalData")).success,
    warn: JSON.parse(localStorage.getItem("terminalData")).warn,
   };
  };
  if(localStorage.getItem("terminalLogs")=="Hide") {
   _terminalData = {
    errors: false,
    info: false,
    success: false,
    warn: false,
   };
  };
  if(editor && localStorage.getItem("_autosave")=="yes"&&!editor.getValue()==''&&localStorage.getItem("saveCodeData")=="always") {
   var savedCode=localStorage.setItem("code",editor.getValue());
  };
  if(displayFpsBtn.innerHTML.includes("Concealment")) {
   oldStyleFpsBtn.disabled=true;
  }
  else {
    oldStyleFpsBtn.disabled=false;
  }
  if(typeof __fpsStats === 'object') {
    __fpsStats.domElement.style.zIndex=44;
    __fpsStats.domElement.style.left=fpsStats.position.x;
   __fpsStats.domElement.style.top=fpsStats.position.y;
  }
  if(typeof __statsRenderer === 'object') {
    __statsRenderer.style.zIndex=5;
  // if(typeof statsRenderer.position === 'object') {
  __statsRenderer.style.left=statsRenderer.position.x;
  __statsRenderer.style.top=statsRenderer.position.y;
  // }
    if(statsRenderer.theme=="red") {
      __statsRenderer.style.filter="hue-Rotate(0deg)"
  }
  if(statsRenderer.theme=="green") {
    __statsRenderer.style.filter="hue-Rotate(120deg)"
  }
  if(statsRenderer.theme=="cyan") {
    __statsRenderer.style.filter="hue-Rotate(190deg)"
  }
  if(statsRenderer.theme=="blue") {
    __statsRenderer.style.filter="hue-Rotate(220deg)"
  }
  if(statsRenderer.theme=="purple") {
    __statsRenderer.style.filter="hue-Rotate(280deg)"
  }
  if(statsRenderer.theme=="pink") {
    __statsRenderer.style.filter="hue-Rotate(320deg)"
  }
  }
  for(var c=0;c<document.getElementsByClassName("dg ac").length;c++) {
  document.getElementsByClassName("dg ac")[c].style.zIndex=5;
 }
 delta = clock.getDelta();
 if(typeof UYC === 'object') {
 scene.background=UYC.background.skybox.color;
 }
 if(fps) {
 graphLineColor="#6ff8fc"
 graph.style.background="#1d324b"
 graphBg.style.background="#191d37"
 graph.style.boxShadow="inset 0px 0px 10px cyan"
 fpsTxt.style.color="#6ff8fc"
 graphLineShadow="cyan"
 }
  if(ms) {
 graphLineColor="#76ec22"
 graph.style.background="#28481b"
 graphBg.style.background="#21351a"
 graph.style.boxShadow="inset 0px 0px 10px lime"
 fpsTxt.style.color="#76ec22"
 graphLineShadow="lime"
 }
  if(fps&&parseInt(fpsTxt.innerHTML.split("FPS (").join("").split(")").join("")) < 30 || ms&&parseInt(fpsTxt.innerHTML.split("MS (").join("").split(")").join("")) < 3) {
   lowFps=true;
  }
  else {
   lowFps=false;
  }
  if(terminalWarn) {
    terminalBox.style.color="#fad99b";
    terminalBox.style.background="#332b00";
  }
  if(terminalDetail) {
    terminalBox.style.color="#9BF0FA";
    terminalBox.style.background="#002433";
  }
  if(terminalSuccess) {
    terminalBox.style.color="#9BFC9C";
    terminalBox.style.background="#004B0A";
  }
  if(terminalError) {
    terminalBox.style.color="#cf6363";
    terminalBox.style.background="#290000";
  }
  if(document.getElementsByTagName("canvas")[0] && !codeRunning) {
    document.getElementsByTagName("canvas")[0].style.position="absolute";
    document.getElementsByTagName("canvas")[0].style.height="100%";
    document.getElementsByTagName("canvas")[0].style.left="960px";
    document.getElementsByTagName("canvas")[0].style.width="960px";
  }
  if(codeRunning) {
    document.getElementsByTagName("canvas")[0].style.position="absolute";
    document.getElementsByTagName("canvas")[0].style.height=document.body.clientHeight+"px";
    document.getElementsByTagName("canvas")[0].style.left="0px";
    document.getElementsByTagName("canvas")[0].style.width=document.body.clientWidth+"px";
  }
  if(localStorage.getItem("showingInfo")=="Don't show"&&!fnBreak) {
   codeStatus.style.visibility="hidden";
   controllerStatus.style.visibility="hidden";
  }
  if(localStorage.getItem("showingInfo")=="Only when code is running"&&!codeRunning&&!fnBreak) {
   codeStatus.style.visibility="hidden";
   controllerStatus.style.visibility="hidden";
  }
  if(localStorage.getItem("showingInfo")=="Only when code is running"&&codeRunning&&!fnBreak) {
   codeStatus.style.visibility="visible";
   controllerStatus.style.visibility="visible";
  }
  if(localStorage.getItem("showingInfo")=="Always show") {
   codeStatus.style.visibility="visible";
   controllerStatus.style.visibility="visible";
  }
  infoBtn.innerHTML=localStorage.getItem("showingInfo");
//   if(engine.world.composites.length>0) {
//    if(typeof engine.world.composites[0].constraints === 'object' && engine.world.composites[0].constraints.length>0) {
//     if(engine.world.composites[0].constraints[0].render.visible==true) {
//     game.renderView.enabled=true;
//    }
//   }
//    else {
//     game.renderView.enabled=false;
//    }
//   }
  if(document.getElementsByClassName(".CodeMirror div.CodeMirror-cursor")[0]) {
  document.getElementsByClassName(".CodeMirror div.CodeMirror-cursor")[0].style.borderLeft="1px solid white"
  }
  uyc_cursor=document.body.style.cursor
  _CUT.innerHTML="Current Theme: "+localStorage.getItem("usingTheme")
  if(localStorage.getItem("challenge")!==null) {
   challengeStatus.innerHTML="Challenge: "+localStorage.getItem("challenge")
   challengeStatus.style.visibility="visible"
   challengeStatus.onmouseover=function(){challengeStatus.title=localStorage.getItem("challengeDesc")}
   tutorialBtn.disabled=true
  }
  else {
   challengeStatus.innerHTML=""
   challengeStatus.style.visibility="hidden"
   tutorialBtn.disabled=false
  }
  // if(document.getElementsByTagName("canvas")[0].width==1920){outputComp.style.left="0%";outputComp.style.width="10%"}
  // if(!document.getElementsByTagName("canvas")[0].width==1920){outputComp.style.left="0%";outputComp.style.width="50%"}
  outputComp.style.height="100%"
  if(gamepad&&Gamepad.type=="Controller"){
  localStorage.setItem("gamepad_keys",'{"a":'+gamepad.buttons[0].pressed+',"b":'+gamepad.buttons[1].pressed+',"x":'+gamepad.buttons[2].pressed+',"y":'+gamepad.buttons[3].pressed+',"up":'+gamepad.buttons[12].pressed+',"down":'+gamepad.buttons[13].pressed+',"left":'+gamepad.buttons[14].pressed+',"right":'+gamepad.buttons[15].pressed+',"left axis":'+left_axesMoved+',"right axis":'+right_axesMoved+',"left axis (X)":'+gamepad.axes[0]+',"left axis (Y)":'+gamepad.axes[1]+',"right axis (X)":'+gamepad.buttons[2].pressed+',"right axis (Y)":'+gamepad.buttons[3].pressed+',"LB":'+gamepad.buttons[4].pressed+',"RB":'+gamepad.buttons[5].pressed+',"LT":'+gamepad.buttons[6].pressed+',"RT":'+gamepad.buttons[7].pressed+',"LT (value)":'+gamepad.buttons[6].value+',"RT (value)":'+gamepad.buttons[7].value+"}")
  }
  if(gamepad&&Gamepad.type=="Steering Wheel"){
  localStorage.setItem("gamepad_keys",'{"a":'+gamepad.buttons[0].pressed+',"b":'+gamepad.buttons[1].pressed+',"x":'+gamepad.buttons[2].pressed+',"y":'+gamepad.buttons[3].pressed+',"left axis (X)":'+gamepad.axes[0]+',"left axis (Y)":'+gamepad.axes[1]+',"right axis (X)":'+gamepad.buttons[2].pressed+',"right axis (Y)":'+gamepad.buttons[3].pressed+',"LB":'+gamepad.buttons[4].pressed+',"RB":'+gamepad.buttons[5].pressed+',"LT":'+gamepad.buttons[6].pressed+',"RT":'+gamepad.buttons[7].pressed+',"LT (value)":'+gamepad.buttons[6].value+',"RT (value)":'+gamepad.buttons[7].value+"}")
  }
  localStorage.setItem("DFOOS",graphBg.style.visibility)
  localStorage.setItem("DCOOS",gdiTab.style.visibility)
  if(controller&&optionsTab.style.visibility=="visible"){
  // _fpsText.style.top="31%"
  // fpsOptions.style.top="38%"
  gamepadTxt.style.visibility="visible"
  controllerOptions.style.visibility="visible"
  }
  if(controller&&optionsTab.style.visibility=="hidden") {
  _fpsText.style.top="20%"
  fpsOptions.style.top="28%"
  gamepadTxt.style.visibility="hidden"
  controllerOptions.style.visibility="hidden"
  }
  if(controller==null){
  _fpsText.style.top="20%"
  fpsOptions.style.top="28%"
  }
  if(gamepad){
  if(gamepad.axes[2]!==0.0000152587890625||gamepad.axes[3]!==-0.0000152587890625) {
   right_axesMoved=true
  }
  else {
   right_axesMoved=false
  }

  if(gamepad.axes[0]!==0.0000152587890625||gamepad.axes[1]!==-0.0000152587890625) {
   left_axesMoved=true
  }
  else {
    left_axesMoved=false
  }
}
  if(controller){
  controllerStatus.innerHTML="controller status: "+controller.status
  }
  if(document.getElementsByClassName("loading-image")[0]){
    document.getElementsByClassName("loading-image")[0].remove()
  }
  terminalPositionBtn.innerHTML="Position: "+localStorage.getItem("terminalPosition")
  terminalAutoOpenBtn.innerHTML="Auto-Open: "+localStorage.getItem("terminalAO")
  if(typeof UYC === 'object') {
   terminalBackgroundBtn.innerHTML="Background: "+UYC.convert.color("hex_to_color => " + localStorage.getItem("terminalBackground"));
  };
  terminalShowHideBtn.innerHTML=localStorage.getItem("terminalLogs")+" terminal logs";
  // terminalColorBtn.innerHTML="Color: "+UYC.convert.color("hex_to_color => " + localStorage.getItem("terminalColor"));
  // stringColorBtn.innerHTML="String color: "+UYC.convert.color("hex_to_color => " + localStorage.getItem("stringColor"));
  // numberColorBtn.innerHTML="Number color: "+UYC.convert.color("hex_to_color => " + localStorage.getItem("numberColor"));
  // keywordColorBtn.innerHTML="Keyword color: "+UYC.convert.color("hex_to_color => " + localStorage.getItem("keywordColor"));
  // propertyColorBtn.innerHTML="Property color: "+UYC.convert.color("hex_to_color => " + localStorage.getItem("propertyColor"));
  // variableColorBtn.innerHTML="Variable color: "+UYC.convert.color("hex_to_color => " + localStorage.getItem("variableColor"));
  // commentColorBtn.innerHTML="Comment color: "+UYC.convert.color("hex_to_color => " + localStorage.getItem("commentColor"));
  // operatorColorBtn.innerHTML="Operator color: "+UYC.convert.color("hex_to_color => " + localStorage.getItem("operatorColor"));
  terminalBackgroundBtn.style.color=localStorage.getItem("terminalBackground")
  terminalColorBtn.style.color=localStorage.getItem("terminalColor")
  if(localStorage.getItem("terminalLogs")=="Show" && optionsTab.style.visibility == 'visible') {
    errorShowHideBtn.style.visibility = 'visible';
    infoShowHideBtn.style.visibility = 'visible';
    successShowHideBtn.style.visibility = 'visible';
    warnShowHideBtn.style.visibility = 'visible';
    // optionsArrayOpen.style.visibility = 'visible';
    // optionsArrayClosed.style.visibility = 'visible';
  };
  if(localStorage.getItem("terminalLogs")=="Show" && optionsTab.style.visibility == 'hidden') {
    errorShowHideBtn.style.visibility = 'hidden';
    infoShowHideBtn.style.visibility = 'hidden';
    successShowHideBtn.style.visibility = 'hidden';
    warnShowHideBtn.style.visibility = 'hidden';
    // optionsArrayOpen.style.visibility = 'hidden';
    // optionsArrayClosed.style.visibility = 'hidden';
  };
  if(localStorage.getItem("terminalLogs")=="Hide" && optionsTab.style.visibility == 'visible') {
    errorShowHideBtn.style.visibility = 'hidden';
    infoShowHideBtn.style.visibility = 'hidden';
    successShowHideBtn.style.visibility = 'hidden';
    warnShowHideBtn.style.visibility = 'hidden';
    // optionsArrayOpen.style.visibility = 'hidden';
    // optionsArrayClosed.style.visibility = 'hidden';
  };
  if(localStorage.getItem("terminalPosition")=="down") {
   terminalBox.style.bottom="0%"
   terminalBox.style.left="0%"
   if(!tableActive) {
   terminalInfo.innerHTML='Press "ESC" to stop'
   terminalInfo.style.bottom="5.5%"
   }
   if(tableActive) {
   terminalInfo.innerHTML='Press "ESC" to clear'
   terminalInfo.style.bottom="8.5%"
   }
   terminalInfo.style.top=null
   terminalBox.style.top=null
  }
  if(localStorage.getItem("terminalPosition")=="up") {
   terminalBox.style.top="0%"
   terminalBox.style.left="0%"
   terminalInfo.style.top="5.5%"
  }
  
  alwaysDisplayBtn.innerHTML="Always display: "+localStorage.getItem("alwaysDisplay")
  alwaysDisplayFpsBtn.innerHTML="Always display: "+localStorage.getItem("alwaysDisplay_FPS")
  oldStyleFpsBtn.innerHTML="Old style: "+localStorage.getItem("oldFPSStyle")
  if(!terminalWarn&&!terminalError&&!terminalDetail&&!terminalSuccess) {
   terminalBox.style.background=localStorage.getItem("terminalBackground")
  }
  // terminalBox.style.textShadow="0px 10px 20px "+terminalBox.style.color;
  if(!terminalWarn&&!terminalError&&!terminalDetail&&!terminalSuccess){
   terminalBox.style.color=localStorage.getItem("terminalColor")
  }
  // if(!terminalDetail&&!terminalError&&!terminalDetail){
  //  terminalBox.style.color=localStorage.getItem("terminalColor")
  // }
  if(codeRunning||allCompilerArea.style.visibility=="hidden") {
    if(document.querySelector(".CodeMirror-cursor")&&document.querySelector(".CodeMirror-hints")) {
    document.querySelector(".CodeMirror-hints").style.visibility="hidden"
    document.querySelector(".CodeMirror-cursor").style.visibility="hidden"
    }
  }
  if(codeRunning||allCompilerArea.style.visibility=="visible") {
    if(document.querySelector(".CodeMirror-cursor")&&document.querySelector(".CodeMirror-hints")) {
    document.querySelector(".CodeMirror-hints").style.visibility="visible"
    document.querySelector(".CodeMirror-cursor").style.visibility="visible"
    }
  }
  if(!codeRunning&&fpsDisplaying&&allCompilerArea.style.visibility=="visible"){
    graphBg.style.visibility="hidden"
  }
  if(localStorage.getItem("alwaysDisplay_FPS")=="no"&&displayFpsBtn.innerHTML=="Display FPS") {
    gdiTab.style.top="-10%"
  }
  if(typeof __fpsStats === 'object' && __fpsStats.domElement.style.visibility=="hidden"&&localStorage.getItem("alwaysDisplay_FPS")=="no"&&fpsStyle!=="new"&&displayFpsBtn.innerHTML=="Concealment FPS"&&allCompilerArea.style.visibility=="hidden") {
    graphBg.style.visibility="visible"
  }
  // if(codeRunning&&fpsDisplaying&&alreadyDisplayed&&allCompilerArea.style.visibility=="visible"){
  //   graphBg.style.visibility="visible"
  // }
  // if(codeRunning&&fpsDisplaying&&alreadyDisplayed||fpsDisplaying&&alreadyDisplayed&&allCompilerArea.style.visibility=="hidden"){
  //   graphBg.style.visibility="visible"
  // }
  if(codeRunning&&document.getElementsByClassName("CodeMirror-hints")[0]){
   document.getElementsByClassName("CodeMirror-hints")[0].style.visibility="hidden"
  }
  if(typeof __fpsStats === 'object' && __fpsStats.domElement.style.visibility=="hidden"&&codeRunning&&fpsDisplaying){
    graphBg.style.visibility="visible"
  }
  if(fpsDisplaying||localStorage.getItem("alwaysDisplay_FPS")=="yes"){
  if(fpsStyle=="old") {
   optionsTab.style.top="10%";
  };
  alreadyDisplayed=true;
  var csTop=65
  for(var i=0;i<gdiTab.childElementCount;i++){
  csTop+=15
  gdiTab.children[i].style.top=csTop
  }
}
  if(!fpsDisplaying){
    optionsTab.style.top="0%";
    var csTop=-40
  for(var i=0;i<gdiTab.childElementCount;i++){
  csTop+=15
  gdiTab.children[i].style.top=csTop
  }
}
  if(typeof __fpsStats === 'object' && __fpsStats.domElement.style.visibility=="hidden"&&localStorage.getItem("alwaysDisplay_FPS")=="yes"&&codeRunning) {
    graphBg.style.visibility="visible"
  }
  if(typeof __fpsStats === 'object'&&localStorage.getItem("alwaysDisplay_FPS")=="yes"&&fpsStyle=="new") {
    __fpsStats.domElement.style.visibility="visible";
  }

  // if(displayFpsBtn.innerHTML=="Display FPS"&&localStorage.getItem("alwaysDisplay_FPS")){
  //   graphBg.style.visibility="hidden"
  // }
  if(localStorage.getItem("alwaysDisplay_FPS")=="yes"&&allCompilerArea.style.visibility=="visible"&&!codeRunning){
    graphBg.style.visibility="hidden"
  }
  if(typeof __fpsStats === 'object' && __fpsStats.domElement.style.visibility=="hidden"&&localStorage.getItem("alwaysDisplay_FPS")=="yes"&&allCompilerArea.style.visibility=="hidden"){
    graphBg.style.visibility="visible"
  }
  if(localStorage.getItem("alwaysDisplay_FPS")=="yes") {
    alwaysDisplayFpsBtn.style.color="#0f0"
    displayFpsBtn.innerHTML="Display FPS"
    fpsDisplaying=true
  }
  if(localStorage.getItem("oldFPSStyle")=="yes") {
    oldStyleFpsBtn.style.color="#0f0"
    fpsStyle="old";
  }
  if(localStorage.getItem("oldFPSStyle")=="no") {
    oldStyleFpsBtn.style.color="#ff0000"
    fpsStyle="new";
  }
  //if(localStorage.getItem("alwaysDisplay_FPS")=="no"&&displayFpsBtn.innerHTML=="Display FPS") {
  if(graphBg.style.visibility=="hidden") {
    optionsTab.style.top="0%";
  }
  if(localStorage.getItem("alwaysDisplay_FPS")=="no") {
    alwaysDisplayFpsBtn.style.color="#ff0000"
  }
  if(localStorage.getItem("alwaysDisplay")=="no") {
    alwaysDisplayBtn.style.color="#ff0000"
  }
  if(localStorage.getItem("alwaysDisplay")=="yes"&&allCompilerArea.style.visibility=="visible"&&!codeRunning){
   graphBg.style.visibility="hidden"
  }
  if(codeRunning&&gdiTab.style.visibility=="visible"){
    gdiTab.style.color="#ffffff"
    gdiTab.style.textShadow="0 0 5px #000000"
  }
  if(!infoDisplaying) {
    gdiTab.style.visibility="hidden"
  }
  if(infoDisplaying&&!codeRunning&&allCompilerArea.style.visibility=="visible") {
   gdiTab.style.visibility="hidden"
  }
  if(gamepad&&infoDisplaying&&codeRunning||infoDisplaying&&allCompilerArea.style.visibility=="hidden") {
   gdiTab.style.visibility="visible"
  }
  if(localStorage.getItem("alwaysDisplay")=="yes") {
    alwaysDisplayBtn.style.color="#0f0"
    if(codeRunning) {
     gdiTab.style.color="#ffffff"
     gdiTab.style.textShadow="0 0 5px #000000"
    }
    if(!codeRunning&&localStorage.getItem("alwaysDisplay")=="yes"&&allCompilerArea.style.visibility=="visible"){
    gdiTab.style.visibility="hidden"
    }
    else {
      if(gamepad){
      gdiTab.style.visibility="visible"
      }
    }
  }
  if(localStorage.getItem("terminalAO")=="no") {
   terminalAutoOpenBtn.style.color="#ff0000"
  }
  if(localStorage.getItem("terminalAO")=="yes") {
  terminalAutoOpenBtn.style.color="lime"
  if(document.getElementsByTagName("canvas")[0] && document.getElementsByTagName("canvas")[0].style.width==window.innerWidth+'px'){
    _terminal.style.visibility="visible"
   }
   else {
    _terminal.style.visibility="hidden"
   }
  }
  
  if(document.getElementsByClassName("loading-image")[0]) {
    document.getElementsByClassName("loading-image")[0].remove()
  }
  if(document.getElementsByTagName("canvas")[0]){
//    document.getElementsByTagName("canvas")[0].style.height="100%"
  }
  if(typeof time === 'object'){
  if(time.getAttribute("class")=="time-undefined") {
   time.setAttribute("class","time-default")
   }
  }
  if(document.getElementsByClassName("___asset")[0]&&!document.getElementsByClassName("___asset")[1]) {
   document.getElementsByClassName("___asset")[0].style.left="14%"
  }
  if(document.getElementsByClassName("___asset")[1]) {
  document.getElementsByClassName("___asset")[0].style.left="14%"
  document.getElementsByClassName("___asset")[1].style.left="27.3%"
  }
  
  if(cS=="not connected") {
    controllerStatus.style.color="#ff0"
   }
   if(cS=="connected") {
    controllerStatus.style.color="#0f0"
   }
   if(cS=="error") {
    controllerStatus.style.color="#ff0000"
    controllerStatus.style.zIndex=4
   }
  
   if(codeStatus.innerHTML.includes("stopped")) {
    codeStatus.style.color="#ff0"
   }
   if(codeStatus.innerHTML.includes("running")) {
    codeStatus.style.color="#0f0"
   }
   if(codeStatus.innerHTML.includes("error")) {
    codeStatus.style.color="#ff0000"
    codeStatus.style.zIndex=6
   }
  }, 0);
  // function openTutorial() {
  //  document.getElementsByClassName("CodeMirror-scroll")[0].style.visibility="hidden"
  //  document.getElementsByClassName("CodeMirror-vscrollbar")[0].style.visibility="hidden"
  //  document.getElementsByClassName("CodeMirror-hscrollbar")[0].style.visibility="hidden"
  //  var lPos=0
  //  var tPos=-950
  // function loadTut() {
  //  tutorialTab.style.visibility="visible"
  //  allCompilerArea.style.visibility="hidden"
  //  document.body.style.overflowY="visible"
  // }
  //  var animatedCanvas=document.createElement("canvas")
  //  animatedCanvas.style.backgroundImage="url(Images/tutorialBg.png)"
  //  animatedCanvas.style.backgroundSize="cover"
  //  animatedCanvas.style.width=window.innerWidth
  //  animatedCanvas.style.zIndex=1000
  //  animatedCanvas.style.height=window.innerHeight
  //  animatedCanvas.style.position="absolute"
  // var anim=setInterval(function(){
  //  tPos+=3
  //  console.log(tPos)
  //  animatedCanvas.style.left=lPos
  //  animatedCanvas.style.top=tPos
  //  if(tPos>=0){clearInterval(anim);loadTut();}
  //  if(tPos>=935){clearInterval(anim);document.body.style.overflowY="visible"}
  // },0)
  //  document.body.appendChild(animatedCanvas)
  // loadTut()
  // }
  function showhideErrors() {
   if(JSON.parse(localStorage.getItem("terminalData")).errors == true) {
    setTimeout(() => { _terminalData.errors = false; localStorage.setItem("terminalData", JSON.stringify(_terminalData));},3);
   }
   if(JSON.parse(localStorage.getItem("terminalData")).errors == false) {
    setTimeout(() => { _terminalData.errors = true; localStorage.setItem("terminalData", JSON.stringify(_terminalData));},3);
   }
  };
  function showhideInfo() {
    if(JSON.parse(localStorage.getItem("terminalData")).info == true) {
    setTimeout(() => { _terminalData.info = false; localStorage.setItem("terminalData", JSON.stringify(_terminalData));},3);
   }
   if(JSON.parse(localStorage.getItem("terminalData")).info == false) {
    setTimeout(() => { _terminalData.info = true; localStorage.setItem("terminalData", JSON.stringify(_terminalData));},3);
   }
  };
  function showhideSuccess() {
    if(JSON.parse(localStorage.getItem("terminalData")).success == true) {
    setTimeout(() => { _terminalData.success = false; localStorage.setItem("terminalData", JSON.stringify(_terminalData));},3);
   }
   if(JSON.parse(localStorage.getItem("terminalData")).success == false) {
    setTimeout(() => { _terminalData.success = true; localStorage.setItem("terminalData", JSON.stringify(_terminalData));},3);
   }
  };
  function showhideWarn() {
    if(JSON.parse(localStorage.getItem("terminalData")).warn == true) {
    setTimeout(() => { _terminalData.warn = false; localStorage.setItem("terminalData", JSON.stringify(_terminalData));},3);
   }
   if(JSON.parse(localStorage.getItem("terminalData")).warn == false) {
    setTimeout(() => { _terminalData.warn = true; localStorage.setItem("terminalData", JSON.stringify(_terminalData));},3);
   }
  };
  function openTutorial() {
   window.open("tutorials/3D/Compiler.html");
  }
  setInterval(function() {
    // setTimeout(function() {
    // if(localStorage.getItem("ID")&&!localStorage.getItem("ID").includes(0)&&!localStorage.getItem("ID").includes(1)&&!localStorage.getItem("ID").includes(2)&&!localStorage.getItem("ID").includes(3)&&!localStorage.getItem("ID").includes(4)&&!localStorage.getItem("ID").includes(5)&&!localStorage.getItem("ID").includes(6)&&!localStorage.getItem("ID").includes(7)&&!localStorage.getItem("ID").includes(8)&&!localStorage.getItem("ID").includes(9)&&!localStorage.getItem("ID").includes(0)) {       a_ID = 1;
    //    localStorage.setItem('ID', a_ID)
    //    console.log('a')
    //   }
    // },10000);
  if(!localStorage.getItem("terminalLogs")) {
      localStorage.setItem("terminalLogs", "Show");
  }
  if(!localStorage.getItem("terminalData")) {
      localStorage.setItem("terminalData", '{"errors":true,"info":true,"success":true,"warn":true}');
  };
  if(autosaveBtn.innerHTML.includes("null")){
      var autoSaving=localStorage.setItem("_autosave", "no")
  }
  if(autoloadBtn.innerHTML.includes("null")){
      var autoLoading=localStorage.setItem("_autoload", "no")
  }
  if(savecodeBtn.innerHTML.includes("null")){
   var saveCode=localStorage.setItem("saveCodeData", "when running");
  }
  // if(!autosaveBtn.innerHTML.includes("yes")||!autosaveBtn.innerHTML.includes("no")||!autoloadBtn.innerHTML.includes("yes")||!autoloadBtn.innerHTML.includes("yes")) {
  //  console.error("An error occured")
  // }
  })
  function changeColorOf(prop) {
   if(prop == "string") {
    localStorage.setItem("stringColor", colorString.value)
   };
   if(prop == "number") {
    localStorage.setItem("numberColor", colorNumber.value)
   };
   if(prop == "keyword") {
    localStorage.setItem("keywordColor", colorKeyword.value)
   };
   if(prop == "property") {
    localStorage.setItem("propertyColor", colorProperty.value)
   };
   if(prop == "variable") {
    localStorage.setItem("variableColor", colorVariable.value)
   };
   if(prop == "comment") {
    localStorage.setItem("commentColor", colorComment.value)
   };
   if(prop == "operator") {
    localStorage.setItem("operatorColor", colorOperator.value)
   };
  //  if(prop == 'keyword') {
  //   for(var i = 0; i < document.getElementsByClassName('cm-keyword').length; i++) {
  //    document.getElementsByClassName('cm-keyword')[i].style.color = "purple";
  //   };
  //  };
  //  if(prop == 'property') {
  //   for(var i = 0; i < document.getElementsByClassName('cm-property').length; i++) {
  //    document.getElementsByClassName('cm-property')[i].style.color = "purple";
  //   };
  //  };
  //  if(prop == 'comment') {
  //   for(var i = 0; i < document.getElementsByClassName('cm-string').length; i++) {
  //    document.getElementsByClassName('cm-string')[i].style.color = "purple";
  //   };
  //  };
  };


  // [FIX]: fix this please... :|
  // function saveScene(n) {
  //  localStorage.setItem(n, JSON.stringify(scene.toJSON()));
  //  console.log(localStorage.getItem("scene"));
  // };
  // function loadScene(n) {
  //  var json = (localStorage.getItem(n));
  //  if (json) {
  //   var loadedSceneAsJson = JSON.parse(json);
  //   var loader = new THREE.ObjectLoader();
  //   scene = loader.parse(loadedSceneAsJson);
  //  }
  //  else {
  //   terminal.warn('Cannot find scene: "'+n+'"');
  //  };
  // };
  function showInfo() {
   fnBreak=true;
   codeStatus.style.visibility="visible";
   controllerStatus.style.visibility="visible";
  }
  function hideInfo() {
   fnBreak=false;
   codeStatus.style.visibility="hidden";
   controllerStatus.style.visibility="hidden";
  }
  function resetCompilerColor(data) {
   if(data == "string") {
    localStorage.setItem("stringColor", "");
    colorString.value = "#fded02";
   };
   if(data == "number") {
    localStorage.setItem("numberColor", "");
    colorNumber.value = "#a16a94";
   };
   if(data == "keyword") {
    localStorage.setItem("keywordColor", "");
    colorKeyword.value = "#db2d20";
   };
   if(data == "property") {
    localStorage.setItem("propertyColor", "");
    colorProperty.value = "#01a252";
   };
   if(data == "variable") {
    localStorage.setItem("variableColor", "");
    colorVariable.value = "#01a252";
   };
   if(data == "comment") {
    localStorage.setItem("commentColor", "");
    colorComment.value = "#cdab53";
   };
   if(data == "operator") {
    localStorage.setItem("operatorColor", "");
    colorOperator.value = "#d6d5d4";
   };
  };
  function autosave() {
   if(localStorage.getItem("_autosave")=="no"){
    setTimeout(function(){localStorage.setItem("_autosave", "yes")},2)
   }
   if(localStorage.getItem("_autosave")=="yes"){
      setTimeout(function(){localStorage.setItem("_autosave", "no")},2)
   }
  }
  function savecode() {
   if(localStorage.getItem("saveCodeData")=="when running"){
    setTimeout(function(){localStorage.setItem("saveCodeData", "always")},2)
   }
   if(localStorage.getItem("saveCodeData")=="always"){
    setTimeout(function(){localStorage.setItem("saveCodeData", "when running")},2)
   }
  }
  function autoload() {
   if(localStorage.getItem("_autoload")=="no"){
    setTimeout(function(){localStorage.setItem("_autoload", "yes")},2)
   }
   if(localStorage.getItem("_autoload")=="yes"){
      setTimeout(function(){localStorage.setItem("_autoload", "no")},2)
   }
  }
  setInterval(function(){
  autosaveBtn.innerHTML="AutoSave: "+localStorage.getItem("_autosave")
  autosaveBtn.style.textShadow="0 0 2px #000000"
  errorShowHideBtn.innerHTML = "Errors: "+JSON.parse(localStorage.getItem("terminalData")).errors.toString().split("true").join("yes").split("false").join("no");
  infoShowHideBtn.innerHTML = "Info: "+JSON.parse(localStorage.getItem("terminalData")).info.toString().split("true").join("yes").split("false").join("no");
  successShowHideBtn.innerHTML = "Success: "+JSON.parse(localStorage.getItem("terminalData")).success.toString().split("true").join("yes").split("false").join("no");
  warnShowHideBtn.innerHTML = "Warn: "+JSON.parse(localStorage.getItem("terminalData")).warn.toString().split("true").join("yes").split("false").join("no");
  if(JSON.parse(localStorage.getItem("terminalData")).errors) {
    errorShowHideBtn.style.color = "lime";
   }; 
   if(!JSON.parse(localStorage.getItem("terminalData")).errors) {
    errorShowHideBtn.style.color = "red";
   }; 
   if(JSON.parse(localStorage.getItem("terminalData")).info) {
    infoShowHideBtn.style.color = "lime";
   }; 
   if(!JSON.parse(localStorage.getItem("terminalData")).info) {
    infoShowHideBtn.style.color = "red";
   }; 
   if(JSON.parse(localStorage.getItem("terminalData")).success) {
    successShowHideBtn.style.color = "lime";
   }; 
   if(!JSON.parse(localStorage.getItem("terminalData")).success) {
    successShowHideBtn.style.color = "red";
   }; 
   if(JSON.parse(localStorage.getItem("terminalData")).warn) {
    warnShowHideBtn.style.color = "lime";
   }; 
   if(!JSON.parse(localStorage.getItem("terminalData")).warn) {
    warnShowHideBtn.style.color = "red";
   }; 
  if(localStorage.getItem("saveCodeData")=="when running") {
    savecodeBtn.style.width = "162.5px";
   };
   if(localStorage.getItem("saveCodeData")=="always") {
    savecodeBtn.style.width = "123.2px";
   };
   if(localStorage.getItem("_autosave")=="yes"){
    autosaveBtn.style.color="#0f0"
   }
   if(localStorage.getItem("_autosave")=="no"){
    autosaveBtn.style.color="#ff0000"
   }
  
   savecodeBtn.innerHTML="Save code: "+localStorage.getItem("saveCodeData");
  
   autoloadBtn.innerHTML="AutoLoad: "+localStorage.getItem("_autoload")
   autoloadBtn.style.textShadow="0 0 2px #000000"
   if(localStorage.getItem("_autoload")=="yes"){
      autoloadBtn.style.color="#0f0"
   }
   if(localStorage.getItem("_autoload")=="no"){
      autoloadBtn.style.color="#ff0000"
   }
  
  
  
  
  
  
  
  
  })
      var fnBreak=false;
      var executed=0
Physijs.scripts.worker = 'Data/rendering/3D/Physics/js/physijs_worker3.js';
Physijs.scripts.ammo = 'Data/rendering/3D/Physics/js/ammo4.js';
var clock = new THREE.Clock();
const BoxGeometry = new THREE.BoxGeometry(20,20,20);
const SphereGeometry = new THREE.SphereGeometry(20,20,20);
var scene = new Physijs.Scene;
// scene.setGravity(new THREE.Vector3( 0, -10, 0 ));
scene.background=new THREE.Color(0.5,0.5,0.5);
var camera = new THREE.PerspectiveCamera(75,window.innerWidth/window.innerHeight,0.1,10000);
// camera.position.z=10
var renderer = new THREE.WebGLRenderer({ alpha: true });
renderer.setClearColor(new THREE.Color(0xaaaaff, 1.0));
renderer.shadowMapEnabled = true;
renderer.shadowMap.enabled = true;
renderer.shadowMap.type = THREE.PCFSoftShadowMap;
renderer.antialias = false;
renderer.setSize(window.innerWidth,window.innerHeight);
engineArea.appendChild(renderer.domElement);
// const material = new THREE.MeshNormalMaterial();
var thirdPersonDetector=setInterval(function() {
 for(var b=0;b<scene.children.length;b++) {
  if(typeof scene.children[b].thirdperson === 'object') {
    if(scene.children[b].thirdperson.rotationSpeed==0) {
     thirdPersonRotation=false;
    }
    if(!scene.children[b].thirdperson.enabled) {
    scene.children[b].thirdperson.movementSpeed=0;
    scene.children[b].thirdperson.rotationSpeed=0;
   }
  }
 }
})



function thirdPerson(prop) {
if(typeof prop.body._physijs === 'object') {
 terminal.warn("Third person cannot be applied to dynamic objects.");
}
else {
var goal;
var time = 0;
var newPosition = new THREE.Vector3();
var matrix = new THREE.Matrix4();
var velocity = 0.0;
var movementSpeed=0.01;
var rotationSpeed=-0.05;
var stop = 1;
var DEGTORAD = 0.01745327;
var temp = new THREE.Vector3;

if(prop&&prop!=="") {
 eval(prop);
}
prop.body["thirdperson"]={};
prop.body["thirdperson"]["enabled"]=true;
prop.body["thirdperson"]["movementSpeed"]=movementSpeed;
prop.body["thirdperson"]["rotationSpeed"]=rotationSpeed;

init();
animate();

function init() {
keys = {
    a: false,
    s: false,
    d: false,
    w: false
  };
    camera.position.set( 0, 0, 0.0001);
    
    camera.lookAt( scene.position );
    goal = new THREE.Object3D;
    
    prop.body.add( goal );
    scene.add( prop.body );
    
    goal.position.set(0, 2, -2);
    // goal.position.set(0,600,-155);
    

document.body.addEventListener( 'keydown', function(e) {
    
    const key = e.code.replace('Key', '').toLowerCase();
    if ( keys[ key ] !== undefined )
      keys[ key ] = true;
    
  });
  document.body.addEventListener( 'keyup', function(e) {
    
    const key = e.code.replace('Key', '').toLowerCase();
    if ( keys[ key ] !== undefined )
      keys[ key ] = false;
    
  });

}



function animate() {

    requestAnimationFrame( animate );
    
    temp.setFromMatrixPosition(goal.matrixWorld);
    
    camera.position.lerp(temp, 0.2);
    camera.lookAt( prop.body.position );
    
	sp = 0.0;
  
  if ( keys.w ) 
    sp = prop.body.thirdperson.movementSpeed; // 0.01 [default]
  else if ( keys.s )
    sp = -prop.body.thirdperson.movementSpeed; // -0.01 [default]

  velocity += ( sp - velocity ) * .3;
  prop.body.translateZ( velocity );

  if ( keys.a && thirdPersonRotation )
    prop.body.rotateY(-rotationSpeed); // -0.05 [default]
  else if ( keys.d && thirdPersonRotation )
    prop.body.rotateY(rotationSpeed); // 0.05 [default]
  }
 }
}
function createStaticCube(prop) {
  // __cGr(`
  //  position={x:`+position.x+`,y:`+position.y+`,z:`+position.z+`};
  //  scale={x:`+scale.x+`,y:`+scale.y+`,z:`+scale.z+`};
  //  color="`+color+`";
  // `);
 ground = new Physijs.BoxMesh(
  new THREE.CubeGeometry( 1, 1, 1 ),
  new THREE.MeshBasicMaterial(),
0);
//  if(prop&&prop!=="") {
//   eval(prop.split("this").join("ground"));
//  }
 ground.material.color.set(prop.color);
 ground.position.set(prop.position.x,prop.position.y,prop.position.z);
 ground.scale.set(prop.scale.x,prop.scale.y,prop.scale.z);
 scene.add( ground );
  // eval(`box = new Physijs.Mesh(
	// 				new THREE.CubeGeometry(1,1,1),
	// 				new THREE.MeshBasicMaterial({ color:"`+color+`"}) 
	// 			);
  //       `);
  //   box.scale.set(scale.x, scale.y, scale.z);
  //   box.position.set(position.x,position.y,position.z);
    if(prop.name) {
         box.name = prop.name;
        };
        scene.add( box );
}
setInterval(() => {
if(typeof game === 'object' && typeof game.bodies === 'object' && typeof game.bodies.length === 'number' && game.bodies.length>0) {
 for(var b=0;b<game.bodies.length;b++) {
  if(typeof scene.children[b] === 'object') {
  scene.children[b].rotation["object"]=scene.children[b];
  scene.children[b]["faceColor"]=function(face) {
   this.material = [
    new THREE.MeshPhongMaterial({color:face.right}),
    new THREE.MeshPhongMaterial({color:face.left}),
    new THREE.MeshPhongMaterial({color:face.front}),
    new THREE.MeshPhongMaterial({color:face.back}),
    new THREE.MeshPhongMaterial({color:face.bottom}),
    new THREE.MeshPhongMaterial({color:face.top}),
   ];
  };
  scene.children[b].rotation["axis"]=function(body,prop) {
    var speed=prop.speed;
    var sp=0.1;
    currentObject=this.object;
    currentObject.position.copy(body.position);
    function aR() {
    requestAnimationFrame(aR);
    sp+=prop.speed;
    currentObject.position.copy(body.position);
if(prop.axis.x) {
    currentObject.position.x = currentObject.position.x+Math.cos(sp) * body.scale.x;
}
if(prop.axis.y) {
   currentObject.position.y = currentObject.position.y+Math.cos(sp) * body.scale.y;
}
if(prop.axis.z) {
    currentObject.position.z = currentObject.position.z+Math.sin(sp) * body.scale.z;
}
   }
   aR();
  }
   }
  }
 }
}, 0);
function createDistortedObject(prop) {
  // baseSpeed, noiseScale, blendSpeed, blendOffset, bumpSpeed, bumpScale, texture, position[x,y,z], scale[x,y,z], transparency
  var lavaTexture = new THREE.ImageUtils.loadTexture( "Assets/Textures/"+prop.texture);
	lavaTexture.wrapS = lavaTexture.wrapT = THREE.RepeatWrapping; 
	var baseSpeed = prop.baseSpeed;
	var repeatS = repeatT = 4.0;
	var noiseTexture = new THREE.ImageUtils.loadTexture( 'Assets/Textures/cloud.png' );
	noiseTexture.wrapS = noiseTexture.wrapT = THREE.RepeatWrapping; 
	var noiseScale = prop.noiseScale;
	var blendTexture = new THREE.ImageUtils.loadTexture( "Assets/Textures/"+prop.texture );
	blendTexture.wrapS = blendTexture.wrapT = THREE.RepeatWrapping; 
	var blendSpeed = prop.blendSpeed;
	var blendOffset = prop.blendOffset;
	var bumpTexture = noiseTexture;
	bumpTexture.wrapS = bumpTexture.wrapT = THREE.RepeatWrapping; 
	var bumpSpeed   = prop.bumpSpeed;
	var bumpScale   = prop.bumpScale;
	if(!prop.transparency) {
  this.customUniforms = {
		baseTexture: 	{ type: "t", value: lavaTexture },
		baseSpeed:		{ type: "f", value: baseSpeed },
		repeatS:		{ type: "f", value: repeatS },
		repeatT:		{ type: "f", value: repeatT },
		noiseTexture:	{ type: "t", value: noiseTexture },
		noiseScale:		{ type: "f", value: noiseScale },
		blendTexture:	{ type: "t", value: blendTexture },
		blendSpeed: 	{ type: "f", value: blendSpeed },
		blendOffset: 	{ type: "f", value: blendOffset },
		bumpTexture:	{ type: "t", value: bumpTexture },
		bumpSpeed: 		{ type: "f", value: bumpSpeed },
		bumpScale: 		{ type: "f", value: bumpScale },
		alpha: 			{ type: "f", value: 1.0 }, // transparency (0 - 1)
		time: 			{ type: "f", value: 1.0 }
	};
}
else {
  this.customUniforms = {
		baseTexture: 	{ type: "t", value: lavaTexture },
		baseSpeed:		{ type: "f", value: baseSpeed },
		repeatS:		{ type: "f", value: repeatS },
		repeatT:		{ type: "f", value: repeatT },
		noiseTexture:	{ type: "t", value: noiseTexture },
		noiseScale:		{ type: "f", value: noiseScale },
		blendTexture:	{ type: "t", value: blendTexture },
		blendSpeed: 	{ type: "f", value: blendSpeed },
		blendOffset: 	{ type: "f", value: blendOffset },
		bumpTexture:	{ type: "t", value: bumpTexture },
		bumpSpeed: 		{ type: "f", value: bumpSpeed },
		bumpScale: 		{ type: "f", value: bumpScale },
		alpha: 			{ type: "f", value: prop.transparency }, // transparency (0 - 1)
		time: 			{ type: "f", value: 1.0 }
	};
}
	var customMaterial = new THREE.ShaderMaterial( 
	{
	    uniforms: customUniforms,
		vertexShader:   document.getElementById( 'fireball_vertexShader'   ).innerHTML,
		fragmentShader: document.getElementById( 'fireball_fragmentShader' ).innerHTML
	}   );
		
	var ballGeometry = new THREE.SphereGeometry( 60, 64, 64 );
	var ball = new THREE.Mesh(	ballGeometry, customMaterial );
	ball.position.set(prop.position.x,prop.position.y,prop.position.z);
  ball.scale.set(prop.scale.x,prop.scale.y,prop.scale.z);
  if(prop&&prop.name) {
   ball.name = prop.name;
  };
	scene.add( ball );
  zda = true;
}
function createBubble(prop) {
  source = prop.source;
var textureCube = THREE.ImageUtils.loadTextureCube(source)
textureCube.format = THREE.RGBFormat
var mesh = new THREEx.BubbleMesh(textureCube);
mesh.scale.set(prop.scale.x,prop.scale.y,prop.scale.z);
mesh.position.set(prop.position.x,prop.position.y,prop.position.z);
scene.add(mesh)
}
function skyBoxTest() {
  var materialArray = [];
	materialArray.push(new THREE.MeshBasicMaterial( { map: THREE.ImageUtils.loadTexture( 'Assets/SkyBox/xpos.png' ) }));
	materialArray.push(new THREE.MeshBasicMaterial( { map: THREE.ImageUtils.loadTexture( 'Assets/SkyBox/xneg.png' ) }));
	materialArray.push(new THREE.MeshBasicMaterial( { map: THREE.ImageUtils.loadTexture( 'Assets/SkyBox/ypos.png' ) }));
	materialArray.push(new THREE.MeshBasicMaterial( { map: THREE.ImageUtils.loadTexture( 'Assets/SkyBox/yneg.png' ) }));
	materialArray.push(new THREE.MeshBasicMaterial( { map: THREE.ImageUtils.loadTexture( 'Assets/SkyBox/zpos.png' ) }));
	materialArray.push(new THREE.MeshBasicMaterial( { map: THREE.ImageUtils.loadTexture( 'Assets/SkyBox/zneg.png' ) }));
	for (var i = 0; i < 6; i++) {
	   materialArray[i].side = THREE.BackSide;
    }
	var skyboxMaterial = new THREE.MeshFaceMaterial( materialArray );
	var skyboxGeom = new THREE.CubeGeometry( 5000, 5000, 5000, 1, 1, 1 );
	var skybox = new THREE.Mesh( skyboxGeom, skyboxMaterial );
	scene.add( skybox );		
}
function roundRect(ctx, x, y, w, h, r) 
{
    ctx.beginPath();
    ctx.moveTo(x+r, y);
    ctx.lineTo(x+w-r, y);
    ctx.quadraticCurveTo(x+w, y, x+w, y+r);
    ctx.lineTo(x+w, y+h-r);
    ctx.quadraticCurveTo(x+w, y+h, x+w-r, y+h);
    ctx.lineTo(x+r, y+h);
    ctx.quadraticCurveTo(x, y+h, x, y+h-r);
    ctx.lineTo(x, y+r);
    ctx.quadraticCurveTo(x, y, x+r, y);
    ctx.closePath();
    ctx.fill();
	ctx.stroke();   

}
function SkyBox(prop) {
  var materialArray = [];
  var xpos=prop.xpos;
  var xneg=prop.xneg;
  var ypos=prop.ypos;
  var yneg=prop.yneg;
  var zpos=prop.zpos;
  var zneg=prop.zneg;
	materialArray.push(new THREE.MeshBasicMaterial( { map: THREE.ImageUtils.loadTexture( 'Assets/Skybox/'+xpos+'.png' ) }));
	materialArray.push(new THREE.MeshBasicMaterial( { map: THREE.ImageUtils.loadTexture( 'Assets/Skybox/'+xneg+'.png' ) }));
	materialArray.push(new THREE.MeshBasicMaterial( { map: THREE.ImageUtils.loadTexture( 'Assets/Skybox/'+ypos+'.png' ) }));
	materialArray.push(new THREE.MeshBasicMaterial( { map: THREE.ImageUtils.loadTexture( 'Assets/Skybox/'+yneg+'.png' ) }));
	materialArray.push(new THREE.MeshBasicMaterial( { map: THREE.ImageUtils.loadTexture( 'Assets/Skybox/'+zpos+'.png' ) }));
	materialArray.push(new THREE.MeshBasicMaterial( { map: THREE.ImageUtils.loadTexture( 'Assets/Skybox/'+zneg+'.png' ) }));
	for (var i = 0; i < 6; i++) {
	   materialArray[i].side = THREE.BackSide;
    }
	var skyboxMaterial = new THREE.MeshFaceMaterial( materialArray );
	var skyboxGeom = new THREE.CubeGeometry( 5000, 5000, 5000, 1, 1, 1 );
	var skybox = new THREE.Mesh( skyboxGeom, skyboxMaterial );
	skybox.name="skybox";
  skybox["isSkybox"]=true;
  scene.add( skybox );	
}
function roundRect(ctx, x, y, w, h, r) 
{
    ctx.beginPath();
    ctx.moveTo(x+r, y);
    ctx.lineTo(x+w-r, y);
    ctx.quadraticCurveTo(x+w, y, x+w, y+r);
    ctx.lineTo(x+w, y+h-r);
    ctx.quadraticCurveTo(x+w, y+h, x+w-r, y+h);
    ctx.lineTo(x+r, y+h);
    ctx.quadraticCurveTo(x, y+h, x, y+h-r);
    ctx.lineTo(x, y+r);
    ctx.quadraticCurveTo(x, y, x+r, y);
    ctx.closePath();
    ctx.fill();
	ctx.stroke();   
}
window.addEventListener('wheel', function(event) {
 if (event.deltaY < 0) {
  window.dispatchEvent(new Event('scrollUp'));
 }
 else if (event.deltaY > 0) {
  window.dispatchEvent(new Event('scrollDown'));
 }
});
// window.addEventListener('scrollUp', function (e) {  }, false);
function makeTextSprite( message, parameters )
{
	if ( parameters === undefined ) parameters = {};
	
	var fontface = parameters.hasOwnProperty("fontface") ? 
		parameters["fontface"] : "Arial";
	
	var fontsize = parameters.hasOwnProperty("fontsize") ? 
		parameters["fontsize"] : 18;
	
	var borderThickness = parameters.hasOwnProperty("borderThickness") ? 
		parameters["borderThickness"] : 4;
	
	var borderColor = parameters.hasOwnProperty("borderColor") ?
		parameters["borderColor"] : { r:0, g:0, b:0, a:1.0 };
	
	var backgroundColor = parameters.hasOwnProperty("backgroundColor") ?
		parameters["backgroundColor"] : { r:255, g:255, b:255, a:1.0 };
		
	var canvas = document.createElement('canvas');
	var context = canvas.getContext('2d');
	context.font = "Bold " + fontsize + "px " + fontface;
    
	// get size data (height depends only on font size)
	var metrics = context.measureText( message );
	var textWidth = metrics.width;
	
	// background color
	context.fillStyle   = "rgba(" + backgroundColor.r + "," + backgroundColor.g + ","
								  + backgroundColor.b + "," + backgroundColor.a + ")";
	// border color
	context.strokeStyle = "rgba(" + borderColor.r + "," + borderColor.g + ","
								  + borderColor.b + "," + borderColor.a + ")";

	context.lineWidth = borderThickness;
	roundRect(context, borderThickness/2, borderThickness/2, textWidth + borderThickness, fontsize * 1.4 + borderThickness, 6);
	// 1.4 is extra height factor for text below baseline: g,j,p,q.
	
	// text color
	context.fillStyle = "rgba(0, 0, 0, 1.0)";

	context.fillText( message, borderThickness, fontsize + borderThickness);
	
	// canvas contents will be used for a texture
	var texture = new THREE.Texture(canvas) 
	texture.needsUpdate = true;

	var spriteMaterial = new THREE.SpriteMaterial( 
		{ map: texture, useScreenCoordinates: false } );
	var sprite = new THREE.Sprite( spriteMaterial );
	return sprite;	
};
function createSpriteText(prop) {
  // text="";
  // size={x:100,y:50,z:1.0};
  // var sprite = makeTextSprite( text, 
	// 	{ fontsize: fontsize, borderColor: borderColor, backgroundColor: backgroundColor } );
  var sprite = makeTextSprite( prop.text, 
	{ fontsize: prop.fontsize, 'borderColor': {r:1, g:0, b:0, a:0}, backgroundColor: {r:1, g:0, b:0, a:0}, color: {r:1, g:0, b:0, a:1.0} } );
  sprite.position.set(prop.position.x,prop.position.y,prop.position.z);
  sprite.scale.set(prop.scale.x,prop.scale.y,prop.scale.z);
 scene.add( sprite );
}
var spriteID=0;
var file = {
  image: {
   format: {
   checkIfValid: function (url) {
    var http = new XMLHttpRequest();
    http.open('HEAD', url, false);
    http.send();
    return http.status != 404;
   }
  }
 }
}
function createSprite(/*body,*/prop) {
  spriteID++;
  texture="";
  var spriteTexture;
  // if(file.image.format.checkIfValid("Assets/Textures/"+texture+".png")) {
  //  spriteTexture = THREE.ImageUtils.loadTexture( 'Assets/Textures/'+texture+'.jpg' );
  // }
  // if(!file.image.format.checkIfValid("Assets/Textures/"+texture+".jpg")) {
  //   spriteTexture = THREE.ImageUtils.loadTexture( 'Assets/Textures/'+texture+'.png' );
  // }
  spriteTexture = THREE.ImageUtils.loadTexture( 'Assets/Textures/'+prop.texture+'.png' );
  var spriteMaterial = new THREE.SpriteMaterial( { map: spriteTexture, useScreenCoordinates: false, color: 0xffffff } );
	var sprite = new THREE.Sprite( spriteMaterial );
  sprite.scale.set(prop.scale.x,prop.scale.y,prop.scale.z);
 sprite.position.set(prop.position.x,prop.position.y,prop.position.z);//  setInterval(function() {
//    sprite.position.set(body.position.x,body.position.y+1,body.position.z);
//   //  console.log(body.position.x,body.position.y+3,body.position.z)
//   });

  scene.add( sprite );
  setTimeout(function() {
  //  if(typeof sprite.material.map.image == "undefined" || typeof sprite.material.map.image == undefined) {
  //   terminal.error("An error occured when trying to load sprite #"+spriteID+'. Make sure you entered the texture name ('+texture+') correctly and that the sprite texture format is ".jpg" or ".png".');
  //  }
 },3)
}
function createReflectiveObject(prop) {
  if(scene.children.length==0) {
   terminal.warn("No skybox detected.");
  }
  for(var o=0;o<scene.children.length;o++) {
    if(typeof scene.children[o].isSkybox !== 'boolean' || scene.children[o].isSkybox !== true) {
    terminal.warn("No skybox detected.");
   }
    if(typeof scene.children[o].isSkybox === 'boolean' || scene.children[o].isSkybox === true) {
  shape="";
  if(prop.shape=="random") {
   shapes=[
     "cube",
     "sphere"
   ];
   shape=shapes[Math.floor(Math.random()*shapes.length)];
   eval(`
    createReflectiveObject({
     shape:"`+shape+`",
     position:{x:prop.position.x,y:prop.position.y,z:prop.position.z},
     scale:{x:prop.scale.x,y:prop.scale.y,z:prop.scale.z}
    })
   `);
  }
  if(prop.shape=="cube") {
  var cubeGeom = new THREE.CubeGeometry(1, 1, 1);
	mirrorCubeCamera = new THREE.CubeCamera( 0.1, 5000, 512 );
	scene.add( mirrorCubeCamera );
	var mirrorCubeMaterial = new THREE.MeshBasicMaterial( { envMap: mirrorCubeCamera.renderTarget } );
	mirrorCube = new THREE.Mesh( cubeGeom, mirrorCubeMaterial );
	// mirrorCube.position.set(-75,50,0);
	mirrorCubeCamera.position = mirrorCube.position;
  mirrorCube.position.set(prop.position.x,prop.position.y,prop.position.z);
  mirrorCube.scale.set(prop.scale.x,prop.scale.y,prop.scale.z);
	scene.add(mirrorCube);
  refCube=true;
 }
 if(prop.shape=="sphere") {
  var sphereGeom =  new THREE.SphereGeometry( 1, 1, 1 ); // radius, segmentsWidth, segmentsHeight
	mirrorSphereCamera = new THREE.CubeCamera( 0.1, 5000, 512 );
	scene.add( mirrorSphereCamera );
	var mirrorSphereMaterial = new THREE.MeshBasicMaterial( { envMap: mirrorSphereCamera.renderTarget } );
	mirrorSphere = new THREE.Mesh( sphereGeom, mirrorSphereMaterial );
	mirrorSphere.position.set(prop.position.x,prop.position.y,prop.position.z);
  mirrorSphere.scale.set(prop.scale.x,prop.scale.y,prop.scale.z);
	mirrorSphereCamera.position = mirrorSphere.position;
	scene.add(mirrorSphere);
  refSphere=true;
 }
 if(!shape=="cube"||!shape=="shape") {
    terminal.error("Unknown shape object: "+shape);
   }
  }
 }
}
var CkWhJlZjZoMwEoWkUkBgFzFbKbXdWkIaApOhEzKnQpMxEkPlMdVe = new THREE.Vector3(); // sun
var XeYyDjNlNeIuKuPyTvRbEoNwTzNtNrDiGpKuMfGiHbGnLaOmWiUz = new THREE.PMREMGenerator( renderer ); // pmremGenerator
function createSky(prop) {
 var sky = new THREE.Sky();
 UYC.background['sky'] = sky;
 UYC.background.sky['setAzimuth'] = function(a) {
  this.azimuth = a;
  _updateSun();
 };
 UYC.background.sky['setElevation'] = function(e) {
  this.elevation = e;
  _updateSun();
 };
 sky.scale.setScalar( 10000 );
 scene.add( sky );
 var skyUniforms = sky.material.uniforms;
 skyUniforms[ 'turbidity' ].value = 10;
 skyUniforms[ 'rayleigh' ].value = 2;
 skyUniforms[ 'mieCoefficient' ].value = 0.005;
 skyUniforms[ 'mieDirectionalG' ].value = 0.8;
 var parameters = {
 	elevation: 2,
 	azimuth: 180
 };
 UYC.background.sky['elevation'] = parameters.elevation;
 UYC.background.sky['azimuth'] = parameters.azimuth;
 _updateSun();
};
function _updateSun() {
 	var phi = THREE.Math.degToRad( 90 - UYC.background.sky.elevation );
  var theta = THREE.Math.degToRad( UYC.background.sky.azimuth );
 	CkWhJlZjZoMwEoWkUkBgFzFbKbXdWkIaApOhEzKnQpMxEkPlMdVe.setFromSphericalCoords( 1, phi, theta );
 	UYC.background.sky.material.uniforms[ 'sunPosition' ].value.copy( CkWhJlZjZoMwEoWkUkBgFzFbKbXdWkIaApOhEzKnQpMxEkPlMdVe );
 	scene.environment = XeYyDjNlNeIuKuPyTvRbEoNwTzNtNrDiGpKuMfGiHbGnLaOmWiUz.fromScene( UYC.background.sky ).texture;
 }
function createWater(prop) {
if(plugins&&plugins.hasOwnProperty('Shaders')) {
 var skybox = new THREE.CubeTextureLoader().load(UYC.background.skybox.getMaterials());
 var wG = new THREE.PlaneGeometry(100, 100);
 var water = new THREE.Water(wG);
 if(prop.color) {
 water.color = prop.color;
 };
 if(!prop.color) {
  water.color = 0xffffff;
 }
 if(prop.textureWidth) {
 water.color = prop.textureWidth;
 };
 if(!prop.textureWidth) {
  water.textureWidth = 512;
 }
 if(prop.textureHeight) {
 water.color = prop.textureHeight;
 };
 if(!prop.textureHeight) {
  water.textureHeight = 512;
 }
 if(prop.clipBias) {
 water.color = prop.clipBias;
 };
 if(!prop.clipBias) {
  water.clipBias = 0;
 }
 if(prop.flowDirection) {
 water.color = prop.flowDirection;
 };
 if(!prop.flowDirection) {
  water.flowDirection = new THREE.Vector2( 1, 0 ); // checkmark
 }
 if(prop.flowSpeed) {
 water.color = prop.flowSpeed;
 };
 if(!prop.flowSpeed) {
  water.flowSpeed = 0.03;
 }
 if(prop.reflectivity) {
 water.color = prop.reflectivity;
 };
 if(!prop.reflectivity) {
  water.reflectivity = 0.02;
 }
 if(prop.scale) {
 water.color = prop.scale;
 };
 if(!prop.scale) {
  water.scale = 1;
 }
 if(prop.normalMap0) {
 water.color = prop.normalMap0;
 };
 if(!prop.normalMap0) {
  water.normalMap0 = textureLoader.load('Assets/Textures/Water_1_M_Normal.jpg');
 }
 if(prop.normalMap1) {
 water.color = prop.normalMap1;
 };
 if(!prop.normalMap1) {
  water.normalMap1 = textureLoader.load('Assets/Textures/Water_2_M_Normal.jpg');
 }
 if(prop.cycle) {
 water.color = prop.cycle;
 };
 if(!prop.cycle) {
  water.cycle = 0.15;
 }
//  var water = new THREE.Water(wG, {
//   color: "0xffffff",
//   textureWidth: 512,
//   textureHeight: 512,
//   clipBias: 0,
//   flowDirection: new THREE.Vector2( 1, 0 ),
//   flowSpeed: 0.03,
//   reflectivity: 0.02,
//   scale: 1,
//   normalMap0: textureLoader.load('Assets/Textures/filename.format'),
//   normalMap1: textureLoader.load('Assets/Textures/filename.format'),
//   cycle: 0.15
//  });
 water.rotation.x = -1.57;
 water.position.set(prop.position.x,prop.position.y,prop.position.z);
 scene.add(water);
};
if(!plugins||plugins&&!plugins.hasOwnProperty('Shaders')) {
texture="";
waterObj=true;
var noiseTexture;
var waterTexture;
if(!prop.texture) {
 texture="Assets/Textures/water.jpg";
 noiseTexture = new THREE.ImageUtils.loadTexture( texture );
	noiseTexture.wrapS = noiseTexture.wrapT = THREE.RepeatWrapping; 
waterTexture = new THREE.ImageUtils.loadTexture( texture );
waterTexture.wrapS = waterTexture.wrapT = THREE.RepeatWrapping; 

}
if(prop.texture && !prop.noiseTexture) {
noiseTexture = new THREE.ImageUtils.loadTexture( "Assets/Textures/water.jpg" );
noiseTexture.wrapS = noiseTexture.wrapT = THREE.RepeatWrapping; 
waterTexture = new THREE.ImageUtils.loadTexture( "Assets/Textures/"+prop.texture );
waterTexture.wrapS = waterTexture.wrapT = THREE.RepeatWrapping; 
}	
if(!prop.texture && prop.noiseTexture) {
noiseTexture = new THREE.ImageUtils.loadTexture( "Assets/Textures/"+prop.texture );
noiseTexture.wrapS = noiseTexture.wrapT = THREE.RepeatWrapping; 
waterTexture = new THREE.ImageUtils.loadTexture( "Assets/Textures/water.jpg" );
waterTexture.wrapS = waterTexture.wrapT = THREE.RepeatWrapping; 
}	
if(prop.texture && prop.noiseTexture) {
noiseTexture = new THREE.ImageUtils.loadTexture( "Assets/Textures/"+prop.noiseTexture );
noiseTexture.wrapS = noiseTexture.wrapT = THREE.RepeatWrapping; 
waterTexture = new THREE.ImageUtils.loadTexture( "Assets/Textures/"+prop.texture );
waterTexture.wrapS = waterTexture.wrapT = THREE.RepeatWrapping; 
}	
		this.customUniforms2 = {
		baseTexture: 	{ type: "t", value: waterTexture },
		baseSpeed: 		{ type: "f", value: prop.baseSpeed },
		noiseTexture: 	{ type: "t", value: noiseTexture },
		noiseScale:		{ type: "f", value: prop.noiseScale },
		alpha: 			{ type: "f", value: prop.alpha },
		time: 			{ type: "f", value: prop.time }
	};
  
	var customMaterial2 = new THREE.ShaderMaterial( 
	{
	    uniforms: customUniforms2,
		vertexShader:   document.getElementById( 'water_vertexShader'   ).innerHTML,
		fragmentShader: document.getElementById( 'water_fragmentShader' ).innerHTML
	}   );
	customMaterial2.side = THREE.DoubleSide;
	customMaterial2.transparent = true;
	var flatGeometry = new THREE.PlaneGeometry( 100, 100 );
    water = new Physijs.PlaneMesh( flatGeometry, customMaterial2 )
    if(prop.custom) {
     eval(`water.`+prop.custom.split(",").join(";water."));
    }
    setInterval(function() {
     if(prop.fixed) {
      water.__dirtyPosition=true;
      water.__dirtyRotation=true;
     }
     else {
      water.__dirtyPosition=false;
      water.__dirtyRotation=false;
     }
    });
    water.position.set(prop.position.x,prop.position.y,prop.position.z);
    water.scale.set(prop.scale.x,prop.scale.y,prop.scale.z);
	  scene.add( water );	
  };
 }
//  createBoxWithRoundedEdges({radius:.25,smoothness:3,material:'phong',position:{x:0,y:5,z:-5},scale:{x:1,y:1,z:1}})
 function createBoxWithRoundedEdges(prop) {
  let shape = new THREE.Shape();
  let eps = 0.00001;
  let rad = prop.radius - eps;
  shape.absarc( eps, eps, eps, -Math.PI / 2, -Math.PI, true );
  shape.absarc( eps, prop.scale.y -  rad * 2, eps, Math.PI, Math.PI / 2, true );
  shape.absarc( prop.scale.x - rad * 2, prop.scale.y -  rad * 2, eps, Math.PI / 2, 0, true );
  shape.absarc( prop.scale.x - rad * 2, eps, eps, 0, -Math.PI / 2, true );
  geometry = new THREE.ExtrudeBufferGeometry( shape, {
    amount: prop.scale.z - prop.radius * 2,
    bevelEnabled: true,
    bevelSegments: prop.smoothness * 2,
    steps: 1,
    bevelSize: rad,
    bevelThickness: prop.radius,
    curveSegments: prop.smoothness
  });
  geometry.center();
  eval(`
   var mat=new THREE.Mesh`+prop.material.charAt(0).toUpperCase() + prop.material.slice(1)+`Material();
   var geo=geometry;
   var me=new THREE.Mesh(geo, mat);
   me.position.set(prop.position.x,prop.position.y,prop.position.z);
   // me.scale.set(prop.scale.x,prop.scale.y,prop.scale.z);
   scene.add(me);
  `);
}
function createShape(prop) {

  if(prop.shape.split(" ")[1]=="Cube") {
    if(prop.shape.split(" ")[2]=="Dynamic") {
  eval(`box = new Physijs.`+prop.shape.split(" ")[1].split("Cube").join("Box")+`Mesh(
					new THREE.`+prop.shape.split(" ")[1]+`Geometry(1,1,1),
					new THREE.Mesh`+prop.shape.split(" ")[0]+`Material({ color:'`+prop.color+`'}) 
				);
        `);
        box.scale.set(prop.scale.x,prop.scale.y,prop.scale.z);
        box.position.set(prop.position.x,prop.position.y,prop.position.z);
        if(prop.rotation&&prop.rotation!=="") {
         box.rotation.set(prop.rotation.x,prop.rotation.y,prop.rotation.z);
        };
        if(prop.name) {
         box.name = prop.name;
        };
        scene.add( box );

    }
    if(prop.shape.split(" ")[2]=="Static") {
  eval(`box = new THREE.`+`Mesh(
					new THREE.`+prop.shape.split(" ")[1]+`Geometry(1,1,1),
					new THREE.Mesh`+prop.shape.split(" ")[0]+`Material({ color:'`+prop.color+`'}) 
				);
        `);
        box.scale.set(prop.scale.x,prop.scale.y,prop.scale.z);
    box.position.set(prop.position.x,prop.position.y,prop.position.z);
    if(prop.rotation&&prop.rotation!=="") {
     box.rotation.set(prop.rotation.x,prop.rotation.y,prop.rotation.z);
    };
    if(prop.name) {
         box.name = prop.name;
         scene.add( box );
        };
        scene.add( box );
    }
    if(prop.custom&&prop.custom!=="") {
  eval(prop.custom.split('this').join("box"));
 }
  }
  if(prop.shape.split(" ")[1]=="Plane") {
    if(prop.shape.split(" ")[2]=="Dynamic") {
  eval(`box = new Physijs.`+prop.shape.split(" ")[1].split("Cube")+`Mesh(
					new THREE.`+prop.shape.split(" ")[1]+`Geometry(1,1,1),
					new THREE.Mesh`+prop.shape.split(" ")[0]+`Material({ color:'`+prop.color+`'}) 
				);
        `);
    box.scale.set(prop.scale.x,prop.scale.y,prop.scale.z);
    box.position.set(prop.position.x,prop.position.y,prop.position.z);
    if(prop.rotation&&prop.rotation!=="") {
     box.rotation.set(prop.rotation.x,prop.rotation.y,prop.rotation.z);
    };
    }
    if(prop.shape.split(" ")[2]=="Static") {
  eval(`box = new THREE.`+`Mesh(
					new THREE.`+prop.shape.split(" ")[1]+`Geometry(1,1,1),
					new THREE.Mesh`+prop.shape.split(" ")[0]+`Material({ color:'`+prop.color+`'}) 
				);
        `);
        box.scale.set(prop.scale.x,prop.scale.y,prop.scale.z);
    box.position.set(prop.position.x,prop.position.y,prop.position.z);
    if(prop.rotation&&prop.rotation!=="") {
     box.rotation.set(prop.rotation.x,prop.rotation.y,prop.rotation.z);
    };
    if(prop.name) {
         box.name = prop.name;
        };
        scene.add( box );
    }
    if(prop.custom&&prop.custom!=="") {
  eval(prop.custom.split('this').join("box"));
 }
	if(prop.name) {
         box.name = prop.name;
        };
        scene.add( box );
  }
  if(prop.shape.split(" ")[1]=="Sphere") {
    if(prop.shape.split(" ")[2]=="Dynamic") {
  eval(`box = new Physijs.`+prop.shape.split(" ")[1].split("Cube")+`Mesh(
					new THREE.`+prop.shape.split(" ")[1]+`Geometry(`+prop.radius+`, 24, 24), // (1,6,8)
					new THREE.Mesh`+prop.shape.split(" ")[0]+`Material({ color:'`+prop.color+`'}) 
				);
        `);
      console.log(`box = new Physijs.`+prop.shape.split(" ")[1].split("Cube")+`Mesh(
					new THREE.`+prop.shape.split(" ")[1]+`Geometry(`+prop.radius+`, 24, 24), // (1,6,8)
					new THREE.Mesh`+prop.shape.split(" ")[0]+`Material({ color:'`+prop.color+`'}) 
				);
        `);
    box.scale.set(prop.scale.x,prop.scale.y,prop.scale.z);
    box.position.set(prop.position.x,prop.position.y,prop.position.z);
    if(prop.rotation&&prop.rotation!=="") {
     box.rotation.set(prop.rotation.x,prop.rotation.y,prop.rotation.z);
    };
    }
    if(prop.shape.split(" ")[2]=="Static") {
  eval(`box = new THREE.`+`Mesh(
					new THREE.`+prop.shape.split(" ")[1]+`Geometry(`+prop.radius+`, 24, 24), // (1,1,1)
					new THREE.Mesh`+prop.shape.split(" ")[0]+`Material({ color:'`+prop.color+`'}) 
				);
        `);
        box.scale.set(prop.scale.x,prop.scale.y,prop.scale.z);
    box.position.set(prop.position.x,prop.position.y,prop.position.z);
    if(prop.rotation&&prop.rotation!=="") {
     box.rotation.set(prop.rotation.x,prop.rotation.y,prop.rotation.z);
    };
    if(prop.name) {
         box.name = prop.name;
        };
        scene.add( box );
    }
    if(prop.custom&&prop.custom!=="") {
  eval(prop.custom.split('this').join("box"));
 }
	if(prop.name) {
         box.name = prop.name;
        };
        scene.add( box );
  }
  if(prop.shape.split(" ")[1]=="Cylinder") {
    if(prop.shape.split(" ")[2]=="Dynamic") {
  eval(`box = new Physijs.`+prop.shape.split(" ")[1].split("Cube")+`Mesh(
					new THREE.`+prop.shape.split(" ")[1]+`Geometry(1),
					new THREE.Mesh`+prop.shape.split(" ")[0]+`Material({ color:'`+prop.color+`'}) 
				);
        `);
    box.scale.set(prop.scale.x,prop.scale.y,prop.scale.z);
    box.position.set(prop.position.x,prop.position.y,prop.position.z);
    if(prop.rotation&&prop.rotation!=="") {
     box.rotation.set(prop.rotation.x,prop.rotation.y,prop.rotation.z);
    };
    }
    if(prop.shape.split(" ")[2]=="Static") {
  eval(`box = new THREE.`+`Mesh(
					new THREE.`+prop.shape.split(" ")[1]+`Geometry(1,1,1),
					new THREE.Mesh`+prop.shape.split(" ")[0]+`Material({ color:'`+prop.color+`'}) 
				);
        `);
        box.scale.set(prop.scale.x,prop.scale.y,prop.scale.z);
    box.position.set(prop.position.x,prop.position.y,prop.position.z);
    if(prop.rotation&&prop.rotation!=="") {
     box.rotation.set(prop.rotation.x,prop.rotation.y,prop.rotation.z);
    };
    if(prop.name) {
         box.name = prop.name;
        };
        scene.add( box );
    }
	if(prop.name) {
         box.name = prop.name;
        };
        scene.add( box );
  }
  if(prop.shape.split(" ")[1]=="Cone") {
    if(prop.shape.split(" ")[2]=="Dynamic") {
  eval(`box = new Physijs.`+prop.shape.split(" ")[1].split("Cube")+`Mesh(
					new THREE.`+prop.shape.split(" ")[1]+`Geometry(1),
					new THREE.Mesh`+prop.shape.split(" ")[0]+`Material({ color:'`+prop.color+`'}) 
				);
        `);
    box.scale.set(prop.scale.x,prop.scale.y,prop.scale.z);
    box.position.set(prop.position.x,prop.position.y,prop.position.z);
    if(prop.rotation&&prop.rotation!=="") {
     box.rotation.set(prop.rotation.x,prop.rotation.y,prop.rotation.z);
    };
    }
    if(prop.shape.split(" ")[2]=="Static") {
  eval(`box = new THREE.`+`Mesh(
					new THREE.`+prop.shape.split(" ")[1]+`Geometry(1,1,1),
					new THREE.Mesh`+prop.shape.split(" ")[0]+`Material({ color:'`+prop.color+`'}) 
				);
        `);
        box.scale.set(prop.scale.x,prop.scale.y,prop.scale.z);
    box.position.set(prop.position.x,prop.position.y,prop.position.z);
    if(prop.rotation&&prop.rotation!=="") {
     box.rotation.set(prop.rotation.x,prop.rotation.y,prop.rotation.z);
    };
    if(prop.name) {
         box.name = prop.name;
        };
        scene.add( box );
    }
    if(prop.custom&&prop.custom!=="") {
  eval(prop.custom.split('this').join("box"));
 }
	if(prop.name) {
         box.name = prop.name;
        };
        scene.add( box );
  }
  if(prop.shape.split(" ")[1]=="Capsule") {
    if(prop.shape.split(" ")[2]=="Dynamic") {
  eval(`box = new Physijs.`+prop.shape.split(" ")[1].split("Cube")+`Mesh(
					new THREE.CylinderGeometry(1),
					new THREE.Mesh`+prop.shape.split(" ")[0]+`Material({ color:'`+prop.color+`'}) 
				);
        `);
    box.scale.set(prop.scale.x,prop.scale.y,prop.scale.z);
    box.position.set(prop.position.x,prop.position.y,prop.position.z);
    if(prop.rotation&&prop.rotation!=="") {
     box.rotation.set(prop.rotation.x,prop.rotation.y,prop.rotation.z);
    };
    }
    if(prop.shape.split(" ")[2]=="Static") {
  eval(`box = new THREE.`+`Mesh(
					new THREE.`+prop.shape.split(" ")[1]+`Geometry(1,1,1),
					new THREE.Mesh`+prop.shape.split(" ")[0]+`Material({ color:'`+prop.color+`'}) 
				);
        `);
        box.scale.set(prop.scale.x,prop.scale.y,prop.scale.z);
    box.position.set(prop.position.x,prop.position.y,prop.position.z);
    if(prop.rotation&&prop.rotation!=="") {
     box.rotation.set(prop.rotation.x,prop.rotation.y,prop.rotation.z);
    };
    if(prop.name) {
         box.name = prop.name;
        };
        scene.add( box );
    }
    if(prop.custom&&prop.custom!=="") {
  eval(prop.custom.split('this').join("box"));
 }
	if(prop.name) {
         box.name = prop.name;
        };
        scene.add( box );
  }
  if(prop.shape.split(" ")[1]=="Convex") {
    if(prop.shape.split(" ")[2]=="Dynamic") {
  eval(`box = new Physijs.`+prop.shape.split(" ")[1]+`Mesh(
					new THREE.BoxGeometry(1),
					new THREE.Mesh`+prop.shape.split(" ")[0]+`Material({ color:'`+prop.color+`'}) 
				);
        `);
    box.scale.set(prop.scale.x,prop.scale.y,prop.scale.z);
    box.position.set(prop.position.x,prop.position.y,prop.position.z);
    if(prop.rotation&&prop.rotation!=="") {
     box.rotation.set(prop.rotation.x,prop.rotation.y,prop.rotation.z);
    };
    }
    if(prop.shape.split(" ")[2]=="Static") {
  eval(`box = new THREE.`+`Mesh(
					new THREE.`+prop.shape.split(" ")[1]+`Geometry(1,1,1),
					new THREE.Mesh`+prop.shape.split(" ")[0]+`Material({ color:'`+prop.color+`'}) 
				);
        `);
        box.scale.set(prop.scale.x,prop.scale.y,prop.scale.z);
    box.position.set(prop.position.x,prop.position.y,prop.position.z);
    if(prop.rotation&&prop.rotation!=="") {
     box.rotation.set(prop.rotation.x,prop.rotation.y,prop.rotation.z);
    };
    if(prop.name) {
         box.name = prop.name;
        };
        scene.add( box );
    }
    if(prop.custom&&prop.custom!=="") {
  eval(prop.custom.split('this').join("box"));
 }
	if(prop.name) {
         box.name = prop.name;
        };
        scene.add( box );
  }
  if(prop.shape.split(" ")[1]=="Concave") {
    if(prop.shape.split(" ")[2]=="Dynamic") {
  eval(`box = new Physijs.SphereMesh(
					new THREE.`+prop.shape.split(" ")[1]+`Geometry(1),
					new THREE.Mesh`+prop.shape.split(" ")[0]+`Material({ color:'`+prop.color+`'}) 
				);
        `);
    box.scale.set(prop.scale.x,prop.scale.y,prop.scale.z);
    box.position.set(prop.position.x,prop.position.y,prop.position.z);
    if(prop.rotation&&prop.rotation!=="") {
     box.rotation.set(prop.rotation.x,prop.rotation.y,prop.rotation.z);
    };
    }
    if(prop.shape.split(" ")[2]=="Static") {
  eval(`box = new THREE.`+`Mesh(
					new THREE.`+prop.shape.split(" ")[1]+`Geometry(1,1,1),
					new THREE.Mesh`+prop.shape.split(" ")[0]+`Material({ color:'`+prop.color+`'}) 
				);
        `);
        box.scale.set(prop.scale.x,prop.scale.y,prop.scale.z);
    box.position.set(prop.position.x,prop.position.y,prop.position.z);
    if(prop.rotation&&prop.rotation!=="") {
     box.rotation.set(prop.rotation.x,prop.rotation.y,prop.rotation.z);
    };
    if(prop.name) {
         box.name = prop.name;
        };
        scene.add( box );
    }
    if(prop.custom&&prop.custom!=="") {
  eval(prop.custom.split('this').join("box"));
 }
	if(prop.name) {
         box.name = prop.name;
        };
        scene.add( box );
  }

  if(prop.shape.split(" ")[1]=="Torus") {
    if(prop.shape.split(" ")[2]=="Dynamic") {
  eval(`box = new Physijs.SphereMesh(
					new THREE.`+prop.shape.split(" ")[1]+`Geometry(1),
					new THREE.Mesh`+prop.shape.split(" ")[0]+`Material({ color:'`+prop.color+`'}) 
				);
        `);
    box.scale.set(prop.scale.x,prop.scale.y,prop.scale.z);
    box.position.set(prop.position.x,prop.position.y,prop.position.z);
    if(prop.rotation&&prop.rotation!=="") {
     box.rotation.set(prop.rotation.x,prop.rotation.y,prop.rotation.z);
    };
    }
    if(prop.shape.split(" ")[2]=="Static") {
  eval(`box = new THREE.`+`Mesh(
					new THREE.`+prop.shape.split(" ")[1]+`Geometry(10, 3, 16, 100),
					new THREE.Mesh`+prop.shape.split(" ")[0]+`Material({ color:'`+prop.color+`'}) 
				);
        `);
        box.scale.set(prop.scale.x,prop.scale.y,prop.scale.z);
    box.position.set(prop.position.x,prop.position.y,prop.position.z);
    if(prop.rotation&&prop.rotation!=="") {
     box.rotation.set(prop.rotation.x,prop.rotation.y,prop.rotation.z);
    };
    if(prop.name) {
         box.name = prop.name;
        };
        scene.add( box );
    }
    if(prop.custom&&prop.custom!=="") {
  eval(prop.custom.split('this').join("box"));
 }
	if(prop.name) {
         box.name = prop.name;
        };
        scene.add( box );
  }

}
function setGravity(axis) {
 scene.setGravity(new THREE.Vector3(axis.x,axis.y,axis.z));
}
function setBodyQuality(body,quality) {
var aBQ=setInterval(function(){
 if(typeof body.material.normalScale == "object") {
   if(quality=="low") {
    clearInterval(aBQ);
    setTimeout(() => {
      terminal.clear();
    }, 3);
    body.material.normalScale.set(0,0);
   }
   if(quality=="medium") {
    clearInterval(aBQ);
    setTimeout(() => {
      terminal.clear();
    }, 3);
    body.material.normalScale.set(2,2);
   }
   if(quality=="high") {
    clearInterval(aBQ);
    setTimeout(() => {
      terminal.clear();
    }, 3);
    body.material.normalScale.set(15,15);
   }
   setTimeout(function() {
    if(quality!=="low"&&quality!=="medium"&&quality!=="high") {
     clearInterval(aBQ);
     terminal.error("Quality: "+quality+" doesn't exist.");
    //  alert(quality!=="high")
    }
   },3)
  }
  if(typeof body.name === 'string') {
   terminal.log("Applying: "+quality+" quality to "+body.name+"...")
  }
  if(!typeof body.name === 'string') {
   terminal.log("Applying: "+quality+" quality to body #"+body.id+"...")
  }
  setTimeout(function() {
   if(typeof body.material.normalScale == "object" === false) {
    clearInterval(aBQ);
    terminal.warn('The object material denied the WebGL renderer to allow the quality system. Changing the material '+'"'+body.material.type.split("Mesh").join("").split("Material").join("")+'"'+' to another material will fix it. No changes were made.');
   }
   if(typeof body.material.normalScale == "object" === true&&body.material.normalMap==null) {
    clearInterval(aBQ);
    terminal.warn('The object you selected doesn\'t have the "normalMap" property applied. Add it by using the addNormalTexture function. No changes were made.');
   }
  },1000);
 });
}
function createSquare(position,scale) {
 var sq = new THREE.Geometry();
 sq.vertices.push(new THREE.Vector3(0, 0, 0));
 sq.vertices.push(new THREE.Vector3(0, 100, 0));
 sq.vertices.push(new THREE.Vector3(100, 100, 0));
 sq.vertices.push(new THREE.Vector3(100, 0, 0));
 sq.vertices.push(new THREE.Vector3(0, 0, 0));
 sq.faces.push(new THREE.Face3(0, 1, 2));
 sq.faces.push(new THREE.Face3(0, 3, 2));
 var line = new THREE.Line(sq, new THREE.LineBasicMaterial({ color: "#ffffff", opacity: 0.5 }));
 line.scale.set(scale.x,scale.y,scale.z);
 line.position.set(position.x,position.y,position.z);
 scene.add(line);
}
function removeAsset(name) {
 localStorage.setItem("assets", localStorage.getItem("assets").replace("asset_"+name+",", "")) || localStorage.setItem("assets", localStorage.getItem("assets").replace(",asset_"+name, ""));
};
function removeAllAssets() {
 localStorage.setItem("assets", "");
 localStorage.setItem("lastTitle2", "");
 localStorage.setItem("lastScript", "");
 window.location.reload();
};
function removeBodies(p) {
 if(typeof p === 'object' && !p.amount) {
  for(var i = 0; i < p.length; i++) {
   removeBody(getBodyByIndex(p[i]));
  };
 };
 if(typeof p === 'number') {
  removeBody(getBodyByIndex(p));
 };
 if(typeof p == '*') {
 for(var i = 0; i < game.bodies.length; i++) {
   removeBody(getBodyByIndex(i));
  };
 };
 if(p&&p.amount) {
  for(var i = 0; i < p.amount; i++) {
   removeBody(getBodyByIndex(i));
  };
 };
};
Array.prototype.add = function(o) {
 this.push(o);
};
Array.prototype.merge=Array.prototype.concat;
Array.prototype.random = function(o) {
 return this[Math.floor(Math.random() * this.length)];
};
Array.prototype.includes = function(o) {
 for(var i = 0; i < this.length; i++) {
  if(this[i] == o) {
   return true;
  };
 };
};
Array.prototype.remove = function(prop, incl) {
//  if(prop.startsWith("Value")) {
  // var index = this.indexOf(prop.split("=>")[1].split(" ").join(""));
  
 if(!incl) {
  var index = this.indexOf(prop);
  if (index > -1) {
   this.splice(index, 1);
  };
  return this;
 }
 else {
  for( var i = 0; i < this.length; i++){ 
   if ( this[i].includes(prop)) { 
    this.splice(i, 1); 
   };
  };
 };
//  };
//  if(prop.startsWith("Index")) {
//   var index = this.indexOf(prop.split("=>")[1].split(" ").join(""));
//   if (index > -1) {
//    this.splice(index, 1);
//   };
//   return this;
//  };
};
Array.prototype.removeAll = function(value) {
  var i = 0;
  while (i < this.length) {
    if (this[i] === value) {
      this.splice(i, 1);
    } else {
      ++i;
    }
  }
  return this;
}
Array.prototype.omit = function(o) {
 return this.filter(item => !o.includes(item));
 // "o" must be an array
};
Array.prototype.discompose = function(prop, incl, tar) {
 if(!incl) {
  var index = this.indexOf(prop);
  if (index > -1) {
   console.log(index);
   this.splice(index, 1);
  };
  return this;
 }
 else {
  for( var i = 0; i < this.length; i++){ 
   if ( this[i].includes(prop)) { 
    window[tar] = this[i];
    this.splice(i, 1); 
   };
  };
 };
};
Element.prototype.isVisible = function() {
 if(this.style.visibility == 'visible') {
  return true;
 }
 if(this.style.visibility == 'hidden') {
  return false;
 }
}
Element.prototype.setSource = function(source) {
 if(this.tagName == "IMG") {
  elemID = this.id;
  this.previousSource = this.src.split("/")[count("/ in GUI.getById(elemID).src")];
  this.src = "Assets/Textures/" + source;
 }
 else {
  terminal.warn("Can't change the source of a(n) "+this.tagName+" element.");
 }
}
Element.prototype.fadeOut = function(speed) {
 var fader;
 if(this.tagName == "AUDIO") {
  var elemID = this.id;
  fader = setInterval(() => {
   this.volume-=0.02
   if(eval(this.id).volume <= 0.1) {
    clearInterval(fader);
    this.volume = 0;
   };
  },speed);
 }
 else {
  terminal.warn("Can't fade out a(n) "+this.tagName+" element.");
 }

//  if(this.tagName == "DIV") {
//   var elemID = this.id;
//   fader = setInterval(() => {
//    this.style.opacity-=0.02
//    if(eval(this.id).style.opacity <= 0.1) {
//     clearInterval(fader);
//     this.style.opacity = 0;
//    };
//   },speed);
//  }
//  else {
//   terminal.warn("Can't fade out a(n) "+this.tagName+" element.");
//  }

}
Element.prototype.fadeIn = function(speed, onEnd) {
 var fader;
 if(this.tagName == "AUDIO") {
  var elemID = this.id;
  fader = setInterval(() => {
   this.volume+=0.02
   if(eval(this.id).volume >= 0.9) {
    clearInterval(fader);
    this.volume = 1;
   };
  },speed);
 }
 else {
  terminal.warn("Can't fade in a(n) "+this.tagName+" element.");
 }

//  if(this.tagName == "DIV") {
//   var elemID = this.id;
//   fader = setInterval(() => {
//    this.style.opacity+=0.02
//    if(eval(this.id).style.opacity >= 0.9) {
//     clearInterval(fader);
//     this.style.opacity = 1;
//     if(onEnd&&onEnd !== '') {
//      var param = onEnd.toString().getCharBetween('function( & )');
//      var tok = generateToken(5);
//      eval(onEnd.toString().split("function(").join("function "+tok+"("+param+")")+";"+tok+"();");
//      console.log(onEnd.toString().split("function(").join("function "+tok+"("+param+")")+";"+tok+"();");
//     };
//    };
//   },speed);
//  }
//  else {
//   terminal.warn("Can't fade in a(n) "+this.tagName+" element.");
//  }

}
// function separateText(text,space) {
//  var spacing="";
//  var finalText;
//  for(var s=0;s<space;s++) {
//   spacing+=" ";
//   finalText=text.split("").join(spacing);
//  }
//  return finalText;
// }
String.prototype.spacing = function(space) {
 var spacing="";
 var finalText;
 for(var s=0;s<space;s++) {
  spacing+=" ";
  finalText=this.split("").join(spacing);
 }
 return finalText;
};
String.prototype.$_iB = function(s, n) {
 return this.split(s)[0]+n+this.split(s)[1];
};
String.prototype.insertBefore = function(s, n) {
 return this.split(s)[0]+n+s+this.split(s)[1];
};
String.prototype.insertAfter = function(s, n) {
 return this.split(s)[0]+s+n+this.split(s)[1];
};
function random(r, r2) {
 if(typeof r == "object") {
  return r[Math.floor(Math.random()*r.length)];
 };
 if(typeof r == "number" && r > r2) {
  return Math.floor(Math.random() * (r2 - r + 1) + r);
 };
 if(typeof r == "number" && r2 > r) {
  return Math.floor(Math.random() * (r - r2 + 1) + r2);
 };
};
function removeAllElementsWithID(id) {
 var ID_Finder = setInterval(() => {
 for(var i = 0; i < document.querySelectorAll("*").length; i++) {
  if(document.querySelectorAll("*")[i].getAttribute("id") == id) {
    document.querySelectorAll("*")[i].remove();
   };
  };
  if(typeof document.getElementById(id) !== 'object' || document.getElementById(id) == null) {
    clearInterval(ID_Finder);
   };
 });
};
var GUI = {
  addImage: function(prop) {
//  scale={x:1,y:1};
// stackOrder=true;
   var IMG=document.createElement("img")
  //  IMG.previousSource = prop.source;
   IMG.src="Assets/Textures/"+prop.source;
   IMG.id=prop.id
   if(prop.custom) {
    eval(`IMG.`+prop.custom.split(",").join(";IMG."));
   }
   if(prop.stackOrder&&prop.stackOrder!==""){
     IMG.style.zIndex=prop.stackOrder;
   }
   else {
     IMG.style.zIndex=5
   }
   IMG.style.position="absolute"
   IMG.style.left=prop.position.x;
   IMG.style.top=prop.position.y;
   IMG.style.width=prop.scale.x;
   IMG.style.height=prop.scale.y;
   document.body.appendChild(IMG)
  },
  collisionDetection: (function () {
    function getPositions( elem ) {
        var pos, width, height;
        pos = $( elem ).position();
        width = $( elem ).width() / 2;
        height = $( elem ).height();
        return [ [ pos.left, pos.left + width ], [ pos.top, pos.top + height ] ];
    }

    function comparePositions( p1, p2 ) {
        var r1, r2;
        r1 = p1[0] < p2[0] ? p1 : p2;
        r2 = p1[0] < p2[0] ? p2 : p1;
        return r1[1] > r2[0] || r1[0] === r2[0];
    }

    return function ( a, b ) {
        var pos1 = getPositions( a ),
            pos2 = getPositions( b );
        return comparePositions( pos1[0], pos2[0] ) && comparePositions( pos1[1], pos2[1] );
    };
})(),
  createGroup: function(name) {
   var group = document.createElement("div");
   group.id = name;
   group["add"] = function(elem) {
    if(elem && elem !== "") {
     this.append(elem);
    };
   };
   window.document.body.appendChild(group);
  },
  addVideo: function(prop, onload) {
   var video = document.createElement("video");
   video.src = "Assets/Videos/" + prop.src + ".mp4";
   video.id = prop.id;
   if(prop.loop) {
    video.loop = prop.loop;
   };
   if(prop.playing) {
    if(prop.playing == true) {
     video.play();
    };
    if(prop.playing == false) {
     return false;
    };
    if(prop.playing !== true && prop.playing !== false) {
     if(prop.id) {
      terminal.warn('The "playing" property at the video element with the ID: "' + prop.id + '" (' + prop.playing + ') is not a boolean.');
     };
     if(!prop.id) {
      terminal.warn('The "playing" property at one of the video element(s) (' + prop.playing + ') is not a boolean.');
     };
    };
   };
   video.style.position = "absolute";
   if(prop&&prop.position) {
    video.style.left = prop.position.x;
    video.style.top = prop.position.y;
   };
   if(prop&&prop.scale) {
    video.style.width = prop.scale.x;
    video.style.height = prop.scale.y;
   };
   if(prop&&prop.custom) {
    eval(prop.custom.split("this").join("video.style"));
   };
   var param = onload.toString().getCharBetween('function( & )');
   video.onloadstart = function() {
    var fncV = generateToken(5);
    eval(onload.toString().split("function(").join("function "+fncV+"(")+";"+fncV+"();");
    // eval(onload);
   };
   document.body.appendChild(video);
  },
  addFrame: function(customProp) {
   var frame=document.createElement("div");
   frame.style.cursor='url("Cursors/'+UYC.cursor.info.theme+'_'+UYC.cursor.info.color+'.png"), auto';
   if(customProp&&customProp.custom) {
    // console.log(customProp.custom.split("this").join("frame.style"));
    eval(customProp.custom.split("this").join("frame.style"));
   }
   if(customProp&&customProp.image) {
    frame.style.backgroundImage=`url('`+customProp.image+`')`;
   };
   frame.style.position="absolute";
   frame.style.left=customProp.position.x+'px';
   frame.style.top=customProp.position.y+'px';
   frame.style.width=customProp.scale.x;
   frame.style.height=customProp.scale.y;
   if(customProp&&!customProp.image) {
    frame.style.background=customProp.color;
   };
   if(customProp&&customProp.id) {
    // console.log(customProp.id);
    frame.id=customProp.id;
   };
   frame.style.zIndex=5;
  //  frame.id="frame";
   document.body.appendChild(frame);
  },
  addButton: function(customProp) {
  var btn=document.createElement("button");
  // if(customProp&&customProp!=="") {
  //  eval(customProp.split('this').join('btn'));
  // }
  if(customProp&&customProp.text) {
   btn.innerHTML=customProp.text;
  }
  else {
   btn.innerHTML="";
  };
  if(customProp&&customProp.font) {
   btn.style.fontFamily=customProp.font;
  }
  if(customProp&&customProp.fontSize) {
   btn.style.fontSize=customProp.fontSize;
  }
  // console.log(pos.split("y")[1].split("}")[0].split(":").join("").split("=").join(""));
  //.split("=>").join(":").split("=>")[0]+":"+st.split("=>")[1]+";"
  // btn.setAttributeNS(null,"style",st.split("=>").join(":").split(",").join(";"))
  btn.setAttributeNS(null,"id",customProp.id)
  btn.style.left=customProp.position.x;
  btn.style.position="absolute";
  btn.style.width=customProp.scale.x;
  btn.style.height=customProp.scale.y;
  btn.style.zIndex=5
  btn.style.top=customProp.position.y;
  //  alert(pos.split("x:")[1].split(",")[0] + " / " + pos.split("y:")[1].split("}")[0])
  document.body.appendChild(btn)
  },
  hide: function(elem, index) {
   if(document.getElementById(elem)) {
    if(!index||index&&index=="") {
     document.querySelectorAll("#"+elem)[0].style.visibility='hidden';
    };
    if(index&&index!=="") {
     document.querySelectorAll("#"+elem)[index].style.visibility='hidden';
    };
    if(index&&typeof index!=='number') {
      terminal.warn(index+" is not a number. You need to insert a number, not a "+typeof index+".");
    };
   };
   if(typeof document.getElementsByClassName(elem)[0] === 'object') {
    if(!index||index&&index=="") {
     document.querySelectorAll("."+elem)[index].style.visibility='hidden';
    };
    if(index&&index!=="") {
     document.querySelectorAll("."+elem)[index].style.visibility='hidden';
    };
    if(index&&typeof index!=='number') {
      terminal.warn(index+" is not a number. You need to insert a number, not a "+typeof index+".");
    };
   };
   if(!document.getElementById(elem)&&typeof document.getElementsByClassName(elem)[0]!=='object') {
    terminal.warn('"'+elem+'" is not an element. Please make sure you added a name or an ID to the specific element.');
   };
   if(elem=="[object HTMLCollection]") {
    terminal.warn('Please make sure you typed the name/id of the element inside a string. Eg: hide("...") instead of hide(...)');
   };
  },
  show: function(elem, index) {
   if(document.getElementById(elem)) {
    if(!index||index&&index=="") {
     document.querySelectorAll("#"+elem)[0].style.visibility='visible';
    };
    if(index&&index!=="") {
     document.querySelectorAll("#"+elem)[index].style.visibility='visible';
    };
    if(index&&typeof index!=='number') {
      terminal.warn(index+" is not a number. You need to insert a number, not a "+typeof index+".");
    };
   };
   if(typeof document.getElementsByClassName(elem)[0] === 'object') {
    if(!index||index&&index=="") {
     document.querySelectorAll("."+elem)[index].style.visibility='visible';
    };
    if(index&&index!=="") {
     document.querySelectorAll("."+elem)[index].style.visibility='visible';
    };
    if(index&&typeof index!=='number') {
      terminal.warn(index+" is not a number. You need to insert a number, not a "+typeof index+".");
    };
   };
   if(!document.getElementById(elem)&&typeof document.getElementsByClassName(elem)[0]!=='object') {
    terminal.warn('"'+elem+'" is not an element. Please make sure you added a name or an ID to the specific element.');
   };
   if(elem=="[object HTMLCollection]") {
    terminal.warn('Please make sure you typed the name/id of the element inside a string. Eg: hide("...") instead of hide(...)');
   };
  },
  getById: function(id) {
   return document.getElementById(id);
  },
  addHeading:function(prop) {
   headerText=document.createElement("span");
   headerText.id = prop.id
   if(prop.color) {
    headerText.style.color = prop.color;
   };
   if(prop&&prop.custom) {
    console.log(prop.custom.split("this").join("headerText.style"));
    eval(prop.custom.split("this").join("headerText.style"));
   }
   function customTyper() {
   if(i < prop.text.length) {
    headerText.innerHTML+=prop.text.charAt(i);
    i++
    setTimeout(customTyper, 50);
   }
  }
   if(prop.autoTyping==true) {
     customTyper()
}
   if(prop.text && prop.autoTyping==false || prop.text && !prop.autoTyping) {
   headerText.innerHTML=prop.text;
}
  //  headerText.setAttributeNS(null,"style",st.split("=>")[0]+":"+st.split("=>")[1]+";")
  //  headerText.setAttributeNS(null,"id",id)
  headerText.style.fontWeight=prop.stroke;
   headerText.style.fontSize=prop.fontSize;
   headerText.style.left=prop.position.x;
   headerText.style.position="absolute";
   headerText.style.zIndex=5;
   headerText.style.top=prop.position.y;
   //  alert(pos.split("x:")[1].split(",")[0] + " / " + pos.split("y:")[1].split("}")[0])
   document.body.appendChild(headerText)
  }
}
function setText(id, txt) {
//  alert(typeof id);
 if(typeof id!=='object') {
  eval("document.getElementById('"+id+"').innerHTML='"+txt+"'")
 };
 if(typeof id=='object' && id.isText) {
  removeBody(id);
  createText({text: txt, scale: {x:id.scale.x,y:id.scale.y,z:id.scale.z}, position: {x:id.position.x,y:id.position.y,z:id.position.z}, rotation: {x:id.rotation.x,y:id.rotation.y,z:id.rotation.z},name:id.name});
 };
 if(typeof id=='object' && !id.isText) {
  terminal.log("You can only change text to text objects.");
 };
}
function createText(prop) {
  var loader = new THREE.FontLoader();
  var textGeo
  var textConfig=prop.text;

loader.load( 'https://unpkg.com/three@0.77.0/examples/fonts/helvetiker_bold.typeface.json', function ( font ) {
    textGeo = new THREE.TextGeometry( textConfig, {

        font: font,

        size: prop.scale.z,
        height: prop.scale.y,
        curveSegments: prop.curveSegments, // 20
        bevelThickness: prop.bevelThickness, // 0.1
        bevelSize: prop.bevelSize, // 0.1
        bevelEnabled: prop.bevelEnabled // false

    } );

    var textMaterial = new THREE.MeshPhongMaterial( { color: prop.color } );

    var mesh = new Physijs.Mesh( textGeo, textMaterial );
    mesh.position.set( prop.position.x, prop.position.y, prop.position.z );
    if(prop.rotation) {
     mesh.rotation.set( prop.rotation.x, prop.rotation.y, prop.rotation.z );
    };
    mesh.scale.set(prop.scale.x, prop.scale.y, prop.scale.z );
    if(prop.name) {
     mesh.name=prop.name;
    };
    mesh['isText'] = true;
    mesh['setColor'] = function(c) {
    // console.log('0x' + UYC.convert.color("color_to_hex => " + c));
     this.material.color.setHex('0x' + UYC.convert.color("color_to_hex => " + c));
    };
    scene.add( mesh );
} );
}
function setWireframe(body,val) {
 if(body == "*") {
  for(var o = 0; o < game.bodies.length; o++) {
   if(getBodyByIndex(o).type == "Mesh") {
    getBodyByIndex(o).material.wireframe = val;
   };
  };
 };
 if(body !== "*") {
  body.material.wireframe=val;
 };
}
function addGlow(body,prop) {
  scale={x:body.scale.x+1,y:body.scale.y+1,z:body.scale.z+1};
  position={x:body.position.x,y:body.position.y,z:body.position.z};
  if(prop.fixed) {
  var updateFcts = [];
	var geometry = body.geometry;
	var material = body.material;
	var glowMesh = new THREEx.GeometricGlowMesh(body);
  if(prop.scale) {
   glowMesh.object3d.scale.set(prop.scale.x,prop.scale.y,prop.scale.z);
  }
  if(!prop.scale) {
   glowMesh.object3d.scale.set(scale.x,scale.y,scale.z);
  }
  // if(!prop.scale) {}
  if(prop.name&&prop.name!=="") {
    glowMesh.object3d.name=prop.name;
  }
  glowMesh.object3d['isGlow']=true;
  body.add(glowMesh.object3d);
	var insideUniforms	= glowMesh.insideMesh.material.uniforms
	insideUniforms.glowColor.value.set(prop.color)
	var outsideUniforms	= glowMesh.outsideMesh.material.uniforms
	outsideUniforms.glowColor.value.set(prop.color)
	var lastTimeMsec= null
	requestAnimationFrame(function animate(nowMsec){
		requestAnimationFrame( animate );
    if(typeof getBodyByName(name) === 'object') {
		lastTimeMsec = lastTimeMsec || nowMsec-1000/60
		var deltaMsec = Math.min(200, nowMsec - lastTimeMsec)
		lastTimeMsec = nowMsec
		updateFcts.forEach(function(updateFn){
			updateFn(deltaMsec/1000, nowMsec/1000)
		})
	}})
  }
  if(!prop.fixed) {
  var spriteMaterial = new THREE.SpriteMaterial( 
	{ 
		map: new THREE.ImageUtils.loadTexture( 'Assets/Textures/glow.png' ), 
		useScreenCoordinates: false, color: prop.color, transparent: false, blending: THREE.AdditiveBlending
	});
	var sprite = new THREE.Sprite( spriteMaterial );
  spriteMaterial.transparent = true;
  if(prop.scale) {
	 sprite.scale.set(prop.scale.x,prop.scale.y,prop.scale.z);
  }
  if(!prop.scale) {
   sprite.scale.set(scale.x,scale.y,scale.z);
  }
  if(prop.position) {
   sprite.position.set(prop.position.x,prop.position.y,prop.position.z);
  }
  if(!prop.position) {
   sprite.position.set(position.x,position.y,position.z);
  }
  // console.log('size: {\nx: '+size.x+'\ny: '+size.y+'\nz: '+size.z+"\n}"+'\n\nposition: {\nx: '+position.x+'\ny: '+position.y+'\nz: '+position.z+"\n}")
  if(prop.name&&prop.name!=="") {
   sprite.name=prop.name;
  }
  scene.add(sprite);
}
}
function addTexture(body,texture) {
 var textureCheck=setInterval(function() {
  if(file.image.format.checkIfValid("Assets/Textures/"+texture+".png")) {
  //  terminal.clear();
  //  setTimeout(function(){
  //    terminal.clear();
  //  },3)
   body.material.map = new THREE.TextureLoader().load("Assets/Textures/"+texture+".png");
   body.material['texture'] = "Assets/Textures/"+texture+".png";
   body.material.needsUpdate = true;
   clearInterval(textureCheck);
  }
  else {
   if(file.image.format.checkIfValid("Assets/Textures/"+texture+".jpg")) {
    // terminal.clear();
    // setTimeout(function(){
    //  terminal.clear();
    // },3)
    body.material.map = new THREE.TextureLoader().load("Assets/Textures/"+texture+".jpg"); //jpg btw
    body.material['texture'] = "Assets/Textures/"+texture+".jpg";
    body.material.needsUpdate = true;
    clearInterval(textureCheck);
   }
  }
  // terminal.log("Loading texture: "+texture+"...");
  //console.clear();
  setTimeout(function() {
    clearInterval(textureCheck);
    if(body.material.map == null || body.material.map == null && typeof body.material.map.image === 'undefined' || body.material.map == null && typeof body.material.map.image === undefined) {
     terminal.error('Couldn\'t load image texture "'+texture+'".');
    }
  },3)
 })
};
function addNormalTexture(body,normalTexture) {
// var textureCheck=setInterval(() => {
//  if(file.image.format.checkIfValid("Assets/Textures/"+normalTexture+".jpg")) {
//  clearInterval(textureCheck); 
// body.material.normalMap = new THREE.TextureLoader().load("Assets/Textures/"+normalTexture+".jpg");
//   body.material.needsUpdate = true;
//  }
//  else {
//   if(file.image.format.checkIfValid("Assets/Textures/"+normalTexture+".png")) {
//    clearInterval(textureCheck);
//    body.material.normalMap = new THREE.TextureLoader().load("Assets/Textures/"+normalTexture+".png");
//    body.material.needsUpdate = true;
//    }
//   }
//   setTimeout(function() {
//     clearInterval(textureCheck);
//     if(body.material.normalMap == null) {
//      terminal.error('Couldn\'t load image texture "'+normalTexture+'".');
//     }
//   },1000)
//  })
 body.material.normalMap = new THREE.TextureLoader().load("Assets/Textures/"+normalTexture);
 body.material.needsUpdate = true;
}
function setEmissive(body,rgb) {
  body.material.emissive.r=rgb.r;
  body.material.emissive.g=rgb.g;
  body.material.emissive.b=rgb.b;
}
function setOpacity(body,val) {
 body.material.opacity=val;
}
function setTransparency(body,bool) {
 body.material.transparent=bool;
}
// function wrapTexture() {
 
// }
var terrain_material;
var terrain_geometry;
function perspectiveCamera() {
  camera = new THREE.PerspectiveCamera(75,window.innerWidth/window.innerHeight,0.1,10000);
  UYC.camera.type="Perspective";
}
function orthographicCamera() {
  camera = new THREE.OrthographicCamera(window.innerWidth / -16, window.innerWidth / 16, window.innerHeight / 16, window.innerHeight / -16, -200, 500);
  UYC.camera.type="Orthographic";
}
function createAmbientLight(color) {
 var ambientLight = new THREE.AmbientLight(color);
 scene.add(ambientLight);
}
function createPointLight(prop) {
 color=prop.color;
 distance=prop.distance;
 var pointLight = new THREE.PointLight(prop.color);
 pointLight.position.set(prop.position.x,prop.position.y,prop.position.z);
 pointLight.distance = prop.distance;
//  if(prop.power) {
//   pointLight.power = prop.power;
//  }
//  if(prop.intensity) {
//   pointLight.intensity = prop.intensity;
//  };
 if(prop.name) {
  pointLight.name = prop.name;
 };
 pointLight['setColor']=function(c) {
  this.color.setHex('0x' + UYC.convert.color("color_to_hex => " + c));
 };
 scene.add(pointLight);
}
var helper
function createAreaLight(prop) {
 var areaLight = new THREE.RectAreaLight();
 areaLight.color.set(prop.color);
 areaLight.intensity=prop.intensity;
 areaLight.width=prop.scale.x;
 areaLight.height=prop.scale.y;
 areaLight.position.set(prop.position.x,prop.position.y,prop.position.z);
 helper = new THREE.RectAreaLightHelper( areaLight );
 var customHelperGeometry = new THREE.PlaneGeometry(prop.scale.x, prop.scale.y);
 var customHelperMaterial = new THREE.MeshBasicMaterial( { 
        color: prop.color, side: THREE.FrontSide } );
 var customHelper = new Physijs.Mesh(customHelperGeometry, customHelperMaterial);
 setInterval(function(){
  customHelper.scale.copy(areaLight.scale);
  customHelper.position.copy(areaLight.position);
  customHelper.rotation.copy(areaLight.rotation);
 })
//  alert("posX: "+posX+"\nposY: "+posY+"\nposZ: "+posZ+"\nintensity: "+intensity+"\nwidth: "+width+"\nheight: "+height+"\ncolor: "+color+"\nhelper: "+help+"\ncustomProp: "+customProp)
 customHelper.add(new Physijs.Mesh(customHelperGeometry, new THREE.MeshBasicMaterial( { wireframe: true } ) ) );
 if(prop.visible) {
   scene.add(customHelper);
 } // fix the god damn arealight, come on man :\
 light = new THREE.DirectionalLight();
 light.color.set(prop.color);
 light.position.set(0.00001,0.00001,0.00001);
 light.rotation.set(areaLight.rotation.x,0,areaLight.rotation.y);
 light.scale.set(areaLight.width/2,areaLight.height/2,0.00001);
 light.distance = prop.distance;
 light.intensity = prop.intensity;
 scene.add(areaLight);
 areaLight.add(light);
//  scene.add( helper );
}
function createLensflare(prop) {
  var textureLoader = new THREE.TextureLoader();
  textureFlare0 = textureLoader.load("https://s3-us-west-2.amazonaws.com/s.cdpn.io/123879/sun.png");
  //https://s3-us-west-2.amazonaws.com/s.cdpn.io/123879/sun.png
  textureFlare2 = textureLoader.load("https://s3-us-west-2.amazonaws.com/s.cdpn.io/123879/lensflare2.png");
  textureFlare3 = textureLoader.load("https://s3-us-west-2.amazonaws.com/s.cdpn.io/123879/lensflare3.png");
  var lensFlare = new THREE.LensFlare(textureFlare0, 700, 0.0, THREE.AdditiveBlending, new THREE.Color(prop.color));
  lensFlare.add(textureFlare3, 60, 0.6, THREE.AdditiveBlending);
  lensFlare.add(textureFlare3, 70, 0.7, THREE.AdditiveBlending);
  lensFlare.add(textureFlare3, 120, 0.9, THREE.AdditiveBlending);
  lensFlare.add(textureFlare3, 70, 1.0, THREE.AdditiveBlending);
  //lensFlare.position.set(0,0,0);
  lensFlare.position.set(prop.position.x,prop.position.y,prop.position.z);
  if(prop.name!==""){
   lensFlare.name=prop.name;
  }
  scene.add(lensFlare);
}
function createHemisphereLight(prop) {
  var hemiLight = new THREE.HemisphereLight(prop.skyColor, prop.color, prop.intensity);
  hemiLight.position.set(0, 0, 0);
  if(prop.name) {
   hemiLight.name = prop.name;
  };
  scene.add(hemiLight);
}
function createDirectionalLight(prop) {
  var DTTNT = new THREE.DirectionalLight();
  DTTNT.color.set(prop.color);
  DTTNT.position.set(prop.position.x,prop.position.y,prop.position.z);
  DTTNT.distance = prop.distance;
  DTTNT.intensity = prop.intensity;
  scene.add(DTTNT);
}
function createAzimuth(prop) {
 var DTTNT = new THREE.DirectionalLight(prop.color);
 var step=0;
 setInterval(function(){
 step += prop.speed;
 DTTNT.position.z = -8;
 DTTNT.position.y = +(27 * (Math.sin(step / 3)));
 DTTNT.position.x = 10 + (26 * (Math.cos(step / 3)));
 });
 DTTNT.castShadow = true;
 DTTNT.shadowCameraNear = 2;
 DTTNT.shadowCameraFar = 200;
 DTTNT.shadowCameraLeft = -50;
 DTTNT.shadowCameraRight = 50;
 DTTNT.shadowCameraTop = 50;
 DTTNT.shadowCameraBottom = -50;
 DTTNT.distance = 0;
 DTTNT.intensity = 0.5;
 DTTNT.shadowMapHeight = 1024;
 DTTNT.shadowMapWidth = 1024;
 scene.add(DTTNT);
}
function createFog(prop) {
 //createFog("#ffffff", 10, 0.5);
 scene.fog = new THREE.Fog(prop.color, prop.near, prop.far);
}
function createGroup(name) {
  group = new THREE.Group();
  group['getChildrenByIndex']=function(index) {
   return eval("this.children["+index+"]");
  }
  group['getChildrenByName']=function(name) {
    return eval("this.getObjectByName('"+name+"')");
  }
  group['getAllChildrens']=function() {
   for(var i = 0; i < this.children.length; i++) {
    
   }
  }
  group['removeBodies']=function(p) {
 if(p&&p.amount) {
  for(var i = 0; i < p.amount; i++) {
   this.remove(this.children[0]);
  };
 };
};
  scene.add(group);
  window.eval("var "+name+" = group");
}
function createMinecraftTerrain(x,y) {
  var worldWidth = 128, worldDepth = 128,
			worldHalfWidth = worldWidth / 2, worldHalfDepth = worldDepth / 2,
			data = generateHeight( x, y );
			// var clockTime = new THREE.Clock();

var matrix = new THREE.Matrix4();

				var pxGeometry = new THREE.PlaneBufferGeometry( 100, 100 );
				pxGeometry.attributes.uv.array[ 1 ] = 0.5;
				pxGeometry.attributes.uv.array[ 3 ] = 0.5;
				pxGeometry.rotateY( Math.PI / 2 );
				pxGeometry.translate( 50, 0, 0 );

				var nxGeometry = new THREE.PlaneBufferGeometry( 100, 100 );
				nxGeometry.attributes.uv.array[ 1 ] = 0.5;
				nxGeometry.attributes.uv.array[ 3 ] = 0.5;
				nxGeometry.rotateY( - Math.PI / 2 );
				nxGeometry.translate( - 50, 0, 0 );

				var pyGeometry = new THREE.PlaneBufferGeometry( 100, 100 );
				pyGeometry.attributes.uv.array[ 5 ] = 0.5;
				pyGeometry.attributes.uv.array[ 7 ] = 0.5;
				pyGeometry.rotateX( - Math.PI / 2 );
				pyGeometry.translate( 0, 50, 0 );

				var pzGeometry = new THREE.PlaneBufferGeometry( 100, 100 );
				pzGeometry.attributes.uv.array[ 1 ] = 0.5;
				pzGeometry.attributes.uv.array[ 3 ] = 0.5;
				pzGeometry.translate( 0, 0, 50 );

				var nzGeometry = new THREE.PlaneBufferGeometry( 100, 100 );
				nzGeometry.attributes.uv.array[ 1 ] = 0.5;
				nzGeometry.attributes.uv.array[ 3 ] = 0.5;
				nzGeometry.rotateY( Math.PI );
				nzGeometry.translate( 0, 0, -50 );

				var tmpGeometry = new THREE.Geometry();
				var pxTmpGeometry = new THREE.Geometry().fromBufferGeometry( pxGeometry );
				var nxTmpGeometry = new THREE.Geometry().fromBufferGeometry( nxGeometry );
				var pyTmpGeometry = new THREE.Geometry().fromBufferGeometry( pyGeometry );
				var pzTmpGeometry = new THREE.Geometry().fromBufferGeometry( pzGeometry );
				var nzTmpGeometry = new THREE.Geometry().fromBufferGeometry( nzGeometry );

				for ( var z = 0; z < worldDepth; z ++ ) {

					for ( var x = 0; x < worldWidth; x ++ ) {

						var h = getY( x, z );

						matrix.makeTranslation(
							x * 100 - worldHalfWidth * 100,
							h * 100,
							z * 100 - worldHalfDepth * 100
						);

						var px = getY( x + 1, z );
						var nx = getY( x - 1, z );
						var pz = getY( x, z + 1 );
						var nz = getY( x, z - 1 );

						tmpGeometry.merge( pyTmpGeometry, matrix );

						if ( ( px !== h && px !== h + 1 ) || x === 0 ) {

							tmpGeometry.merge( pxTmpGeometry, matrix );

						}

						if ( ( nx !== h && nx !== h + 1 ) || x === worldWidth - 1 ) {

							tmpGeometry.merge( nxTmpGeometry, matrix );

						}

						if ( ( pz !== h && pz !== h + 1 ) || z === worldDepth - 1 ) {

							tmpGeometry.merge( pzTmpGeometry, matrix );

						}

						if ( ( nz !== h && nz !== h + 1 ) || z === 0 ) {

							tmpGeometry.merge( nzTmpGeometry, matrix );

						}

					}

				}

				var geometry = new THREE.BufferGeometry().fromGeometry( tmpGeometry );
				geometry.computeBoundingSphere();

				var texture = new THREE.TextureLoader().load( 'Data/rendering/3D/three.js-dev/examples/textures/minecraft/test.png' );
				texture.magFilter = THREE.NearestFilter;
				texture.minFilter = THREE.LinearMipMapLinearFilter;

				var mesh = new Physijs.Mesh( geometry, new THREE.MeshLambertMaterial( { map: texture } ) );
				scene.add( mesh );
function generateHeight( width, height ) {
				var data = [], perlin = new THREE.ImprovedNoise(),
				size = width * height, quality = 2, z = Math.random() * 100;
				for ( var j = 0; j < 4; j ++ ) {
					if ( j === 0 ) for ( var i = 0; i < size; i ++ ) data[ i ] = 0;
					for ( var i = 0; i < size; i ++ ) {
						var x = i % width, y = ( i / width ) | 0;
						data[ i ] += perlin.noise( x / quality, y / quality, z ) * quality;
					}
					quality *= 1;
				}
				return data;
  }
	function getY( x, z ) {

				return ( data[ x + z * worldWidth ] * 0.2 ) | 0;

			}
}
function createTerrain(prop/*,textureQuality*/) {
  // createTerrain({color: 'green', textureRepeat: 20, scale: {x: 5, y:5, z:5}, position: {x: 0, y:-15, z: 0}, texture: 'grass.png'});
  terrain_material = Physijs.createMaterial(
			new THREE.MeshStandardMaterial({color:prop.color}),
			.8,
			.4
		);
      chosenTexture="Assets/Textures/"+prop.texture;
      terrain_material.map=new THREE.TextureLoader().load( chosenTexture );

    if(terrain_material.map) {
     terrain_material.map.wrapS = terrain_material.map.wrapT = THREE.RepeatWrapping;
     terrain_material.map.wrapT = terrain_material.map.wrapS = THREE.RepeatWrapping;
	   terrain_material.map.repeat.set( chosenTexture, chosenTexture );
      if(prop.textureRepeat<0) {
        terminal.warn("Texture repeat can't be lower than 0. Texture repeat has been set to default value (0)");
       }
       if(prop.textureRepeat>20) {
        terminal.warn("Texture repeat can't be higher than 20. Texture repeat has been set to default value (0)");
       }
       else {
      terrain_material.map.repeat.width=prop.textureRepeat;
      terrain_material.map.repeat.height=prop.textureRepeat;
      terrain_material.map.repeat.x=prop.textureRepeat;
      terrain_material.map.repeat.y=prop.textureRepeat;
       }
     }
    terrain_geometry = new THREE.PlaneGeometry( 75, 75, 50, 50 );
		noiseGen=new SimplexNoise;
    for ( var i = 0; i < terrain_geometry.vertices.length; i++ ) {
			var vertex = terrain_geometry.vertices[i];
			vertex.z = noiseGen.noise( vertex.x / 10, vertex.y / 10 ) * 2;
		}
		terrain_geometry.computeFaceNormals();
		terrain_geometry.computeVertexNormals();
    terrain = new Physijs.HeightfieldMesh(
			terrain_geometry,
			terrain_material,
			0, // mass
			50,
			50
		);
  terrain.rotation.x = Math.PI / -2;
  // terrain.position.y = -10;
  terrain.position.set(prop.position.x,prop.position.y,prop.position.z);
  terrain.scale.set(prop.scale.x,prop.scale.y,prop.scale.z);
  scene.add(terrain)
  console.log(terrain.position);
      if(!chosenTexture.endsWith(".jpg")&&!chosenTexture.endsWith(".png")) {
       if(prop.texture.split(".")[1]==undefined) {
        terminal.error('Failed to load terrain texture: "'+prop.texture+'". Please make sure that you also added the file format type at the end of the texture ( e.g: '+prop.texture+".jpg or "+prop.texture+".png ).");
       }
       else {
        terminal.error('Failed to load terrain texture: "'+prop.texture.split(".")[0]+'". Please make sure the you typed the file name correctly and that the file format is .jpg or .png. instead of .'+prop.texture.split(".")[1]+'.');
       }
      }
    // console.log(chosenTexture)
}
// function __cGr(position,scale,customProp) {
//  
//  scale={x:0,y:0,z:0};
//  color="#ffffff";
//  ground = new Physijs.BoxMesh(
//   new THREE.CubeGeometry( 1, 1, 1 ),
//   new THREE.MeshBasicMaterial(),
// 0);
//  if(customProp&&customProp!=="") {
//   eval(customProp.split("this").join("ground"));
//  }
//  ground.material.color.set(color);
//  ground.position.set(position.x,position.y,position.z);
//  ground.scale.set(scale.x,scale.y,scale.z);
//  scene.add( ground ); 
// }
function createGround(prop) {
  if(prop&&!prop.static) {
  eval(`
 ground = new Physijs.BoxMesh(
  new THREE.CubeGeometry( 20, 0.1, 20 ),
  new THREE.Mesh`+prop.material+`Material(),
0);`);
  };
  if(prop&&prop.static) {
  eval(`
 ground = new THREE.Mesh(
  new THREE.CubeGeometry( 20, 0.1, 20 ),
  new THREE.Mesh`+prop.material+`Material(),
0);`);
  };
  if(prop&&prop.static===undefined) {
  eval(`
 ground = new Physijs.BoxMesh(
  new THREE.CubeGeometry( 20, 0.1, 20 ),
  new THREE.Mesh`+prop.material+`Material(),
0);`);
  };
//  ground.position.set(x,y,z);
//  if(customProp&&customProp!=="") {
//   eval(customProp.split("this").join("ground"));
  // console.log(customProp.split("this").join("ground"));
//  }
 ground.material.color.set(prop.color);
 ground.position.set(prop.position.x,prop.position.y,prop.position.z);
 ground.scale.set(prop.size.x,prop.size.y,prop.size.z);
 if(prop.name) {
  ground.name = prop.name;
 };
 if(prop.rotation) {
  ground.rotation.set(prop.rotation.x,prop.rotation.y,prop.rotation.z);
 };
 if(prop.custom) {
  eval(`ground.`+prop.custom.split(",").join(";ground."));
 };
 if(!prop.fixed) {
  setInterval(() => {
   ground.__dirtyPosition = true;
   ground.__dirtyRotation = true;
  });
 }
 else {
  setInterval(() => {
   ground.__dirtyPosition = prop.fixed;
   ground.__dirtyRotation = prop.fixed;
  });
 };
//  console.log(size);
//  console.log(prop.size.split("x")[0]+", "+prop.size.split("x")[1]+", "+prop.size.split("x")[2]);
//  ground['rotation']={};
//  ground['setRotation'] = function(rot) {
//   setInterval(function() {
//     ground.__dirtyRotation = true;
//   });
//   console.log(rot);
//   this.rotation.set(rot.x,rot.y,rot.z);
//  };
 scene.add( ground ); 
}
//createGround(0[x],0[y],0[z],"15[x]15[y]x15[z]",'[c]','cP');
function createGrid(position,scale,customProp) {
 
 scale={x:1,z:1};
 size=10;
 divisions=10;
 if(customProp&&customProp!=="") {
  eval(customProp);
 }
 const gridHelper = new THREE.GridHelper( size, divisions );
 gridHelper.scale.set(scale.x,1,scale.z);
 gridHelper.position.set(position.x,position.y,position.z);
 scene.add( gridHelper );
}
var TL = new THREE.TextureLoader()
// function Skybox(skybox) {
//   const loader = new THREE.TextureLoader()
//   loader.load(skybox, function(texture) {
//    scene.background = texture
//  })
// }
var now;
var then;
var mattt;
var textureLoader = new THREE.TextureLoader();
textureLoader.load('https://images-na.ssl-images-amazon.com/images/I/51%2BbkVt9ZzL._AC_SX425_.jpg', function (texture){
         var mattt = new THREE.MeshBasicMaterial();
         mattt.envMap = texture;
});
function calculateTextureSize() {
         if(textureWidth<2048&&textureHeight==2048) {
          terminal.warn("You need to load a 2048x2048 texture. Your texture height ("+textureHeight+") is OK but the width ("+textureWidth+") needs to be higher");
         }
         if(textureWidth>2048&&textureHeight==2048) {
          terminal.warn("You need to load a 2048x2048 texture. Your texture height ("+textureHeight+") is OK but the width ("+textureWidth+") needs to be lower");
         }
         if(textureHeight<2048&&textureWidth==2048) {
          terminal.warn("You need to load a 2048x2048 texture. Your texture width ("+textureWidth+") is OK but the height ("+textureHeight+") needs to be higher");
         }
         if(textureHeight<2048&&textureWidth==2048) {
          terminal.warn("You need to load a 2048x2048 texture. Your texture width ("+textureWidth+") is OK but the height ("+textureHeight+") needs to be higher");
         }
         if(textureHeight<2048&&!textureWidth<2048) {
          terminal.warn("You need to load a 2048x2048 texture. Your texture width ("+textureWidth+") and height ("+textureHeight+") needs to be higher");
         }
         if(textureHeight>2048&&!textureWidth>2048) {
          terminal.warn("You need to load a 2048x2048 texture. Your texture width ("+textureWidth+") and height ("+textureHeight+") needs to be lower");
         }
         if(textureHeight<2048&&!textureWidth>2048) {
          terminal.warn("You need to load a 2048x2048 texture. Your texture width ("+textureWidth+") needs to be lower and the height ("+textureHeight+") needs to be higher");
         }
         if(textureHeight>2048&&!textureWidth<2048) {
          terminal.warn("You need to load a 2048x2048 texture. Your texture width ("+textureWidth+") needs to be higher and the height ("+textureHeight+") needs to be lower");
         }
        }
var textureWidth;
var textureHeight;
function createReflectiveBody(bodyType,position,scale,customProp) {
var Texture = new Image();
            Texture.onload = function() {
             textureWidth=this.width;
             textureHeight=this.height
            //  //console.clear();
             calculateTextureSize();
            }
            // if(file.image.format.checkIfValid(name1)) {}
            // Texture.onerror=function() {
            //  //console.clear();
            //  console.log("Assets/Skybox/"+name+".jpg was not found. Please make sure you typed the path and name correctly.")
            // }
//             source = [
//  'Assets/Skybox/xpos.png', 'Assets/Skybox/xneg.png',
//  'Assets/Skybox/ypos.png', 'Assets/Skybox/yneg.png',
//  'Assets/Skybox/zpos.png', 'Assets/Skybox/zneg.png'
// ]
var textureCube;
            var checkSource = setInterval(function () {
              if(getBodyByName('skybox') === undefined) {
               clearInterval(checkSource);
               //console.clear();
               terminal.warn("Skybox not found. Please make sure the scene includes an skybox or add one using the SkyBox function.");
              }
              if(getBodyByName('skybox').material[0] == null || getBodyByName('skybox').material[0] == undefined) {
              clearInterval(checkSource);
              //console.clear();
              terminal.error("Skybox not found. Material number [0] has not been found.");
              };
              if(getBodyByName('skybox').material[1] == null || getBodyByName('skybox').material[1] == undefined) {
              clearInterval(checkSource);
              //console.clear();
              terminal.error("Skybox not found. Material number [1] has not been found.");
              };
              if(getBodyByName('skybox').material[2] == null || getBodyByName('skybox').material[2] == undefined) {
              clearInterval(checkSource);
              //console.clear();
              terminal.error("Skybox not found. Material number [2] has not been found.");
              };
              if(getBodyByName('skybox').material[3] == null || getBodyByName('skybox').material[3] == undefined) {
              clearInterval(checkSource);
              //console.clear();
              terminal.error("Skybox not found. Material number [3] has not been found.");
              };
              if(getBodyByName('skybox').material[4] == null || getBodyByName('skybox').material[4] == undefined) {
              clearInterval(checkSource);
              //console.clear();
              terminal.error("Skybox not found. Material number [4] has not been found.");
              };
              if(getBodyByName('skybox').material[5] == null || getBodyByName('skybox').material[5] == undefined) {
              clearInterval(checkSource);
              //console.clear();
              terminal.error("Skybox not found. Material number [5] has not been found.");
              };
              if(typeof getBodyByName('skybox') !== 'object' && typeof getBodyByName('skybox').material !== 'object' && typeof getBodyByName('skybox').material[0] !== 'object' && typeof getBodyByName('skybox').material[0].map !== 'object' && typeof getBodyByName('skybox').material[0].map.image !== 'object' && typeof getBodyByName('skybox').material[0].map.image.src !== 'string' && typeof getBodyByName('skybox') !== 'object' && typeof getBodyByName('skybox').material !== 'object' && typeof getBodyByName('skybox').material[1] !== 'object' && typeof getBodyByName('skybox').material[1].map !== 'object' && typeof getBodyByName('skybox').material[1].map.image !== 'object' && typeof getBodyByName('skybox').material[1].map.image.src !== 'string' && typeof getBodyByName('skybox') !== 'object' && typeof getBodyByName('skybox').material !== 'object' && typeof getBodyByName('skybox').material[2] !== 'object' && typeof getBodyByName('skybox').material[2].map !== 'object' && typeof getBodyByName('skybox').material[2].map.image !== 'object' && typeof getBodyByName('skybox').material[2].map.image.src !== 'string' && typeof getBodyByName('skybox') !== 'object' && typeof getBodyByName('skybox').material !== 'object' && typeof getBodyByName('skybox').material[3] !== 'object' && typeof getBodyByName('skybox').material[3].map !== 'object' && typeof getBodyByName('skybox').material[3].map.image !== 'object' && typeof getBodyByName('skybox').material[3].map.image.src !== 'string' && typeof getBodyByName('skybox') !== 'object' && typeof getBodyByName('skybox').material !== 'object' && typeof getBodyByName('skybox').material[4] !== 'object' && typeof getBodyByName('skybox').material[4].map !== 'object' && typeof getBodyByName('skybox').material[4].map.image !== 'object' && typeof getBodyByName('skybox').material[4].map.image.src !== 'string' && typeof getBodyByName('skybox') !== 'object' && typeof getBodyByName('skybox').material !== 'object' && typeof getBodyByName('skybox').material[5] !== 'object' && typeof getBodyByName('skybox').material[5].map !== 'object' && typeof getBodyByName('skybox').material[5].map.image !== 'object' && typeof getBodyByName('skybox').material[5].map.image.src !== 'string') {
              clearInterval(checkSource);
              //console.clear();
              terminal.error("Skybox not found. Missing materials in "+getBodyByName('skyname').name+".");
            }
            if(typeof getBodyByName('skybox') === 'object' && typeof getBodyByName('skybox').material === 'object' && typeof getBodyByName('skybox').material[0] === 'object' && typeof getBodyByName('skybox').material[0].map === 'object' && typeof getBodyByName('skybox').material[0].map.image === 'object' && typeof getBodyByName('skybox').material[0].map.image.src === 'string' && typeof getBodyByName('skybox') === 'object' && typeof getBodyByName('skybox').material === 'object' && typeof getBodyByName('skybox').material[1] === 'object' && typeof getBodyByName('skybox').material[1].map === 'object' && typeof getBodyByName('skybox').material[1].map.image === 'object' && typeof getBodyByName('skybox').material[1].map.image.src === 'string' && typeof getBodyByName('skybox') === 'object' && typeof getBodyByName('skybox').material === 'object' && typeof getBodyByName('skybox').material[2] === 'object' && typeof getBodyByName('skybox').material[2].map === 'object' && typeof getBodyByName('skybox').material[2].map.image === 'object' && typeof getBodyByName('skybox').material[2].map.image.src === 'string' && typeof getBodyByName('skybox') === 'object' && typeof getBodyByName('skybox').material === 'object' && typeof getBodyByName('skybox').material[3] === 'object' && typeof getBodyByName('skybox').material[3].map === 'object' && typeof getBodyByName('skybox').material[3].map.image === 'object' && typeof getBodyByName('skybox').material[3].map.image.src === 'string' && typeof getBodyByName('skybox') === 'object' && typeof getBodyByName('skybox').material === 'object' && typeof getBodyByName('skybox').material[4] === 'object' && typeof getBodyByName('skybox').material[4].map === 'object' && typeof getBodyByName('skybox').material[4].map.image === 'object' && typeof getBodyByName('skybox').material[4].map.image.src === 'string' && typeof getBodyByName('skybox') === 'object' && typeof getBodyByName('skybox').material === 'object' && typeof getBodyByName('skybox').material[5] === 'object' && typeof getBodyByName('skybox').material[5].map === 'object' && typeof getBodyByName('skybox').material[5].map.image === 'object' && typeof getBodyByName('skybox').material[5].map.image.src === 'string') {
              clearInterval(checkSource);
              setTimeout(function() {
              if(getBodyByName('skybox').material[0].map.image === undefined) {
                console.log('Mission Failed !')
                terminal.error("Skybox was not loaded: an error occurred while trying to load the skybox.");
                }
              // console.log(getBodyByName('skybox').material[0].map.image);
              // alert(getBodyByName('skybox').material[0].map.image.src);
              source = [
  getBodyByName('skybox').material[0].map.image.src.split("http://localhost/Assets/Skybox/").join(""), getBodyByName('skybox').material[1].map.image.src.split("http://localhost/Assets/Skybox/").join(""),
 getBodyByName('skybox').material[2].map.image.src.split("http://localhost/Assets/Skybox/").join(""), getBodyByName('skybox').material[3].map.image.src.split("http://localhost/Assets/Skybox/").join(""),
 getBodyByName('skybox').material[4].map.image.src.split("http://localhost/Assets/Skybox/").join(""), getBodyByName('skybox').material[5].map.image.src.split("http://localhost/Assets/Skybox/").join("")
]
// setTimeout(function() {
        var format=".jpg";
        textureCube = new THREE.CubeTextureLoader()
            .setPath("Assets/Skybox/")
            .load(source);
        textureCube.mapping = THREE.CubeReflectionMapping;
        textureCube.format = THREE.RGBFormat;
        var shader = THREE.ShaderLib["cube"];
        shader.uniforms["tCube"].value = textureCube;
        var mat = new THREE.ShaderMaterial({
            fragmentShader: shader.fragmentShader,
            vertexShader: shader.vertexShader,
            uniforms: shader.uniforms,
            depthWrite: false,
            side: THREE.DoubleSide
        });
        var skybox = new Physijs.Mesh(new THREE.BoxGeometry(10000, 10000, 10000), mat);
        scene.add(skybox);
        cubeCamera = new THREE.CubeCamera(0.1, 20000, 256);
        scene.add(cubeCamera);
        // console.log("var sphereGeometry = new THREE."+bodyType+"Geometry("+bodyType.split("(")[1]+";");
        eval("var sphereGeometry = new THREE."+bodyType.split("(")[0]+"Geometry("+bodyType.split("(")[1]+";");
        var dynamicEnvMaterial = new THREE.MeshBasicMaterial({envMap: cubeCamera.renderTarget, side: THREE.DoubleSide});
        var envMaterial = new THREE.MeshBasicMaterial({envMap: textureCube, side: THREE.DoubleSide});
        sphere = new Physijs.SphereMesh(sphereGeometry, dynamicEnvMaterial);
        if(customProp&&customProp!=="") {
         eval("sphere."+customProp);
        }
        scene.add(sphere);
        function reflect() {
 sphere.visible = false;
 cubeCamera.update(renderer, scene);
 sphere.visible = true;
 requestAnimationFrame(reflect);
}
reflect();
},0)
}
        });
          // var checkSource=setInterval(function() {
          //   if(getBodyByName('skybox')==undefined) {
          //    clearInterval(checkSource);
          //    alert('1')
          //    terminal.error("Couldn't find skybox: Try adding a skybox using the SkyBox function.");
          //   }
            // if(typeof getBodyByName('skybox').material[0].map.image === 'object' && typeof getBodyByName('skybox').material[0].map.image.src === 'string') {
            //   clearInterval(checkSource);
        // });
            // }
        //https://wallpaperaccess.com/full/1141185
        //createReflectiveBody("Box",'https://wallpaperaccess.com/full/','1141185','1141185','1141185','1141185','1141185','1141185','scale.set(2,2,2)');
    // });
    // console.log(path+'\n'+name1+'\n'+name2+'\n'+name3+'\n'+name4+'\n'+name5+'\n'+name6);
}
// function createCubeMap(path,loader) {
//         var path = path;
//         var format = '.jpg';
//         var lo=loader;
//         var urls = [
//             'posx' + format, 'negx' + format,
//             'posy' + format, 'negy' + format,
//             'posz' + format, 'negz' + format
//         ];
//         var textureCube = new THREE.CubeTextureLoader().setPath(path).load(lo);
//         console.log(textureCube)
//         return textureCube;
//     }
function setShader(shader,status) {
  var shaderStatus;
  if(status=="on"&&shader=="anaglyph") {
   anaglyphRender=true;
  }
  if(status=="off"&&shader=="anaglyph") {
    anaglyphRender=false;
  }
  if(status=="on"&&shader=="ASCII") {
   ASCIIEffect.enabled = true;
  }
  if(status=="off"&&shader=="ASCII") {
   ASCIIEffect.enabled = false;
  }
  if(status=="on") {
  shaderStatus=true;
 }
 if(status=="off") {
  shaderStatus=false;
 }
 if(shader=="rain"&&status=="off"&&typeof scene.getObjectByName("rain") == 'object') {
  setTimeout(function() {
  scene.remove(scene.getObjectByName("rain"));
  scene.remove(scene.getObjectByName("rain_light"));
  },3)
 }
 if(shader=="rain"&&status=="off"&&typeof scene.getObjectByName("rain") == 'object' === false) {
  terminal.warn('Rain shader is already "'+status+'"');
 }
 if(shader=="rain"&&status=="on") {
  flash = new THREE.PointLight(UYC.renderer.effect.rain.lightning.color, 30, 500, 1.7);
flash.position.set(200, 300, 100);
flash.name="rain_light"
if(UYC.renderer.effect.rain.lightning.enabled==true) {
 scene.add(flash);
}
else {
  return false;
}
if(UYC.renderer.effect.rain.enabled) {
rainGeo = new THREE.Geometry();
for (let i = 0; i < 9500; i++) {
  rainDrop = new THREE.Vector3(
  Math.random() * 400 - 200,
  Math.random() * 500 - 250,
  Math.random() * 400 - 200);

  rainDrop.velocity = {};
  rainDrop.velocity = 0;
  rainGeo.vertices.push(rainDrop);
}

rainMaterial = new THREE.PointsMaterial({
  color: 0xaaaaaa,
  size: 0.1,
  transparent: true });


 rain = new THREE.Points(rainGeo, rainMaterial);
 rain.name="rain";
 rain.position.set(UYC.renderer.effect.rain.position.x,UYC.renderer.effect.rain.position.y,UYC.renderer.effect.rain.position.z);
 scene.add(rain);
}
if(UYC.renderer.effect.rain.clouds.enabled) {
let loader = new THREE.TextureLoader();
loader.load("Assets/Textures/smoke.png", function(texture){
  cloudGeo = new THREE.PlaneBufferGeometry(500,500);
  cloudMaterial = new THREE.MeshLambertMaterial({
    map: texture,
    transparent: true
  });
  for(let p=0; p<UYC.renderer.effect.rain.clouds.density; p++) {
    let cloud = new THREE.Mesh(cloudGeo,cloudMaterial);
    cloud.name="cloud"+p;
    cloud.material.color.set(UYC.renderer.effect.rain.clouds.color);
    cloud.position.set(
      Math.random()*800 -400,
      500,
      Math.random()*500 - 450
    );
    cloud.rotation.x = 1.16;
    cloud.rotation.y = -0.12;
    cloud.rotation.z = Math.random()*360;
    cloud.material.opacity = UYC.renderer.effect.rain.clouds.opacity;
    scene.add(cloud);
  }
  setInterval(() => {
   if(!UYC.renderer.effect.rain.clouds.static) {
    for(let c=0; c<UYC.renderer.effect.rain.clouds.density; c++) {
     getBodyByName('cloud'+c).position.z-=UYC.renderer.effect.rain.clouds.speed;
     if(getBodyByName("cloud"+c).position.z<=-785){
       getBodyByName("cloud"+c).position.z=300;
     }
    }
   }
  }, 0);
});
}
function rainEffect() {
requestAnimationFrame(rainEffect);
rainGeo.vertices.forEach(p => {
    p.velocity -= 3 * Math.random() * 1;
    p.y += p.velocity;
    if (p.y < -100) {
      p.y = 100;
      p.velocity = 0;
    }
  });
  rainGeo.verticesNeedUpdate = true;
  rain.rotation.y += 0.002;

  if (Math.random() > 0.96 || flash.power > 100) {
    if (flash.power < 100) {
      flash.position.set(
      Math.random() * 400,
      300 + Math.random() * 200,
      100);

    }
    flash.power = 50 + Math.random() * 500;
  }
}
rainEffect();
 }
 if(shader!=="rain"&&shader!=="Anaglyph"&&shader!=="*"&&shader!=="ASCII") {
 eval(shader+"Shader.enabled="+shaderStatus+";");
 }
//  if(shader!=="rain"&&shader!=="Anaglyph"&&shader=="*") {
//   for(var s = 1; s < shaders.length; s++) {
//    eval(shaders[s]+"Shader.enabled="+shaderStatus+";");
//   }
//  }
}
function configShader(shader,configuration) {
 if(shader == 'glitch') {
  eval(shader+"Shader."+configuration.split("repetitive").join("goWild")+";");
 };
 if(shader == 'bloom') {
  eval(shader+"Shader."+configuration.split("intensity").join("copyUniforms.opacity.value")+";");
 };
 if(shader == 'bleach') {
  eval(shader+"Shader."+configuration.split("intensity").join("uniforms.opacity.value")+";");
 };
 if(shader == 'focus') {
  eval(shader+"Shader."+configuration.split("sampleDist").join("uniforms.sampleDistance.value")+";");
 };
 if(shader == 'grayscale') {
  eval(shader+"Shader."+configuration.split("r").join("uniforms.rPower.value").split("g").join("uniforms.gPower.value").split("b").join("uniforms.bPower.value").split(",").join(";"+shader+"Shader."));
 };
 if(shader == 'film') {
  eval(shader+"Shader."+configuration.split("opacity").join("uniforms.nIntensity.value").split("intensity").join("uniforms.sIntensity.value").split("static").join("uniforms.sCount.value").split("grayscale").join("uniforms.grayscale.value").split(",").join(";"+shader+"Shader."));
 }
}
function addHelper(body) {
 var body;
 var axis = {
  disabled:false,
 };
 var outline = {
  disabled:false,
  color:0xffffff
 };
 var box = {
  disabled:false,
  color:0xffffff
 };
 function boxCollider(body) {
if(typeof body.geometry.parameters === 'object') {
 const geometry = new THREE.BoxGeometry(body.geometry.parameters.width+2,body.geometry.parameters.height,body.geometry.parameters.height+2);
 const edges = new THREE.EdgesGeometry(geometry);
 const edgesMaterial = new THREE.LineBasicMaterial({
  color: 'white'
 });
 const edgesMesh = new THREE.LineSegments(edges, edgesMaterial);
 setInterval(function() {
 edgesMesh.position.copy(body.position);
 edgesMesh.rotation.copy(body.rotation);
 edgesMesh.scale.copy(body.scale);
 });
 scene.add(edgesMesh)
 }
 else {
  const geometry = new THREE.BoxGeometry(body.scale.x+2,body.scale.y,body.scale.z+2);
 const edges = new THREE.EdgesGeometry(geometry);
 const edgesMaterial = new THREE.LineBasicMaterial({
  color: 'white'
 });
 const edgesMesh = new THREE.LineSegments(edges, edgesMaterial);
 setInterval(function() {
 edgesMesh.position.x=body.position.x;
 edgesMesh.position.y=body.position.y;
 edgesMesh.position.z=body.position.z;
 edgesMesh.scale.copy(body.scale);
 });
 scene.add(edgesMesh)
 }
}
 if(body.type=="DirectionalLight") {
  var helper=new THREE.DirectionalLightHelper(body);
  scene.add(helper);
 }
 if(body.type=="PointLight") {
  helper=new THREE.PointLightHelper(body);
  scene.add(helper);
 }
 if(body.type=="HemisphereLight") {
  helper=new THREE.HemisphereLightHelper(body);
  scene.add(helper);
 }
 if(body.type=="Mesh") {
  if(!axis.disabled) {
    _axis=new THREE.AxisHelper()
    setInterval(function() {
    _axis.position.copy(body.position);
    _axis.scale.x=body.scale.x+2;
    _axis.scale.y=body.scale.y+2;
    _axis.scale.z=body.scale.z+2;
    _axis.rotation.copy(body.rotation);
    })
    scene.add(_axis);
  }
   if(!box.disabled) {
     // _box = new THREE.BoxHelper( body, box.color );
     //setInterval(function() {
     // _box.position.copy(body.position);
     // _box.scale.copy(body.scale);
     //});
     // scene.add(_box)
     boxCollider(body);
    }
   if(!outline.disabled) {
     addOutline(body,'color='+outline.color);
    }
   }
 if(body.type.includes("Camera")) {
  helper = new THREE.CameraHelper(body);
  scene.add(helper);
 }
}
var outlines=0;
function addOutline(body, customProp) {
var color=0xffffff;
var name="";
var _group=true;
if(customProp&&customProp!=="") {
 eval(customProp.split('this').join("getBodyByName('"+body.name+"')"));
}
 const geometry = body.geometry;
 const edges = new THREE.EdgesGeometry(geometry);
 const edgesMaterial = new THREE.LineBasicMaterial({
  color: color
 });
 const edgesMesh = new THREE.LineSegments(edges, edgesMaterial);
 setInterval(function() {
//  edgesMesh.position.copy(body.position);
 edgesMesh.position.x=body.position.x;
 edgesMesh.position.y=body.position.y;
 edgesMesh.position.z=body.position.z;
 edgesMesh.rotation.copy(body.rotation);
 edgesMesh.scale.copy(body.scale);
 });
 if(!_group) {
  scene.add(edgesMesh)
  body["outline"]=edgesMesh;
 }
 if(typeof body["outline"] !== 'object' && name.length>0 && group) {
  scene.add(edgesMesh)
  body["outline"]=edgesMesh;
  createGroup(name);
  eval(name).name=name;
  eval(name+'.add(body);');
  eval(name+'.add(body.outline);');
 }
 if(typeof body["outline"] !== 'object' && _group) {
  outlines++;
  scene.add(edgesMesh)
  body["outline"]=edgesMesh;
  createGroup("outline"+outlines);
  eval('outline'+outlines+'.add(body);');
  eval('outline'+outlines+'.add(body.outline);');
 }
}
// setInterval(() => {
//  if(glitchShader.enabled||filmShader.enabled||grayscaleShader.enabled) {
//   effectCopy.renderToScreen = false;
//  }
//  else {
//   effectCopy.renderToScreen = true;
//  }
// }, 0);
 var anaglyphShader = new THREE.AnaglyphEffect( renderer );
 anaglyphShader.setSize( window.innerWidth, window.innerHeight );
 var anaglyphRender=false;
 var bleachShader = new THREE.ShaderPass(THREE.BleachBypassShader);
 bleachShader.enabled = false;
 var bloomShader = new THREE.UnrealBloomPass( new THREE.Vector2( window.innerWidth, window.innerHeight ), 1.5, 0.4, 0.85 );
 bloomShader.enabled=false;
 var focusShader = new THREE.ShaderPass(THREE.FocusShader);
 focusShader.enabled = false;
 var FXAAShader = new THREE.ShaderPass(THREE.FXAAShader);
 FXAAShader.enabled = false;
 var edgeShader = new THREE.ShaderPass(THREE.EdgeShader);
 edgeShader.enabled = false;
 var glitchShader = new THREE.GlitchPass(64);
 glitchShader.enabled=false;
 glitchShader.renderToScreen = true;
 var filmShader = new THREE.FilmPass(0.8, 0.325, 256, false);
 filmShader.enabled=false;
 filmShader.renderToScreen = true;
 var grayscaleShader = new THREE.ShaderPass(THREE.CustomGrayScaleShader);
 grayscaleShader.setRGB = function(r,g,b) {
  this.uniforms.rPower.value=r;
  this.uniforms.rPower.value=g;
  this.uniforms.rPower.value=b;
 };
 grayscaleShader.enabled = false;
 grayscaleShader.renderToScreen=true;
 var dotShader = new THREE.ShaderPass(THREE.DotScreenShader);
 dotShader.enabled = false;
 dotShader.renderToScreen = false;
 dotShader.centerX = 0.5;
 dotShader.centerY = 0.5;
 dotShader.angle = 1.57;
 dotShader.scale = 1;
 var pixelShader = new THREE.ShaderPass(THREE.PixelShader);
 pixelShader.uniforms[ "resolution" ].value = new THREE.Vector2( window.innerWidth, window.innerHeight );
 pixelShader.uniforms[ "resolution" ].value.multiplyScalar( window.devicePixelRatio );
 pixelShader.uniforms.pixelSize.value=5;
 pixelShader.enabled = false;
 pixelShader.renderToScreen = false;
 var composer = new THREE.EffectComposer(renderer);
//  var ASCIIEffect = new THREE.AsciiEffect(renderer,' .:-+*=%@#',{invert:true});
//  ASCIIEffect.enabled = false;
//  ASCIIEffect.setSize( window.innerWidth, window.innerHeight );
//  ASCIIEffect.domElement.style.color = 'white';
//  ASCIIEffect.domElement.style.backgroundColor = 'black';
//  ASCIIEffect.domElement = renderer.domElement
 var renderPass = new THREE.RenderPass(scene, camera);
 var effectCopy = new THREE.ShaderPass(THREE.CopyShader);
 effectCopy.renderToScreen = true;
 composer.addPass(renderPass);
 composer.addPass(bleachShader);
 composer.addPass(bloomShader);
 composer.addPass(focusShader);
 composer.addPass(FXAAShader);
 composer.addPass(edgeShader);
 composer.addPass(dotShader);
 composer.addPass(pixelShader);
//  composer.addPass(effectCopy);
 composer.addPass(glitchShader);
 composer.addPass(filmShader);
 composer.addPass(grayscaleShader);
 var JtTeXaDoVuIyZiIoKgNzPoPjJbHnCxGfRvLaPvNiXfWiWdTvGfCi = ["anaglyph", "bleach", "bloom", "focus", "FXAA", "edge", "glitch", "film", "grayscale", "dot", "pixel"];
 function getShaders() {
  return JtTeXaDoVuIyZiIoKgNzPoPjJbHnCxGfRvLaPvNiXfWiWdTvGfCi;
 }
 var model;
 var gltfData;
 var mixers=[];
//  var mixer = new THREE.AnimationMixer( model );
 function createGLTF(gltf,gltfProp) {
  if(gltfProp&&gltfProp!=="") {
   eval(gltfProp);
  }
 const loader = new THREE.GLTFLoader();
loader.load( "Assets/Objects/"+gltf+".gltf", function ( gltf ) {
 gltfData=gltf;
 model = gltf.scene;
 if(gltfProp.position) {
  model.position.set(gltfProp.position.x,gltfProp.position.y,gltfProp.position.z);
 };
 model.scale.set(gltfProp.scale.x,gltfProp.scale.y,gltfProp.scale.z);
 model["animations"]=gltf.animations;
 if(gltfProp.name) {
  model.name = gltfProp.name;
 };
 scene.add(model);
 mixer = new THREE.AnimationMixer(model);
 mixer_BAK=new THREE.AnimationMixer(model);
//  console.log(gltf.animations)
//  var action = mixer.clipAction( gltf.animations[ 0 ] );
//  action.play();
 });
}
function createGLB(glb,glbProp) {
 const loader = new THREE.GLTFLoader();
loader.load( "Assets/Objects/"+glb+".glb", function ( glb ) {
 glbData=glb;
 model = glb.scene;
 if(glbProp.position) {
  model.position.set(glbProp.position.x,glbProp.position.y,glbProp.position.z);
 };
 model.scale.set(glbProp.scale.x,glbProp.scale.y,glbProp.scale.z);
 model["animations"]=glb.animations;
 model["playAnimation"] = function(anim) {
  playObjectAnimation(this, "byName="+anim);
 };
 if(glbProp.name) {
  model.name = glbProp.name;
 };
 scene.add(model);
 mixer = new THREE.AnimationMixer(model);
 mixer_BAK=new THREE.AnimationMixer(model);
//  console.log(gltf.animations)
//  var action = mixer.clipAction( gltf.animations[ 0 ] );
//  action.play();
 });
}
var action;
function playObjectAnimation(body,animation) {
if(body && body.UYCModel && body.UYCModel === 'object') {
 var mixer = new THREE.AnimationMixer(model);
 mixers.push(mixer);
//  eval("mixer._root.animations."+animation+".play()");
if(animation.startsWith("byName")) {
 eval(body+".animations."+byName.split("=")[1]+".play();");
}
if(animation.startsWith("byIndex")) {
 eval(animation);
//  eval(body+".animations."+Object.keys(body.animations)[byIndex]+".play();");
 ifo=eval("Object.keys("+body+".animations)["+byIndex+"]");
 eval(body+".animations."+ifo+".play();");
 }
}
else {
  byName="";
  byIndex="";
  mixers.push(mixer);
  // eval("mixer._root.animations."+animation+".play()");
if(animation.startsWith("byName")) {
//  mixer=new THREE.AnimationMixer(body);
 dat="mixer.clipAction('"+animation.split("=")[1]+"').play();";
 _aExe(body)
}
if(animation.startsWith("byIndex")) {
//  eval(body+".animations."+Object.keys(body.animations)[byIndex]+".play();");
 ifo=eval("body.animationsName["+animation.split("=")[1]+"]");
 dat="mixer.clipAction('"+ifo+"').play();"
 _aExe();
 }
}
//  action = mixer.clipAction(getAnimation(gltfData,animationName));
//  action.play();
//  function playingAnim() {
//   requestAnimationFrame(playingAnim);
//   var delta = clock.getDelta();
//   if(model){mixer.update(delta.getDelta)};
//  }
//  playingAnim();
}
// playObjectAnimation('getBodyByIndex(1)',getAnimationFrom(getBodyByIndex(1))[0]);
// function getAnimation(gltf, name){
//     var result;
//     gltf.animations.forEach((animation) => {
//         if (animation.name===name) {
//             result = animation
//             return
//         }
//     })
//     if (result == null) {
//         terminal.warn("animation: "+name+" cannot be found!")
//     }
//     return result
//   }
function _aExe(body) {
 if(typeof mixer === 'object') {
  eval(dat);
 }
 else {
  mixer=new THREE.AnimationMixer(body);
  eval(dat);
 }
}
  var zda=false;
  var waterObj=false;
  var refCube=false;
  var refSphere=false;
  var videoExist=false;
  var keyboard;
  function createVideo(customProp) {
   if(customProp&&customProp!=="") {
    eval(customProp);
   }
   //  setTimeout(function(){alert(source)},1000)
   video = document.createElement( 'video' );
	 video.src = 'Assets/Videos/' + customProp.source + '.mp4';
   video.crossOrigin="anonymous";
	 video.load();
	 video.play();
	 videoImage = document.createElement( 'canvas' );
	 videoImage.width = 480;
	 videoImage.height = 204;
	 videoImageContext = videoImage.getContext( '2d' );
	 videoImageContext.fillStyle = '#000000';
	 videoImageContext.fillRect( 0, 0, videoImage.width, videoImage.height );
	 videoTexture = new THREE.Texture( videoImage );
	 videoTexture.minFilter = THREE.LinearFilter;
	 videoTexture.magFilter = THREE.LinearFilter;
	 var movieMaterial = new THREE.MeshBasicMaterial( { map: videoTexture, overdraw: true, side:THREE.DoubleSide } );
	 var movieGeometry = new THREE.PlaneGeometry( 240, 100, 4, 4 );
	 var movieScreen = new THREE.Mesh( movieGeometry, movieMaterial );
	 movieScreen.scale.set(customProp.scale.x,customProp.scale.y,customProp.scale.z);
   movieScreen.position.set(customProp.position.x,customProp.position.y,customProp.position.z);
	 scene.add(movieScreen);
   videoExist=true;
  }
  function vehicleControl(prop) {
    moveSpeed = 200 * delta;
    rotateSpeed = Math.PI / 2 * delta;
    setInterval(function() {
  //moveSpeed
	//rotateSpeed
  if(typeof prop.body === 'object') {
  prop.body.__dirtyPosition=true;
  prop.body.__dirtyRotation=true;
  if(typeof keyboard.pressed === 'function' && plugins.hasOwnProperty("vehicleMovement")) {
	if ( keyboard.pressed("W") )
    if(prop.moveSpeed) {
     prop.body.translateZ(-prop.moveSpeed);
    }
    else {
	   prop.body.translateZ( -moveSpeed );
    }
	if ( keyboard.pressed("S") )
  if(prop.moveSpeed) {
		prop.body.translateZ( prop.moveSpeed );
  }
  else {
   prop.body.translateZ( moveSpeed );
  }
	var rotation_matrix = new THREE.Matrix4().identity();
	if ( keyboard.pressed("A") )
   if(prop.rotateSpeed) {
    prop.body.rotateOnAxis( new THREE.Vector3(0,1,0), prop.rotateSpeed);
   }
   else {
		prop.body.rotateOnAxis( new THREE.Vector3(0,1,0), rotateSpeed);
   }
	if ( keyboard.pressed("D") )
  if(prop.rotateSpeed) {
   prop.body.rotateOnAxis( new THREE.Vector3(0,1,0), prop.rotateSpeed);
  }
  else {
	 prop.body.rotateOnAxis( new THREE.Vector3(0,1,0), -rotateSpeed);
  }
     keyboard.pressed}
    }
   });
  }
function runRenderer(event) {
 requestAnimationFrame( runRenderer );
 var delta = clock.getDelta();
 for(var c=0;c<camera.children.length;c++) {
  if(multipleCameras) {
  if(camera.children[c].type.includes("Camera")) {
    if(typeof camera.children[c] === 'object') {
    renderer.render(scene, camera.children[c]);
   }
   else {
    multipleCameras=false;
    }
   };
  };
 }
 if(!multipleCameras) {
  renderer.render(scene, camera);
 }
 if(videoExist) {
  if ( video.readyState === video.HAVE_ENOUGH_DATA ) 
	{
		videoImageContext.drawImage( video, 0, 0 );
		if ( videoTexture ) 
			videoTexture.needsUpdate = true;
	}
 }
  if(refCube) {
  mirrorCube.visible = false;
	mirrorCubeCamera.update( renderer, scene );
	mirrorCube.visible = true;
 }
 if(refSphere) {
  mirrorSphere.visible = false;
	mirrorSphereCamera.update( renderer, scene );
	mirrorSphere.visible = true;
 }
 if(zda) {
 customUniforms.time.value += delta;
 }
 if(waterObj) {
  customUniforms2.time.value += delta;
 }
 if(FC) {
  controls.update(delta);
 }
 if(OC) {
  controls.autoRotateSpeed=UYC.controls.autoRotateSpeed;
  controls.keyPanSpeed=UYC.controls.keyPanSpeed;
  controls.zoomSpeed=UYC.controls.zoomSpeed;
  controls.rotateSpeed=UYC.controls.rotateSpeed;
  controls.update(delta);
 }
 if(typeof cloth === 'object') {
 var p = cloth.particles;
				for ( var i = 0, il = p.length; i < il; i ++ ) {
					clothGeometry.vertices[ i ].copy( p[ i ].position );
				}
				clothGeometry.computeFaceNormals();
				clothGeometry.computeVertexNormals();
				clothGeometry.normalsNeedUpdate = true;
				clothGeometry.verticesNeedUpdate = true;
}

// var delta = 0.75 * clock.getDelta();
				if( typeof mixer === 'object' ) {
					mixer.update( delta );
				}
//  renderer.render(scene, camera);
 composer.render();
//  if(ASCIIEffect.enabled) {
//   ASCIIEffect.setSize(window.innerWidth, window.innerHeight);
//   ASCIIEffect.render(scene, camera);
//  }
 if(anaglyphRender) {
  anaglyphShader.render( scene, camera );
 }
 if(typeof scene === 'object') {
  scene.simulate();
 };
}
runRenderer();














camera.position.set(0,0,0.0005)











  setTimeout(function(){
      if(document.getElementsByTagName("canvas")[0]) {
//   document.getElementsByTagName("canvas")[0].style.position="absolute"
  document.getElementsByTagName("canvas")[0].style.right="0px"
  document.getElementsByTagName("canvas")[0].style.top="0px"
      }  
},10)
  
  var windowSize=window.innerWidth/2
  var elems=[]
  
   
   /*
  document.getElementsByTagName("canvas")[0].onclick=function(event){
   var box = Bodies.rectangle(event.clientX, event.clientY, 30, 30)
  World.add(engine.world, box)
  }
  */
  var canCreateBody=true
  var canCreateDialogs=true
  var canForce=true
  var useScript=true
  var ground
  setTimeout(function(){
  setInterval(function(){
   if(useScript&&document.getElementsByTagName("canvas")[0]&&codeRunning) {
      document.getElementsByTagName("canvas")[0].style.visibility="visible"
   }
   if(!useScript&&!codeRunning) {
      document.getElementsByTagName("canvas")[0].style.visibility="hidden"
    }
   })
  },0)

function unstring(str) {
 return eval(str);
}

function getDefaultValuesFrom(defValues) {
 if(defValues=="elevator") {
  return "20,win.y-400,10,win.y+140,7";
 }
 if(defValues=="addFriction") {
  return "...,0.05,0.005,1";
 }
 if(defValues=="createProgress") {
  return "...,10,10,150,10,...";
 }
 if(defValues=="createTimer") {
  return "...,...,810,-45,...,...";
 }
 if(defValues=="createGround") {
  return "win.x-480,win.y,win.x*3,100";
 }
 if(defValues=="createSprite") {
  return "250,250,60,...,0.1,0.1,Infinity";
 }
 if(defValues=="camera.followBody") {
  return "...,100,100";
 }
}



  var currGroup = -1;
function createCollada(collada,position,scale,customProp) {
 
 
 var loader = new THREE.ColladaLoader();
var mesh;
// "Data/rendering/3D/TEST/learning-threejs-master/assets/models/dae/Truck_dae.dae"
loader.load(collada, function (result) {
    mesh = result.scene.children[0].children[0].clone();
    mesh.position.set(position.x,position.y,position.z);
    mesh.scale.set(scale.x,scale.y,scale.z);
    scene.add(mesh);
});
}

function createFBX(fbx, prop) {
var loader = new THREE.FBXLoader();
				loader.load( 'Assets/Objects/'+fbx+'.fbx', function ( object ) {
					object.mixer = new THREE.AnimationMixer( object );
					mixers.push( object.mixer );
					var action = object.mixer.clipAction( object.animations[ 0 ] );
					action.play();
          if(prop.position) {
  object.position.set(prop.position.x,prop.position.y,prop.position.z);
 };
 object.scale.set(prop.scale.x,prop.scale.y,prop.scale.z);
 object["animations"]=object.animations;
 object["playAnimation"] = function(anim) {
  playObjectAnimation(this, "byName="+anim);
 };
 if(prop.name) {
  object.name = prop.name;
 };
					object.traverse( function ( child ) {
						if ( child.isMesh ) {
							child.castShadow = true;
							child.receiveShadow = true;
						}
					} );
          // console.log(object)
					scene.add( object );
				} );
      };

var mixer_BAK;
function createStaticOBJ(obj,prop) {
  var loader = new THREE.OBJLoader();
  var loadOBJ = function (obj) {
  var manager = new THREE.LoadingManager();
  var loader = new THREE.OBJLoader(manager);
  loader.load("Assets/Objects/"+obj+".obj", addBananaInScene);
if(prop&&prop.texture) {
var textureLoader = new THREE.TextureLoader();
var map = textureLoader.load("Assets/Textures/"+prop.texture);
var material = new THREE.MeshPhongMaterial({map: map});
  // loader.fromBufferGeometry(obj);
// );
 };
 loader.load( "Assets/Objects/"+obj+".obj", function ( object ) {
  object.traverse( function ( node ) {
    if ( node.isMesh ) node.material = material;
    if(prop.name&&prop.name!=="") {
   object.name=prop.name;
  }
    scene.add( object );
  object["animations"]=object.animations;
  mixer = new THREE.AnimationMixer( object );
  temple = object;
  temple.scale.set(prop.scale.x,prop.scale.y,prop.scale.z);
  if(prop&&prop.position) {
   temple.position.set(prop.position.x,prop.position.y,prop.position.z);
  }
  } );
})
};
var addBananaInScene = function (object) {
  object.traverse(function (child) {
    if (child instanceof Physijs.Mesh) {
      child.material.color = new THREE.Color(0X00FF00);
      child.geometry.computeVertexNormals();
    }
  });
};
loadOBJ(obj);
};
function importObj(obj,position,scale,customProp) {
  var position = {
   x:0,
   y:0,
   z:0
  };
  var scale = {
   x:1,
   y:1,
   z:1
  };
  var texture=""; 
  if(customProp&&customProp!=="") {
 eval(customProp);
}
  var loadOBJ = function (posX,posY,posZ,scaleX,scaleY,scaleZ,obj,texture) {
  var manager = new THREE.LoadingManager();
  var loader = new THREE.OBJLoader(manager);
  loader.load(obj, addBananaInScene);
  var textureLoader = new THREE.TextureLoader();
var map = textureLoader.load(texture);
alert(texture)
var material = new THREE.MeshPhongMaterial({map: map});
var loader = new THREE.OBJLoader();
loader.load( obj, function ( object ) {
  object.traverse( function ( node ) {
    if ( node.isMesh ) node.material = material;
  } );
  // loader.fromBufferGeometry(obj);
// alert(posX + " ? " + posY + " ? " + posZ + " / " + scaleX + " ? " + scaleY + " ? " + scaleZ);
  setTimeout(function(){scene.add( object )},100);
   temple = object;
  temple.scale.set(scale.x,scale.y,scale.z);
  temple.position.set(position.x,position.y,position.z);
} );
};
var addBananaInScene = function (object) {
  object.traverse(function (child) {
    if (child instanceof Physijs.Mesh) {
      child.material.color = new THREE.Color(0X00FF00);
      child.geometry.computeVertexNormals();
    }
  });
};
loadOBJ(position.x,position.y,position.z,scale.x,scale.y,scale.z,obj,texture);
}
function createParticle(prop) {
// body,rotation (not available),velocity.x,velocity.y,velocity.z,texture
// texture test: "Data/rendering/ThreeJS_Tutorial_ParticleSystems-master/resources/fire.jpg"

const _VS = `
uniform float pointMultiplier;

attribute float size;
attribute float angle;
attribute vec4 colour;

varying vec4 vColour;
varying vec2 vAngle;

void main() {
 vec4 mvPosition = modelViewMatrix * vec4(position, 1.0);

 gl_Position = projectionMatrix * mvPosition;
 gl_PointSize = size * pointMultiplier / gl_Position.w;

 vAngle = vec2(cos(angle), sin(angle));
 vColour = colour;
}`;

const _FS = `

uniform sampler2D diffuseTexture;

varying vec4 vColour;
varying vec2 vAngle;

void main() {
 vec2 coords = (gl_PointCoord - 0.5) * mat2(vAngle.x, vAngle.y, -vAngle.y, vAngle.x) + 0.5;
 gl_FragColor = texture2D(diffuseTexture, coords) * vColour;
}`;


class LinearSpline {
 constructor(lerp) {
   this._points = [];
   this._lerp = lerp;
 }

 AddPoint(t, d) {
   this._points.push([t, d]);
 }

 Get(t) {
   let p1 = 0;

   for (let i = 0; i < this._points.length; i++) {
     if (this._points[i][0] >= t) {
       break;
     }
     p1 = i;
   }

   const p2 = Math.min(this._points.length - 1, p1 + 1);

   if (p1 == p2) {
     return this._points[p1][1];
   }

   return this._lerp(
       (t - this._points[p1][0]) / (
           this._points[p2][0] - this._points[p1][0]),
       this._points[p1][1], this._points[p2][1]);
 }
}


class ParticleSystem {
 constructor(params) {
   const uniforms = {
       diffuseTexture: {
           value: new THREE.TextureLoader().load("Assets/Textures/" + prop.texture)
       },
       pointMultiplier: {
           value: window.innerHeight / (2.0 * Math.tan(0.5 * 60.0 * Math.PI / 180.0))
       }
   };

   this._material = new THREE.ShaderMaterial({
       uniforms: uniforms,
       vertexShader: _VS,
       fragmentShader: _FS,
       blending: THREE.AdditiveBlending,
       depthTest: true,
       depthWrite: false,
       transparent: true,
       vertexColors: true
   });

   camera = params.camera;
   this._particles = [];

   this._geometry = new THREE.BufferGeometry();
   this._geometry.setAttribute('position', new THREE.Float32BufferAttribute([], 3));
   this._geometry.setAttribute('size', new THREE.Float32BufferAttribute([], 1));
   this._geometry.setAttribute('colour', new THREE.Float32BufferAttribute([], 4));
   this._geometry.setAttribute('angle', new THREE.Float32BufferAttribute([], 1));

   this._points = new THREE.Points(this._geometry, this._material);

   params.parent.add(this._points);

   this._alphaSpline = new LinearSpline((t, a, b) => {
     return a + t * (b - a);
   });
   this._alphaSpline.AddPoint(0.0, 0.0);
   this._alphaSpline.AddPoint(0.1, 1.0);
   this._alphaSpline.AddPoint(0.6, 1.0);
   this._alphaSpline.AddPoint(1.0, 0.0);

   this._colourSpline = new LinearSpline((t, a, b) => {
     const c = a.clone();
     return c.lerp(b, t);
   });
   this._colourSpline.AddPoint(0.0, new THREE.Color(0xFFFF80));
   this._colourSpline.AddPoint(1.0, new THREE.Color(0xFF8080));

   this._sizeSpline = new LinearSpline((t, a, b) => {
     return a + t * (b - a);
   });
   this._sizeSpline.AddPoint(0.0, 1.0);
   this._sizeSpline.AddPoint(0.5, 5.0);
   this._sizeSpline.AddPoint(1.0, 1.0);

   document.addEventListener('keyup', (e) => this._onKeyUp(e), false);
 
   this._UpdateGeometry();
 }

 _onKeyUp(event) {
   switch(event.keyCode) {
     case 32: // SPACE
       this._AddParticles();
       break;
   }
 }

 _AddParticles(timeElapsed) {
   if (!this.gdfsghk) {
     this.gdfsghk = 0.0;
   }
   this.gdfsghk += timeElapsed;
   const n = Math.floor(this.gdfsghk * 75.0);
   this.gdfsghk -= n / 75.0;

   for (let i = 0; i < n; i++) {
     const life = (Math.random() * 0.75 + 0.25) * 10.0;
     this._particles.push({
         position: new THREE.Vector3(
             prop.body.position.x,
             prop.body.position.y,
             prop.body.position.z),
         // size: (Math.random() * 0.5 + 0.5) * 4.0,
         size: 1,
         colour: new THREE.Color(0xff0000),
         alpha: 1.0,
         life: life,
         maxLife: life,
         // rotation: Math.random() * 2.0 * Math.PI,
         rotation: 0,
         velocity: new THREE.Vector3(prop.velocity.x, prop.velocity.y, prop.velocity.z),
     });
   }
 }

 _UpdateGeometry() {
   const positions = [];
   const sizes = [];
   const colours = [];
   const angles = [];

   for (let p of this._particles) {
     positions.push(p.position.x, p.position.y, p.position.z);
     colours.push(p.colour.r, p.colour.g, p.colour.b, p.alpha);
     sizes.push(p.currentSize);
     angles.push(p.rotation);
   }

   this._geometry.setAttribute(
       'position', new THREE.Float32BufferAttribute(positions, 3));
   this._geometry.setAttribute(
       'size', new THREE.Float32BufferAttribute(sizes, 1));
   this._geometry.setAttribute(
       'colour', new THREE.Float32BufferAttribute(colours, 4));
   this._geometry.setAttribute(
       'angle', new THREE.Float32BufferAttribute(angles, 1));
 
   this._geometry.attributes.position.needsUpdate = true;
   this._geometry.attributes.size.needsUpdate = true;
   this._geometry.attributes.colour.needsUpdate = true;
   this._geometry.attributes.angle.needsUpdate = true;
 }

 _UpdateParticles(timeElapsed) {
   for (let p of this._particles) {
     p.life -= timeElapsed;
   }

   this._particles = this._particles.filter(p => {
     return p.life > 0.0;
   });

   for (let p of this._particles) {
     const t = 1.0 - p.life / p.maxLife;

     p.rotation += timeElapsed * 0.5;
     p.alpha = this._alphaSpline.Get(t);
     p.currentSize = p.size * this._sizeSpline.Get(t);
     p.colour.copy(this._colourSpline.Get(t));

     p.position.add(p.velocity.clone().multiplyScalar(timeElapsed));
     const drag = p.velocity.clone();
     drag.multiplyScalar(timeElapsed * 0.1);
     drag.x = Math.sign(p.velocity.x) * Math.min(Math.abs(drag.x), Math.abs(p.velocity.x));
     drag.y = Math.sign(p.velocity.y) * Math.min(Math.abs(drag.y), Math.abs(p.velocity.y));
     drag.z = Math.sign(p.velocity.z) * Math.min(Math.abs(drag.z), Math.abs(p.velocity.z));
     p.velocity.sub(drag);
   }

   this._particles.sort((a, b) => {
     const d1 = camera.position.distanceTo(a.position);
     const d2 = camera.position.distanceTo(b.position);

     if (d1 > d2) {
       return -1;
     }

     if (d1 < d2) {
       return 1;
     }

     return 0;
   });
 }

 Step(timeElapsed) {
   this._AddParticles(timeElapsed);
   this._UpdateParticles(timeElapsed);
   this._UpdateGeometry();
 }
}

class ParticleSystemDemo {
 constructor() {
   this._Initialize();
 }

 _Initialize() {
   renderer.shadowMap.enabled = true;
   renderer.shadowMap.type = THREE.PCFSoftShadowMap;
   renderer.setPixelRatio(window.devicePixelRatio);
   renderer.setSize(window.innerWidth, window.innerHeight);

   document.body.appendChild(renderer.domElement);

   window.addEventListener('resize', () => {
     this._OnWindowResize();
   }, false);

   this._particles = new ParticleSystem({
       parent: scene,
       camera: camera,
   });

   this._previousRAF = null;
   this._RAF();
 }

 _OnWindowResize() {
   camera.aspect = window.innerWidth / window.innerHeight;
   camera.updateProjectionMatrix();
   renderer.setSize(window.innerWidth, window.innerHeight);
   ASCIIEffect.setSize( window.innerWidth, window.innerHeight );
 }

 _RAF() {
   requestAnimationFrame((t) => {
     if (this._previousRAF === null) {
       this._previousRAF = t;
     }

     this._RAF();

     // renderer.render(scene, camera);
     this._Step(t - this._previousRAF);
     this._previousRAF = t;
   });
 }

 _Step(timeElapsed) {
   const timeElapsedS = timeElapsed * 0.001;

   this._particles.Step(timeElapsedS);
 }
}


let _APP = null;

window.addEventListener('DOMContentLoaded', () => {
 _APP = new ParticleSystemDemo();
});
new ParticleSystemDemo();
}






// addConstraint({shape: 'cube', color: 'white', position: {x:0,y:0,z:-20}, limit: {low: -20, high: 10, bias_factor: 0.5, bias_relaxation: -0}, directionalForce: {x:5,y:0,z:5},restitution: {x: 0.2, y: 0.1}, strength: {x:Math.PI / 2,y:0,z:0}});
function addConstraint(prop) {
    var sliderSphere = new THREE.CubeGeometry(7, 2, 7);
    var sliderMesh;
    if(prop.shape.toLowerCase() == "sphere") {
     sliderMesh = new Physijs.SphereMesh(sliderSphere, Physijs.createMaterial(
     new THREE.MeshPhongMaterial({color: prop.color}), 0, 0), 10);
    };
    if(prop.shape.toLowerCase() == "cube") {
     sliderMesh = new Physijs.SphereMesh(sliderSphere, Physijs.createMaterial(
     new THREE.MeshPhongMaterial({color: prop.color}), 0, 0), 10);
    };
    sliderMesh.position.set(prop.position.x,prop.position.y,prop.position.z);
    scene.add(sliderMesh);
    //position is the position of the axis, relative to the ref, based on the current position
    var constraint = new Physijs.SliderConstraint(sliderMesh, new THREE.Vector3(prop.directionalForce.x, prop.directionalForce.y, prop.directionalForce.z), new THREE.Vector3(prop.strength.x, prop.strength.y, prop.strength.z));
    scene.addConstraint(constraint);
    /*
     "setLimits" function:
     low: minimum angle of motion, in radians, from the point object 1 starts (going back)
     high: maximum angle of motion, in radians, from the point object 1 starts (going forward)
     bias_factor: applied as a factor to constraint error, how big the kantelpunt is moved when a constraint is hit
     relaxation_factor: controls bounce at limit (0.0 == no bounce)
    */
    constraint.setLimits(prop.limit.low, prop.limit.high, prop.limit.bias_factor, prop.limit.relaxation_factor); // This function contains four parameters, namely low (specify the lowest radian of rotation), high (specify the maximum radian of rotation), bias_factor (this attribute specifies the speed at which the constraint is corrected when in the wrong position), and relaxation_factor (change the attribute specified Constraint at what scale to change the speed).
    constraint.setRestitution(prop.restitution.x, prop.restitution.y); // restitution sets the material elasticity, the larger the value, the stronger the elasticity; the smaller the value, the weaker the elasticity. Restitution sets the coefficient of friction. The smaller the value, the smaller the friction and the easier the object will move; the larger the value, the greater the friction and the harder the object will move.
    return constraint;
}
// var sliderTopConstraint = addConstraint();
function picker(pickerColor,_evt,code,blacklist) {
if(_evt !== "mousedown") {
 var _coords = new THREE.Vector2();
 var raycaster = new THREE.Raycaster();
 var pickedBody;
 var mouseSphere;
 var mouseJoint;
 init();
 function init() {
 if(!pickerColor=="transparent"||!pickerColor=="invisible") {
 mouseSphere = new Physijs.SphereMesh( 
  new THREE.SphereGeometry( 0.1, 10, 10 ), 
  new THREE.MeshPhongMaterial({color:pickerColor}), 0
 );
 };
 if(pickerColor=="transparent"||pickerColor=="invisible") {
  mouseSphere = new Physijs.SphereMesh( 
  new THREE.SphereGeometry( 0.1, 10, 10 ), 
  new THREE.MeshPhongMaterial({color:0xffffff}), 0
 );
  mouseSphere.material.transparent = true;
  mouseSphere.material.opacity = 0;
 };
 scene.add(mouseSphere); 
 mouseSphere.visible = false;
}
 window.addEventListener( _evt, function(event) {
  _coords.set(
					( event.clientX / window.innerWidth ) * 2 - 1,
					- ( event.clientY / window.innerHeight ) * 2 + 1
				);
 				raycaster.setFromCamera( _coords, camera );
        var intersects = raycaster.intersectObjects( scene.children );
        for(var i = 0; i < intersects.length; i++) {
        for(var b = 0; b < blacklist.length; b++) {
        // console.log(intersects[i].object.name!==blacklist[b]);
        //  if(!intersects[i][0].object.name.includes(blacklist)) {
        if(intersects[i].object.name!==blacklist[b]) {
        
				if(intersects.length > 0 && intersects[i].object.name!==blacklist[b]) {
        mouseCoords = {
         x:intersects[0].point.x,
         y:intersects[0].point.y,
         z:intersects[0].point.z
        // };
       };
      };
     };
    };
					mouseSphere.visible = true;
          // terminal.log(_coords.x + " / " + _coords.y);
					var pickPos = intersects[ 0 ].point;
					var wp = new THREE.Vector3(pickPos.x, pickPos.y, pickPos.z);
					wp.project(camera);
					mouseZ = wp.z;
					mouseSphere.position.set( pickPos.x, pickPos.y, pickPos.z );
					mouseSphere.__dirtyPosition = true;
					var pickedBody = intersects[ 0 ].object;
					mouseJoint = new Physijs.PointConstraint(pickedBody, mouseSphere, pickPos); 
                    if(pickedBody) {
                     eval(code);
                    }
					scene.addConstraint(mouseJoint);  
			 };
 }, false );
};
if(_evt == "mousedown") {
var _coords = new THREE.Vector2();
var raycaster = new THREE.Raycaster();
var pickedBody;
var mouseSphere;
var mouseJoint;
window.addEventListener( 'mousedown', onMouseDown, false );
window.addEventListener( 'mouseup', onMouseUp, false);	
init();
function init() {
mouseSphere = new Physijs.SphereMesh( 
					new THREE.SphereGeometry( 0.1, 10, 10 ), 
					new THREE.MeshPhongMaterial({color:pickerColor}),
					0
				);
				scene.add(mouseSphere); 
				mouseSphere.visible = false;
}
function onMouseUp( event ) {
				if(mouseJoint != undefined) {
					scene.removeConstraint(mouseJoint); 
					mouseSphere.visible = false;
					mouseJoint = undefined;  
				}
			}
			function onMouseDown(event) { 
_coords.set(
					( event.clientX / window.innerWidth ) * 2 - 1,
					- ( event.clientY / window.innerHeight ) * 2 + 1
				);
 				raycaster.setFromCamera( _coords, camera );
        var intersects = raycaster.intersectObjects( scene.children );
        mouseCoords = {
         x:intersects[0].point.x,
         y:intersects[0].point.y,
         z:intersects[0].point.z
        };
				if(intersects.length > 0) {
					mouseSphere.visible = true;
          // terminal.log(_coords.x + " / " + _coords.y);
					var pickPos = intersects[ 0 ].point;
					var wp = new THREE.Vector3(pickPos.x, pickPos.y, pickPos.z);
					wp.project(camera);
					mouseZ = wp.z;
					mouseSphere.position.set( pickPos.x, pickPos.y, pickPos.z );
					mouseSphere.__dirtyPosition = true;
					var pickedBody = intersects[ 0 ].object;
					mouseJoint = new Physijs.PointConstraint(pickedBody, mouseSphere, pickPos); 
                    if(pickedBody) {
                     eval(code);
                    }
					scene.addConstraint(mouseJoint);  
			 }
            }
          }
}








// var chair_material=ground_material = Physijs.createMaterial(
// 			new THREE.MeshLambertMaterial({color:'saddlebrown'}),
// 			.8, // high friction
// 			.4 // low restitution
// 		);
// buildBack = function() {
// 			var back, _object;
			
// 			back = new Physijs.BoxMesh(
// 				new THREE.BoxGeometry( 5, 1, .5 ),
// 				chair_material
// 			);
// 			back.position.y = 5;
// 			back.position.z = -2.5;
// 			back.castShadow = true;
// 			back.receiveShadow = true;
			
// 			// rungs - relative to back
// 			_object = new Physijs.BoxMesh(
// 				new THREE.BoxGeometry( 1, 5, .5 ),
// 				chair_material
// 			);
// 			_object.position.y = -3;
// 			_object.position.x = -2;
// 			_object.castShadow = true;
// 			_object.receiveShadow = true;
// 			back.add( _object );
			
// 			_object = new Physijs.BoxMesh(
// 				new THREE.BoxGeometry( 1, 5, .5 ),
// 				chair_material
// 			);
// 			_object.position.y = -3;
// 			_object.castShadow = true;
// 			_object.receiveShadow = true;
// 			back.add( _object );
			
// 			_object = new Physijs.BoxMesh(
// 				new THREE.BoxGeometry( 1, 5, .5 ),
// 				chair_material
// 			);
// 			_object.position.y = -3;
// 			_object.position.x = 2;
// 			_object.castShadow = true;
// 			_object.receiveShadow = true;
// 			back.add( _object );
			
// 			return back;
// 		};
// buildLegs = function() {
// 			var leg, _leg;
			
// 			// back left
// 			leg = new Physijs.BoxMesh(
// 				new THREE.BoxGeometry( .5, 4, .5 ),
// 				chair_material
// 			);
// 			leg.position.x = 2.25;
// 			leg.position.z = -2.25;
// 			leg.position.y = -2.5;
// 			leg.castShadow = true;
// 			leg.receiveShadow = true;
			
// 			// back right - relative to back left leg
// 			_leg = new Physijs.BoxMesh(
// 				new THREE.BoxGeometry( .5, 4, .5 ),
// 				chair_material
// 			);
// 			_leg.position.x = -4.5;
// 			_leg.castShadow = true;
// 			_leg.receiveShadow = true;
// 			leg.add( _leg );
			
// 			// front left - relative to back left leg
// 			_leg = new Physijs.BoxMesh(
// 				new THREE.BoxGeometry( .5, 4, .5 ),
// 				chair_material
// 			);
// 			_leg.position.z = 4.5;
// 			_leg.castShadow = true;
// 			_leg.receiveShadow = true;
// 			leg.add( _leg );
			
// 			// front right - relative to back left leg
// 			_leg = new Physijs.BoxMesh(
// 				new THREE.BoxGeometry( .5, 4, .5 ),
// 				chair_material
// 			);
// 			_leg.position.x = -4.5;
// 			_leg.position.z = 4.5;
// 			_leg.castShadow = true;
// 			_leg.receiveShadow = true;
// 			leg.add( _leg );
			
// 			return leg;
// 		};
// spawnChair = (function() {
// 		var buildBack, buildLegs, doSpawn;
		
// 		buildBack = function() {
// 			var back, _object;
			
// 			back = new Physijs.BoxMesh(
// 				new THREE.BoxGeometry( 5, 1, .5 ),
// 				chair_material
// 			);
// 			back.position.y = 5;
// 			back.position.z = -2.5;
// 			back.castShadow = true;
// 			back.receiveShadow = true;
			
// 			// rungs - relative to back
// 			_object = new Physijs.BoxMesh(
// 				new THREE.BoxGeometry( 1, 5, .5 ),
// 				chair_material
// 			);
// 			_object.position.y = -3;
// 			_object.position.x = -2;
// 			_object.castShadow = true;
// 			_object.receiveShadow = true;
// 			back.add( _object );
			
// 			_object = new Physijs.BoxMesh(
// 				new THREE.BoxGeometry( 1, 5, .5 ),
// 				chair_material
// 			);
// 			_object.position.y = -3;
// 			_object.castShadow = true;
// 			_object.receiveShadow = true;
// 			back.add( _object );
			
// 			_object = new Physijs.BoxMesh(
// 				new THREE.BoxGeometry( 1, 5, .5 ),
// 				chair_material
// 			);
// 			_object.position.y = -3;
// 			_object.position.x = 2;
// 			_object.castShadow = true;
// 			_object.receiveShadow = true;
// 			back.add( _object );
//             scene.add( chair );			

// 			return back;
// 		};
// }
//               )
// doSpawn = function() {
// 			var chair, back, legs;
			
// 			// seat of the chair
// 			chair = new Physijs.BoxMesh(
// 				new THREE.BoxGeometry( 5, 1, 5 ),
// 				chair_material
// 			);
// 			chair.castShadow = true;
// 			chair.receiveShadow = true;
			
// 			// back - relative to chair ( seat )
// 			back = buildBack();
// 			chair.add( back );
			
// 			// legs - relative to chair ( seat )
// 			legs = buildLegs();
// 			chair.add( legs );
			
// 			chair.position.y = 20;
// 			chair.position.x = Math.random() * 50 - 25;
// 			chair.position.z = Math.random() * 50 - 25;
			
// 			chair.rotation.set(
// 				Math.random() * Math.PI * 2,
// 				Math.random() * Math.PI * 2,
// 				Math.random() * Math.PI * 2
// 			);
// 		    chair.scale.set(0.1,0.1,0.1);	
// 			chair.addEventListener( 'ready', spawnChair );
// 			scene.add( chair );
// 	}();









function createMTL(obj,mtl,prop) {
//  name="";
  var mtlLoader = new THREE.MTLLoader();
mtlLoader.crossOrigin = true;
// mtlLoader.setPath('https://s3-us-west-2.amazonaws.com/s.cdpn.io/39255/');
mtlLoader.load("Assets/MTL/"+mtl+".mtl", function (materials) {
  materials.preload();
  var objLoader = new THREE.OBJLoader();
  objLoader.setMaterials(materials);
  //objLoader.setPath('https://s3-us-west-2.amazonaws.com/s.cdpn.io/39255/');
  objLoader.load("Assets/Objects/"+obj+".obj", function (object) {
    // if(customProp&&customProp!=="") {
    //  if(customProp&&customProp!=="") {
    //   eval("object."+customProp.split(";").join(";object."));
    //  }
    // }
    object.position.set(prop.position.x,prop.position.y,prop.position.z);
    object.scale.set(prop.scale.x,prop.scale.y,prop.scale.z);
    if(prop.name&&prop.name!=="") {
     object.name=prop.name;
    }
    // object["animations"]=obj.animations;
    // mixer = new THREE.AnimationMixer(object);
    // mixer_BAK=new THREE.AnimationMixer(object);
    scene.add(object);
  });
});
}
// Projects = {};
// function project(configuration) {
//  Projects[JSON.parse(configuration).name]={name:JSON.parse(configuration).name,ID:0};
//  localStorage.setItem(JSON.parse(configuration).name, '\'{"name":"'+Projects[JSON.parse(configuration).name].name+'","ID":'+Projects[JSON.parse(configuration).name].ID+"}'");
//  // return JSON.parse(configuration).name;
// };
// function saveData(key, value) {
//  Projects[getKeyName(Projects, 0)][key]=value;
//  localStorage.setItem(getKeyName(Projects, 0), JSON.stringify(Projects[getKeyName(Projects, 0)]));
// }
// function loadData(dataName) {
//  if(typeof getKeyName(Projects, 0) === undefined || typeof getKeyName(Projects, 0) === 'undefined') {
//   terminal.warn("Can't load data: Make sure you have configured the settings for the current project.");
//  }
//  if(typeof getKeyName(Projects, 0) === 'string') {
//   return eval(`JSON.parse(localStorage.getItem(getKeyName(Projects, 0)).split("'").join("")).`+dataName);
//  }
// }
function createOBJ(obj, prop) {
  // position
  // createOBJ(0,0,0,0.01,0.01,0.01,'https://raw.githubusercontent.com/mattatz/ShibuyaCrowd/master/dest/models/crowd/marine/Human.obj','https://images.unsplash.com/photo-1547845652-f1f8e58733c4?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&w=1000&q=80');
  // var texture="";
if(obj=="Knight") {
  var objectNames = function( objects ) {

var result = [];

for ( var i = 0, n = objects.length; i !== n; ++ i ) {

  var obj = objects[ i ];
  result.push( obj && obj.name || '&lt;null&gt;' );

}

return result;

};

  var SCREEN_WIDTH = window.innerWidth;
			var SCREEN_HEIGHT = window.innerHeight;
			var FLOOR = -250;

			var helper;


			var domMemInfo = document.getElementById( 'meminfo' ),
				showMemInfo = false;

			init();
			animate();

			function init() {

				renderer.gammaInput = true;
				renderer.gammaOutput = true;

				renderer.shadowMap.enabled = true;

				var loader = new THREE.JSONLoader();
				loader.load( "https://raw.githubusercontent.com/timoxley/threejs/master/examples/models/skinned/knight.js", function ( geometry, materials ) {

					createScene( geometry, materials, 0, FLOOR, -300, 60 );



				} );


			}

			function createScene( geometry, materials, x, y, z, s ) {

				//ensureLoop( geometry.animation );

				geometry.computeBoundingBox();
				var bb = geometry.boundingBox;

				var path = "https://www.markmillerarchitecture.com/bubbles/textures/cube/Park2/";
				var format = '.jpg';
				var urls = [
						path + 'posx' + format, path + 'negx' + format,
						path + 'posy' + format, path + 'negy' + format,
						path + 'posz' + format, path + 'negz' + format
					];

				for ( var i = 0; i < materials.length; i ++ ) {

					var m = materials[ i ];
					m.skinning = true;
					m.morphTargets = true;

					m.specular.setHSL( 0, 0, 0.1 );

					m.color.setHSL( 0.6, 0, 0.6 );

					//m.map = map;
					//m.envMap = envMap;
					//m.bumpMap = bumpMap;
					//m.bumpScale = 2;

					//m.combine = THREE.MixOperation;
					//m.reflectivity = 0.75;

				}

				knight = new THREE.SkinnedMesh( geometry, new THREE.MultiMaterial( materials ) );
				knight.name = name;
				// knight.position.set( x, y - bb.min.y * s, z );
				// knight.scale.set( s, s, s );
        knight.position.set( prop.position.x, prop.position.y, prop.position.z );
				knight.scale.set( prop.scale.x, prop.scale.y, prop.scale.z );
        knight["UYCModel"]=true;
				scene.add( knight );

				knight.castShadow = true;
				knight.receiveShadow = true;
        knight["animations"]={faceAnimation:{play:function(){action=mixer.clipAction(facesClip);action.play();}},attackAnimation:{play:function(){action=mixer.clipAction(bonesClip);action.play();}}};


				// knight2 = new THREE.SkinnedMesh( geometry, new THREE.MultiMaterial( materials ) );
				// knight2.name = "Lil' Bro Mesh";
				// knight2.position.set( x - 240, y - bb.min.y * s, z + 500 );
				// knight2.scale.set( s / 2, s / 2, s / 2 );
				// knight2.rotation.y = THREE.Math.degToRad( 60 );

				// knight2.visible = false;

				// knight2.castShadow = true;
				// knight2.receiveShadow = true;
				// scene.add( knight2 );

				helper = new THREE.SkeletonHelper( knight );
				helper.material.linewidth = 3;
				helper.visible = false;
				scene.add( helper );
				mixer = new THREE.AnimationMixer( knight );

				bonesClip = geometry.animations[0];
				facesClip = THREE.AnimationClip.CreateFromMorphTargetSequence( 'facialExpressions', knight.geometry.morphTargets, 3 );

			}

			


				// creates gui folder with tests / examples for the action API
				



				

			function animate() {

				requestAnimationFrame( animate );


				if ( showMemInfo ) {

					var s = mixer.stats,
						ciS = s.controlInterpolants;

					domMemInfo.innerHTML =
							s.actions.inUse + " / " + s.actions.total + " actions " +
							s.bindings.inUse + " / " + s.bindings.total + " bindings " +
							ciS.inUse + " / " + ciS.total + " control interpolants";

				}
			}
}
else {
var loader = new THREE.OBJLoader();
loader.load( "Assets/Objects/"+obj+".obj", function ( event ) {
var geometry;
event.traverse( function ( child ) {
if ( child instanceof Physijs.Mesh ) {
 geometry = new THREE.Geometry().fromBufferGeometry( child.geometry );
}
} );
var textureLoader = new THREE.TextureLoader();
var map = textureLoader.load(prop.texture);
var material = new THREE.MeshPhongMaterial({map: map});
var mesh = new Physijs.BoxMesh( geometry, material );
mesh.position.set(prop.position.x,prop.position.y,prop.position.z);
mesh.scale.set(prop.scale.x,prop.scale.y,prop.scale.z);
material.map.repeat.width=20;
material.map.repeat.height=20;
material.map.repeat.x=20;
material.map.repeat.y=20;
scene.add(mesh);
});
}
};
var showingConstraints;
var hidingConstraints;
function renderView(bool) {
if(bool=="on") {
clearInterval(hidingConstraints);
showingConstraints=setInterval(function(){
   for(var o=0;o<scene.children.length;o++) {
    // scene.children[o].material.wireframe=true;
   }
  // },3)
  })
 }
 if(bool=="off") {
  // setTimeout(function(){
clearInterval(showingConstraints);
hidingConstraints=setInterval(function(){
  for(var o=0;o<scene.children.length;o++) {
    // scene.children[o].material.wireframe=false;
   }
// for(var com=0;com<engine.world.composites.length;com++) {
// for(var con=0;con<engine.world.composites[com].constraints.length;con++) {
//  engine.world.composites[com].constraints[con].render.visible=false;
//     }
//    }
  // },3)
  })
 }
}













// var randomNumber = {
//   num: "",
//  generate: function(l) {
//    if(this.num!==""){this.num=""}
// for(var nums=0;nums<l;nums++) {
//    randomNumber.num+=Math.floor((Math.random() * 9) + 0);
//   }
//  }
// }
// var UYC = {
//  transform: {
//   Int: function(t) {
//    return Math.trunc(t)
//   }
//  },
//  generatedNumbers:"",
//  generate: {
//  numbers: function(prop) {
//    if(this.num!=="") {
//    UYC.generatedNumber="";
//    }
//    len=prop.split("length=").toString().split(", max=").toString().split(", min=").toString().split(",")[1]
//    max=prop.split("length=").toString().split(", max=").toString().split(", min=").toString().split(",")[2]
//    min=prop.split("length=").toString().split(", max=").toString().split(", min=").toString().split(",")[3]
//    type=prop.split("length=").toString().split(", max=").toString().split(", min=").toString().split(",")[4].split(" ").join("")
//    ff=""
//    if(type=="integer") {
//  for(var nums=0;nums<len;nums++) {
//     UYC.generatedNumbers+=Math.floor((Math.random() * max) + min);
//     }
//    }
//    if(type=="float"&&len>1) {
//  for(var nums=0;nums<len;nums++) {
//      ff+=Math.floor((Math.random() * max) + min);
//      UYC.generatedNumbers=Number(ff[0][0]+"."+ff.slice(1));
//     }
//    }
//    if(type=="float"&&len==1) {
//     terminal.warn("You can't float a "+len+" length number.")
//    }
//   }
//  }
// }




  function smoothControl(prop) {
  xVal=prop.body.position.x;
  zVal=prop.body.position.y;
  velXVal=0;
  velZVal=0;
  speedVal=0.5;
  frictionVal=0.98;
  keys = ["up", "down", "left", "right"];
setTimeout(function(){
var x = xVal,
    z = zVal,
    velX = velXVal,
    velZ = velZVal,
    speed = speedVal,
    friction = frictionVal,
    _keys = [];

function update() {
    requestAnimationFrame(update);
    if(prop.keyConfig) {
     if(typeof prop.keyConfig.up === 'boolean') {
       console.log(prop.keyConfig.up);
      if(prop.keyConfig.up&&keys.includes("up")) {
      if (velZ > -speed) {
            velZ--;
            // alert("started: -z")
        }
    }
     }
     if(typeof prop.keyConfig.up !== 'boolean') {
    if (prop._keys[prop.keyConfig.up.toUpperCase().charCodeAt(0)]&&keys.includes("up")) { 
      if (velZ > -speed) {
            velZ--;
            // alert("started: -z")
        }
    }
  }
  if(typeof prop.keyConfig.down === 'boolean') {
    if (prop.keyConfig.down&&keys.includes("down")) {
      if (velZ < speed) {
            velZ++;
            // alert("started: -z")
        }
    }
  }
  if(typeof prop.keyConfig.down !== 'boolean') {
    if (prop._keys[prop.keyConfig.down.toUpperCase().charCodeAt(0)]&&keys.includes("down")) {
      if (velZ < speed) {
            velZ++;
            // alert("started: -z")
        }
    }
  }
  if(typeof prop.keyConfig.right === 'boolean') {
    if (prop.keyConfig.right&&keys.includes("right")/*&&velProp.split("velocityX:")[1].split(",")[0]=="true"*/) {
        if (velX < speed) {
            velX++;
            // alert("started: +z")
        }
    }
   }
  }
    if(typeof prop.keyConfig.right !== 'boolean') {
    if (prop._keys[prop.keyConfig.right.toUpperCase().charCodeAt(0)]&&keys.includes("right")/*&&velProp.split("velocityX:")[1].split(",")[0]=="true"*/) {
        if (velX < speed) {
            velX++;
            // alert("started: +z")
        }
    }
};
if(typeof prop.keyConfig.left === 'boolean') {
  if (prop.keyConfig.left&&keys.includes("left")/*&&velProp.split("velocityX:")[1].split(",")[0]=="true"*/) {
        if (velX > -speed) {
            velX--;
            // alert("started: -x")
        }
    }
  }
if(typeof prop.keyConfig.left !== 'boolean') {
    if (prop._keys[prop.keyConfig.left.toUpperCase().charCodeAt(0)]&&keys.includes("left")/*&&velProp.split("velocityX:")[1].split(",")[0]=="true"*/) {
        if (velX > -speed) {
            velX--;
            // alert("started: -x")
        }
    }
  }
   else {
    if (prop._keys[38]&&keys.includes("up")) { 
      if (velZ > -speed) {
            velZ--;
            // alert("started: -z")
        }
    }
    if (prop._keys[40]&&keys.includes("down")) {
      if (velZ < speed) {
            velZ++;
            // alert("started: -z")
        }
    }
    if (prop._keys[39]&&keys.includes("right")/*&&velProp.split("velocityX:")[1].split(",")[0]=="true"*/) {
        if (velX < speed) {
            velX++;
            // alert("started: +z")
        }
    }
    if (prop._keys[37]&&keys.includes("left")/*&&velProp.split("velocityX:")[1].split(",")[0]=="true"*/) {
        if (velX > -speed) {
            velX--;
            // alert("started: -x")
        }
    }
   }
    velX *= friction;
    velZ *= friction;
    x += velX;
    z += velZ

    //if (x >= 1920) {
    //    x = 1920;
    //} else if (x <= 5) {
    //    x = 5;
    //}

    //if (y > 820) {
    //    y = 820;
    //} else if (y <= 5) {
    //    y = 5;
    //}
  eval("prop.body.__dirtyPosition = true;prop.body.__dirtyRotation = true;prop.body.position.x="+x+";prop.body.rotation.y="+x / speed / 30.5)
  //eval("body.__dirtyPosition = true;body.position.y="+y)
  eval("prop.body.__dirtyPosition = true;prop.body.__dirtyRotation = true;prop.body.position.z="+z+";prop.body.rotation.y="+x / speed / 30.5)
	//terminal.log(x+", "+y)
}
update()

document.body.addEventListener("keydown", function (e) {
    prop._keys[e.keyCode] = true;
    if(event.keyCode==38){upVar=true;setTimeout(function(){upVar=false},3)}else{upVar=false}
    if(event.keyCode==40){downVar=true;setTimeout(function(){downVar=false},3)}else{downVar=false}
});
document.body.addEventListener("keyup", function (e) {
    prop._keys[e.keyCode] = false;
});
},10)
  }
  var mConstraint
  var setupProgress=setInterval(setup)
    function setup(){
      if(plugins&&plugins.hasOwnProperty('mouseEvent')/*&&engine.world.bodies[1]*/){
    clearInterval(setupProgress)
  
    var canvas=document.getElementsByTagName("canvas")[0]
    var canvasmouse=Mouse.create(canvas.elt);
    canvasmouse.pixelRatio=pixelDensity();
    var options = { x: 170, y: 450 };
    mConstraint=MouseConstraint.create(engine, options);
    World.add(engine.world, mConstraint);
        }
  }
  
  
    // setTimeout(function(){
    //document.getElementsByTagName("canvas")[0].onclick=function(){alert('e')}
    // },3)
  function $_gAE(i, z) {
   if(!z) {
    for(var e = 0; e < document.querySelectorAll("*").length; e++) {
     return document.querySelectorAll("*")[i];
    };
   };
   if(z) {
    return document.querySelectorAll("*").length;
   };
  };
  String.prototype.find = function(o, p) {
 var searchStrLen = o.length;
 if(searchStrLen == 0) {
  return [];
 }
//  String.prototype.replace = function(s, j) {
//   return this.split(s).join(j);
//  }
// [FIX]: Think about the replace string prototype function bro :/
 var startIndex = 0, index, indices = [];
 if(p && p.caseSensitive) {
  while((index = str.toLowerCase().indexOf(o.toLowerCase(), startIndex)) > -1) {
   indices.push(index);
   startIndex = index + searchStrLen;
  }
  return indices;
 }
 if(p && !p.caseSensitive) {
  while((index = str.indexOf(o, startIndex)) > -1) {
   indices.push(index);
   startIndex = index + searchStrLen;
  }
  return indices;
 }
};
String.prototype.reverse = function(t) {
 return this.split("").reverse().join("");
};
function count(s) {
if(s.split(" in")[0].length == 1) {
 var chars = 0;
for(var position = 0; position < eval(s.split("in ")[1]).length; position++) {
 if(eval(s.split("in ")[1]).charAt(position) == s.split(" in")[0]) {
  chars += 1;
 }
}
 return chars;
}
if(s.split(" in")[0].length > 1) {
  // return (eval(s.split('in ')[1]).match(/e/g) || []).length;
  return (eval(s.split('in ')[1]).match(new RegExp(s.split(" in")[0], "g")) || []).length;
 }
}
String.prototype.replaceLast = function(o,o2) {
  return this.substr(0, this.length - this.split(o)[this.split(o).length - 1].length - o.length) + o2 + this.split(o)[this.split(o).length - 1];
};
function drawObj(o) {
var objCopy;
var edges;
var loader = new THREE.OBJLoader();
loader.load("Assets/Objects/"+o.object+".obj", function(object) {
  object.traverse(function(child) {
    if (child instanceof THREE.Mesh) {
      child.material = new THREE.MeshBasicMaterial({color: 0x999999});
      //scene.add(child);
      var edgesGeom = new THREE.EdgesGeometry(child.geometry, 5);
      edges = new THREE.LineSegments(edgesGeom, new THREE.LineDashedMaterial({color: 0x999999}));
      edges.computeLineDistances();
      edges.material.dashSize = 0;
      edges.material.gapSize = edges.geometry.attributes.lineDistance.array[edges.geometry.attributes.lineDistance.count - 1];
      scene.add(edges);
      child.scale.setScalar(0.999);
      child.visible = false;
      edges.add(child);
    }
  });
});
var fin = setInterval(() => {
if (edges){
    edges.material.dashSize += 1;
    if (edges.material.dashSize >= edges.material.gapSize){
      edges.material.color.set(0xffffff);
      edges.children[0].visible = true;
      clearInterval(fin);
      edges.children[0].material.transparent = true;
      edges.children[0].material.opacity = 0;
      edges.remove();
      // console.log(edges);
      removeBody(edges);
      objCopy = edges.children[0];
      scene.add(objCopy);
      setTimeout(() => { objCopy.material.opacity = 0.1 },3*o.speed);
      setTimeout(() => { objCopy.material.opacity = 0.2 },6*o.speed);
      setTimeout(() => { objCopy.material.opacity = 0.3 },9*o.speed);
      setTimeout(() => { objCopy.material.opacity = 0.4 },12*o.speed);
      setTimeout(() => { objCopy.material.opacity = 0.5 },15*o.speed);
      setTimeout(() => { objCopy.material.opacity = 0.6 },18*o.speed);
      setTimeout(() => { objCopy.material.opacity = 0.7 },21*o.speed);
      setTimeout(() => { objCopy.material.opacity = 0.8 },24*o.speed);
      setTimeout(() => { objCopy.material.opacity = 0.9 },27*o.speed);
      setTimeout(() => { objCopy.material.opacity = 1 },30*o.speed);
    }
    // edges.rotation.y += 0.01;
  }
},o.speed);
};

//   function attach(prop) {
//    eval(
//    "function _at(){requestAnimationFrame(_at);"+
//    "if("+prop.split("to ")[1]+") {"+
//    prop.split(" to")[0]+".style.left="+prop.split("to ")[1]+".position.x;"+
//    prop.split(" to")[0]+".style.top="+prop.split("to ")[1]+".position.y"+
//    "}};_at()"
//    );
  //  console.log(
  //  "console.log('running...');function _at(){requestAnimationFrame(_at);"+
  //  "if("+prop.split("to ")[1]+") {"+
  //  prop.split(" to")[0]+".style.left="+prop.split("to ")[1]+".position.x;"+
  //  prop.split(" to")[0]+".style.top="+prop.split("to ")[1]+".position.y"+
  //  "}};_at()"
  //  );
      //  setInterval(function(){
      //    if(prop.split("to ")[1]) {
      //   prop.split(" to")[0].style.left=prop.split("to ")[1].position.x
      //   prop.split(" to")[0].style.top=prop.split("to ")[1].position.y
      //    } 
      // })
//   }
document.getElementsByTagName("canvas")[0].id="engine"
function center(elem) {
  //  var htmlElem=document.getElementById("'"+elem+"'");
   if(document.getElementById(elem).style.position=="absolute") { 
    document.getElementById(elem).style.left="50%";
    document.getElementById(elem).style.top="50%";
   }
   else {
    document.getElementById(elem).style.position="absolute";
    document.getElementById(elem).style.left="50%";
    document.getElementById(elem).style.top="50%";
   }
  }
  function addAudio(prop) {
   if(plugins&&plugins.hasOwnProperty("audioEvent")) {
   var a=document.createElement("audio")
   a.controls;
   if(prop&&prop.looped) {
    a.loop=prop.looped;
   };
   if(prop&&prop.volume||prop&&prop.volume==0) {
    a.volume=prop.volume;
   };
   a.style.position="absolute";
   if(prop&&prop.position) {
    a.style.left=prop.position.x;
    a.style.top=prop.position.y;
   };
   if(prop&&prop.scale) {
    a.style.width=prop.scale.x;
    a.style.height=prop.scale.y;
   };
   if(prop.source.includes("http")) {
    a.src=prop.source;
   }
   else {
    a.src="Assets/Audio/"+prop.source+".mp3";
   };
   if(prop&&prop.id) {
    a.setAttribute("id",prop.id)
   };
   if(prop&&prop.currentTime) {
    a.currentTime=prop.currentTime;
   };
   if(prop&&prop.speed) {
    a.playbackRate=prop.speed;
   };
   a['setSpeed']=function(s){this.playbackRate=s};
   a['playing']=function(){return !this.paused};
   a['onEnd']=function(f){
     this.onended = f;
    //  console.log(f);
  };
   document.body.appendChild(a)
   }
  }
  function playAudio(id) {
    if(plugins&&plugins.hasOwnProperty("audioEvent")) {
     eval("document.getElementById('"+id+"').play()");
    }
  }
  function pauseAudio(id) {
    if(plugins&&plugins.hasOwnProperty("audioEvent")) {
     eval("document.getElementById('"+id+"').pause()");
    }
  }
  function resumeAudio(id) {
    if(plugins&&plugins.hasOwnProperty("audioEvent")) {
     eval("document.getElementById('"+id+"').resume()");
    }
  }
  function generateToken(a) {
 let rT = "";
 for(var i=0;i<a;i++){ 
   rT+=uL.concat(lL)[Math.floor(Math.random()*uL.concat(lL).length)]
  };
  return rT;
 };
  // function generateUserToken(){
  // for(var i=24-24;i<uL.length;i++){
  //  rID+=uL[Math.floor(Math.random()*uL.length)]+lL[Math.floor(Math.random()*lL.length)]
  // }
  // }
  // function checkBody(body,code) {
  //  generateToken()
  //  var theID=rID.split("undefined").join("")
  //  if(body=="*") {
  //   eval("var "+theID+"=setInterval(function(){for(var b=0;b<scene.children.length;b++){if(typeof scene.children[b] === 'object'){clearInterval("+theID+");"+code.split("currentBody").join(body)+"}}})")
  //  }
  //  else {
  //   eval("var "+theID+"=setInterval(function(){if(typeof "+body+" === 'object'){clearInterval("+theID+");"+code.split("currentBody").join(body)+"}})")
  //  }
  //  while(typeof body !== 'object') {
  //   if(typeof body == 'object') {
  //     console.log(123);
      //  clearInterval(finding);
  //     eval(code);
  //     break;
  //    };
  //   };
  // };
  var $_clones = [];
  function createClone(prop) {
  // [FIX]: Make it as you can also create only ONE clone. Because this thing only allows you to create multiple clones because it's using a for loop LMAO XD LOLOLOLOL
  // [FIX]: Make it as when you select the random color option, ALL OF THEM becomes different colors.
 for(var a = 0; a < prop.clones; a++) {
  var clone = prop.body.clone();
  // var $_cloneRandomizer = Math.floor((Math.random() * 2) + 0);
  var $_cloneRandomizerX = prop.space.x; // [-2, 2]
  var $_cloneRandomizerY = prop.space.y; // [-2, 2]
  var $_cloneRandomizerZ = prop.space.z; // [-2, 2]
  clone.position.x = prop.body.position.x + $_cloneRandomizerX[Math.floor(Math.random() * $_cloneRandomizerX.length)];
  clone.position.y = prop.body.position.y + $_cloneRandomizerY[Math.floor(Math.random() * $_cloneRandomizerY.length)];
  clone.position.z = prop.body.position.z + $_cloneRandomizerZ[Math.floor(Math.random() * $_cloneRandomizerZ.length)];
  if(!prop.shrink) {
   clone.scale.set(prop.body.scale.x / 2, prop.body.scale.y / 2, prop.body.scale.z / 2);
  };
  if(prop.shrink&&prop.shrink!=="") {
   clone.scale.set(prop.body.scale.x / prop.shrink, prop.body.scale.y / prop.shrink, prop.body.scale.z / prop.shrink);
  };
  $_clones.push(clone);
  if(prop.body.name&&prop.body.name!=="") {
   eval('window["' + prop.name + '"] = $_clones');
   setTimeout(() => {$_clones = [];},100)
   //  clone.name = prop.body.name+"_clone"+a;
  };
  if(!prop.body.name||prop.body.name=="") {
   clone.name = "";
  };
  if(prop.color&&prop.color!==""&&prop.color.toLocaleLowerCase()!=="random") {
   clone.material.color.setHex("0x" + UYC.convert.color("color_to_hex => " + prop.color));
  //  console.log("custom color");
  };
  if(prop.color&&prop.color.toLocaleLowerCase()=="random") {
  //  var rC = randomColor("color");
  //  clone.material.color.setHex("0x" + UYC.convert.color("color_to_hex => " + randomColor("color")));
  clone.traverse(function(child) {
   if(child instanceof THREE.Mesh) {
    child.material.color.setHex("0x" + UYC.convert.color("color_to_hex => " + randomColor("color")));
    // child.material.color.setHex("0x" + UYC.convert.color("color_to_hex => " + randomColor("color")));
   }
  });
  //  clone.material.color.setRGB(randomColor("RGB", true));
  //  clone.name = rC;
  //  console.log("randomized color");
  };
  if(!prop.color) {
   clone.material.color.setRGB(prop.body.material.color.r, prop.body.material.color.g, prop.body.material.color.b);
  //  console.log("original color");
  };
  scene.add(clone);
  // console.log(clone.position);
 };
//  setTimeout(() => { multicolorizeClones(); },100);
};
  function checkBody(body) {
   return typeof body === 'object';
  };
  function waitForBody(body,time) {
   if(typeof body==='object'&&typeof body.children==='object'){return true};
  //  if(time&&time!==""&&typeof time==='number'){
  //  var promise = new Promise(function(resolve, reject) {
  //   window.setTimeout(function() {
  //    if(typeof body==='object') {
  //     alert(1);
  //     if(typeof body.children==='object') {
  //      return true;
  //     };
  //    };
  //    if(typeof body!=='object') {
  //     return false;
  //    };
  //   },time);
  //  });
  //  return promise;
  //  };
   if(time&&typeof time==='number'&&time==""){
    terminal.warn("Invalid time: "+time);
   };
   if(time&&typeof time!=='number'){
    terminal.warn(time+" is not a number. You need to insert a number, not a "+typeof time+".");
   };
   if(!time&&body===undefined) {
    return false;
   };
  };
  var wIn=0
  var dataType;
  var dT={
   
  }
  var varNum=0
  function globalVar(variableName, variableValue) {
  // [FIX]: HTML ELEMENT AS VARIABLE ? :|
  // Btw, this is probably gonna take a while XD
  varNum++;
  var regExp = /[a-zA-Z]/g;
  if(variableValue===undefined) {
   var varVar="var "+variableName+"=''";
  };
  if(typeof variableValue === 'number') {
    var varVar="var "+variableName+"="+variableValue;
  };
  if(/* typeof variableValue === 'object' || */typeof variableValue === 'function' || typeof variableValue === 'boolean') {
    var varVar="var "+variableName+"="+JSON.stringify(variableValue);
  }
  else {
   if(typeof variableValue !== "number" && variableValue !== undefined) {
    var varVar="var "+variableName+"='"+JSON.stringify(variableValue)+"'";
   };
  };
  if(variableValue=="true"||variableValue=="false") {
   //dataType="boolean"
   dT[variableName]=typeof variableValue
  }
  else if(varVar.includes("'")||varVar.includes('"') && variableValue !== undefined){//regExp.compilerTextArea(variableValue)&&variableValue.startsWith("'")&&variableValue.endsWith("'")||regExp.compilerTextArea(variableValue)&&variableValue.startsWith('"')&&variableValue.endsWith('"')){
   //dataType="string"
   dT[variableName]=typeof variableValue
  } else {
   //dataType="number"
   dT[variableName]=typeof variableValue
  }
   var variableScript=document.createElement("script")
    variableScript.innerHTML=varVar
    // console.log(variableScript);
   document.body.appendChild(variableScript)
   if(typeof variableValue === 'object' || typeof variableValue === 'function') {
    eval(varVar);
   };
  }
  var localVariables = {};
  function localVar(variableName, variableValue) {
  if(localVariables && Object.keys(localVariables)[0] == undefined) {
    setTimeout(() => { localVariables[variableName]=variableValue; },3);
  varNum++
  var regExp = /[a-zA-Z]/g;
  if(typeof variableValue === 'object' || typeof variableValue === 'function') {
   var varVar="const "+variableName+"="+variableValue;
  }
  else {
   var varVar="const "+variableName+"='"+variableValue+"'";
  };
  if(variableValue=="true"||variableValue=="false") {
   //dataType="boolean"
   dT[variableName]=typeof variableValue
  }
  else if(varVar.includes("'")||varVar.includes('"')){//regExp.compilerTextArea(variableValue)&&variableValue.startsWith("'")&&variableValue.endsWith("'")||regExp.compilerTextArea(variableValue)&&variableValue.startsWith('"')&&variableValue.endsWith('"')){
   //dataType="string"
   dT[variableName]=typeof variableValue
  } else {
   //dataType="number"
   dT[variableName]=typeof variableValue
  }
   var variableScript=document.createElement("script")
    variableScript.innerHTML=varVar
   document.body.appendChild(variableScript)
   if(typeof variableValue === 'object' || typeof variableValue === 'function') {
    eval(varVar);
   };
  };
  if(Object.keys(localVariables)[0] !== undefined) {
  for(var v = 0; v < Object.keys(localVariables).length; v++) {
    if(variableName !== Object.entries(localVariables)[v][0]) {
    setTimeout(() => { localVariables[variableName]=variableValue; },3);
  varNum++
  var regExp = /[a-zA-Z]/g;
  var varVar="const "+variableName+"="+variableValue;
  if(variableValue=="true"||variableValue=="false") {
   //dataType="boolean"
   dT[variableName]=typeof variableValue
  }
  else if(varVar.includes("'")||varVar.includes('"')){//regExp.compilerTextArea(variableValue)&&variableValue.startsWith("'")&&variableValue.endsWith("'")||regExp.compilerTextArea(variableValue)&&variableValue.startsWith('"')&&variableValue.endsWith('"')){
   //dataType="string"
   dT[variableName]=typeof variableValue
  } else {
   //dataType="number"
   dT[variableName]=typeof variableValue
  }
   var variableScript=document.createElement("script")
   variableScript.innerHTML=varVar
   document.body.appendChild(variableScript)
   eval(varVar)
     };
    if(variableName == Object.entries(localVariables)[v][0]) {
    terminal.warn('You already declared the variable "'+Object.entries(localVariables)[v][0]+'" with "'+Object.entries(localVariables)[v][1]+'".');
   };
   if(variableName == Object.entries(localVariables)[v][0] && variableValue == Object.entries(localVariables)[v][1]) {
    terminal.warn('You already declared the variable "'+Object.entries(localVariables)[v][0]+'" with the same value.');
   };
    };
   };
  };
  function copyText(node) {
    node = document.getElementById(node);
    if (document.body.createTextRange) {
        const range = document.body.createTextRange();
        range.moveToElementText(node);
        range.select();
    } else if (window.getSelection) {
        const selection = window.getSelection();
        const range = document.createRange();
        range.selectNodeContents(node);
        selection.removeAllRanges();
        selection.addRange(range);
        document.execCommand("copy");
    }
}
for(var c=0;c<document.getElementsByClassName("codeMode").length;c++) {
 document.body.style.userSelect="default";
 document.getElementsByClassName("codeMode")[c].style.cursor="copy";
 document.getElementsByClassName("codeMode")[c].onclick=function(event) {
  document.body.style.userSelect="auto";
  copyTutorial(event.target.getAttribute("copyData"));
  setTimeout(function(){
   if(event.target.getAttribute("copyData").includes("(")) {
    toast("Copied !","Copied: "+event.target.getAttribute("copyData").split("(")[0]);
   }
   if(event.target.getAttribute("copyData").includes("[")) {
    toast("Copied !","Copied: "+event.target.getAttribute("copyData").split("[")[0])
   }
  },100)
  // setTimeout(function(){console.log(event.target.getAttribute("copyData"))},100)
  // for(var pc=0;pc<document.body.children.length;pc++) {
  //  setTimeout(function(){
  //    console.log(tutorialTab.children[pc].innerHTML)
  //    console.log(event.target.getAttribute("copyData").split("(")[0])
  //  if(tutorialTab.children[pc].innerHTML.includes==event.target.getAttribute("copyData").split(")")[0]) {
  //   alert(tutorialTab.children[pc].innerHTML)
  //   }
  //  },100)
  setTimeout(function(){document.body.style.userSelect="none";/*console.log(document.body.style.userSelect);*/},30);
  /*console.log(document.body.style.userSelect);*/
 }
}
var arr="";
function array(arrayName, arrayValue) {
// [FIX]: Not really a fix, but should I add local arrays ? Hmmmm :|
if(arrayValue) {
for(var a=0;a<3;a++) {
  // console.log(arrayValue.split(",")[a]);
  if(arrayValue.includes(",")) {
  arr="['"+arrayValue.split(" ").join("").split(",").join("','")+"'];";
  // console.log(arr)
  }
  else {
   arr="['"+arrayValue+"'];";
  }
  // console.log("var "+arrayName+"='["+arrayValue.split(",")[a]+"]'")
}
 arrayScript=document.createElement("script");
 arrayScript.innerHTML="var "+arrayName+"="+arr;
 document.body.appendChild(arrayScript);
};
if(!arrayValue) {
 arr="[]";
 arrayScript=document.createElement("script");
 arrayScript.innerHTML="var "+arrayName+"="+arr;
 document.body.appendChild(arrayScript);
};
 // [FIX]: double arrays ? WAIT WHAT ?! >:\
}
  var $_aLC;
  function getDataType(vN) {
   return typeof vN;
  }
  var keywords = ["function", "createRect","var","wait","createGround"];
  $("#editor").on("keyup", function(e){
    if (e.keyCode == 32){
      var newHTML = "";
      $(this).text().replace(/[\s]+/g, " ").trim().split(" ").forEach(function(val){
        if (keywords.indexOf(val.trim()) > -1)
          newHTML += "<span class='statement'>" + val + "&nbsp;</span>";
        else
          newHTML += "<span class='other'>" + val + "&nbsp;</span>"; 
      });
      $(this).html(newHTML);
      var child = $(this).children();
      var range = document.createRange();
      var sel = window.getSelection();
      range.setStart(child[child.length-1], 1);
      range.collapse(true);
      sel.removeAllRanges();
      sel.addRange(range);
      this.focus();
    }
  });
  
  //document.getElementById("outputComp").style.width="50%"
  //document.getElementById("outputComp").style.height="100%"
  
  function showStatus() {
   if(codeStatus.innerHTML.includes("stopped")) {
    codeStatus.title='press "'+executionBtn.innerHTML+'" to start the status'
   }
   if(codeStatus.innerHTML.includes("running")) {
      codeStatus.title="OK"
   }
   if(codeStatus.innerHTML.includes("error")) {
      codeStatus.title='Go to "Console" to view the error'
   }
  }
  



  if (navigator.getUserMedia) {
  navigator.getUserMedia({
    audio: true },
  function (stream) {
    audioContext = new AudioContext();
    var mic = audioContext
    analyser = audioContext.createAnalyser();
    microphone = audioContext.createMediaStreamSource(stream);
    javascriptNode = audioContext.createScriptProcessor(2048, 1, 1);
    analyser.smoothingTimeConstant = 0.8;
    analyser.fftSize = 1024;
    microphone.connect(analyser);
    analyser.connect(javascriptNode);
    javascriptNode.connect(audioContext.destination);
    javascriptNode.onaudioprocess = function () {
      var array = new Uint8Array(analyser.frequencyBinCount);
      analyser.getByteFrequencyData(array);
      var values = 0;
      var length = array.length;
      for (var i = 0; i < length; i++) {
        values += array[i];
      }
      var average = values / length;
      micLevel=Math.trunc(average-43)
      //console.log(Math.trunc(average - 13))
    }; 
  },
  function GMD() {
 return false
})}





  function showConStatus() {
   if(cS=="not connected") {
    controllerStatus.title='Your gamepad is not connected'
   }
   if(cS=="connected") {
    controllerStatus.title="Your gamepad is connected"
   }
   if(cS=="error") {
    controllerStatus.title='Go to "Console" to view the error'
   }
  }
  
//   var win = {
//    x: output.getBoundingClientRect().width,
//    y: output.getBoundingClientRect().height
  // x: window.screenX,
  // y: window.screenY
//    }
  
  var cK
  var gK
  var game
  var controller
  var vol
  var IDL
  function range(f, s) {
    return [f, s];
   }
  function gameRefresher(){
  //if(plugins&&plugins.hasOwnProperty('audioInput')){
//}
// if(typeof UYC === 'object'){
//   UYC["engine"]=game
// }
//to do list: make alternatives of displaying error messages (e.g. to the "else if" statements ...), make cursor gamepad, make a loading system for the sliders (or more) in the UYC.GUI, save/load project, finish infinite object force, link in-terminal, download as .html or .txt, more prototypes, audio creation, more options, options shortcut, creation [custom geometry], terminal settings [including ask-for-clear etc...], unicode shader, photorealism plugin, fix multiple cameras disabling system, FBX Loader, STL Loader, disolve animation (or more shaders), more assets properties, custom engine editor, text-Shadow in-compiler ???
//finished to do: shaders,  can't attach camera while using controls, steering wheel, add movement plugin to the addforce fn
  game = {

   getAudios: function() {
    var audios = [];
    for(var a = 0; a < document.querySelectorAll("*").length; a++) {
     if(document.querySelectorAll("*")[a].tagName == "AUDIO") {
      audios.push(document.querySelectorAll("*")[a])
     };
    };
    return audios;
   },
   on:function(event, code) {
    eval(`
     window.on`+event+`=
      `+code+`
    `);
    // console.log(`
    //  window.on`+event+`=
    //   `+code+`
    // `);
   },
   slowMotion: function() {
    setTimeout(() => {
     engine.timing.timeScale = 0.5
    }, 13);
   },
   normalMotion: function() {
    setTimeout(() => {
     engine.timing.timeScale = 1
    }, 13);
   },
   fastMotion: function() {
    setTimeout(() => {
     engine.timing.timeScale = 1.5
    }, 13);
   },
   speed: function() {
    setTimeout(() => {
     engine.timing.timeScale = 0.5
    }, 13);
   },
   translate: function(x,y) {
    setTimeout(() => {
      Matter.Composite.translate(engine.world, {x: x, y: y});
    }, 13);
   },
   scale: function(stretchX,stretchY,x,y) {
    setTimeout(function(){
    Matter.Composite.scale(engine.world, stretchX, stretchY, {x: x, y: y});
    },13) 
  },
   rotate: function(density,x,y) {
    setTimeout(function(){
    Matter.Composite.rotate(engine.world, density, {x: x, y: y});
    },13)
   },
   renderView: {
    enabled: false
   },
   bodies: {
    length: scene.children.length
   },
   cameras: {
    length: camera.children.length
   },
   winSize:{x: outputComp.getBoundingClientRect().width, y: outputComp.getBoundingClientRect().height},
   }
  if(plugins&&plugins.hasOwnProperty('keyboardEvent')){
  keyboard = {
  //  getKey: function(k) {
    // if(k==cK){return true}else{return false};
    one: false,
    two: false,
    three: false,
    four: false,
    five: false,
    six: false,
    seven: false,
    eight: false,
    nine: false,
    zero: false,
    a: false,
    b: false,
    c: false,
    d: false,
    e: false,
    f: false,
    g: false,
    h: false,
    i: false,
    j: false,
    k: false,
    l: false,
    m: false,
    n: false,
    o: false,
    p: false,
    q: false,
    r: false,
    s: false,
    t: false,
    u: false,
    v: false,
    w: false,
    x: false,
    y: false,
    z: false,
    A: false,
    B: false,
    C: false,
    D: false,
    E: false,
    F: false,
    G: false,
    H: false,
    I: false,
    J: false,
    K: false,
    L: false,
    M: false,
    N: false,
    O: false,
    P: false,
    Q: false,
    R: false,
    S: false,
    T: false,
    U: false,
    V: false,
    W: false,
    X: false,
    Y: false,
    Z: false,
    Space: false,
    CTRL_LEFT: false,
    CTRL_RIGHT: false,
    Escape: false,
    getKeyCode: function(k) {
    //  terminal.log(k +" / " + cC)
    if(k==cC){return true}else{return false};
    // return cC
    }
   }
  }
  if(plugins&&plugins.hasOwnProperty('vehicleMovement')){
   keyboard = new THREEx.KeyboardState();
  }
  if(plugins&&plugins.hasOwnProperty("audioIn")){
    setTimeout(function() {
  audio = {
   mic: {context:audioContext.destination,level: micLevel},
   system: {level:
     function level(ID_data, frequency){
    // IDL=ID_data;
    // IDL=ID_data.split(ID_data.split(")")[1])[0].split(")").join("").substr(0,2)+ID_data.split(ID_data.split(")")[1])[1].split(")").join("");
    IDL = ID_data;
    var audio2 = document.getElementById(IDL);
    var files = audio2.src//"Assets/Godfather Theme (Jaydon Lewis Trap Remix).mp3";
    audio2.src = files
    audio2.crossOrigin="anonymous"
    audio2.load();
    audio2.play();
    var context = new AudioContext();
    var src = context.createMediaElementSource(audio2);
    var analyser = context.createAnalyser();
    src.connect(analyser);
    analyser.connect(context.destination);
    analyser.fftSize = 256;
    var bufferLength = analyser.frequencyBinCount;
    // console.log(bufferLength);
    var dataArray = new Uint8Array(bufferLength);
    var x = 0;
    function renderFrame() {
      requestAnimationFrame(renderFrame);
      x = 0;
      analyser.getByteFrequencyData(dataArray);
      for (var i = 0; i < bufferLength; i++) {
        audioLevel=dataArray[frequency]
        $_aLC = UYC.convert.color("rgb_to_hex => "+dataArray[80] + (25 * (i/bufferLength)) +","+250 * (i/bufferLength) + ','+50, true);
      }
    }
    audio2.play();
    renderFrame();
  },
 getWaveform: function(id, spectrum_data, name) {
  let $audioCtx = new ( window.AudioContext || window.webkitAudioContext )( ) ;
let $audioOff = null ;
let $analyser = null ;
let FFT_SIZE  = 512 ;
var $data = {
 file_url: document.getElementById(id).src
};
     fetch( $data.file_url )
          .then( response    => response.arrayBuffer( ) )
          .then( arrayBuffer => $audioCtx.decodeAudioData( arrayBuffer ) )
          .then( async ( audioBuffer ) => {
            window.$audioBuffer = audioBuffer ;
            return new Promise( ( resolve, reject ) => {
              $audioOff  = new window.OfflineAudioContext( 2, audioBuffer.length, audioBuffer.sampleRate ) ;
              $analyser  = $audioOff.createAnalyser( ) ;
              $analyser  . fftSize = FFT_SIZE ;
              $analyser  . smoothingTimeConstant = $data.fps === 24 ? 0.16 : $data.fps === 29 ? 0.24 : 0.48 ;
              $analyser  . connect( $audioOff.destination ) ;
              var source = $audioOff.createBufferSource( ) ;
                  source . buffer = audioBuffer ;
                  source . connect( $analyser ) ;
              var __data = [ ] ;
              var fps    = $data.fps || 24 ;
              var index  = 0.4 ;
              var length = Math.ceil( audioBuffer.duration * fps ) ;
              var time   = ( ( 1 / fps ) ) ;
              var onSuspend = ( ) => {
                return new Promise( ( res, rej ) => {
                  index  += 1 ;
                  var raw = new Uint8Array( $analyser.frequencyBinCount ) ;
                  $analyser.getByteFrequencyData ( raw ) ;
                  __data.push( raw ) ;
                  if( index < length ) {
                    if( time * ( index + 1 ) < audioBuffer.duration ) 
                      { $audioOff.suspend( time * ( index + 1 ) ).then( onSuspend ) ; }
                    $audioOff.resume( ) ;
                  } return res( 'OK' ) ;
                } ) ;
              } ;
              $audioOff.suspend( time * ( index + 1 ) ).then( onSuspend ) ;
              source.start( 0 ) ;
              terminal.info( 'Decoding Audio Spectrum ...' ) ;
              $audioOff.startRendering( ).then( ( ) => {
                terminal.success( 'Audio-Spectrum Decoded' ) ;
                return resolve( __data ) ;
              } ).catch( ( err ) => {
                terminal.error( 'Rendering failed: ' + err ) ;
                throw { error : 'Get audio data error', message : err } ;
              } ) ;
            } ) ;
          } )
          .then( async ( spectrumData ) => {
            window.eval("var " + name + " = [" + spectrumData[spectrum_data] + "];");
          } ) ;
      }
    }
  }
},3);
};
  }
  setInterval(gameRefresher)
  document.getElementById("outputComp").addEventListener("keydown",function(event){
    if(!event.repeat){
      cK=event.key;
      cC=event.keyCode;
      // console.log(cK)
      // console.log(keyboard);
      //setTimeout(function(){if(game.getKey==key){eval(code)}},3)
  }
  })
  var keyCount=0
  // function addKey(func,code) {
  // keyCount++
  // var keyExecution="function _keyPressed"+keyCount+"() {"+func+"{"+code+"}};"+"outputComp.onkeyup=function(){_keyPressed"+keyCount+"()}"
  // var newScript=document.createElement("script")
  // newScript.innerHTML=keyExecution
  // eval(keyExecution);
  // document.body.appendChild(newScript)
  // }
  function pressedKey() {
if(typeof keyboard == 'object') {
 for(var k = 0; k < Object.keys(keyboard).length; k++) {
   if(keyboard[Object.keys(keyboard)[k]] == true) {
    return Object.keys(keyboard)[k];
   };
   if(typeof keyboard[Object.keys(keyboard)[k]] !== 'boolean') {
    return "UNKNOWN KEY";
   };
  };
 };
};
function formatBytes(bytes, decimals = 2) {
 if (bytes === 0) return '0 Bytes';
 const k = 1024;
 const dm = decimals < 0 ? 0 : decimals;
 const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'];
 const i = Math.floor(Math.log(bytes) / Math.log(k));
 return parseFloat((bytes / Math.pow(k, i)).toFixed(dm)) + ' ' + sizes[i];
}
function createFileInput(elem, id) {
 var fileInput = document.createElement("input");
 fileInput.type="file";
 fileInput.style.position="absolute";
 fileInput.style.background="transparent";
 fileInput.style.opacity=0;
 fileInput.style.left=elem.style.left;
 fileInput.style.top=elem.style.top;
 fileInput.style.width=elem.style.width;
 fileInput.style.height=elem.style.height;
 fileInput.style.zIndex=6;
 fileInput['getFile']=function(f) {
  return fileInput.files[f];
 };
 fileInput['read']=function(readData) {
  // fileInput.onchange=function() {
   var reader = new FileReader();
   if(readData == "name") {
    return fileInput.files[0].name.split(".")[0];
   };
   if(readData == "type") {
    return fileInput.files[0].type;
   };
   if(readData == "size") {
    return formatBytes(fileInput.files[0].size);
   };
  // };
 };
 if(id&&id!=="") {
  fileInput.id=id;
 };
 document.body.appendChild(fileInput);
};
function multipleKeyPressed(keyNames) {
pK=[];
cPK = "";
if(typeof keyboard == 'object') {
 for(var k = 0; k < Object.keys(keyboard).length; k++) {
   if(keyboard[Object.keys(keyboard)[k]] == true) {
    pK.push(Object.keys(keyboard)[k])
    // console.log(pK);
   };
  };
 };
// pK=[];
if(pK.length > 1) {
     for(var o = 0; o < pK.length; o++) {
      cPK += pK[o]+",";
      // console.log(cPK.slice(0,-1));
    //   setTimeout(function(){
    //   if(cPK.endsWith(",")) {
    //    array(keyNames, cPK.slice(0, -1));
    //   }
    //   else {
    //    array(keyNames, cPK);
    //   };
    // },3);
     };
     array(keyNames, cPK.slice(0, -1));
     return true;
    }
    if(pK.length == 1) {
     return false;
    }
 setTimeout(function() { pK=[]; cPK="" },6);
};
  function setKeyFn(func, _ev, tar) {
   var elem;
   if(tar) {
    elem = tar;
   }
   else {
    elem = document.getElementById("outputComp")
   };
   if(plugins.hasOwnProperty("keyboardEvent")) {
    if(!_ev){terminal.warn("setKeyFn requires a key event.")};
    if(_ev) {
    if(_ev!=="keydown"&&_ev!=="keypress"&&_ev!=="keyup") {
      terminal.warn('setKeyFn must have a key event. "'+_ev+'" is not a key event.');
    }
    if(_ev=="keydown"||_ev=="keypress"||_ev=="keyup") {
    elem.addEventListener(_ev, function(event) {
      if(event.key==1){keyboard['one']=true;};//setTimeout(function(){keyboard['one']=false},3)};
      if(event.key==2){keyboard['two']=true;};//setTimeout(function(){keyboard['two']=false},3)};
      if(event.key==3){keyboard['three']=true;};//setTimeout(function(){keyboard['three']=false},3)};
      if(event.key==4){keyboard['four']=true;};//setTimeout(function(){keyboard['four']=false},3)};
      if(event.key==5){keyboard['five']=true;};//setTimeout(function(){keyboard['five']=false},3)};
      if(event.key==6){keyboard['six']=true;};//setTimeout(function(){keyboard['six']=false},3)};
      if(event.key==7){keyboard['seven']=true;};//setTimeout(function(){keyboard['seven']=false},3)};
      if(event.key==8){keyboard['eight']=true;};//setTimeout(function(){keyboard['eight']=false},3)};
      if(event.key==9){keyboard['nine']=true;};//setTimeout(function(){keyboard['nine']=false},3)};
      if(event.key==0){keyboard['zero']=true;};//setTimeout(function(){keyboard['zero']=false},3)};
      if(event.key=='a'){keyboard['a']=true;};//setTimeout(function(){keyboard['a']=false},3)};
      if(event.key=='b'){keyboard['b']=true;};//setTimeout(function(){keyboard['b']=false},3)};
      if(event.key=='c'){keyboard['c']=true;};//setTimeout(function(){keyboard['c']=false},3)};
      if(event.key=='d'){keyboard['d']=true;};//setTimeout(function(){keyboard['d']=false},3)};
      if(event.key=='e'){keyboard['e']=true;};//setTimeout(function(){keyboard['e']=false},3)};
      if(event.key=='f'){keyboard['f']=true;};//setTimeout(function(){keyboard['f']=false},3)};
      if(event.key=='g'){keyboard['g']=true;};//setTimeout(function(){keyboard['g']=false},3)};
      if(event.key=='h'){keyboard['h']=true;};//setTimeout(function(){keyboard['h']=false},3)};
      if(event.key=='i'){keyboard['i']=true;};//setTimeout(function(){keyboard['i']=false},3)};
      if(event.key=='j'){keyboard['j']=true;};//setTimeout(function(){keyboard['j']=false},3)};
      if(event.key=='k'){keyboard['k']=true;};//setTimeout(function(){keyboard['k']=false},3)};
      if(event.key=='l'){keyboard['l']=true;};//setTimeout(function(){keyboard['l']=false},3)};
      if(event.key=='m'){keyboard['m']=true;};//setTimeout(function(){keyboard['m']=false},3)};
      if(event.key=='n'){keyboard['n']=true;};//setTimeout(function(){keyboard['n']=false},3)};
      if(event.key=='o'){keyboard['o']=true;};//setTimeout(function(){keyboard['o']=false},3)};
      if(event.key=='p'){keyboard['p']=true;};//setTimeout(function(){keyboard['p']=false},3)};
      if(event.key=='q'){keyboard['q']=true;};//setTimeout(function(){keyboard['q']=false},3)};
      if(event.key=='r'){keyboard['r']=true;};//setTimeout(function(){keyboard['r']=false},3)};
      if(event.key=='s'){keyboard['s']=true;};//setTimeout(function(){keyboard['s']=false},3)};
      if(event.key=='t'){keyboard['t']=true;};//setTimeout(function(){keyboard['t']=false},3)};
      if(event.key=='u'){keyboard['u']=true;};//setTimeout(function(){keyboard['u']=false},3)};
      if(event.key=='v'){keyboard['v']=true;};//setTimeout(function(){keyboard['v']=false},3)};
      if(event.key=='w'){keyboard['w']=true;};//setTimeout(function(){keyboard['w']=false},3)};
      if(event.key=='x'){keyboard['x']=true;};//setTimeout(function(){keyboard['x']=false},3)};
      if(event.key=='y'){keyboard['y']=true;};//setTimeout(function(){keyboard['y']=false},3)};
      if(event.key=='z'){keyboard['z']=true;};//setTimeout(function(){keyboard['z']=false},3)};
      if(event.key=='A'){keyboard['A']=true;};//setTimeout(function(){keyboard['A']=false},3)};
      if(event.key=='B'){keyboard['B']=true;};//setTimeout(function(){keyboard['B']=false},3)};
      if(event.key=='C'){keyboard['C']=true;};//setTimeout(function(){keyboard['C']=false},3)};
      if(event.key=='D'){keyboard['D']=true;};//setTimeout(function(){keyboard['D']=false},3)};
      if(event.key=='E'){keyboard['E']=true;};//setTimeout(function(){keyboard['E']=false},3)};
      if(event.key=='F'){keyboard['F']=true;};//setTimeout(function(){keyboard['F']=false},3)};
      if(event.key=='G'){keyboard['G']=true;};//setTimeout(function(){keyboard['G']=false},3)};
      if(event.key=='H'){keyboard['H']=true;};//setTimeout(function(){keyboard['H']=false},3)};
      if(event.key=='I'){keyboard['I']=true;};//setTimeout(function(){keyboard['I']=false},3)};
      if(event.key=='J'){keyboard['J']=true;};//setTimeout(function(){keyboard['J']=false},3)};
      if(event.key=='K'){keyboard['K']=true;};//setTimeout(function(){keyboard['K']=false},3)};
      if(event.key=='L'){keyboard['L']=true;};//setTimeout(function(){keyboard['L']=false},3)};
      if(event.key=='M'){keyboard['M']=true;};//setTimeout(function(){keyboard['M']=false},3)};
      if(event.key=='N'){keyboard['N']=true;};//setTimeout(function(){keyboard['N']=false},3)};
      if(event.key=='O'){keyboard['O']=true;};//setTimeout(function(){keyboard['O']=false},3)};
      if(event.key=='P'){keyboard['P']=true;};//setTimeout(function(){keyboard['P']=false},3)};
      if(event.key=='Q'){keyboard['Q']=true;};//setTimeout(function(){keyboard['Q']=false},3)};
      if(event.key=='R'){keyboard['R']=true;};//setTimeout(function(){keyboard['R']=false},3)};
      if(event.key=='S'){keyboard['S']=true;};//setTimeout(function(){keyboard['S']=false},3)};
      if(event.key=='T'){keyboard['T']=true;};//setTimeout(function(){keyboard['T']=false},3)};
      if(event.key=='U'){keyboard['U']=true;};//setTimeout(function(){keyboard['U']=false},3)};
      if(event.key=='V'){keyboard['V']=true;};//setTimeout(function(){keyboard['V']=false},3)};
      if(event.key=='W'){keyboard['W']=true;};//setTimeout(function(){keyboard['W']=false},3)};
      if(event.key=='X'){keyboard['X']=true;};//setTimeout(function(){keyboard['Y']=false},3)};
      if(event.key=='Y'){keyboard['Y']=true;};//setTimeout(function(){keyboard['X']=false},3)};
      if(event.key=='Z'){keyboard['Z']=true;};//setTimeout(function(){keyboard['Z']=false},3)};
      if(event.key==' '){keyboard['Space']=true};//;setTimeout(function(){keyboard['Space']=false},3)};
      if(event.key=='Escape'){keyboard['Escape']=true};//;setTimeout(function(){keyboard['Space']=false},3)};
      if(event.ctrlKey) {
       if(event.location == 1) {
        keyboard['CTRL_LEFT']=true;//;setTimeout(function(){keyboard['CTRL_LEFT']=false},3)};
       };
       if(event.location == 2) {
        keyboard['CTRL_RIGHT']=true;//;setTimeout(function(){keyboard['CTRL_RIGHT']=false},3)};
       };
      };
    });
  };
  //  (func.toString().getCharBetween("function & (").split(" ").join(""));
  //  if(!func.includes("(")) {
    // var params = func.toString().getCharBetween("function & (").split(" ").join("");
    var params = func;
    // console.log("window.addEventListener('"+_ev+"', function() { "+params+" }) ");
    eval("window.addEventListener('"+_ev+"', function() { "+params+" }) ");
  //  };
  //  if(func.includes("(") && typeof eval(func.split("(")[0]) === 'function') {
    //  alert('abc')
    // if(func.substring(func.indexOf("analog"), func.indexOf(")")).split("analog(").join("").split('"').join("").split("'").join("") == fR.substring(fR.indexOf(func.split(".")[0]), fR.indexOf(") ")).split("(").join("").split(func.split(".")[0]).join("")) {
      // eval("window.addEventListener('"+_ev+"', function() { "+func+" }) ");
    // };
    // func.substring(func.indexOf("analog"), func.indexOf(")")).split("analog(").join("").split('"').join("").split("'").join("") +" / " + func.split("=> ")[1]
    // alert("window.addEventListener('keyup', function() { "+func.split(".")[0]+"("+func.split("=> ")[1]+" })");
    //  };
    };
   }
   else {
    terminal.warn('"setKeyFn" function requires "keyboardEvent" plugin.');
   }
   //eval("window.addEventListener('keyup', function() { "+func+"() })");
  }
  /*
  function keyPress(functionName) {
      setTimeout(function(){
          var newScript = document.createElement("script")
          newScript.innerHTML="outputComp.addEventListener('keypress', function(){"+functionName+"()})"
          document.body.appendChild(newScript)
      },100)
  }
  */
   //if(game.getKey==key){code}
  var $_plug = ["collision", "time", "keyboardEvent", "UI", "movements", "mouseEvent", "gamepadEvent", "audioIn", "OBJLoader", "audioEvent", "PointerLockControls", "vehicleMovement", "Raycaster", "Shaders", "OrbitalControls", "FlyControls"];
  var plugins = {
   
  }
  var plugErr=[]
  var qrnIWFhCOT = {};
  // [FIX]: Probably chaging the plugin implements... idk :\
  function checkPlugin(x) {
   if(typeof qrnIWFhCOT[x] === 'string') {
    window.eval(qrnIWFhCOT[x]/*.split("Game").join("outputComp")*/.split('micLevel').join('"micLevel"').split('window.innerHeight').join('"window.innerHeight"').split('window.innerWidth').join('"window.innerWidth"').split("setText=").join("innerHTML=").split("audio.system.level(").join("setTimeout(function(){audio.system.level("+n_fR2).split("console.log(audioLevel)").join("setInterval(function(){if(audioLevel){console.log(audioLevel)}})").split("conssole.log").join("terminal.log").split("getJointBody").join("bodies").split("getJoint").join("engine.world.composites").split("un'def'ined").join("undefined").split("UYC_render").join("render").split("fn() {").join("function(){").split("fn").join("function").split(":mouseover").join(".onmouseover").split(":mouseout").join(".onmouseout").split(":mousemove").join(".onmousemove").split(":addEvent").join(".addEventListener").split(":click").join(".onclick").split(":changed").join(".onchange").split(":mouseup").join(".onmouseup").split(":rightclick").join(".oncontextmenu").split(":mousedown").join(".onmousedown").split(":keypress").join(".onkeypress").split(":btnPressed").join(".btnPressed").split("UYC.render.bounds").join("render.options.hasBounds").split(".level(undefined").join(".level(").split(".readAudio()").join("},20)"));
   }
  //   setTimeout(() => {
  //     var pE=plugErr.join(",")
  //   if(plugErr.length == 1) {
  //    terminal.warn(pE+" is not a plugin.\nMore about plugins here: https://localhost/compiler.html#plugin")
  //    errorDetected=true
  //    currentError=pE+" is not a plugin.\nMore about plugins here: https://localhost/compiler.html#plugin"
  //   };
  //   if(plugErr.length == 2) {
  //    terminal.warn(plugErr[0]+" and " + plugErr[1] + " are not plugins.\nMore about plugins here: https://localhost/compiler.html#plugin")
  //    errorDetected=true
  //    currentError=plugErr[0]+" and " + plugErr[1] + " are not plugins.\nMore about plugins here: https://localhost/compiler.html#plugin"
  //   };
  //   if(plugErr.length > 2) {
  //     terminal.warn(pE.replaceLast(","," and ")+" are not plugins.\nMore about plugins here: https://localhost/compiler.html#plugin")
  //     errorDetected=true
  //     currentError=pE.replaceLast(","," and ")+" are not plugins.\nMore about plugins here: https://localhost/compiler.html#plugin"
  //    };
  //   },6);
  //  };
   }
  function loadPlugin(pluginMode,pluginMode2,pluginMode3,pluginMode4,pluginMode5,pluginMode6,pluginMode7,pluginMode8,pluginMode9,pluginMode10,pluginMode11,pluginMode12,pluginMode13) {
  if(!pluginMode=='') {
  if(pluginMode.length>0) {
      if(pluginMode=="collision"||pluginMode=="time"||pluginMode=="keyboardEvent"||pluginMode=="UI"||pluginMode=="movements"||pluginMode=="mouseEvent"||pluginMode=="gamepadEvent"||pluginMode=="audioIn"||pluginMode=="OBJLoader"||pluginMode=="audioEvent"||pluginMode=="PointerLockControls"||pluginMode=="OrbitalControls"||pluginMode=="FlyControls"||pluginMode=="Raycaster"||pluginMode=="vehicleMovement"||pluginMode=="Shaders"){
    plugins[pluginMode]=true
    }
    else {
    checkPlugin(pluginMode);
    if(typeof qrnIWFhCOT[pluginMode] !== 'string') {
    plugErr.push(pluginMode)
    setTimeout(() => {
      var pE=plugErr.join(",")
    if(plugErr.length == 1) {
     terminal.warn(pE+" is not a plugin.\nMore about plugins here: https://localhost/compiler.html#plugin")
     errorDetected=true
     currentError=pE+" is not a plugin.\nMore about plugins here: https://localhost/compiler.html#plugin"
    };
    if(plugErr.length == 2) {
     terminal.warn(plugErr[0]+" and " + plugErr[1] + " are not plugins.\nMore about plugins here: https://localhost/compiler.html#plugin")
     errorDetected=true
     currentError=plugErr[0]+" and " + plugErr[1] + " are not plugins.\nMore about plugins here: https://localhost/compiler.html#plugin"
    };
    if(plugErr.length > 2) {
      terminal.warn(pE.replaceLast(","," and ")+" are not plugins.\nMore about plugins here: https://localhost/compiler.html#plugin")
      errorDetected=true
      currentError=pE.replaceLast(","," and ")+" are not plugins.\nMore about plugins here: https://localhost/compiler.html#plugin"
     };
    },3);
  };
    //console.error(pluginMode+" is not a plugin. More about plugins here: https://localhost/compiler.html#plugin")
    //eval('document.getElementById("pluginTutBG").style.visibility="visible";document.body.style.overflow="visible";tutorialTab.style.visibility="visible";allCompilerArea.style.visibility="hidden";var r=document.createElement("a");r.href="#plugin";r.style.visibility="hidden";r.click();document.body.appendChild(r);')
    
    //window.open('document.getElementById("pluginTutBG").style.visibility="visible";document.body.style.overflow="visible";tutorialTab.style.visibility="visible";allCompilerArea.style.visibility="hidden";var r=document.createElement("a");r.href="#plugin";r.style.visibility="hidden";r.click();document.body.appendChild(r);') 
  }
   }
  }
  if(!pluginMode2=='') {
      if(pluginMode2=="collision"||pluginMode2=="time"||pluginMode2=="keyboardEvent"||pluginMode2=="UI"||pluginMode2=="movements"||pluginMode2=="mouseEvent"||pluginMode2=="gamepadEvent"||pluginMode2=="audioIn"||pluginMode2=="OBJLoader"||pluginMode2=="audioEvent"||pluginMode2=="PointerLockControls"||pluginMode2=="OrbitalControls"||pluginMode2=="FlyControls"||pluginMode2=="Raycaster"||pluginMode2=="vehicleMovement"||pluginMode2=="Shaders"){
    plugins[pluginMode2]=true
    }
    else {
      checkPlugin(pluginMode2);
      plugErr.push(pluginMode2)
  //   console.error(pluginMode2+" is not a plugin.") 
  }
  }
  if(!pluginMode3=='') {
      if(pluginMode3=="collision"||pluginMode3=="time"||pluginMode3=="keyboardEvent"||pluginMode3=="UI"||pluginMode3=="movements"||pluginMode3=="mouseEvent"||pluginMode3=="gamepadEvent"||pluginMode3=="audioIn"||pluginMode3=="OBJLoader"||pluginMode3=="audioEvent"||pluginMode3=="PointerLockControls"||pluginMode3=="OrbitalControls"||pluginMode3=="FlyControls"||pluginMode3=="Raycaster"||pluginMode3=="vehicleMovement"||pluginMode3=="Shaders"){
    plugins[pluginMode3]=true
    }
    else {
      checkPlugin(pluginMode);
      plugErr.push(pluginMode3)
  //   console.error(pluginMode3+" is not a plugin.")
   }
  }
  if(!pluginMode4=='') {
      if(pluginMode4=="collision"||pluginMode4=="time"||pluginMode4=="keyboardEvent"||pluginMode4=="UI"||pluginMode4=="movements"||pluginMode4=="mouseEvent"||pluginMode4=="gamepadEvent"||pluginMode4=="audioIn"||pluginMode4=="OBJLoader"||pluginMode4=="audioEvent"||pluginMode4=="PointerLockControls"||pluginMode4=="OrbitalControls"||pluginMode4=="FlyControls"||pluginMode4=="Raycaster"||pluginMode4=="vehicleMovement"||pluginMode4=="Shaders"){
    plugins[pluginMode4]=true
    }
    else {
      checkPlugin(pluginMode);
      plugErr.push(pluginMode4)
  //   console.error(pluginMode4+" is not a plugin.")
   }
  }
  if(!pluginMode5=='') {
      if(pluginMode5=="collision"||pluginMode5=="time"||pluginMode5=="keyboardEvent"||pluginMode5=="UI"||pluginMode5=="movements"||pluginMode5=="mouseEvent"||pluginMode5=="gamepadEvent"||pluginMode5=="audioIn"||pluginMode5=="OBJLoader"||pluginMode5=="audioEvent"||pluginMode5=="PointerLockControls"||pluginMode5=="OrbitalControls"||pluginMode5=="FlyControls"||pluginMode5=="Raycaster"||pluginMode5=="vehicleMovement"||pluginMode5=="Shaders"){
    plugins[pluginMode5]=true
    }
    else {
      checkPlugin(pluginMode);
      plugErr.push(pluginMode5)
  //   console.error(pluginMode5+" is not a plugin.")
   }
  }
  if(!pluginMode6=='') {
      if(pluginMode6=="collision"||pluginMode6=="time"||pluginMode6=="keyboardEvent"||pluginMode6=="UI"||pluginMode6=="movements"||pluginMode6=="mouseEvent"||pluginMode6=="gamepadEvent"||pluginMode6=="audioIn"||pluginMode6=="OBJLoader"||pluginMode6=="audioEvent"||pluginMode6=="PointerLockControls"||pluginMode6=="OrbitalControls"||pluginMode6=="FlyControls"||pluginMode6=="Raycaster"||pluginMode6=="vehicleMovement"||pluginMode6=="Shaders"){
    plugins[pluginMode6]=true
    }
    else {
      checkPlugin(pluginMode);
      plugErr.push(pluginMode6)
  //   console.error(pluginMode6+" is not a plugin.")
   }
  }
  if(!pluginMode7=='') {
      if(pluginMode7=="collision"||pluginMode7=="time"||pluginMode7=="keyboardEvent"||pluginMode7=="UI"||pluginMode7=="movements"||pluginMode7=="mouseEvent"||pluginMode7=="gamepadEvent"||pluginMode7=="audioIn"||pluginMode7=="OBJLoader"||pluginMode7=="audioEvent"||pluginMode7=="PointerLockControls"||pluginMode7=="OrbitalControls"||pluginMode7=="FlyControls"||pluginMode7=="Raycaster"||pluginMode7=="vehicleMovement"||pluginMode7=="Shaders"){
    plugins[pluginMode7]=true
    }
    else {
      checkPlugin(pluginMode);
      plugErr.push(pluginMode7)
  //   console.error(pluginMode7+" is not a plugin.")
   }
  }
  if(!pluginMode8=='') {
      if(pluginMode8=="collision"||pluginMode8=="time"||pluginMode8=="keyboardEvent"||pluginMode8=="UI"||pluginMode8=="movements"||pluginMode8=="mouseEvent"||pluginMode8=="gamepadEvent"||pluginMode8=="audioIn"||pluginMode8=="OBJLoader"||pluginMode8=="audioEvent"||pluginMode8=="PointerLockControls"||pluginMode8=="OrbitalControls"||pluginMode8=="FlyControls"||pluginMode8=="Raycaster"||pluginMode8=="vehicleMovement"||pluginMode8=="Shaders"){
    plugins[pluginMode8]=true
    }
    else {
      checkPlugin(pluginMode);
      plugErr.push(pluginMode8)
  //   console.error(pluginMode8+" is not a plugin.")
   }
  }
  if(!pluginMode9=='') {
      if(pluginMode9=="collision"||pluginMode9=="time"||pluginMode9=="keyboardEvent"||pluginMode9=="UI"||pluginMode9=="movements"||pluginMode9=="mouseEvent"||pluginMode9=="gamepadEvent"||pluginMode9=="audioIn"||pluginMode9=="OBJLoader"||pluginMode9=="audioEvent"||pluginMode9=="PointerLockControls"||pluginMode9=="OrbitalControls"||pluginMode9=="FlyControls"||pluginMode9=="Raycaster"||pluginMode9=="vehicleMovement"||pluginMode9=="Shaders"){
    plugins[pluginMode9]=true
    }
    else {
      checkPlugin(pluginMode);
      plugErr.push(pluginMode9)
  //   console.error(pluginMode9+" is not a plugin.")
   }
  }
  if(!pluginMode10=='') {
      if(pluginMode10=="collision"||pluginMode10=="time"||pluginMode10=="keyboardEvent"||pluginMode10=="UI"||pluginMode10=="movements"||pluginMode10=="mouseEvent"||pluginMode10=="gamepadEvent"||pluginMode10=="audioIn"||pluginMode10=="OBJLoader"||pluginMode10=="audioEvent"||pluginMode10=="PointerLockControls"||pluginMode10=="OrbitalControls"||pluginMode10=="FlyControls"||pluginMode10=="Raycaster"||pluginMode10=="vehicleMovement"||pluginMode10=="Shaders"){
    plugins[pluginMode10]=true
    }
    else {
      checkPlugin(pluginMode);
      plugErr.push(pluginMode10)
  //   console.error(pluginMode10+" is not a plugin.")
   }
  }
  if(!pluginMode11=='') {
      if(pluginMode11=="collision"||pluginMode11=="time"||pluginMode11=="keyboardEvent"||pluginMode11=="UI"||pluginMode11=="movements"||pluginMode11=="mouseEvent"||pluginMode11=="gamepadEvent"||pluginMode11=="audioIn"||pluginMode11=="OBJLoader"||pluginMode11=="audioEvent"||pluginMode11=="PointerLockControls"||pluginMode11=="OrbitalControls"||pluginMode11=="FlyControls"||pluginMode11=="Raycaster"||pluginMode11=="vehicleMovement"||pluginMode11=="Shaders"){
    plugins[pluginMode11]=true
    }
    else {
      checkPlugin(pluginMode);
      plugErr.push(pluginMode11)
  //   console.error(pluginMode11+" is not a plugin.")
   }
  }
  if(!pluginMode12=='') {
      if(pluginMode12=="collision"||pluginMode12=="time"||pluginMode12=="keyboardEvent"||pluginMode12=="UI"||pluginMode12=="movements"||pluginMode12=="mouseEvent"||pluginMode12=="gamepadEvent"||pluginMode12=="audioIn"||pluginMode12=="OBJLoader"||pluginMode12=="audioEvent"||pluginMode12=="PointerLockControls"||pluginMode12=="OrbitalControls"||pluginMode12=="FlyControls"||pluginMode12=="Raycaster"||pluginMode12=="vehicleMovement"||pluginMode12=="Shaders"){
    plugins[pluginMode12]=true
    }
    else {
      checkPlugin(pluginMode);
      plugErr.push(pluginMode12)
  //   console.error(pluginMode12+" is not a plugin.")
   }
  }
  if(!pluginMode13=='') {
      if(pluginMode13=="collision"||pluginMode13=="time"||pluginMode13=="keyboardEvent"||pluginMode13=="UI"||pluginMode13=="movements"||pluginMode13=="mouseEvent"||pluginMode13=="gamepadEvent"||pluginMode13=="audioIn"||pluginMode13=="OBJLoader"||pluginMode13=="audioEvent"||pluginMode13=="PointerLockControls"||pluginMode13=="OrbitalControls"||pluginMode13=="FlyControls"||pluginMode13=="Raycaster"||pluginMode13=="vehicleMovement"||pluginMode13=="Shaders"){
    plugins[pluginMode13]=true
    }
    else {
      checkPlugin(pluginMode);
      plugErr.push(pluginMode13)
  //   console.error(pluginMode13+" is not a plugin.")
   }
  }
  }
  setInterval(function(){
  
  // if(document.URL.indexOf("compiler.html#plugin") >= 0){ 
  //   pluginTutBG.style.visibility="visible"
  //   tutorialTab.style.visibility="visible"
  // }
  // else {
  //   pluginTutBG.style.visibility="hidden"
  //   tutorialTab.style.visibility="hidden"
  // }
  
   if(plugins.hasOwnProperty("undefined")){
    delete plugins[undefined]
   }
  })
  /*
  function plugin(pluginMode) {
   if(pluginMode.includes("collision")&&pluginMode.startsWith("{")&&pluginMode.endsWith("}")) {
    plugins["collision"]=true
   }
   if(pluginMode.includes("time")&&pluginMode.startsWith("{")&&pluginMode.endsWith("}")) {
    plugins["time"]=true
   }
   alert(pluginMode.split)
  }
  */
var multiplePlugins=[];
var multiplePlugins_string="";

 var bonesClip;
 var facesClip;
 var knight;
 var mixer;


  var cloth;
  var poles;
  function createCloth(customEvent) {
DAMPING = 0.03;
DRAG = 1 - DAMPING;
MASS = .1;
restDistance = 25;
xSegs = 10;
ySegs = 10;
clothFunction = plane(restDistance * xSegs, restDistance * ySegs);
cloth = new Cloth(xSegs, ySegs);
var GRAVITY = 981 * 1.4; // 
var gravity = new THREE.Vector3( 0, -GRAVITY, 0 ).multiplyScalar(MASS);


var TIMESTEP = 18 / 1000;
var TIMESTEP_SQ = TIMESTEP * TIMESTEP;

var pins = [];


var wind = {
 enabled:true,
 strength:2,
 force:new THREE.Vector3(0,0,0)
};

var ballPosition = new THREE.Vector3(0, -45, 0);
var ballSize = 60; //40

var tmpForce = new THREE.Vector3();

var lastTime;


function plane(width, height) {

  return function(u, v) {
		var x = (u-0.5) * width;
		var y = (v+0.5) * height;
		var z = 0;

		return new THREE.Vector3(x, y, z);
	};
}

function Particle(x, y, z, mass) {
	this.position = clothFunction(x, y); // position
	this.previous = clothFunction(x, y); // previous
	this.original = clothFunction(x, y); 
	this.a = new THREE.Vector3(0, 0, 0); // acceleration
	this.mass = mass;
	this.invMass = 1 / mass;
	this.tmp = new THREE.Vector3();
	this.tmp2 = new THREE.Vector3();
}

// Force -> Acceleration
Particle.prototype.addForce = function(force) {
	this.a.add(
		this.tmp2.copy(force).multiplyScalar(this.invMass)
	);
};


// Performs verlet integration
Particle.prototype.integrate = function(timesq) {
	var newPos = this.tmp.subVectors(this.position, this.previous);
	newPos.multiplyScalar(DRAG).add(this.position);
	newPos.add(this.a.multiplyScalar(timesq));

	this.tmp = this.previous;
	this.previous = this.position;
	this.position = newPos;

	this.a.set(0, 0, 0);
}


var diff = new THREE.Vector3();

function satisifyConstrains(p1, p2, distance) {
	diff.subVectors(p2.position, p1.position);
	var currentDist = diff.length();
	if (currentDist==0) return; // prevents division by 0
	var correction = diff.multiplyScalar(1 - distance/currentDist);
	var correctionHalf = correction.multiplyScalar(0.5);
	p1.position.add(correctionHalf);
	p2.position.sub(correctionHalf);
}


function Cloth(w, h) {
	w = w || 10;
	h = h || 10;
	this.w = w;
	this.h = h;
  this.
  this.color='white';
  this.scale={x:1,y:1,z:1};
	var particles = [];
	var constrains = [];

	var u, v;

	// Create particles
	for (v=0;v<=h;v++) {
		for (u=0;u<=w;u++) {
			particles.push(
				new Particle(u/w, v/h, 0, MASS)
			);
		}
	}

	// Structural

	for (v=0;v<h;v++) {
		for (u=0;u<w;u++) {

			constrains.push([
				particles[index(u, v)],
				particles[index(u, v+1)],
				restDistance
			]);

			constrains.push([
				particles[index(u, v)],
				particles[index(u+1, v)],
				restDistance
			]);

		}
	}

	for (u=w, v=0;v<h;v++) {
		constrains.push([
			particles[index(u, v)],
			particles[index(u, v+1)],
			restDistance

		]);
	}

	for (v=h, u=0;u<w;u++) {
		constrains.push([
			particles[index(u, v)],
			particles[index(u+1, v)],
			restDistance
		]);
	}


	// While many system uses shear and bend springs,
	// the relax constrains model seem to be just fine
	// using structural springs.
	// Shear
	// var diagonalDist = Math.sqrt(restDistance * restDistance * 2);


	// for (v=0;v<h;v++) {
	// 	for (u=0;u<w;u++) {

	// 		constrains.push([
	// 			particles[index(u, v)],
	// 			particles[index(u+1, v+1)],
	// 			diagonalDist
	// 		]);

	// 		constrains.push([
	// 			particles[index(u+1, v)],
	// 			particles[index(u, v+1)],
	// 			diagonalDist
	// 		]);

	// 	}
	// }


	this.particles = particles;
	this.constrains = constrains;

	function index(u, v) {
		return u + v * (w + 1);
	}

	this.index = index;

}

function sim(time) {
	if (!lastTime) {
		lastTime = time;
		return;
	}
	
	var i, il, particles, particle, pt, constrains, constrain;

	// Aerodynamics forces
	if (wind.enabled) {
		var face, faces = clothGeometry.faces, normal;

		particles = cloth.particles;

		for (i=0,il=faces.length;i<il;i++) {
			face = faces[i];
			normal = face.normal;

			tmpForce.copy(normal).normalize().multiplyScalar(normal.dot(wind.force));
			particles[face.a].addForce(tmpForce);
			particles[face.b].addForce(tmpForce);
			particles[face.c].addForce(tmpForce);
		}
	}
	
	for (particles = cloth.particles, i=0, il = particles.length
			;i<il;i++) {
		particle = particles[i];
		particle.addForce(gravity);

		particle.integrate(TIMESTEP_SQ);
	}

	// Start Constrains

	constrains = cloth.constrains,
	il = constrains.length;
	for (i=0;i<il;i++) {
		constrain = constrains[i];
		satisifyConstrains(constrain[0], constrain[1], constrain[2]);
	}

	// Ball Constrains


	ballPosition.z = -Math.sin(Date.now()/600) * 90 ; //+ 40;
	ballPosition.x = Math.cos(Date.now()/400) * 70


	// Floor Constains
	for (particles = cloth.particles, i=0, il = particles.length
			;i<il;i++) {
		particle = particles[i];
		pos = particle.position;
		if (pos.y < -250) {
			pos.y = -250;
		}
	}

	// Pin Constrains
	for (i=0, il=pins.length;i<il;i++) {
		var xy = pins[i];
		var p = particles[xy];
		p.position.copy(p.original);
		p.previous.copy(p.original);
	}


}
var pinsFormation = [];
			var pins = [ 6 ];

			pinsFormation.push( pins );

			pins = [ 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 ];
			pinsFormation.push( pins );

			pins = [ 0 ];
			pinsFormation.push( pins );

			pins = []; // cut the rope ;)
			pinsFormation.push( pins );

			pins = [ 0, cloth.w ]; // classic 2 pins
			pinsFormation.push( pins );

			pins = pinsFormation[ 1 ];


			function togglePins() {

				pins = pinsFormation[ ~~ ( Math.random() * pinsFormation.length ) ];

			}

			var clothGeometry;
			var sphere;
			var object;

			init();
			animate();

			function init() {

				var materials;

				// cloth material

				var loader = new THREE.TextureLoader();
				var clothTexture = loader.load( 'Data/rendering/3D/three.js-dev/examples/textures/patterns/circuit_pattern.png' );
				clothTexture.wrapS = clothTexture.wrapT = THREE.RepeatWrapping;
				clothTexture.anisotropy = 16;

				var clothMaterial = new THREE.MeshPhongMaterial( {
					specular: 0x030303,
					map: clothTexture,
					side: THREE.DoubleSide,
					alphaTest: 0.5
				} );

				// cloth geometry
				clothGeometry = new THREE.ParametricGeometry( clothFunction, cloth.w, cloth.h );
				clothGeometry.dynamic = true;

				var uniforms = { texture:  { value: clothTexture } };
				var vertexShader = document.getElementById( 'vertexShaderDepth' ).innerHTML;
				var fragmentShader = document.getElementById( 'fragmentShaderDepth' ).innerHTML;

				// cloth mesh
        
				object = new Physijs.Mesh( clothGeometry, clothMaterial );
				setTimeout(function(){
        object.position.set( cloth.position.x, cloth.position.y, cloth.position.z );
        object.material.color.set(cloth.color);
        object.scale.set( cloth.scale.x, cloth.scale.y, cloth.scale.z );
        },3);
        object.castShadow = true;
        setTimeout(function(){
        console.log(object.position.x + "\n" + cloth.position.x);
        },3);
        scene.add( object );

				object.customDepthMaterial = new THREE.ShaderMaterial( {
					uniforms: uniforms,
					vertexShader: vertexShader,
					fragmentShader: fragmentShader,
					side: THREE.DoubleSide
				} );

				// sphere

				var ballGeo = new THREE.SphereGeometry( ballSize, 20, 20 );
				var ballMaterial = new THREE.MeshPhongMaterial( { color: 0xaaaaaa } );



				// poles
        poles = {
         top: {
          position: {
           x:1,
           y:125,
           z:1
          },
          color:'white',
          scale: {
           x:1,
           y:1,
           z:1
          }
         },
         left: {
          position: {
            x:-125,
            y:-62,
            z:0
          },
          color:'white',
          scale: {
           x:1,
           y:1,
           z:1
          }
         },
         right: {
          position: {
           x:125,
           y:-62,
           z:1
          },
          color:'white',
          scale: {
           x:1,
           y:1,
           z:1
          }
         },
         bottomRight: {
          position: {
           x:125,
           y:-250,
           z:0
          },
          color:'white',
          scale: {
           x:1,
           y:1,
           z:1
          }
         },
         bottomLeft: {
          position: {
           x:-125,
           y:-250,
           z:0
          },
          color:'white',
          scale: {
           x:1,
           y:1,
           z:1
          }
         }
        }
				var poleGeo = new THREE.BoxGeometry( 5, 375, 5 );
				var leftPoleMat;
        var rightPoleMat;
        var topPoleMat ;
        var bottomRightPoleMat;
        var bottomLeftPoleMat;
        poleMat = new THREE.MeshPhongMaterial( { color: poles.left.color, specular: 0x111111, shininess: 100 } );
        leftPoleMat = new THREE.MeshPhongMaterial( { color: poles.left.color, specular: 0x111111, shininess: 100 } );
        rightPoleMat = new THREE.MeshPhongMaterial( { color: poles.right.color, specular: 0x111111, shininess: 100 } );
        topPoleMat = new THREE.MeshPhongMaterial( { color: poles.top.color, specular: 0x111111, shininess: 100 } );
        bottomRightPoleMat = new THREE.MeshPhongMaterial( { color: poles.bottomRight.color, specular: 0x111111, shininess: 100 } );
        bottomLeftPoleMat = new THREE.MeshPhongMaterial( { color: poles.bottomLeft.color, specular: 0x111111, shininess: 100 } );
        setInterval(function() {
          leftPoleMat.color.set(poles.left.color);
          rightPoleMat.color.set(poles.right.color);
          topPoleMat.color.set(poles.top.color);
          bottomRightPoleMat.color.set(poles.bottomRight.color);
          bottomLeftPoleMat.color.set(poles.bottomLeft.color);
        })
        var removePoles=false;
if(customEvent) {
  eval(customEvent.split("alert").join('"alert"'));
if(!removePoles) {
				var leftPole = new Physijs.Mesh( poleGeo, leftPoleMat );
				leftPole.position.set(poles.left.position.x,poles.left.position.y,poles.left.position.z);
        leftPole.scale.set(poles.left.scale.x,poles.left.scale.y,poles.left.scale.z);
        leftPole.receiveShadow = true;
				leftPole.castShadow = true;
				scene.add( leftPole );

				var rightPole = new Physijs.Mesh( poleGeo, rightPoleMat );
        rightPole.position.set(poles.right.position.x,poles.right.position.y,poles.right.position.z);
        rightPole.scale.set(poles.right.scale.x,poles.right.scale.y,poles.right.scale.z);
        rightPole.receiveShadow = true;
				rightPole.castShadow = true;
				scene.add( rightPole );

				var topPole = new Physijs.Mesh( new THREE.BoxGeometry( 255, 5, 5 ), topPoleMat );
				topPole.position.set(poles.top.position.x,poles.top.position.y,poles.top.position.z);
        topPole.scale.set(poles.top.scale.x,poles.top.scale.y,poles.top.scale.z);
        topPole.receiveShadow = true;
				topPole.castShadow = true;
				scene.add( topPole );

				var gg = new THREE.BoxGeometry( 10, 10, 10 );
				var bottomRightPole = new Physijs.Mesh( gg, bottomRightPoleMat );
        bottomRightPole.position.set(poles.bottomRight.position.x,poles.bottomRight.position.y,poles.bottomRight.position.z);
        bottomRightPole.scale.set(poles.bottomRight.scale.x,poles.bottomRight.scale.y,poles.bottomRight.scale.z);
        bottomRightPole.receiveShadow = true;
				bottomRightPole.castShadow = true;
				scene.add( bottomRightPole );

				var bottomLeftPole = new Physijs.Mesh( gg, bottomLeftPoleMat );
        bottomLeftPole.position.set(poles.bottomLeft.position.x,poles.bottomLeft.position.y,poles.bottomLeft.position.z);
        bottomLeftPole.scale.set(poles.bottomLeft.scale.x,poles.bottomLeft.scale.y,poles.bottomLeft.scale.z);
        bottomLeftPole.receiveShadow = true;
				bottomLeftPole.castShadow = true;
				scene.add( bottomLeftPole );
 }
}
else {
  var mesh = new Physijs.Mesh( poleGeo, poleMat );
				mesh.position.x = - 125;
				mesh.position.y = - 62;
				mesh.receiveShadow = true;
				mesh.castShadow = true;
				scene.add( mesh );

				var mesh = new Physijs.Mesh( poleGeo, poleMat );
				mesh.position.x = 125;
				mesh.position.y = - 62;
				mesh.receiveShadow = true;
				mesh.castShadow = true;
				scene.add( mesh );

				var mesh = new Physijs.Mesh( new THREE.BoxGeometry( 255, 5, 5 ), poleMat );
				mesh.position.y = - 250 + ( 750 / 2 );
				mesh.position.x = 0;
				mesh.receiveShadow = true;
				mesh.castShadow = true;
				scene.add( mesh );

				var gg = new THREE.BoxGeometry( 10, 10, 10 );
				var mesh = new Physijs.Mesh( gg, poleMat );
				mesh.position.y = - 250;
				mesh.position.x = 125;
				mesh.receiveShadow = true;
				mesh.castShadow = true;
				scene.add( mesh );

				var mesh = new Physijs.Mesh( gg, poleMat );
				mesh.position.y = - 250;
				mesh.position.x = - 125;
				mesh.receiveShadow = true;
				mesh.castShadow = true;
				scene.add( mesh );
}
				// renderer
				renderer.setPixelRatio( window.devicePixelRatio );
				// renderer.setClearColor( scene.fog.color );

				renderer.gammaInput = true;
				renderer.gammaOutput = true;

				renderer.shadowMap.enabled = true;

				// performance monitor




			}


			//

			function animate() {

				requestAnimationFrame( animate );

				var time = Date.now();

				wind.strength = Math.cos( time / 7000 ) * 20 + 40;
				wind.force.set( Math.sin( time / 2000 ), Math.cos( time / 3000 ), Math.sin( time / 1000 ) ).normalize().multiplyScalar( wind.strength );

				sim( time );

			}
}









var msmsm;
function createSpotLight(position,scale,customProp) {
  
  
  animated=false;
  if(customProp&&customProp!=="") {
 eval(customProp);
} 
  if(animated) {
    var onRenderFcts	= [];
	var geometry	= new THREE.CylinderGeometry( 0.1, 1.5, 5, 32*2, 20, true);
	geometry.applyMatrix( new THREE.Matrix4().makeTranslation( 0, -geometry.parameters.height/2, 0 ) );
	geometry.applyMatrix( new THREE.Matrix4().makeRotationX( -Math.PI / 2 ) );
	var material	= new THREEx.VolumetricSpotLightMaterial()
	var mesh	= new THREE.Mesh( geometry, material );
	mesh.position.set(1.5,2,0)
	mesh.lookAt(new THREE.Vector3(0,0, 0))
	material.uniforms.lightColor.value.set('white')
	material.uniforms.spotPosition.value	= mesh.position
	scene.add( mesh );
	onRenderFcts.push(function(delta, now){
		var angle	= 0.1 * Math.PI*2*now
		var target	= new THREE.Vector3(1*Math.cos(angle),0,1*Math.sin(angle))
		mesh.lookAt(target)
		spotLight.target.position.copy(target)
	})
	var spotLight	= new THREE.SpotLight()
  // var sLH=new THREE.SpotLightHelper(spotLight);
  // scene.add(sLH);
	spotLight.position.copy(mesh.position)
	spotLight.color		= mesh.material.uniforms.lightColor.value
	spotLight.exponent	= 30
	spotLight.angle		= Math.PI/3;
	spotLight.intensity	= 0.5;
    spotLight.power=0.5;
    spotLight.angle=0.3
	scene.add( spotLight )
	scene.add( spotLight.target )
	renderer.shadowMapEnabled	= true
	var light	= spotLight
	light.castShadow	= true
	light.shadowCameraNear	= 0.01
	light.shadowCameraFar	= 15
	light.shadowCameraFov	= 45
	light.shadowCameraLeft	= -8
	light.shadowCameraRight	=  8
	light.shadowCameraTop	=  8
	light.shadowCameraBottom= -8
	light.shadowBias	= 0.0
	light.shadowDarkness	= 0.5
	light.shadowMapWidth	= 1024
	light.shadowMapHeight	= 1024
	var lastTimeMsec= null
	requestAnimationFrame(function animate(nowMsec){
		requestAnimationFrame( animate );
		lastTimeMsec	= lastTimeMsec || nowMsec-1000/60
		var deltaMsec	= Math.min(200, nowMsec - lastTimeMsec)
		lastTimeMsec	= nowMsec
		onRenderFcts.forEach(function(onRenderFct){
			onRenderFct(deltaMsec/1000, nowMsec/1000)
		})
	})
  }
  if(!animated) {
    var onRenderFcts	= [];
	var geometry	= new THREE.CylinderGeometry( 0.1, 1.5, 5, 32*2, 20, true);
	geometry.applyMatrix( new THREE.Matrix4().makeTranslation( 0, -geometry.parameters.height/2, 0 ) );
	geometry.applyMatrix( new THREE.Matrix4().makeRotationX( -Math.PI / 2 ) );
	var material	= new THREEx.VolumetricSpotLightMaterial()
	var mesh	= new THREE.Mesh( geometry, material );
	mesh.position.set(position.x,position.y,position.z);
	mesh.lookAt(new THREE.Vector3(0,0,0))
	material.uniforms.lightColor.value.set('white')
	material.uniforms.spotPosition.value	= mesh.position
	scene.add( mesh );
	onRenderFcts.push(function(delta, now){
		var angle	= 0.1 * Math.PI*2*now
		var target	= new THREE.Vector3(1*Math.cos(angle),0,1*Math.sin(angle))
		mesh.lookAt(target)
		spotLight.target.position.copy(target)
	})
	var spotLight	= new THREE.SpotLight()
	spotLight.position.copy(mesh.position)
	spotLight.color		= mesh.material.uniforms.lightColor.value
	spotLight.exponent	= 30
	spotLight.angle		= Math.PI/3;
	spotLight.intensity	= 0.5;
    spotLight.power=0.5;
    spotLight.angle=0.3
	scene.add( spotLight )
	scene.add( spotLight.target )
	renderer.shadowMapEnabled	= true
	var light	= spotLight
	light.castShadow	= true
	light.shadowCameraNear	= 0.01
	light.shadowCameraFar	= 15
	light.shadowCameraFov	= 45
	light.shadowCameraLeft	= -8
	light.shadowCameraRight	=  8
	light.shadowCameraTop	=  8
	light.shadowCameraBottom= -8
	light.shadowBias	= 0.0
	light.shadowDarkness	= 0.5
	light.shadowMapWidth	= 1024
	light.shadowMapHeight	= 1024
  }

	// var geometry	= new THREE.CylinderGeometry( 0.1, 1.5, 5, 32*2, 20, true);
	// var material = new THREEx.VolumetricSpotLightMaterial()
	// var mesh = new THREE.Mesh( geometry, material );
	// msmsm=mesh;
  // mesh.scale.set(scale.x,scale.y,scale.z);
  // mesh.position.set(position.x,position.y,position.z);
  // material.uniforms.lightColor.value.set('white')
	// material.uniforms.spotPosition.value = mesh.position
	// scene.add(mesh);
  // sl=new THREE.SpotLight(0xffffff);
  // // createGroup("sLjtFaCP");
  // // sLjtFaCP.name="sLjtFaCP";
  // // sLjtFaCP.add(sl);
  // // sLjtFaCP.add(mesh);
  // sl.position.copy(scene.children[2].position);
  // sl.rotation.copy(scene.children[2].rotation);
  // slh=new THREE.SpotLightHelper(sl);
  // // sLjtFaCP.add(slh);
  // scene.add(sl);
  // // scene.add(slh);
  // setInterval(function() {
  // // sl.rotation.copy(mesh.rotation);
  // // sl.position.copy(mesh.position);
  // sl.rotation.x=mesh.rotation.x+Math.PI/2;
  // sl.position.x=mesh.position.x;
  // sl.position.y=mesh.position.y+2.5;
  // sl.position.z=mesh.position.z;
  // sl.rotation.y=mesh.rotation.y;
  // sl.rotation.z=mesh.rotation.z;
  // // console.log(sl.position.x + " / "+mesh.position.x);
  // });
	// sl.castShadow	= true;
	// sl.shadowCameraNear	= 0.01;
	// sl.shadowCameraFar	= 15;
	// sl.shadowCameraFov	= 45;
	// sl.shadowCameraLeft	= -8;
	// sl.shadowCameraRight	=  8;
	// sl.shadowCameraTop	=  8;
	// sl.shadowCameraBottom= -8;
	// sl.shadowBias	= 0.0;
	// sl.shadowDarkness	= 0.5;
	// sl.shadowMapWidth	= 1024;
	// sl.shadowMapHeight	= 1024;
}
function customGeometry(body, customGeom) { // fix this
 if(eval(localStorage.getItem(customGeom)).type=="geometry") {
  body.geometry.attributes=eval(localStorage.getItem(customGeom)).attributes;
  body.geometry.groups=eval(localStorage.getItem(customGeom)).groups;
  body.geometry.index=eval(localStorage.getItem(customGeom)).index;
  body.geometry.material=eval(localStorage.getItem(customGeom)).material;
  console.log(body.geometry.attributes)
  console.log(eval(localStorage.getItem(customGeom)).attributes)
 }
}
function createLaser(position,scale,customProp) {
  var onRenderFcts	= [];
  
  
  rotation={x:0,y:0,z:0,set:function(rot){if(rot=="down"){this.z=4.7};if(rot=="up"){this.z=1.54;};if(rot=="left"){this.z=3.14;};if(rot=="right"){this.z=0;};if(typeof rotation.obj === 'object'){rotation.obj.rotation.set(rotation.x,rotation.y,this.z)};/*console.log(rotation.x,rotation.y,this.z)*/if(typeof rotation.obj !== "object"){terminal.error("An error occured. The direction of the object has not been changed.")};}};
			var laserBeam	= new THREEx.LaserBeam()
			var laserCooked	= new THREEx.LaserCooked(laserBeam)
      hack=laserCooked;
			onRenderFcts.push(function(delta, now){
				laserCooked.update(delta, now)
			})	
      object3d = laserBeam.object3d;
      object3d.onCollided=function(obj) {
        col=setInterval(function() {
for (var vertexIndex = 0; vertexIndex < object3d.children[0].geometry.vertices.length; vertexIndex++)
{       
    var localVertex = object3d.children[0].geometry.vertices[vertexIndex].clone();
    var globalVertex = object3d.children[0].matrix.multiplyVector4(localVertex);
    var directionVector = globalVertex.sub( object3d.children[0].position );
    var ray = new THREE.Raycaster( object3d.children[0].position, directionVector.clone().normalize() );
    var collisionResults = ray.intersectObjects( scene.children );
    terminal.log(collisionResults.length);
    if(collisionResults.length > 0) {
     console.log(collisionResults[0].object);
    }
    if ( collisionResults.length > 0 && collisionResults[0].distance < directionVector.length() && collisionResults[0].object == obj ) {
      alert('test')
      // eval(code.split('end').join('clearInterval(col)'));
    }
    // else {
    //     terminal.clear()
    // }
 }
})
	}
      if(customProp&&customProp!=="") {
       eval(customProp.split('this').join('object3d'));
      } 
      object3d['setDirection']=rotation.set;
      rotation.obj=object3d;
      object3d.position.set(position.x,position.y,position.z);
      object3d.rotation.set(rotation.x,rotation.y,rotation.z);
      object3d.scale.set(scale.x,scale.y,scale.z);
			// object3d.position.x	= 0	
			// object3d.position.y	= 0
			// object3d.rotation.z	= -Math.PI/2
	var lastTimeMsec= null
	requestAnimationFrame(function animate(nowMsec){
		requestAnimationFrame( animate );
		lastTimeMsec	= lastTimeMsec || nowMsec-1000/60
		var deltaMsec	= Math.min(200, nowMsec - lastTimeMsec)
		lastTimeMsec	= nowMsec
		onRenderFcts.forEach(function(updateFn){
			updateFn(deltaMsec/1000, nowMsec/1000)
		})
	})
  scene.add(object3d);
}
function IMPORT(scriptSource, customEvent) {
//  var newScript=document.createElement("script")
//  newScript.src=scriptSource
//  document.body.appendChild(newScript)
xhr=new XMLHttpRequest()
xhr.onreadystatechange=function() {
 if(xhr.DONE&&xhr.status==200) {
  unstring(xhr.response);
 }
}
if(customEvent&&customEvent.length>0) {
 eval(`xhr.`+customEvent.split("=")[0]+`=function(){`+customEvent.split("=")[1]+`}`);
}
xhr.open("GET", scriptSource);
xhr.send();
}
  function getPropertiesType(props) {
   return props.type;
  };
  function forLoop(interval, intName, code) {
  //  alert("for(var "+intName+"="+interval.split("-")[0]+";"+intName+"<"+interval.split("-")[1]+";"+intName+"++){"+code+"}")
  setTimeout(function(){ 
  eval("for(var "+intName+"="+interval.split("-")[0]+";"+intName+"<"+interval.split("-")[1]+";"+intName+"++){"+code+"}")
  },3) 
  // console.log("for(var "+intName+"="+interval.split("-")[0]+";"+intName+"<"+interval.split("-")[1]+";"+intName+"++){"+code+"}")
  }
  var abc;
  function timerLoop(code, time, init) {
    var param = code.toString().getCharBetween('function( & )');
    if(typeof code==="string"&&code.includes("function")&&code.startsWith("function")) {
     //  console.log("setInterval(() => { " + code.toString().split("function").join("").split("=").join("").split(">").join("").split(" ").join("")+"()" + " },"+time+")");
     if(init&&init!==""&&typeof init==='string') {
      eval("var " + init + " = setInterval(() => { " + code.toString().split("function").join("").split("=").join("").split(">").join("").split(" ").join("")+"()" + " },"+time+")");
     }
     if(!init) {
      eval("setInterval(() => { " + code.toString().split("function").join("").split("=").join("").split(">").join("").split(" ").join("")+"()" + " },"+time+")");
     }
    };
    if(typeof code !== 'string' && code.toString().includes("function(")) {
     var fncV = generateToken(5);
     var intName = generateToken(5); // [FIX]: if it affects other function, change the variable name to something else.
     if(param!=="") {
      eval(code.toString().split("function(").join("function "+fncV+"(").split('end').join('clearInterval('+param+")")+";window['"+param+"']=setInterval(function(){"+fncV+"()},"+time+");");
     }
     else {
      if(typeof code !== 'string') {
       eval(code.toString().split("function(").join("function "+fncV+"(").split('end').join('clearInterval('+intName+")")+";var "+intName+"=setInterval(function(){"+fncV+"()},"+time+");");
      };
     };
    };
    if(typeof code !== 'string' && code.toString().includes("function (")) {
     var fncV = generateToken(5);
     var intName = generateToken(5);
     if(param!=="") {
      eval(code.toString().split("function (").join("function "+fncV+"(").split('end').join('clearInterval('+param+")")+";var "+param+"=setInterval(function(){"+fncV+"()},"+time+");");
     }
     else {
      if(typeof code !== 'string') {
       eval(code.toString().split("function (").join("function "+fncV+"(").split('end').join('clearInterval('+intName+")")+";var "+intName+"=setInterval(function(){"+fncV+"()},"+time+");");
      };
     };
    };
    if(typeof code !== 'string' && !code.toString().includes("function(")&&!code.toString().includes("function (")) {
     var fncV = generateToken(5);
     var intName = generateToken(5);
     if(param!=="") {
      eval("var "+param+"=setInterval(function(){"+code.toString().split("function (").join("function "+fncV+"(").split('end').join('clearInterval('+param+")")+"},"+time+");");
     }
     else {
      if(typeof code !== 'string') {
       eval("var "+intName+"=setInterval(function(){"+code.toString().split("function (").join("function "+fncV+"(").split('end').join('clearInterval('+intName+")")+"},"+time+");");
      };
     };
    };
  //  if(typeof code=='function') {
    // setInterval(function(){eval(code)},time);
    // abc = code.toString().split(code.toString().getCharBetween('function & ()')).join("").split("(){").join("").split("() {").join("").split('function').join("").substr(2).slice(0,-1);
    // setInterval(function() { eval(code.toString().split(code.toString().getCharBetween('function & ()')).join("").split("(){").join("").split("() {").join("").split('function').join("").substr(2).slice(0,-1)) },time);
    // setTimeout(function() { console.log(code.toString().split('Light').join('')) },500)
  //  };
  //  if(typeof code=='string') {
  //   inter="var CG7xNVqbHxLX3YAm5oEZ=setInterval(function(event) {"+code.split("end").join("clearInterval(CG7xNVqbHxLX3YAm5oEZ)").split('micLevel').join('"micLevel"').split('window.innerHeight').join('"window.innerHeight"').split('window.innerWidth').join('"window.innerWidth"').split("setText=").join("innerHTML=").split("audio.system.level(").join("setTimeout(function(){audio.system.level("+n_fR2).split("console.log(audioLevel)").join("setInterval(function(){if(audioLevel){console.log(audioLevel)}})").split("console.log").join("terminal.log").split("getJointBody").join("bodies").split("getJoint").join("engine.world.composites").split("def").join("'def'").split("UYC_render").join("render").split("fn() {").join("function(){").split("fn").join("function").split(":mouseup").join(".onmouseup").split(":mousedown").join(".onmousedown").split(":mouseover").join(".onmouseover").split(":mouseout").join(".onmouseout").split(":addEvent").join(".addEventListener").split(":click").join(".onclick").split(":changed").join(".onchange").split(":keypress").join(".onkeypress").split(":btnPressed").join(".btnPressed").split("UYC.render.bounds").join("render.options.hasBounds").split("//").join("")+"},"+time+");";
  //   eval(inter.split("onclearInterval(CG7xNVqbHxLX3YAm5oEZ)ed").join("onend"));
  //  }
  }
  function createFn(){};
  var Create = new createFn;
  createFn.prototype.ProgressBar = function(customProp) {
   if(!customProp.smooth) {
    return ({setValue:function(v){return "OK"},color:customProp.color,type:"progress_bar",smooth:false,scale:{x:customProp.scale.x,y:customProp.scale.y},position:{x:customProp.position.x,y:customProp.position.y},id:customProp.id});
   };
   if(customProp.smooth) {
    return ({setValue:function(v){return "OK"},color:customProp.color,type:"progress_bar",smooth:customProp.smooth,scale:{x:customProp.scale.x,y:customProp.scale.y},position:{x:customProp.position.x,y:customProp.position.y},id:customProp.id});
   };
  };
  // function CPGAFFI(customProp) {
  //  if(customProp&&customProp!=="") {
  //   eval(customProp);
  //  }
  //  var progressBar=document.createElement("canvas")
  // //  if(position.x=="def"&&position.y=="def"&&scale.x=="def"&&scale.y=="def") {
  // //  createProgress(pBN,10,10,150,10,color)
  // //  progressBar.style.background=color
  // //  progressBar.style.width=150
  // //  progressBar.style.height=10
  // //  progressBar.style.position="absolute"
  // //  progressBar.style.zIndex=5
  // //  progressBar.style.left=10
  // //  progressBar.style.top=10
  // //  progressBar.id=id
  // //  document.body.appendChild(progressBar)
  // // }
  // // if(position.x!=="def"&&position.y!=="def"&&scale.w!=="def"&&scale.h!=="def") {
  //  progressBar.style.background=customProp.color
  //  progressBar.style.width=customProp.scale.x+"%"
  //  progressBar.style.height=customProp.scale.y+"%"
  //  progressBar.style.position="absolute"
  //  progressBar.style.zIndex=5
  //  progressBar.style.left=customProp.position.x;
  //  progressBar.style.top=customProp.position.y;
  //  progressBar.id=customProp.id
  //  document.body.appendChild(progressBar)
  // //  }
  // }
  function isCameraAttached() {
   if(cameraAttachment) {
    return true;
   }
   else {
    return false;
   }
  }
  function wait(time, converison, code) {
   var _time
   var convertedCode
   var n
   if(converison=="s"){
       _time=time+"000"
   }
   if(converison=="ms"){
       _time=time+"00"
   }
  //  if(code.startsWith("{")&&code.endsWith("}")){
  //  n=code.slice(0,-1).substring(1)
  //  convertedCode="setTimeout(function(){"+code+"},"+_time+")"
    if(typeof code==="string"&&code.includes("function")&&code.startsWith("function")) {
     //  console.log("setTimeout(() => { " + code.toString().split("function").join("").split("=").join("").split(">").join("").split(" ").join("")+"()" + " },"+_time+")");
     eval("setTimeout(() => { " + code.toString().split("function").join("").split("=").join("").split(">").join("").split(" ").join("")+"()" + " },"+_time+")");
    };
    if(code.toString().includes("function(")) {
     var fncV = generateToken(5);
     var intName = generateToken(5);
     eval(code.toString().split("function(").join("function "+fncV+"(")+";var "+intName+"=setTimeout(function(){"+fncV+"()},"+_time+");");
    };
    if(code.toString().includes("function (")) {
     var fncV = generateToken(5);
     var intName = generateToken(5);
     eval(code.toString().split("function (").join("function "+fncV+"(")+";var "+intName+"=setTimeout(function(){"+fncV+"()},"+_time+");");
    };
   //  }
   //console.log(convertedCode)
  //  if(!code.startsWith("{")){alert("Missing { to the wait statement.")}
  //  if(!code.endsWith("}")){alert("Missing } to the wait statement.")}
   if(plugins.hasOwnProperty('time')){
   eval(convertedCode)
   }
   else {
    terminal.warn('The "wait" function requires "time" plugin.');
   }
   //alert(convertedCode)
  }
  var ttf = document.createElement('link')
  ttf.setAttribute('rel', 'stylesheet')
  ttf.setAttribute('type', 'text/css')
  ttf.setAttribute('href', 'https://fonts.googleapis.com/css2?family=Roboto:wght@700&display=swap')
  document.head.appendChild(ttf)
  
  var zxc
  function createDialog(prop) {
  // title="...";
  // text="...";
  // autoTyping=false;
  if(!plugins.hasOwnProperty('UI')) {
    terminal.warn('To create a dialog message, You need to load "UI" plugin.');
  }
  if(canCreateDialogs&&plugins.hasOwnProperty('UI')){
   var dialogBg=document.createElement("div")
   var dialogHeader=document.createElement("div")
   var dialogTitle=document.createElement("h3")
   var dialogText=document.createElement("h3")
   var dialogX=document.createElement("button")
   
   if(prop.design && prop.design.backgroundColor) {
    dialogBg.style.background=prop.design.backgroundColor;
   }
   if(!prop.design || !prop.design.backgroundColor) {
    dialogBg.style.background="gray"
   }
   dialogBg.style.position="absolute"
   dialogBg.style.left=parseInt(document.getElementsByTagName("canvas")[0].style.width.split("px").join("")/2)
   dialogBg.style.top=parseInt(document.getElementsByTagName("canvas")[0].style.height.split("px").join("")/2)
   dialogBg.style.width=300
   dialogBg.style.zIndex=2000
   dialogBg.style.height=200
   dialogBg.style.transform = "translate(-50%, -50%)"
   dialogBg.id="dialogBg"
   dialogBg.setAttribute("class", "dBg")
  
   if(prop.design && prop.design.headerColor) {
    dialogHeader.style.background=prop.design.headerColor;
   }
   if(!prop.design || !prop.design.headerColor) {
    dialogHeader.style.background="#000000"
   }
   dialogHeader.style.position="absolute"
   dialogHeader.style.width=300
   dialogHeader.style.height=30
   dialogHeader.style.zIndex=2000
   dialogHeader.style.cursor="grab"
   dialogBg.id="dialogHeader"
  
   dialogTitle.style.position="absolute"
   if(prop.design && prop.design.titleColor) {
    dialogTitle.style.color=prop.design.titleColor;
   }
   if(!prop.design || !prop.design.titleColor) {
    dialogTitle.style.color="#ffffff"
   }
   dialogTitle.style.fontFamily="Roboto"
   dialogTitle.style.zIndex=2000
   dialogTitle.style.left=parseInt(dialogHeader.style.width.split("px").join(""))/3
   dialogTitle.style.top=parseInt(dialogHeader.style.height.split("px").join(""))-45
   dialogTitle.innerHTML=prop.title
  
   dialogText.style.position="absolute"
   if(prop.design && prop.design.textColor) {
    dialogText.style.color=prop.design.textColor;
   }
   if(!prop.design || !prop.design.textColor) {
    dialogText.style.color="#000000"
   }
   dialogText.style.zIndex=2000
   dialogText.style.fontFamily="Roboto"
   dialogText.style.left=parseInt(dialogBg.style.width.split("px").join(""))-290
   dialogText.style.top=parseInt(dialogBg.style.height.split("px").join(""))-185
  var i = 0
  var str=prop.text
  if(prop&&prop.autoTyping&&prop.autoTyping!==true&&prop.autoTyping!==false&&prop.autoTyping!=="true"&&prop.autoTyping!=="false"){
   terminal.warn(prop.autoTyping+" is not a boolean. Please type a boolean (true, false). Autotyping is off.");
   prop.autoTyping=false;
   // [FIX]: probably found in 3d tutorial: When you add the autotype option to a dialog, make sure the value is a boolean. 
  }
  function typer() {
  if(i < prop.text.length){
   dialogText.innerHTML+=prop.text.charAt(i)
   i++
   setTimeout(typer, 50)
   }
  }
  if(prop.autoTyping==true){
   typer()
  }
  if(prop.autoTyping==false || !prop.autoTyping){
   dialogText.innerHTML=prop.text
  }
  // if(autoTyping&&!autoTyping.startsWith("autotype=")) {
  //   terminal.warn('When you add the autotype option to a dialog, make sure it starts with "autotype=". For more informations, please check the tutorial.')
  // }
  // if(!zxc.includes("true")) {
  // if(!zxc.includes("false")){
  // if(autoTyping.startsWith("autotype=")){
  //   terminal.warn('"'+autoTyping.split('autotype=').join('')+'" is not a valid value. For more informations, please check the tutorial.')
  //  return false
  //   }
  //  }
  // }
  // if(!zxc.includes("false")) {
  // if(!zxc.includes("true")){
  // if(autoTyping.startsWith("autotype=")){
  //   terminal.warn('"'+autoTyping.split('autotype=').join('')+'" is not a valid value. For more informations, please check the tutorial.')
  //  return false
  //   }
  //  }
  // }

   dialogX.style.position="absolute"
   if(prop.design && prop.design.exitBackground) {
    dialogX.style.background=prop.design.exitBackground;
    }
    if(!prop.design || !prop.design.exitBackground) {
      dialogX.style.background="darkred"
    }
    if(prop.design && prop.design.exitColor) {
      dialogX.style.color=prop.design.exitColor;
    }
    if(!prop.design || !prop.design.exitColor) {
      dialogX.style.color="#000000"
    }
   dialogX.style.width=30
   dialogX.style.height=30
   dialogX.style.zIndex=2000
   dialogX.style.outline="none"
   dialogX.style.border="none"
   dialogX.style.fontFamily="Roboto"
   dialogX.style.cursor="pointer"
   dialogX.style.left=parseInt(dialogBg.style.width.split("px").join(""))-30
   dialogX.style.top=parseInt(dialogBg.style.height.split("px").join(""))-200
   dialogX.innerHTML="X"
   dialogX.onmouseover=function() {
    dialogX.style.filter="brightness(1.5)";
   };
   dialogX.onmouseout=function() {
    dialogX.style.filter="brightness(1)";
   };
   dialogX.onclick=function() {
       for(var x=0;x<document.getElementsByClassName("dBg").length;x++){
         document.getElementsByClassName("dBg")[x].remove()
        }
        var param = prop.closeBtn.onclick.toString().getCharBetween("function & (").split(" ").join("");
        eval(prop.closeBtn.onclick.toString().split("function(").join("function "+param+"("+prop.closeBtn.onclick.toString().getCharBetween(param + "( & )"))+";"+param+"();");
       }
   
   outputComp.style.overflow="auto"
   document.body.appendChild(dialogBg)
   dialogBg.appendChild(dialogHeader)
   dialogBg.appendChild(dialogTitle)
   dialogBg.appendChild(dialogText)
   dialogBg.appendChild(dialogX)
  }
  else {
      return false
  }
  
  var isDown = false
  var elem = dialogBg
  var div = dialogHeader
  div.addEventListener('mousedown', function(e) {
      isDown = true;
      dialogHeader.style.cursor="grabbing"
      offset = [
          elem.offsetLeft - e.clientX,
          elem.offsetTop - e.clientY
      ];
  }, true);
  
  document.addEventListener('mouseup', function() {
      isDown = false;
      dialogHeader.style.cursor="grab"
  }, true);
  
  document.addEventListener('mousemove', function(event) {
      event.preventDefault();
      if (isDown) {
          mousePosition = {
  
              x : event.clientX,
              y : event.clientY
  
          };
          dialogHeader.style.cursor="grabbing"
          elem.style.left = (mousePosition.x + offset[0]) + 'px';
          elem.style.top  = (mousePosition.y + offset[1]) + 'px';
      }
  }, true);
  function ungrab() {
   return false
   }
  }
  var sec
  var min
  var timeThemes=["neon","flaming","lux","smooth","retro","glowing","tacticle","news","candy","floating","80s","distant","outline","love","inset","blocks","grave","solid","cartoon","vegas","comic","deep","mummy","hero","dracula","blurry","emboss","press","carve","ghost"]
  var timer = {

  }
  function createTimer(tm, attr, customProp) {
  
  timeSpeed=1000;
  fontSize=150;
  if(customProp&&customProp!=="") {
   eval(customProp);
  }
  timerPaused=false;
  if(typeof time === 'object') {
   terminal.warn("UYC can only handle 1 timer.");
  }
  else {
  var timerConfig;
  var t=document.createElement("span")
  t.id="time"
//   createTimer("5", "{sec[53]:alert('hey')}", {
//  position: {x: 50, y: 50},
//  theme: 'darkness'
// })
  
  // alert(attr)
  // alert(attr.split("{").join("").split("}").join("").split("[")[0])
  // alert(attr.split("{").join("").split("}").join("").split("]")[0].substring(4))
  //  alert(attr.split("{").join("").split("}").join("").split(":")[1])
  
  
  
  var int=setInterval(function(){
  if(attr.split("{").join("").split("}").join("").split("[")[0]=="min") {
    if(typeof time === 'object') {
      if(min==+attr.split("{").join("").split("}").join("").split("]")[0].substring(4)) {
        clearInterval(int)
        eval(attr.split('{').join('').split('}').join('').split(':')[1])
     }
    }
   }
  })
  
  
  
  var int2=setInterval(function(){
  if(attr.split("{").join("").split("}").join("").split("[")[0]=="sec") {
    if(typeof time === 'object') {
      if(sec==+attr.split("{").join("").split("}").join("").split("]")[0].substring(4)) {
        clearInterval(int2)
        eval(attr.split('{').join('').split('}').join('').split(':')[1])
     }
    }
   }
  })
  //eval("var "+attr.split("{").join("").split("}").join("").split(":")[0])
  if(customProp&&customProp.theme=="random") {
    t.setAttribute("class","time-"+timeThemes[Math.floor(Math.random()*timeThemes.length)]);
  }
  if(customProp&&customProp.theme!=='random'&&customProp.theme=='neon'||customProp&&customProp.theme!=='random'&&customProp.theme=='flaming'||customProp&&customProp.theme!=='random'&&customProp.theme=='lux'||customProp&&customProp.theme!=='random'&&customProp.theme=='smooth'||customProp&&customProp.theme!=='random'&&customProp.theme=='retro'||customProp&&customProp.theme!=='random'&&customProp.theme=='glowing'||customProp&&customProp.theme!=='random'&&customProp.theme=='tacticle'||customProp&&customProp.theme!=='random'&&customProp.theme=='news'||customProp&&customProp.theme!=='random'&&customProp.theme=='candy'||customProp&&customProp.theme!=='random'&&customProp.theme=='floating'||customProp&&customProp.theme!=='random'&&customProp.theme=='80s'||customProp&&customProp.theme!=='random'&&customProp.theme=='distant'||customProp&&customProp.theme!=='random'&&customProp.theme=='outline'||customProp&&customProp.theme!=='random'&&customProp.theme=='love'||customProp&&customProp.theme!=='random'&&customProp.theme=='inset'||customProp&&customProp.theme!=='random'&&customProp.theme=='blocks'||customProp&&customProp.theme!=='random'&&customProp.theme=='grave'||customProp&&customProp.theme!=='random'&&customProp.theme=='solid'||customProp&&customProp.theme!=='random'&&customProp.theme=='cartoon'||customProp&&customProp.theme!=='random'&&customProp.theme=='vegas'||customProp&&customProp.theme!=='random'&&customProp.theme=='comic'||customProp&&customProp.theme!=='random'&&customProp.theme=='deep'||customProp&&customProp.theme!=='random'&&customProp.theme=='mummy'||customProp&&customProp.theme!=='random'&&customProp.theme=='hero'||customProp&&customProp.theme!=='random'&&customProp.theme=='dracula'||customProp&&customProp.theme!=='random'&&customProp.theme=='blurry'||customProp&&customProp.theme!=='random'&&customProp.theme=='emboss'||customProp&&customProp.theme!=='random'&&customProp.theme=='press'||customProp&&customProp.theme!=='random'&&customProp.theme=='carve'||customProp&&customProp.theme!=='random'&&customProp.theme=='ghost') {
   t.setAttribute("class","time-"+customProp.theme)
  }
  if(customProp&&customProp.theme!=='random'&&customProp.theme!=='neon'&&customProp&&customProp.theme!=='random'&&customProp.theme!=='flaming'&&customProp&&customProp.theme!=='random'&&customProp.theme!=='lux'&&customProp&&customProp.theme!=='random'&&customProp.theme!=='smooth'&&customProp&&customProp.theme!=='random'&&customProp.theme!=='retro'&&customProp&&customProp.theme!=='random'&&customProp.theme!=='glowing'&&customProp&&customProp.theme!=='random'&&customProp.theme!=='tacticle'&&customProp&&customProp.theme!=='random'&&customProp.theme!=='news'&&customProp&&customProp.theme!=='random'&&customProp.theme!=='candy'&&customProp&&customProp.theme!=='random'&&customProp.theme!=='floating'&&customProp&&customProp.theme!=='random'&&customProp.theme!=='80s'&&customProp&&customProp.theme!=='random'&&customProp.theme!=='distant'&&customProp&&customProp.theme!=='random'&&customProp.theme!=='outline'&&customProp&&customProp.theme!=='random'&&customProp.theme!=='love'&&customProp&&customProp.theme!=='random'&&customProp.theme!=='inset'&&customProp&&customProp.theme!=='random'&&customProp.theme!=='blocks'&&customProp&&customProp.theme!=='random'&&customProp.theme!=='grave'&&customProp&&customProp.theme!=='random'&&customProp.theme!=='solid'&&customProp&&customProp.theme!=='random'&&customProp.theme!=='cartoon'&&customProp&&customProp.theme!=='random'&&customProp.theme!=='vegas'&&customProp&&customProp.theme!=='random'&&customProp.theme!=='comic'&&customProp&&customProp.theme!=='random'&&customProp.theme!=='deep'&&customProp&&customProp.theme!=='random'&&customProp.theme!=='mummy'&&customProp&&customProp.theme!=='random'&&customProp.theme!=='hero'&&customProp&&customProp.theme!=='random'&&customProp.theme!=='dracula'&&customProp&&customProp.theme!=='random'&&customProp.theme!=='blurry'&&customProp&&customProp.theme!=='random'&&customProp.theme!=='emboss'&&customProp&&customProp.theme!=='random'&&customProp.theme!=='press'&&customProp&&customProp.theme!=='random'&&customProp.theme!=='carve'&&customProp&&customProp.theme!=='random'&&customProp.theme!=='ghost') {
   terminal.warn('Unknown theme: "' + customProp.theme + '". No theme was added to the timer.');
  };
  t.innerHTML="0"+tm+":00";
  timer["get"]={
   theme:function(){return t.getAttribute("class","time-"+theme).split("time-").join("");}
  };
  timer["set"]={
   theme:function(theme){if(theme=="random"){t.setAttribute("class","time-"+timeThemes[Math.floor(Math.random()*timeThemes.length)])};if(theme=="neon"||theme=="flaming"||theme=="lux"||theme=="smooth"||theme=="retro"||theme=="glowing"||theme=="tacticle"||theme=="news"||theme=="candy"||theme=="floating"||theme=="80s"||theme=="distant"||theme=="outline"||theme=="love"||theme=="inset"||theme=="blocks"||theme=="grave"||theme=="solid"||theme=="cartoon"||theme=="vegas"||theme=="comic"||theme=="deep"||theme=="mummy"||theme=="hero"||theme=="dracula"||theme=="blurry"||theme=="emboss"||theme=="press"||theme=="carve"||theme=="ghost"){t.setAttribute("class","time-"+theme);};if(theme&&theme!=="random"&&theme!=="neon"&&theme!=="flaming"&&theme!=="lux"&&theme!=="smooth"&&theme!=="retro"&&theme!=="glowing"&&theme!=="tacticle"&&theme!=="news"&&theme!=="candy"&&theme!=="floating"&&theme!=="80s"&&theme!=="distant"&&theme!=="outline"&&theme!=="love"&&theme!=="inset"&&theme!=="blocks"&&theme!=="grave"&&theme!=="solid"&&theme!=="cartoon"&&theme!=="vegas"&&theme!=="comic"&&theme!=="deep"&&theme!=="mummy"&&theme!=="hero"&&theme!=="dracula"&&theme!=="blurry"&&theme!=="emboss"&&theme!=="press"&&theme!=="carve"&&theme!=="ghost"){terminal.warn('"'+theme+'" theme doesn\'t exist. Click here for more informations: ')};if(!theme || theme === null || theme.match(/^ *$/) !== null){terminal.warn('Please type a theme or type "random" for a random theme. Click here for more informations: ')}}
  };
  timer["startTimer"]=function() {
  //  startTimer(fiveMinutes, display);
  startTimer(fiveMinutes, display); 
  timerPaused=false;
  }
  timer["pauseTimer"]=function() {
  //  clearInterval(timerConfig);
   timerPaused=true;
  }
  timer["resumeTimer"]=function() {
  //  clearInterval(timerConfig);
   timerPaused=false;
  }
  timer["restartTimer"]=function() {
    clearInterval(timerConfig);
    startTimer(fiveMinutes, display);
  }
  t.style.position="absolute"
  if(position.x=="def"&&position.y=="def"){
  t.style.left=810
  t.style.top=-45
  }
  if(position.x=="def"&&!position.y=="def") {
   t.style.left=810
   t.style.top=position.y
  }
  if(position.y=="def"&&!position.x=="def") {
   t.style.left=position.x
   t.style.top=-45
  }
  else {
   t.style.left=customProp.position.x
   t.style.top=customProp.position.y
  }
  t.style.zIndex=5
  t.style.fontSize=fontSize;
  document.body.appendChild(t)
  function startTimer(duration, display) {
      // var timer = duration, minutes, seconds;
      var timer = duration, minutes, seconds;
      timerConfig=setInterval(function () {
        if(!timerPaused) {
          minutes = parseInt(timer / 60, 10);
          seconds = parseInt(timer % 60, 10);
          sec=seconds
          min=minutes
          minutes = minutes < 10 ? "0" + minutes : minutes;
          seconds = seconds < 10 ? "0" + seconds : seconds;
          display.innerHTML = minutes + ":" + seconds;
          if (--timer < 0) {
              timer = duration;
          }
        }
      }, timeSpeed);
  }
      var fiveMinutes = 60*tm,
          display = document.querySelector('#time');
    }
  }
  var nSS
  function download(code) {
   var filename="projectData"
  
   var element = document.createElement('a');
   var source="window.onload=function(){console.log('Script Loaded !');"+code+"}"
   element.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(source.split("def").join("'def'")));
   element.setAttribute('download', filename+".js");
   element.crossOrigin = "Anonymous"
   element.style.display = 'none';
   document.body.appendChild(element);
   element.click();
   document.body.removeChild(element);
  
  }
  function getFnParamNames(fn){
      var fstr = fn.toString();
      return fstr.match(/\(.*?\)/)[0].replace(/[()]/gi,'').replace(/\s/gi,'').split(',');
  }
  function testMode() {
  if(document.getElementsByTagName("canvas")[0]){
   document.getElementsByTagName("canvas")[0].remove()
  }
  else {
      return false
  }
  }
  // testMode()
  

  var colors=['AliceBlue','AntiqueWhite','Aqua','Aquamarine','Azure','Beige','Bisque','Black','BlanchedAlmond','Blue','BlueViolet','Brown','BurlyWood','CadetBlue','Chartreuse','Chocolate','Coral','CornflowerBlue','Cornsilk','Crimson','Cyan','DarkBlue','DarkCyan','DarkGoldenRod','DarkGray','DarkGrey','DarkGreen','DarkKhaki','DarkMagenta','DarkOliveGreen','DarkOrange','DarkOrchid','DarkRed','DarkSalmon','DarkSeaGreen','DarkSlateBlue','DarkSlateGray','DarkSlateGrey','DarkTurquoise','DarkViolet','DeepPink','DeepSkyBlue','DimGray','DimGrey','DodgerBlue','FireBrick','FloralWhite','ForestGreen','Fuchsia','Gainsboro','GhostWhite','Gold','GoldenRod','Gray','Grey','Green','GreenYellow','HoneyDew','HotPink','IndianRed','Indigo','Ivory','Khaki','Lavender','LavenderBlush','LawnGreen','LemonChiffon','LightBlue','LightCoral','LightCyan','LightGoldenRodYellow','LightGray','LightGrey','LightGreen','LightPink','LightSalmon','LightSeaGreen','LightSkyBlue','LightSlateGray','LightSlateGrey','LightSteelBlue','LightYellow','Lime','LimeGreen','Linen','Magenta','Maroon','MediumAquaMarine','MediumBlue','MediumOrchid','MediumPurple','MediumSeaGreen','MediumSlateBlue','MediumSpringGreen','MediumTurquoise','MediumVioletRed','MidnightBlue','MintCream','MistyRose','Moccasin','NavajoWhite','Navy','OldLace','Olive','OliveDrab','Orange','OrangeRed','Orchid','PaleGoldenRod','PaleGreen','PaleTurquoise','PaleVioletRed','PapayaWhip','PeachPuff','Peru','Pink','Plum','PowderBlue','Purple','RebeccaPurple','Red','RosyBrown','RoyalBlue','SaddleBrown','Salmon','SandyBrown','SeaGreen','SeaShell','Sienna','Silver','SkyBlue','SlateBlue','SlateGray','SlateGrey','Snow','SpringGreen','SteelBlue','Tan','Teal','Thistle','Tomato','Turquoise','Violet','Wheat','White','WhiteSmoke','Yellow','YellowGreen']
  var ntc_colors = [];
  for(var i = 0; i < Object.keys(ntc.names).length; i++) {
   ntc_colors.push(ntc.names[i][1]);
  };
  var $random_Color
  
  


  
  
  
  
  var ma = false
  function removeBody(body) {
    if(typeof body === 'object' && !body.isGlow) {
     scene.remove(body);
    }
    else if(typeof body === 'object') {
     body.visible=false;
    };
  //   if(body.startsWith("byIndex")) {
  //     scene.remove(scene.children[body.split("byIndex=").join("")]);
  //  }
  //  if(body.startsWith("byName")) {
  //    eval(`scene.remove(scene.getObjectByName(`+'"'+body.split("byName=").join("")+'"'+`))`);
  //  }
  }
var customContentMenu="";
function importContext(ctx) {
 if(!ctx) {
  terminal.warn("Please enter a context.");
 }
 if(ctx&&!localStorage.getItem(ctx)) {
  terminal.warn('Invalid context: "' + ctx +'"');
 }
 if(ctx&&localStorage.getItem(ctx)) {
  customContentMenu=localStorage.getItem(ctx);
  $("body").append(localStorage.getItem(ctx));
  rC_bg.style.zIndex=5;
  window.oncontextmenu=function() {
   if(typeof rC_bg === 'object') {
    rC_bg.style.visibility="visible";
    rC_bg.style.position="absolute";
    rC_bg.style.left=event.clientX;
    rC_bg.style.top=event.clientY;
   };
  };
 };
};
window.onclick=function(event) {
// if(event.target.id!=="fps_textBox"&&event.target.id!=="boxBackground"&&event.target.id!=="PERF_LINE"&&typeof boxBackground === 'object') {
  if(FB) {
 setTimeout(function(){FB=false},3);
  document.body.removeChild(boxBackground);
 frameCounter.pause=false;
}
if(typeof rC_bg === 'object' && event.target.getAttribute("id")!=="rC_bg") {
  rC_bg.style.visibility="hidden";
  contentMenu.open=false;
 }
}
var contentMenu = {
 open: false
}
function openCustomMenu() {
 contentMenu.open=true;
 rC_bg.style.visibility="visible";
}
  function addExe() {
      executed++;
   if(executed>1){
    //window.location.reload();
    UYC.renderer.refresh();
   }
  }
  window.onkeypress=function(event) {
    // if(event.key=='`'&&editor.hasFocus()) {
    //  snippet();
    // };
    if(event.ctrlKey&&event.key=="*"&&editor.getValue().includes("audio.system.level")) {
    editor.setValue(editor.getValue().split("audio.system.level(").join("setTimeout(function(){audio.system.level("+n_fR2).split("console.log(audioLevel)").join("setInterval(function(){if(audioLevel){console.log(audioLevel)}})").split("console.log").join("terminal.log").split("getJointBody").join("bodies").split("getJoint").join("engine.world.composites").join("engine.world.bodies").split("UYC_render").join("render").split("un'def'ined").join("").split('l("'+audioConverter[1].substring(1,IDL)+'"').join('l("'+audioConverter[1].substring(1,IDL)+'")},3)').split("},3))").join("},3)"))
  }
    if(event.ctrlKey&&event.key=="*"&&!editor.getValue().includes("audio.system.level")){
     editor.setValue(editor.getValue().split("setText=").join("innerHTML=").split("audio.system.level(").join("setTimeout(function(){audio.system.level("+n_fR2).split("console.log(audioLevel)").join("setInterval(function(){if(audioLevel){console.log(audioLevel)}})").split("console.log").join("terminal.log").split("getJointBody").join("bodies").split("getJoint").join("engine.world.composites").split("def").join("'def'").split("UYC_render").join("render"))
    }
}

// let physics;

// // Load MMD resources and instantiate MMDPhysics
// new THREE.MMDLoader().load(
// 	'https://threejs.org/examples/models/mmd/miku/miku_v2.pmd',
// 	function ( mesh ) {

// 		physics = new THREE.MMDPhysics( mesh )
// 		scene.add( mesh );

// 	}
// );
function addLinearForce(body, dir, speed) {
 if(plugins.hasOwnProperty("movements")) {
  if(dir == "+x") {
   body.setLinearVelocity({x: speed, y: body.getLinearVelocity().y, z:body.getLinearVelocity().z})
 };
 if(dir == "-x") {
   body.setLinearVelocity({x: -speed, y: body.getLinearVelocity().y, z:body.getLinearVelocity().z})
 };
 if(dir == "+x+y") {
   body.setLinearVelocity({x: +speed, y: +speed, z:body.getLinearVelocity().z})
 };
 if(dir == "-x-y") {
   body.setLinearVelocity({x: -speed, y: -speed, z:body.getLinearVelocity().z})
 };
 if(dir == "+x+z") {
   body.setLinearVelocity({x: speed, y: body.getLinearVelocity().y, z:speed})
 };
 if(dir == "-x-z") {
   body.setLinearVelocity({x: -speed, y: body.getLinearVelocity().y, z:-speed})
 };
 if(dir == "+y+z") {
   body.setLinearVelocity({x: body.getLinearVelocity().x, y: +speed, z:speed})
 };
 if(dir == "-y-z") {
   body.setLinearVelocity({x: body.getLinearVelocity().x, y: -speed, z:-speed})
 };
 if(dir == "-z") {
   body.setLinearVelocity({x: body.getLinearVelocity().x, y: body.getLinearVelocity().y, z:-speed})
 };
 if(dir == "+z") {
   body.setLinearVelocity({x: body.getLinearVelocity().x, y: body.getLinearVelocity().y, z:speed})
 };
 if(dir == "+y") {
   body.setLinearVelocity({x: body.getLinearVelocity().x, y: speed, z:body.getLinearVelocity().z})
 };
 if(dir == "-y") {
   body.setLinearVelocity({x: body.getLinearVelocity().x, y: -speed, z:body.getLinearVelocity().z})
  };
 };
};
// function addInfiniteForce(body, dir, speed) {
//  if(plugins.hasOwnProperty("movements")) {
//  if(dir == "-x") {
//   setInterval(function() {
//    body.setLinearVelocity({x: speed, y: body.getLinearVelocity().y, z:body.getLinearVelocity().z})
//   },speed);
//  };
//  if(dir == "+x") {
//   setInterval(function() {
//    body.setLinearVelocity({x: -speed, y: body.getLinearVelocity().y, z:body.getLinearVelocity().z})
//   },speed*speed);
//  };
//  if(dir == "-z") {
//   setInterval(function() {
//    body.setLinearVelocity({x: body.getLinearVelocity().x, y: body.getLinearVelocity().y, z:-speed})
//   },speed*speed);
//  };
//  if(dir == "+z") {
//   setInterval(function() {
//    body.setLinearVelocity({x: body.getLinearVelocity().x, y: body.getLinearVelocity().y, z:speed})
//   },speed*speed);
//  };
//  if(dir == "+y") {
//   setInterval(function() {
//    body.setLinearVelocity({x: body.getLinearVelocity().x, y: speed, z:body.getLinearVelocity().z})
//   },speed*speed);
//  };
//  if(dir == "-y") {
//   setInterval(function() {
//    body.setLinearVelocity({x: body.getLinearVelocity().x, y: -speed, z:body.getLinearVelocity().z})
//   },speed*speed);
//   };
//  };
// };
function addForce(body,force) {
  // if(body.startsWith("byIndex")) {
  //   var force = new THREE.Vector3(x, y, z);
  //   object=parseInt(body.split("byIndex").join("").split("=").join(""))
  //   if(scene.children[object].type!=="Mesh") {
  //     console.warn("Can't apply force to "+scene.children[object].type+". Object needs to be a Mesh.");
  //   }
  //   else {
  //     scene.children[object].applyCentralImpulse(force);
  //   }
  //  }
  //  if(body.startsWith("byName")) {
  //   var force = new THREE.Vector3(x, y, z);   
  //   eval(`scene.getObjectByName(`+'"'+body.split("byName=").join("")+'"'+`).applyCentralImpulse(force)`);
  //   // scene.children[body].applyCentralImpulse(force);
  //  }
  // var forc = new THREE.Vector3(force.x, force.y, force.z);   
  // console.log(forc)
  // console.log(force);
  if(plugins.hasOwnProperty("movements")&&typeof body === 'object') {
   eval(`body.applyCentralImpulse(force)`);
  };
  if(!plugins.hasOwnProperty("movements")&&typeof body === 'object') {
   terminal.warn('"addForce" function requires "movements" plugin.');
  };
  if(!body === 'object') {
   terminal.warn('"'+ body + '" is not an object.');
  };
}
var hack
function attach(bodyIndex,attachedBodyIndex,color) {
  var lineMaterial = new THREE.LineBasicMaterial({	color: color	});
  var geometry = new THREE.Geometry();
  geometry.vertices.push(bodyIndex.position);
  geometry.vertices.push(attachedBodyIndex.position);
  hack=geometry.vertices[0].x+", "+geometry.vertices[0].y+", "+geometry.vertices[0].z+"\n"+geometry.vertices[1].x+", "+geometry.vertices[1].y+", "+geometry.vertices[1].z
  line = new THREE.Line(geometry, lineMaterial);
  scene.add(line); 
  // [FIX]: infinite attach ? XD
}
// [FIX]: below :|
// function createGroupedStack(xPos,yPos,zPos,xScale,yScale,zScale) {
//   var group = new Physijs.Mesh();
//         var mats = [];
//         mats.push(new THREE.MeshBasicMaterial({color: 0x009e60}));
//         mats.push(new THREE.MeshBasicMaterial({color: 0x009e60}));
//         mats.push(new THREE.MeshBasicMaterial({color: 0x0051ba}));
//         mats.push(new THREE.MeshBasicMaterial({color: 0x0051ba}));
//         mats.push(new THREE.MeshBasicMaterial({color: 0xffd500}));
//         mats.push(new THREE.MeshBasicMaterial({color: 0xffd500}));
//         mats.push(new THREE.MeshBasicMaterial({color: 0xff5800}));
//         mats.push(new THREE.MeshBasicMaterial({color: 0xff5800}));
//         mats.push(new THREE.MeshBasicMaterial({color: 0xC41E3A}));
//         mats.push(new THREE.MeshBasicMaterial({color: 0xC41E3A}));
//         mats.push(new THREE.MeshBasicMaterial({color: 0xffffff}));
//         mats.push(new THREE.MeshBasicMaterial({color: 0xffffff}));
//         var faceMaterial = new THREE.MeshFaceMaterial(mats);
//         // var faceMaterial = new THREE.Mesh(new THREE.BoxGeometry(1,1,1), mats);
//         for (var x = 0; x < xScale; x++) {
//             for (var y = 0; y < yScale; y++) {
//                 for (var z = 0; z < zScale; z++) {
//                     var cubeGeom = new THREE.BoxGeometry(2.9, 2.9, 2.9);
//                     var cube = new Physijs.Mesh(cubeGeom, faceMaterial);
//                     cube.position.set(xPos-x*xScale,yPos-y*yScale,zPos-z*zScale);
//                     group.add(cube);
//                 }
//             }
//         }
//         scene.add(group);
// }
function createStack(position,scale,customProp) {
  
  color="white";
  colums=5;
  rows=5;
  // 
  if(customProp&&customProp!==""){
    eval(customProp);
  }
var mat  = new THREE.MeshBasicMaterial({ color:color});
var geom = new THREE.CubeGeometry( 1, 1, 1 );
	var y = 1;
					for(var j=1;j<=rows;++j) {					
						for(var i=-5;i<=colums;++i) {
							box = new Physijs.BoxMesh(geom, mat);
							box.castShadow = true; 
              // box.scale.set(scale.x,scale.y,scale.z);
              box.position.set(position.x+i,position.y+y+0.5,position.z); 
							scene.add(box); 				
						}
						y++;
					}
                }
var mouseCoords;
var raycaster;
var mouse = {
 coordinates: {
  x:0,
  y:0
 }
};
window.onmousemove=function() {
  mouseCoords = new THREE.Vector2();
 mouseCoords.set(
     ( event.clientX / window.innerWidth ) * 2 - 1,
     - ( event.clientY / window.innerHeight ) * 2 + 1
 );
 mouse.coordinates.x=event.clientX;
 mouse.coordinates.y=event.clientY;
}
window.addEventListener( 'mousedown', onMouseDown, false ); 
function onMouseDown(event) { 
 if(localStorage.getItem("assets").includes("Shooter")) {
 mouseCoords = new THREE.Vector2();
 raycaster = new THREE.Raycaster();
 mouseCoords.set(
     ( event.clientX / window.innerWidth ) * 2 - 1,
     - ( event.clientY / window.innerHeight ) * 2 + 1
 );
//  raycaster["mouse"]="";
//  raycaster["mouse"]["coordinates"]={
//   x:mouseCoords.x,
//   y:mouseCoords.y,
//   z:mouseCoords.z
//  };
 raycaster.setFromCamera( mouseCoords, camera );
 var ballMass = 35;
 var ballRadius = 0.4; 
 var ballMaterial = new THREE.MeshPhongMaterial( { color: 0x202020 } );
 var pos = new THREE.Vector3();
 var ball = new Physijs.SphereMesh( 
     new THREE.SphereGeometry( ballRadius, 10, 10 ), 
     ballMaterial,
     ballMass
 );
 ball.castShadow = true;
 ball.receiveShadow = true;
 ball.position.copy(raycaster.ray.direction);
 ball.position.add(raycaster.ray.origin);            
 scene.add(ball);
 pos.copy( raycaster.ray.direction );
 pos.multiplyScalar( 80 );
 ball.setLinearVelocity( new THREE.Vector3( pos.x, pos.y, pos.z ) ); 
 }
}
function TWEEN(data, value, incrementor, speed, after) { // [FIX]: Why not add onEnd, because you can't ? XD
 prevValue = eval(data);
 //  console.log(Number(eval(data)) < value, Number(eval(data)) > value);
 if(Number(eval(data)) < value) {
  inc = setInterval(function() {
   if(Number(eval(data)) <= value) { // if(eval(data) !== value) {
    eval(data+'+='+incrementor);
   };
   if(Number(eval(data))>=value){if(after&&after!==''){setTimeout(() => { var param = after.toString().getCharBetween('function( & )'); var tok = generateToken(5); eval(after.toString().split("function(").join("function "+tok+"("+param)+";"+tok+"();"); },3)};clearInterval(inc);terminal.info("Tweening of "+data+" changed the value from "+prevValue+" to "+eval(data));setTimeout(function(){terminal.clear();},3000);};
  },speed);
 };
 if(Number(eval(data)) > value) {
  inc = setInterval(function() {
   if(eval(data) >= value) { // if(eval(data) !== value) {
    eval(data+'-='+incrementor);
   };
   if(eval(data)<=value){clearInterval(inc);terminal.info("Tweening of "+data+" changed the value from "+prevValue+" to "+eval(data));setTimeout(function(){terminal.clear();},3000);};
  },speed);
 };
};
var raycaster;
var intersects;
function onRaycast(body,eventType,code) {
    var RD=setInterval(() => {
    if(plugins.hasOwnProperty("Raycaster")) {
        document.addEventListener( eventType, activeEvent, false ); 
        mouseCoords = new THREE.Vector2();
        raycaster = new THREE.Raycaster();
        clearInterval(RD);
    }
    function activeEvent( event ) { 
        //alert(plugins.hasOwnProperty("Raycaster"))
				if(plugins.hasOwnProperty("Raycaster")) {
				//clear all materials to white
				// for ( var i = 0; i < scene.children.length; i++ ) {
					// if(scene.children[i] instanceof Physijs.Mesh) {
						// scene.children[ body ].material.color.set( 0xffffff );				
					// }
				// }
				mouseCoords.set(
					( event.clientX / window.innerWidth ) * 2 - 1,
					- ( event.clientY / window.innerHeight ) * 2 + 1
				);

				raycaster.setFromCamera( mouseCoords, camera );
				
				// calculate objects intersecting the picking ray
				intersects = raycaster.intersectObjects( scene.children );
    //             if(intersects[0]) {
    //              if(intersects[0].object._physijs.id==parseInt(body.split("byIndex").join("").split("=").join(""))) {
		// 		    var raycastedBody=intersects[0]
    //                 eval(code);
    //             //  intersects[0].object.material.color.set( 0xff0000 );				
    //  }
    // }
    raycastedBody=intersects[0];
    // console.log(eval(raycastedBody))
    // console.log(raycastedBody.object);
    // console.log(body);
    // console.log(body==body)
    // console.log(typeof raycastedBody === 'object' && raycastedBody.object.type == "Mesh" && raycastedBody.object==body)
    // console.log(body);
    if(typeof raycastedBody === 'object' && raycastedBody.object.type == "Mesh" && raycastedBody.object==body) {
      eval(code.split('this').join('raycastedBody.object'));
     }



    //  if(body.includes("byIndex")) {
    //         raycastedBody=intersects[0]
    //         if(typeof raycastedBody === 'object'&&typeof raycastedBody.object._physijs === 'object') {
    //         if(raycastedBody.object._physijs.id==parseInt(body.split("byIndex").join("").split("=").join(""))) {
    //         eval(code)
    //        }
    //       }
    //      }
    //  if(body.includes("byType")) {
    //         raycastedBody=intersects[0]
    //         if(typeof raycastedBody === 'object'&&typeof raycastedBody.object._physijs === 'object') {
    //         if(raycastedBody.object.type==body.split("byType").join("").split("=").join("")) {
    //         eval(code)
    //         }
    //       }
    //  }
    //  if(body.includes("byName")) {
    //         raycastedBody=intersects[0]
    //         if(raycastedBody.object.name==body.split("byName").join("").split("=").join("").split('"').join("").split("'").join("")) {
    //         eval(code)
    //         }
    //  }
    //  if(body=="*") {
    //     for ( var i = 0; i < scene.children.length; i++ ) {
    //       raycastedBody=intersects[i]
    //       if(typeof raycastedBody === 'object' && raycastedBody.object.type=="Mesh") {
    //         eval(code)
    //         break
    //       }
    //   }
    //  }
    //  if(body.includes("byIndex")&&body.includes("-")) {
    //     for ( var i = body.split("-")[0].split("byIndex").join("").split("=").join(""); i < body.split("-")[1]; i++ ) {
    //         raycastedBody=intersects[0]
    //         //  if(raycastedBody.type=="Mesh") {
    //         eval(code)
    //         break
    //   }
    //  }




    }
   }	
 }, 0);
}
var raycastedBody;
// var objectIndex=2;
// function addOutline(body) {
// if(body.startsWith("byIndex")) {
//  const geometry = scene.children[body.split("byIndex").join("").split("=").join("")].geometry;
//  const edges = new THREE.EdgesGeometry(geometry);
// var edgesMaterial = new THREE.ShaderMaterial({
//     uniforms: {
//       lineWidth: {
//         value: 13
//       }
//     },
//     vertexShader: document.getElementById("vertexShader").innerHTML,
//     fragmentShader: document.getElementById("fragmentShader").innerHTML,
//     side: THREE.DoubleSide
// });
// edgesMaterial.extensions.derivatives = true;
//  const edgesMesh = new THREE.LineSegments(edges, edgesMaterial);
//  edgesMesh.position.copy(scene.children[body.split("byIndex").join("").split("=").join("")].position);
// edgesMesh.rotation.copy(scene.children[body.split("byIndex").join("").split("=").join("")].rotation);
// edgesMesh.scale.copy(scene.children[body.split("byIndex").join("").split("=").join("")].scale);
//  scene.add(edgesMesh)
//  }
// }
function createObjects(name, objects) {
 var LrJcMqCtFnGsCbHiSrCmCbCqRoBgHaEcGaPdFsQiYeDfBaKnEyWpFjCbKyCfMwYqHjPpWkBhNmIaKsLkXqSzTjZnDtMgFmJpDfXfEkPy = "";
 for(var o = 0; o < Object.keys(objects).length; o++) { LrJcMqCtFnGsCbHiSrCmCbCqRoBgHaEcGaPdFsQiYeDfBaKnEyWpFjCbKyCfMwYqHjPpWkBhNmIaKsLkXqSzTjZnDtMgFmJpDfXfEkPy += Object.keys(objects)[o]+`: "`+getKeyValue(objects, o)+`",
`
 };
globalVar(name, `{`+LrJcMqCtFnGsCbHiSrCmCbCqRoBgHaEcGaPdFsQiYeDfBaKnEyWpFjCbKyCfMwYqHjPpWkBhNmIaKsLkXqSzTjZnDtMgFmJpDfXfEkPy+`}`);
};
function setParent(elem, elemPar) {
 var _clone = elem; // document.cloneNode(elem);
 elem.remove();
 elemPar.appendChild(_clone);
};
function countRepeatedChars(char) {
  let words = sentence.split(" ");
  let wordMap = {};
  for (let i = 0; i < words.length; i++) {
    let currentWordCount = wordMap[words[i]];
    let count = currentWordCount ? currentWordCount : 0;
    wordMap[words[i]] = count + 1;
  }
  return wordMap;
}
// var anims;
var _animsL=[];
function getAnimationsFrom(body) {
//  anims="";
//  for(var a=0;a<Object.keys(body.animations).length;a++) {
//   anims+=Object.keys(body.animations)[a]+", "+Object.keys(body.animations)[a+1];
//   anims2=anims.split("undefined").join("");
//   return anims;
//  }
 if(body && body.UYCModel && typeof body.UYCModel === 'object') {
  return Object.keys(body.animations);
 }
 else {
  var _animsL=[];
  if(body && typeof body.animations === 'object') {
for(var al=0;al<body.animations.length;al++) {
    _animsL.push(body.animations[al].name);
    // console.log(_animsL);
    body.animationsName=_animsL;
    setTimeout(function(){_animsL=""},3);
   }
  }
 }
};
setInterval(() => {
for(var l=0;l<game.bodies.length;l++) {
  getAnimationsFrom(getBodyByIndex(l));
 }
}, 0);
function displayAnimationFrom(body) {
 console.table(Object.keys(body.animations));
}
// function fixMultiplePlugins() {
 
// };
var controls;
  function Comment(c) {
   if(typeof eval(c.split("from ")[1]) !== "string") {
    terminal.warn('You tried to comment "' + c.split("from ")[1] +'" which is an ' + typeof eval(c.split("from ")[1]) + ".You can only comment strings types.");
   };
   if(typeof eval(c.split("from ")[1]) == "string" && !eval(c.split("from ")[1]).includes(c.split(" from")[0])) {
    terminal.warn('The string "'+c.split("from ")[1]+'" does not contain "'+c.split(" from")[0]+'". Please make sure you typed the text correctly and make sure it exists in the string.');
   };
   if(typeof eval(c.split("from ")[1]) == "string" && eval(c.split("from ")[1]).includes(c.split(" from")[0])) {
    var updatedParameter = eval(c.split("from ")[1]).split(c.split(" from")[0]).join("//"+c.split(" from")[0]);
    return updatedParameter;
   }
  };
  var eulerX = true, eulerY = true, _euler = new THREE.Euler( 0, 0, 0, 'YXZ' );
  ( function () {
// const _euler = new THREE.Euler( 0, 0, 0, 'YXZ' );
const _vector = new THREE.Vector3();
const _changeEvent = {
  type: 'change'
};
const _lockEvent = {
  type: 'lock'
};
const _unlockEvent = {
  type: 'unlock'
};
const _PI_2 = Math.PI / 2;
class PointerLockControls extends THREE.EventDispatcher {
  constructor( camera, domElement ) {
    super();
    if ( domElement === undefined ) {
      console.warn( 'THREE.PointerLockControls: The second parameter "domElement" is now mandatory.' );
      domElement = document.body;
    }
    this.domElement = domElement;
    this.isLocked = false; // Set to constrain the pitch of the camera
    // Range is 0 to Math.PI radians
    this.minPolarAngle = 0; // radians
    this.maxPolarAngle = Math.PI; // radians
    const scope = this;
    function onMouseMove( event ) {
      if ( scope.isLocked === false ) return;
      const movementX = event.movementX || event.mozMovementX || event.webkitMovementX || 0;
      const movementY = event.movementY || event.mozMovementY || event.webkitMovementY || 0;
      _euler.setFromQuaternion( camera.quaternion );
      if(eulerX && !UYC.controls.invertedX) {
       _euler.y -= movementX * 0.002;
      };
      if(eulerX && UYC.controls.invertedX) {
       _euler.y -= -movementX * 0.002;
      };
      if(eulerY && !UYC.controls.invertedY) {
       _euler.x -= movementY * 0.002;
      };
      if(eulerY && UYC.controls.invertedY) {
       _euler.x -= -movementY * 0.002;
      };
      _euler.x = Math.max( _PI_2 - scope.maxPolarAngle, Math.min( _PI_2 - scope.minPolarAngle, _euler.x ) );
      camera.quaternion.setFromEuler( _euler );
      scope.dispatchEvent( _changeEvent );
    }
    function onPointerlockChange() {
      if ( scope.domElement.ownerDocument.pointerLockElement === scope.domElement ) {

        scope.dispatchEvent( _lockEvent );
        scope.isLocked = true;
      } else {
        scope.dispatchEvent( _unlockEvent );
        scope.isLocked = false;
      }
    }
    function onPointerlockError() {
      console.error( 'THREE.PointerLockControls: Unable to use Pointer Lock API' );
    }
    this.connect = function () {
      scope.domElement.ownerDocument.addEventListener( 'mousemove', onMouseMove );
      scope.domElement.ownerDocument.addEventListener( 'pointerlockchange', onPointerlockChange );
      scope.domElement.ownerDocument.addEventListener( 'pointerlockerror', onPointerlockError );
    };
    this.disconnect = function () {
      scope.domElement.ownerDocument.removeEventListener( 'mousemove', onMouseMove );
      scope.domElement.ownerDocument.removeEventListener( 'pointerlockchange', onPointerlockChange );
      scope.domElement.ownerDocument.removeEventListener( 'pointerlockerror', onPointerlockError );
    };
    //this.dispose = function () {
    //	this.disconnect();
    //};
    this.getObject = function () {
      // retaining this method for backward compatibility
      return camera;
    };
    this.getDirection = function () {
      const direction = new THREE.Vector3( 0, 0, - 1 );
      return function ( v ) {
        return v.copy( direction ).applyQuaternion( camera.quaternion );
      };
    }();
    this.moveForward = function ( distance ) {
      // move forward parallel to the xz-plane
      // assumes camera.up is y-up
      _vector.setFromMatrixColumn( camera.matrix, 0 );
      _vector.crossVectors( camera.up, _vector );
      camera.position.addScaledVector( _vector, distance );
    };
    this.moveRight = function ( distance ) {
      _vector.setFromMatrixColumn( camera.matrix, 0 );
      camera.position.addScaledVector( _vector, distance );
    };
    this.lock = function () {
      this.domElement.requestPointerLock();
    };
    this.unlock = function () {
      scope.domElement.ownerDocument.exitPointerLock();
    };
    this.connect();
  }
}
THREE.PointerLockControls = PointerLockControls;
})();
  function load_raycaster(event) {
   setTimeout(function() {
  if(plugins.hasOwnProperty("Raycaster")) {
    raycaster = new THREE.Raycaster();
    var _coords = new THREE.Vector2();
    _coords.set(
					( event.clientX / window.innerWidth ) * 2 - 1,
					- ( event.clientY / window.innerHeight ) * 2 + 1
				);
 				raycaster.setFromCamera( _coords, camera );
    };
   },10);
  };
  function end(int) {
   clearInterval(int);
  };
  var GamepadCursorMovement;
  var GamepadCursorTimeout = false;
  function gamepad_interaction_timeout() {
   setTimeout(function() { GamepadCursorTimeout = true; },3);
   setTimeout(function() { GamepadCursorTimeout = false; },UYC.controller.cursor.timeout);
  };
  function execute() {
  // if(!gamepad){
  //  var connectControllerCon=confirm('GAMEPAD NOT FOUND !\n\nPlease connect your controller !\n\nYour controller is connected and still doesn\'t work ? Press "Cancel" to see what can you do.')
  //  if(!connectControllerCon) {
  //   alert("Press a button or reconnect your controller to connect your gamepad to UYC Protocol.\n\n\nIf your controller still doesn't work, please contact me at sol.fioriginal@yahoo.com")
  //  }
  // }
  // else {
  // setTimeout(() => {
  //     setup()
  // }, 3);
  // camera.position.z = 10 IN CASE ORBITAL CONTROLS DOESN'T WORK PROPERLY !
  // setInterval(() => {
  //  for(var e=0;e<$_gAE('', '@');e++){
  //   $_gAE(e).style.cursor='url("Cursors/'+UYC.cursor.info.theme+'_'+UYC.cursor.info.color+'.png"), auto';
  //  };
  // },1000); [LAG DISABLER]
  if(gamepad){
   controller = {
   cursor: {
    interactables: [],
    exist: false,
    enabled: true,
    sensivity: 3,
    timeout: 100,
    // [FIX]: make cursor source changeable to user preferences
    add: function() {
     UYC.controller.cursor.exist = true;
     GUI.addImage({source: "cursor.png", position: {x:game.winSize.x / 2,y:game.winSize.y / 2}, scale: {x:30,y:30}, id: "gamepad_cursor", stackOrder: 10});
     GamepadCursorMovement = setInterval(() => {
      if(UYC.controller.cursor.enabled && document.getElementById("gamepad_cursor") !== null ) {
       gamepad_cursor.style.left = parseInt(gamepad_cursor.style.left || 0, 10) + UYC.controller.axes.left.x * UYC.controller.cursor.sensivity + "px"
       gamepad_cursor.style.top = parseInt(gamepad_cursor.style.top || 0, 10) + UYC.controller.axes.left.y * UYC.controller.cursor.sensivity + "px";
      };
     });
     UYC.controller.btnPressed("A", function() {
      gamepad_interaction_timeout();
      if(!GamepadCursorTimeout) {
      for(var i = 0; i < UYC.controller.cursor.interactables[0].length; i++) { 
        // console.log(UYC.controller.cursor.interactables[0][i], document.getElementById(UYC.controller.cursor.interactables[0][i]) !== null);
        if(document.getElementById(UYC.controller.cursor.interactables[0][i]) !== null) {
        if(GUI.collisionDetection(gamepad_cursor, document.getElementById(UYC.controller.cursor.interactables[0][i])) === true) {
        if(typeof document.getElementById(UYC.controller.cursor.interactables[0][i]).click === 'function') {
         document.getElementById(UYC.controller.cursor.interactables[0][i]).click();
         };
        };
       };
      };
      };
     });
     UYC.cursor.hide();
    },
    remove: function() { UYC.controller.cursor.exist = false; clearInterval(GamepadCursorMovement); gamepad_cursor.remove(); },
    hide: function() { UYC.cursor.show(); gamepad_cursor.style.visibility = "hidden"; },
    show: function() { UYC.cursor.hide(); gamepad_cursor.style.visibility = "visible"; },
   },
   getBtn: gK,
   btnPressed: function(btn, code, unpressed) {
     if(plugins&&plugins.hasOwnProperty('gamepadEvent')){
       var theID=generateToken(5);//rID.split("undefined").join("")
       if(unpressed && unpressed !== "") {
        // console.log("var controllerChecker=setInterval(function(){if(controller){clearInterval(controllerChecker);gamepadBtnAPI()}});function gamepadBtnAPI(){var "+theID+"=setInterval(function(){if(JSON.parse(localStorage.getItem('gamepad_keys'))['"+btn.toLowerCase()+"']){setTimeout(function(){gamepadBtnAPI();gK='';controller.getBtn=gK;},3);if(!JSON.parse(localStorage.getItem('gamepad_keys'))['"+btn.toLowerCase()+"']){eval(unpressed.toString().split('function() {').join('').split('function(){').join('').slice(0,-1));};if(`+theID+`){clearInterval("+theID+")};"+code.toString().split("function() {").join("").split("function(){").join("").slice(0,-1)+"}})}");
        eval("var controllerChecker=setInterval(function(){if(controller){clearInterval(controllerChecker);gamepadBtnAPI()}});function gamepadBtnAPI(){var "+theID+"=setInterval(function(){if(!JSON.parse(localStorage.getItem('gamepad_keys'))['"+btn.toLowerCase()+"']){eval(unpressed.toString().split('function() {').join('').split('function(){').join('').slice(0,-1));};if(JSON.parse(localStorage.getItem('gamepad_keys'))['"+btn.toLowerCase()+"']){setTimeout(function(){gamepadBtnAPI();gK='';controller.getBtn=gK;},3);if(`+theID+`){clearInterval("+theID+")};"+code.toString().split("function() {").join("").split("function(){").join("").slice(0,-1)+"}})}")
       }
       else {
        eval("var controllerChecker=setInterval(function(){if(controller){clearInterval(controllerChecker);gamepadBtnAPI()}});function gamepadBtnAPI(){var "+theID+"=setInterval(function(){if(JSON.parse(localStorage.getItem('gamepad_keys'))['"+btn.toLowerCase()+"']){setTimeout(function(){gamepadBtnAPI();gK='';controller.getBtn=gK;},3);if("+theID+"){clearInterval("+theID+")};"+code.toString().split("function() {").join("").split("function(){").join("").slice(0,-1)+"}})}");
       };
       //console.log("gamepadBtnAPI();function gamepadBtnAPI(){var "+theID+"=setInterval(function(){if(controller.getBtn=='"+btn+"'||gK=='"+btn+"'){setTimeout(function(){gamepadBtnAPI();gK='';controller.getBtn=gK;},3);if("+theID+"){clearInterval("+theID+")};"+code.toString().split("function() {").join("").split("function(){").join("").slice(0,-1)+"}})}")
      }
    if(!plugins.hasOwnProperty("gamepadEvent")){
      terminal.warn('You need to load the "gamepadEvent" to use controller functions.')
    }
     },
    vibration: function(del,dur,wM,sM) {
      let pads = navigator.getGamepads();
  pads[0].vibrationActuator.playEffect("dual-rumble", {
      startDelay: del,
      duration: dur,
      weakMagnitude: wM,
      strongMagnitude: sM
  });
    },
    status:cS,
    LT:{value:gamepad.buttons[6].value},
    RT:{value:gamepad.buttons[7].value}
   }
   UYC["controller"]=controller;
  }
  load_raycaster(event);
  setTimeout(() => {
   multiplePlugins = [];
   controls="";
  },3);
  setTimeout(function() {
    for(var p=0;p<Object.keys(plugins).length;p++) {
 if(Object.keys(plugins)[p].includes("Controls")) {
  multiplePlugins+=Object.keys(plugins)[p].toString()+", ";
  var mP=multiplePlugins.substring(0, multiplePlugins.lastIndexOf(","));
  if(mP.includes(",")) {
   terminal.error("Multiple controls has been found in plugins ("+mP+")")
  }
 }
}
  },10)
//    terminal.error("Multiple controls has been found in plugins (");
   //}
   setTimeout(function() {
    if(plugins.hasOwnProperty("FlyControls")) {
     FC=true;
     controls = new THREE.FlyControls(camera, renderer.domElement);
     controls.movementSpeed = 1000;
				controls.domElement = renderer.domElement;
				controls.rollSpeed = Math.PI / 24;
				controls.autoForward = false;
				controls.dragToLook = false;
     outputComp.style.zIndex=1;
    }
   },30)
  setTimeout(function() {
   if(plugins.hasOwnProperty("OrbitalControls")) {
    UYC.controls.type="Orbital";
    OC=true;
    controls = new THREE.OrbitControls(camera, renderer.domElement);
    outputComp.style.zIndex=1;
   }
  },30)
  setTimeout(function() {
  if(plugins.hasOwnProperty("PointerLockControls")) {
UYC.controls.type="PointerLock";
controls = new THREE.PointerLockControls(camera, renderer.domElement)
renderer.domElement.addEventListener('click', function () { controls.lock() }, false)
let onKeyDown = function (event) {
 switch (event.keyCode) {
 case 27:
 moveForward = false
 moveBackward = false
 moveLeft = false
 moveRight = false
 break
 case 38:
 case 87:
 moveForward = true
 break
 case 37:
 case 65:
 moveLeft = true;break
 case 40:
 case 83:
 moveBackward = true
 break
 case 39:
 case 68:
 moveRight = true;
 }
}
let onKeyUp = function (event) {
 switch (event.keyCode) {
 case 38:
 case 87:
 moveForward = false
 break;
 case 37:
 case 65:
 moveLeft = false
 break;
 case 40:
 case 83:
 moveBackward = false
 break;
 case 39:
 case 68:
 moveRight = false
 break
 }
}
document.addEventListener('keydown', onKeyDown, false)
document.addEventListener('keyup', onKeyUp, false)
let moveForward = false
let moveBackward = false
let moveLeft = false
let moveRight = false
let prevTime = performance.now()
let velocity = new THREE.Vector3()
let direction = new THREE.Vector3()
function animate() {
if(controls.isLocked === true && !cameraAttachment && typeof UYC.controls.speed === 'object') {
var time = performance.now();
// var delta = (time - prevTime) / 1000
var deltaX;
var deltaZ;  
deltaX = (time - prevTime) / UYC.controls.speed.x;
deltaZ = (time - prevTime) / UYC.controls.speed.z;
velocity.x -= velocity.x * 10.0 * deltaX
velocity.z -= velocity.z * 10.0 * deltaZ
direction.z = Number(moveForward) - Number(moveBackward)
direction.x = Number(moveRight) - Number(moveLeft)
if (moveForward || moveBackward) velocity.z -= direction.z * 400.0 * deltaZ
if (moveLeft || moveRight) velocity.x -= direction.x * 400.0 * deltaX
 controls.moveRight(-velocity.x * deltaX)
 controls.moveForward(-velocity.z * deltaZ)
// if (controls.getObject().position.y < 10 && !cameraAttachment) {
//  controls.getObject().position.y = 0
// }
prevTime = time
 }
}
setInterval(animate)
    outputComp.style.zIndex=5;
    outputComp.addEventListener( 'click', function () {
     if(!cameraAttachmentRotation) {
      controls.lock();
     };
    }, false );
   }
  },30)
  themesBtn.style.visibility="hidden";
  optionsBtn.style.visibility="hidden";
  challengesBtn.style.visibility="hidden";
  setTimeout(function() { codeRunning=true; },3); // remove if glitching...
  outputComp.style.left=0;
  outputComp.style.top=0;
  outputComp.style.width="100%"
  outputComp.style.height="100%"
  document.getElementsByClassName("CodeMirror-scroll")[0].style.visibility="hidden"
  document.getElementsByClassName("CodeMirror-vscrollbar")[0].style.visibility="hidden"
  document.getElementsByClassName("CodeMirror-hscrollbar")[0].style.visibility="hidden" 
  document.body.style.cursor="progress"
  setTimeout(function(){loadChallenge(localStorage.getItem("challenge"));document.body.style.cursor="default"},150)
  $random_Color=colors[Math.floor(Math.random()*colors.length)]
  compiler.style.visibility="hidden"
  outputComp.style.zIndex=5
  document.getElementsByTagName("canvas")[0].style.left="0px"
  document.getElementsByTagName("canvas")[0].style.width=window.innerWidth
  document.getElementsByTagName("canvas")[0].style.zIndex=4
  // terminalBox.style.visibility="visible"
  windowSize=window.innerWidth
  if(localStorage.getItem("_autosave")=="yes"&&!editor.getValue()==''&&localStorage.getItem("saveCodeData")=="when running") {
   var savedCode=localStorage.setItem("code",editor.getValue());
  }
      /*
  World.remove(engine.world, Matter.Composite.allBodies(engine.world))
  setTimeout(function(){eval(compilerTextArea.value)},10)
  */
   var r=editor.getValue()
   // [FIX]: Remember the ":play" to ".play()" ? Well yeah, but make it as if it match the EXACT word. OR, you can make it detect whether the word before ":play" is an audio or animation etc... But that's gonna be harder, so try the first one lol.
   // DO THE SAME TO "Game" to "outputComp" pls :|
   fR=/*r.split("if(controller.getBtn=='").join("var UYCGamePadApi=setInterval(function(){if(gK=='")./*r.replace("engine", "document.body")r.split("then").join("{").split("end").join("}").split("or").join("||").split("and").join("&&")*/r/*.split("Game").join("outputComp")*/.split('micLevel').join('"micLevel"').split('window.innerHeight').join('"window.innerHeight"').split('window.innerWidth').join('"window.innerWidth"').split("setText=").join("innerHTML=").split("audio.system.level(").join("setTimeout(function(){audio.system.level("+n_fR2).split("console.log(audioLevel)").join("setInterval(function(){if(audioLevel){console.log(audioLevel)}})").split("conssole.log").join("terminal.log").split("getJointBody").join("bodies").split("getJoint").join("engine.world.composites").split("un'def'ined").join("undefined").split("UYC_render").join("render").split("fn() {").join("function(){").split("fn").join("function").split(":mouseover").join(".onmouseover").split(":mouseout").join(".onmouseout").split(":mousemove").join(".onmousemove").split(":addEvent").join(".addEventListener").split(":click").join(".onclick").split(":changed").join(".onchange").split(":mouseup").join(".onmouseup").split(":rightclick").join(".oncontextmenu")/*.split(".play").join(":play")*/.split(":playing").join(".playing").split(":mousedown").join(".onmousedown").split(":keypress").join(".onkeypress").split(":btnPressed").join(".btnPressed").split("UYC.render.bounds").join("render.options.hasBounds").split(".level(undefined").join(".level(").split(".readAudio()").join("},20)");
   if(fR.includes("UYC.controller") && typeof UYC.controller === 'undefined') {
    terminal.warn('The "UYC.controller" function cannot be triggered due to gamepad inactivity');
   };
   UYC.compiler.code=fR;
   if(editor.getValue().includes("audio.system.level")){
   audioConverter=editor.getValue().split("audio.system.level(");
   audioConverter[1].toString().substring(1,IDL+1);
   n_fR=audioConverter[1].substring(1);
   //setTimeout(function(){alert(fR.split("un'def'ined").join("").split('l("'+audioConverter[1].substring(10,1)+'"').join('l("'+audioConverter[1].substring(1,3)+'")},3)').split("},3))").join("},3)").split('l("'+audioConverter[1].substring(1,3)).join('l("'+audioConverter[1].substring(1,5)+")},3)").split('},3)s")').join("},3)"))},10)
   n_fR2=n_fR.substring(0,2)
   EP=fR.split('window.innerHeight').join('"window.innerHeight"').split('window.innerWidth').join('"window.innerWidth"').split("un'def'ined").join("").split('l("'+audioConverter[1].substring(10,1)+'"').join('l("'+audioConverter[1].substring(1,3)).split("},3))").join("},3)").split('l("'+audioConverter[1].substring(1,3)).join('l("'+audioConverter[1].substring(1,3)).split('},3)s")').join("},13)");
   console.log(EP);
  }
   setTimeout(function(){
   try {
     if(editor.getValue().includes("audio.system.level")){
     window.eval(EP/*fR.split("un'def'ined").join("").split('l("'+audioConverter[1].substring(1,IDL)+'"').join('l("'+audioConverter[1].substring(1,IDL)+'")},3)').split("},3))").join("},3)")*/)
     }
     else {
      window.eval(fR)
      renderView("off");
     }
    }
   catch(err) {
     eval(fR) // for test mode LOL
     terminal.error(err.toString().split("ReferenceError: ").join(""));
     terminalBox.style.color="rgb(255,0,0)";
     if(!err){eval(EP/*fR.split("un'def'ined").join("").split('l("'+audioConverter[1].substring(1,IDL)+'"').join('l("'+audioConverter[1].substring(1,IDL)+'")},3)').split("},3))").join("},3)")*/)/*}//else{window.location.reload()}*/
   }
  }
   setTimeout(function(){
   if(!errorDetected){
   codeStatus.innerHTML="code status: running"
    }
    if(errorDetected){
   codeStatus.innerHTML="code status: error"
      }
   },3)
  
   try {
    editor.getValue()
   }
   catch(err) {
    //alert(err)
    if(err.length==0){/*alert('no errors :D')*/}
    }
   },3)}
  var xVal=100
  var yVal=100
  var followingBody=false
  window.addEventListener("wheel", function(event){
  if(followingBody){
   if (event.deltaY>0) {
       if(xVal<170&&xVal>=80||yVal<170&&yVal>=80){
      xVal+=5
      yVal+=5
     }
    }
  if(event.deltaY<0){
      if(xVal>=100||xVal==95){
      xVal-=5
      yVal-=5
     }
    }
   }
  })
  // window.onkeydown=function(event){
  // if(event.altKey&&event.ctrlKey) {
  //    console.log("lU: updated")
  //    localStorage.setItem("latestUpdate",parseInt(new Date().getMonth()+1)+"/"+new Date().getDate()+"/"+new Date().getFullYear()+", "+new Date().getHours()+":"+new Date().getMinutes()+":"+new Date().getSeconds())
  // //    localStorage.setItem("latestUpdateHMS",n+' '+new Date().getDate()+', '+new Date().getFullYear()+' '+new Date().getHours()+':'+new Date().getMinutes()+':'+new Date().getSeconds())  
  //  }
  // }
  function componentToHex(con) {
  var hex = con.toString(16);
  return hex.length == 1 ? "0" + hex : hex;
}
  function getKeyValue(n,y) {
   return n[Object.keys(n)[y]];
  }
  function getKeyName(n,y) {
   return Object.keys(n)[y];
  }
  var tIL
  var tTm
  var gTV
  var tT;
  var terminal = {
   log: function(txt){
    terminalBox.readOnly=true;
    terminalBox.value=txt;
    terminalSuccess=false;
    terminalDetail=false;
    terminalWarn=false;
    terminalError=false;
    if(txt==micLevel){
      gTV=txt;
    }
  },
  table:function(arr) {
  terminal.clear();
  setTimeout(function(){tableActive=true;},3);
  terminalTable.style.visibility="visible";
  terminalBox.style.visibility="hidden";
  var tr=document.createElement('tr')
  terminalTable.appendChild(tr);
  for(var l=0;l<Object.keys(arr).length;l++) {
   var th=document.createElement('th')
   th.innerHTML=Object.keys(arr)[l];
   th.style.background="#a0a0a0";
   table_tT.appendChild(th);
   var td=document.createElement('td');
   td.id="__tableValue"+l;
   td.innerHTML=getKeyValue(arr, l);
   td.style.background="#dddddd";
   terminalTable.appendChild(td);
  //  console.log(document.getElementById("__tableValue"+l).innerHTML=="true");
  if(document.getElementById("__tableValue"+l).innerHTML=="true"||document.getElementById("__tableValue"+l).innerHTML=="false") {
    document.getElementById("__tableValue"+l).style.background="#1a1a1a";
  }
   if(document.getElementById("__tableValue"+l).innerHTML=="true") {
    document.getElementById("__tableValue"+l).style.color="lime";
   };
   if(document.getElementById("__tableValue"+l).innerHTML=="false") {
    document.getElementById("__tableValue"+l).style.color="red";
   };
  }
 },
  success: function(txt) {
   if(_terminalData.success) {
    terminalBox.readOnly=true;
    terminalSuccess=true;
    terminalDetail=false;
    terminalWarn=false;
    terminalError=false;
    terminalBox.value="\u2714 "+txt;
    terminalBox.style.color="#9BFA9C";
    terminalBox.style.background="#00330A";
   };
  },
  info: function(txt) {
   if(_terminalData.info) {
    terminalBox.readOnly=true;
    terminalSuccess=false;
    terminalWarn=false;
    terminalError=false;
    terminalDetail=true;
    terminalBox.value="\u2139 "+txt;
    terminalBox.style.color="#9BF0FA";
    terminalBox.style.background="#002433";
   };
  },
  clear:function() {
    terminalBox.value="";
    terminalSuccess=false;
    terminalDetail=false;
    terminalWarn=false;
    terminalError=false;
    terminalBox.readOnly = false;
    for(var y = 0; y < 3; y++) {
for(var i = 0; i < terminalTable.childElementCount; i++) {
 if(terminalTable.children[i].tagName=="TD"||terminalTable.children[i].tagName=="TR") {
  terminalTable.children[i].remove();
 };
};
 for(var i = 0; i < table_tT.childElementCount; i++) {
  table_tT.children[i].remove();
 };
};
    tableActive=false;
  },
  warn: function(txt) {
    if(_terminalData.warn) {
    terminalBox.readOnly=true;
    terminalWarn=true;
    terminalSuccess=false;
    terminalDetail=false;
    terminalError=false;
    terminalBox.value="\u26A0 "+txt;
    terminalBox.style.color="#fad99b";
    terminalBox.style.background="#332b00";
   };
  },
  error: function(txt) {
   if(_terminalData.errors) {
    terminalBox.readOnly=true;
    terminalError=true;
    terminalSuccess=false;
    terminalDetail=false;
    terminalWarn=false;
    terminalBox.value="\u274C"+txt;
    terminalBox.style.color="#cf6363";
    terminalBox.style.background="#290000";
   };
  },
//    infinityLog: function(txt){
//     //  tIL=setInterval(function(){
//     //    terminalBox.readOnly=true;
//     //    var theTxt=txt;
//     //    tT=theTxt
//     //    terminalBox.value=tT
//     //   })
//  setInterval(()=>{
//  var theTxt=txt;
//  tT=theTxt;
//  terminal.log(txt);
//  })
  // },
   help: function(){return false}
  }
  function openTerminalContent(event) {
   terminalClearBtn.style.left=event.clientX;
   terminalClearBtn.style.top=event.clientY-60;
   terminalCancelBtn.style.left=event.clientX;
   terminalCancelBtn.style.top=event.clientY-30;
  };
  function infosConfiguration() {
    if(localStorage.getItem("showingInfo")=="Don't show") {
     setTimeout(function(){
    localStorage.setItem("showingInfo", "Only when code is running")
     },3) 
  }
   if(localStorage.getItem("showingInfo")=="Only when code is running") {
    setTimeout(function(){
    localStorage.setItem("showingInfo", "Always show")
  },3) 
   }
   if(localStorage.getItem("showingInfo")=="Always show") {
    setTimeout(function(){
    localStorage.setItem("showingInfo", "Don't show")
  },3) 
   }
  }
  function changeTerminalPos() {
   if(localStorage.getItem("terminalPosition")=="down") {
     setTimeout(function(){
    localStorage.setItem("terminalPosition", "up")
     },3) 
  }
   if(localStorage.getItem("terminalPosition")=="up") {
    setTimeout(function(){
    localStorage.setItem("terminalPosition", "down")
  },3) 
   }
  }
  function autoOpenTerminal() {
   if(localStorage.getItem("terminalAO")=="no") {
     setTimeout(function(){
    localStorage.setItem("terminalAO", "yes")
     },3) 
  }
   if(localStorage.getItem("terminalAO")=="yes") {
    setTimeout(function(){
    localStorage.setItem("terminalAO", "no")
  },3) 
   }
  }
  function changeBackgroundTerminal() {
   localStorage.setItem("terminalBackground", backgroundColorTerminal.value)
  }
  function changeColorTerminal() {
   localStorage.setItem("terminalColor", colorTerminal.value)
  }
  // function cth(){
  //   dCI_on.innerHTML="Concealment controller data"
  //   alwaysDisplayBtn.style.left="11%"
  // }
  // function cts() {
  //   dCI_on.innerHTML="Display controller data"
  //   alwaysDisplayBtn.style.left="9%"
  // }
  function DCDI(){
        if(!infoDisplaying&&alwaysDisplayBtn.style.color!=="rgb(0, 255, 0)"){
          setTimeout(function(){
            // cth()
            // alert(infoDisplaying)
            infoDisplaying=true
          },2)
        }
        if(infoDisplaying&&alwaysDisplayBtn.style.color!=="rgb(0, 255, 0)"){
          setTimeout(function(){
            // cts()
            // alert(infoDisplaying)
            infoDisplaying=false
      },2)
      }
     }
  function showhideLogs() {
   if(localStorage.getItem("terminalLogs") == "Show") {
    setTimeout(() => {
     localStorage.setItem("terminalLogs", "Hide");
    },3);
   };
   if(localStorage.getItem("terminalLogs") == "Hide") {
    setTimeout(() => {
     localStorage.setItem("terminalLogs", "Show");
    },3);
   };
  };
  function cth2(){
    displayFpsBtn.innerHTML="Concealment FPS"
    graphBg.style.visibility="visible"
    setTimeout(function(){fpsDisplaying=true},3)
  }
  function cts2() {
    displayFpsBtn.innerHTML="Display FPS"
    graphBg.style.visibility="hidden"
    setTimeout(function(){fpsDisplaying=false},3)
  }
     function DCDI2(){
        if(!fpsDisplaying&&alwaysDisplayFpsBtn.style.color!=="rgb(0, 255, 0)"){
          setTimeout(function(){
            cth2()
            // alert(fpsDisplaying)
            fpsDisplaying=true
          },2)
        }
        if(fpsDisplaying&&alwaysDisplayFpsBtn.style.color!=="rgb(0, 255, 0)"){
          setTimeout(function(){
            cts2()
            // alert(fpsDisplaying)
            fpsDisplaying=false
      },2)
    }
  }
  var __fpsStats;
  function __initFps() {
    updateFcts=[];
    position={x:window.innerWidth-80,y:window.innerHeight-48};
  __fpsStats	= new Stats();
	__fpsStats.domElement.style.position	= 'absolute'
	__fpsStats.domElement.style.right	= '0px'
	__fpsStats.domElement.style.bottom	= '0px'
  __fpsStats.domElement.style.zIndex=6;
  __fpsStats.domElement.style.visibility="hidden";
  fpsStats.position.x=position.x
  fpsStats.position.y=position.y
	document.body.appendChild( __fpsStats.domElement )
	updateFcts.push(function(delta, now){
		__fpsStats.update()
	})
    var lastTimeMsec= null
	requestAnimationFrame(function animate(nowMsec){
		requestAnimationFrame( animate );
		lastTimeMsec	= lastTimeMsec || nowMsec-1000/60
		var deltaMsec	= Math.min(200, nowMsec - lastTimeMsec)
		lastTimeMsec	= nowMsec
		updateFcts.forEach(function(updateFn){
			updateFn(deltaMsec/1000, nowMsec/1000)
		})
	})
  }
  __initFps();
  function DCDI3() {
   __fpsStats.domElement.style.visibility="visible";
  }
//   function isBetween(val1, val2, val3) {
//  return val1 > val2 && val1 < val3;
// }
// Number prototype
var gui
// function calc(calculation) {
 //calc("x between y and z")
//  bc=eval(calculation.split(" between")[0]) > parseInt(calculation.split("between ")[1].split("and")[0].split(" ").join("")) && eval(calculation.split(" between")[0]) < parseInt(calculation.split("and ")[1])
//  console.log(eval(calculation.split(" between")[0]) +' > '+ calculation.split("between ")[1].split("and")[0].split(" ").join("") +' && '+ calculation.split(" between")[0] +' < '+ calculation.split("and ")[1]);
//  console.log(eval(bc))
//  console.log(
//    typeof eval(calculation.split(" between")[0]),
//    typeof parseInt(calculation.split("between ")[1].split("and")[0].split(" ").join("")) && eval(calculation.split(" between")[0]),
//    typeof parseInt(calculation.split("and ")[1]));
//  setTimeout(function(){console.log("bc => "+eval(bc))},1000)
//  if(calculation.includes("between")) {
//   return bc
//  }
// }

  window.onkeyup=function(event) {
    if(assetsBg.style.visibility=="visible"&&event.key=="a"&&event.ctrlKey){
     for(var noa=0;noa<document.getElementsByClassName("AFS").length;noa++){
      document.getElementsByClassName("AFS")[noa].style.opacity=1
     }
    }
    if(event.ctrlKey&&event.key=="/"/*&&editor.somethingSelected()*/) {
      editor.toggleComment();
    };
    if(event.key=="\\"&&canGoBack8) {
        CI_Tab.style.visibility="hidden"
        optionsTab.style.visibility="visible"
    }
    if(event.key=="\\"&&canGoBack9) {
        vScr.style.visibility="hidden"
        vScr.value = "";
        assetsTabTitle.innerHTML = "Creating plugin"
        setTimeout(() => {
         createAssetBg.style.overflow="auto";
         optionsBtn.style.visibility = "hidden";
         challengesBtn.style.visibility = "hidden";
        },3);
        setTimeout(function() {canGoBack9=false;},6)
    }
    if(event.key=="\\"&&canGoBack7) {
      // setTimeout(function(){
      optionsTab.style.visibility="visible"
      optionsBtn.style.visibility="visible"
      challengesBtn.style.visibility="visible"
      // },3000)
    }
    if(event.key=="\\"&&canGoBack6) {
        document.getElementsByTagName("canvas")[0].style.visibility="visible";
      optionsTab.style.visibility="hidden"
      allCompilerArea.style.visibility="visible"
      document.getElementsByTagName("canvas")[0].style.right=0
      document.getElementsByTagName("canvas")[0].style.left=null
      optionsBtn.style.visibility="visible"
      challengesBtn.style.visibility="visible"
      themesBtn.style.visibility="visible"
    }
    if(event.key=="F9") {
     DCDI()
    }

    if(event.ctrlKey&&event.shiftKey&&event.key=="F") {
       displayFps_onscreen()
      }

    if(event.shiftKey&&event.key=="P") {
      if(event.ctrlKey) {
        if(_terminal.style.visibility=="hidden"){
          setTimeout(function(){
         _terminal.style.visibility="visible"
          },2)
        }
        if(_terminal.style.visibility=="visible"){
          setTimeout(function(){
         _terminal.style.visibility="hidden"
        },2)
        }
      }
    }
    if(event.key=="Enter"&&document.activeElement.id=="terminalBox"&&!terminalBox.readOnly) {
      terminalInfo.style.visibility="visible"
      terminalInfo.style.color="#ffffff"
      var terminalVal=terminalBox.value
      localStorage.setItem("_prevTermCode",terminalBox.value)
      setTimeout(function(){
        var tV=terminalVal.split("def").join("'def'").split("UYC_render").join("render")
        eval(tV)
        terminalBox.readOnly=true
      },3)
    }
    if(event.key=="F2"&&document.activeElement.id=="terminalBox"&&!terminalBox.readOnly) {
     if(localStorage.getItem("_prevTermCode")){
      terminalBox.value=localStorage.getItem("_prevTermCode")
     }
     else {
       terminalInfo.style.visibility="visible"
       terminalInfo.style.color="#ff0000"
       terminalInfo.innerHTML="You don't have any previous code saved."
       setTimeout(function(){terminalInfo.innerHTML="";terminalInfo.style.visibility="hidden"},5000)
     }
    }
    if(event.keyCode==27&&!terminalBox.readOnly) {
      if(tableActive) {
      setTimeout(function(){tableActive=false;},3);
      var lengthDetector=setInterval(function() {

      if(terminalTable.children.length!==1) {
      for(var c=0;c<terminalTable.children.length;c++) {
        if(terminalTable.children[c].tagName!=="TBODY") {
         terminalTable.children[c].remove();
         }
        }
       }
      if(terminalTable.children.length!==1) {
        clearInterval(lengthDetector);
       }
      },0.00001);

      var lD=setInterval(function() {
       if(table_tT.children.length!==0) {
       for(var c=0;c<table_tT.children.length;c++) {
        table_tT.children[c].remove();
        }
       }
       if(table_tT.children.length==0) {
        clearInterval(lD);
       }
      },0.00001);
      //  terminalTable.style.visibility="hidden";
       terminalBox.style.visibility="visible";
       terminalBox.readOnly=false;
       terminalInfo.style.visibility="hidden";
      }
     else {
     terminalInfo.style.visibility="hidden"
     clearInterval(tIL)
     terminalBox.value=localStorage.getItem("_prevTermCode")
     terminalBox.readOnly=false
     }
    }
    if(event.keyCode==27&&terminalBox.readOnly) {
      if(tableActive) {
      setTimeout(function(){tableActive=false;},3);
      var lengthDetector=setInterval(function() {

      if(terminalTable.children.length!==1) {
      for(var c=0;c<terminalTable.children.length;c++) {
        if(terminalTable.children[c].tagName!=="TBODY") {
         terminalTable.children[c].remove();
         }
        }
       }
      if(terminalTable.children.length==1) {
        clearInterval(lengthDetector);
       }
      },0.00001);

      var lD=setInterval(function() {
       if(table_tT.children.length!==0) {
       for(var c=0;c<table_tT.children.length;c++) {
        table_tT.children[c].remove();
        }
       }
       if(table_tT.children.length==0) {
        clearInterval(lD);
       }
      },0.00001);
       terminalTable.style.visibility="hidden";
       terminalBox.style.visibility="visible";
       terminalBox.readOnly=false; 
       terminalInfo.style.visibility="hidden";
       terminalBox.focus();
      }
     else {
     terminalInfo.style.visibility="hidden"
     clearInterval(tIL)

     var interval_id = window.setInterval(()=>{}, 99999);
     for (var i=0;i<interval_id;i++){window.clearInterval(i)}
     //for(var a=0;a<document.getElementsByTagName("audio").length;a++){document.getElementsByTagName("audio")[a].pause()}
     terminalBox.value=''
     terminalBox.readOnly=false
     }
    }
    if(event.key=="\\"&&canGoBack5&&!canGoBack4&&!canGoBack3&&!canGoBack2&&!canGoBack) {
      allCompilerArea.style.visibility="visible"
      myAssetsTab.style.visibility="hidden"
      themesBtn.style.visibility="visible"
      document.getElementsByTagName("canvas")[0].style.left=960
      optionsBtn.style.visibility="visible"
      challengesBtn.style.visibility="visible"
    }
      if(event.key=="Enter"&&presstxt.innerHTML=='Press "ENTER" to confirm or "backslash (\\)" to go back') {
    setTimeout(() => {
      for(var l=0;l<localStorage.getItem("ID");l++){loaa=l*7;localStorage.setItem('alp', loaa)}
      localStorage.setItem('alp', parseInt(loaa))
      // createSpriteAS()
      localStorage.setItem('lastImg', document.getElementsByClassName("image-url")[0].value)
      localStorage.setItem('lastTitle', titleVal.value)
      localStorage.setItem('lastDesc', descVal.value)
      localStorage.setItem('lastPrice', priceVal.value)
    }, 3);
      }
      if(event.key=="Enter"&&presstxt2.innerHTML=='Press "ENTER" to confirm or "backslash (\\)" to go back') {
    setTimeout(() => {
      loaa=14
      localStorage.setItem('alp2', parseInt(loaa))
      setTimeout(function() {
      _nA({
        type: 'script',
        title: localStorage.getItem("lastTitle2"),
        desc: localStorage.getItem("lastDesc2"),
        author: localStorage.getItem("u_s"),
        price: localStorage.getItem("lastPrice2")
      });
    },6);
      localStorage.setItem('lastScriptPath', scriptVal.value)
      // localStorage.setItem('lastScript', localStorage.getItem('lastTitle2') + " = `"+scriptText+"`")
      setTimeout(function() {
      if(!localStorage.getItem("lastScript")) {
        localStorage.setItem('lastScript', "qrnIWFhCOT['"+localStorage.getItem('lastTitle2')+"']=`"+scriptText+"`;__DISPLAYASSET"+`_nA({price:'`+localStorage.getItem("lastPrice2")+`',desc:'`+localStorage.getItem("lastDesc2")+`',title:'`+localStorage.getItem("lastTitle2").split(',')[count(", in localStorage.getItem('lastTitle2')")]+`',author:'`+localStorage.getItem("u_s")+`',name:'`+localStorage.getItem("lastTitle2").split(',')[count(", in localStorage.getItem('lastTitle2')")]+`',type:'script'});`);
       }
       else {
        localStorage.setItem('lastScript', localStorage.getItem("lastScript").$_iB("__DISPLAYASSET", "qrnIWFhCOT['"+localStorage.getItem("lastTitle2").split(',')[count(", in localStorage.getItem('lastTitle2')")]+"']=`"+scriptText+"`;__DISPLAYASSET"+`_nA({price:'`+localStorage.getItem("lastPrice2")+`',desc:'`+localStorage.getItem("lastDesc2")+`',title:'`+localStorage.getItem("lastTitle2").split(',')[count(", in localStorage.getItem('lastTitle2')")]+`',author:'`+localStorage.getItem("u_s")+`',name:'`+localStorage.getItem("lastTitle2").split(',')[count(", in localStorage.getItem('lastTitle2')")]+`',type:'script'});`));
       }
      },3);
      if(localStorage.getItem('lastTitle2') == null) {
       localStorage.setItem('lastTitle2', titleVal2.value)
      }
      else {
       localStorage.setItem('lastTitle2', localStorage.getItem('lastTitle2') + "," + titleVal2.value);
      };
      if(descVal2.value==""||!descVal2.value.length>0) {
       localStorage.setItem('lastDesc2', 'No description.')
      }
      else {
       localStorage.setItem('lastDesc2', descVal2.value)
      };
      if(priceVal2.value.length>0) {
       localStorage.setItem('lastPrice2', priceVal2.value)
      };
      if(freeCB2.checked) {
       localStorage.setItem('lastPrice2', 'FREE')
      };
    }, 3);
      }
      if(event.key=="\\"&&presstxt.innerHTML=='Press "ENTER" to confirm or "backslash (\\)" to go back') {
       cao.style.visibility="hidden"
       caBg.style.visibility="visible"
       //createSpriteTab.style.visibility="hidden"
       creatingOptions.style.visibility="visible"
       optionsBtn.style.visibility="visible"
       challengesBtn.style.visibility="visible"
       unselSprite()
      }
      if(event.key=="\\"&&presstxt2.innerHTML=='Press "ENTER" to confirm or "backslash (\\)" to go back'&&!canGoBack9) {
       cao2.style.visibility="hidden"
       alert(":O")
       setTimeout(function(){presstxt2.innerHTML=''},3)
       caBg.style.visibility="visible"
       //createSpriteTab.style.visibility="hidden"
       creatingOptions.style.visibility="visible"
       unselPlugin()
       challengesBtn.style.visibility="visible"
       optionsBtn.style.visibility="visible"
      }
      if(event.key=="\\"&&document.getElementsByTagName("canvas")[0].width==1920&&codeRunning){

      window.location.reload();


//         if(UYC.controls && UYC.controls.type && UYC.controls.type == "PointerLock") {
//          controls.unlock();
//         };
//         outputComp.style.visibility="hidden"
// document.getElementsByClassName("CodeMirror-scroll")[0].style.visibility="visible";
// document.getElementsByClassName("CodeMirror-vscrollbar")[0].style.visibility="visible";
// document.getElementsByClassName("CodeMirror-hscrollbar")[0].style.visibility="visible";
// document.getElementsByTagName("canvas")[0].style.visibility="hidden";
// engine.style.visibility="hidden";
// codeRunning=false;
// document.body.style.background="#808080";
// document.getElementsByClassName("CodeMirror-scroll")[0].style.background="#000";
// itemsTab.style.visibility="visible";
// themesBtn.style.visibility="visible";
// optionsBtn.style.visibility="visible";
// challengesBtn.style.visibility="visible";
//    setTimeout(() => {
//     codeRunning = false;
//    },3);



          // outputComp.style.zIndex=0
          // windowSize=window.innerWidth/2
          // document.getElementsByTagName("canvas")[0].width=windowSize
          // document.getElementsByTagName("canvas")[0].style.zIndex=1
          // document.getElementsByTagName("canvas")[0].style.right="0px"
          // document.getElementsByTagName("canvas")[0].style.left=null
          // optionsBtn.style.visibility="visible"
          // challengesBtn.style.visibility="visible"
      }
    if(event.key=="\\"&&/*event.ctrlKey&&*/canGoBack&&!canGoBack2&&!canGoBack3) {
      document.body.style.height = document.getElementById("tutorialBg").clientHeight + 400 + 'px'
      tutorialTab.style.visibility="hidden"
      document.getElementsByClassName("CodeMirror-scroll")[0].style.visibility="visible"
      document.getElementsByClassName("CodeMirror-vscrollbar")[0].style.visibility="visible"
      document.getElementsByClassName("CodeMirror-hscrollbar")[0].style.visibility="visible"
      compiler.style.visibility="visible"
      document.body.style.overflowY='hidden'
      document.getElementsByTagName("canvas")[0].style.right="0px"
      document.getElementsByTagName("canvas")[0].style.top="0px"
      document.getElementsByTagName("canvas")[0].style.width="960px"
      //compiler.style.visibility="visible"
      terminalInfo.style.visibility="hidden"
      optionsBtn.style.visibility="visible"
      challengesBtn.style.visibility="visible"
      // var x=document.createElement("a")
      // x.href=""
      // x.click()
      // x.style.visibility="hidden"
      // document.body.appendChild(x)
      document.getElementsByTagName("canvas")[0].style.visibility="visible"
     allCompilerArea.style.visibility="visible"
     setTimeout(() => {
        canGoBack=false 
     },1);
    }
    if(!canGoBack2&&event.key=="\\"/*&&event.ctrlKey*/&&!canGoBack3&&!canGoBack) {
      return false
    }
    if(event.key=="\\"&&/*event.ctrlKey&&*/canGoBack2&&!canGoBack3&&!canGoBack) {
      // var x=document.createElement("a")
      // x.href=""
      // x.click()
      // x.style.visibility="hidden"
      // document.body.appendChild(x)
      document.body.style.background="#ffffff"
      optionsBtn.style.visibility="visible"
      challengesBtn.style.visibility="visible"
      themesBtn.style.visibility="visible"
      document.body.style.overflow="hidden"
      themesTab.style.visibility="hidden"
      useScript=true
      document.getElementsByTagName("canvas")[0].style.visibility="visible"
     allCompilerArea.style.visibility="visible"
    }
     setTimeout(() => {
        canGoBack2=false 
     },1);
  if(event.key=="\\"&&pluginBtn.style.background=="rgb(200, 200, 200)") {
   unselPlugin()
  }
  if(event.key=="\\"&&spriteBtn.style.background=="rgb(200, 200, 200)") {
   unselSprite()
  }
  if(event.key=="\\"&&canGoBack3&&!canGoBack9&&!canGoBack2&&!canGoBack) {
    if(canGoBack4) {
          optionsBtn.style.visibility="visible"
          challengesBtn.style.visibility="visible"
          createAssetBg.style.visibility="hidden"
          setTimeout(function(){
          caBg.style.visibility="hidden"
          },3)
          assetsBg.style.visibility="visible"
          createAssetBtn.style.visibility="visible"
          unselSprite()
      }
      if(backToAsset) {
       cao.style.visibility="hidden"
       creatingOptions.style.visibility="hidden"
       createSpriteTab.style.visibility="hidden"
       caBg.style.visibility="hidden"
       assetsBg.style.visibility="visible"
       createAssetBg.style.visibility="hidden"
       createAssetBtn.style.visibility="visible"
      }
      if(!backToAsset&&caBg.style.visibility=="hidden") {
      optionsBtn.style.visibility="visible"
      challengesBtn.style.visibility="visible"
      themesBtn.style.visibility="visible"
      document.body.style.overflow="hidden"
      assetsTab.style.visibility="hidden"
      assetsBg.style.visibility="hidden"
      createAssetBtn.style.visibility="hidden"
      useScript=true
      document.getElementsByTagName("canvas")[0].style.visibility="visible"
     allCompilerArea.style.visibility="visible"
     setTimeout(() => {
        canGoBack3=false 
      },3);
    }
  }
    if(!canGoBack3&&event.key=="\\"&&!canGoBack2&&!canGoBack/*&&event.ctrlKey*/) {
      return false
    }
  }
  caBg.style.visibility="hidden"
  // [FIX]: how about fixing the assets ? >:\
  function loadScript(_asset) {
    if(UYC["assets"].includes(_asset))
     var nS=document.createElement("script")
     var convertedScript=localStorage.getItem("lastScript").split("__DISPLAYASSET")[0]
     var cS=convertedScript.split("def").join("'def'").split("UYC_render").join("render")
     nS.innerHTML=cS
     document.body.appendChild(nS)
  //   xhr=new XMLHttpRequest()
  // xhr.onreadystatechange=function(){
  //  if(xhr.readyState==xhr.DONE&&xhr.status==200) {
  //   var nS=document.createElement("script")
  //   nS.innerHTML=xhr.response
  //   document.body.appendChild(nS)
  //  }
  // }
  // xhr.open("GET", "Assets/"+_asset+".txt")
  // xhr.send()
  }
  if(localStorage.getItem("lastScript")!==null&&localStorage.getItem("lastScript").includes("__DISPLAYASSET")) {
   eval(localStorage.getItem("lastScript").split("__DISPLAYASSET")[1]);
  };
  function randomColor(pref, size) {
   if(pref == 'color') {
    // return colors[Math.floor(Math.random() * colors.length)];
    return ntc_colors[Math.floor(Math.random() * ntc_colors.length)];
   };
   if(pref == 'rgb'|| pref == "RGB") {
    if(!size) {
     return Math.floor(Math.random() * (255 - 0 + 1) + 0) + ',' + Math.floor(Math.random() * (255 - 0 + 1) + 0) + ',' + Math.floor(Math.random() * (255 - 0 + 1) + 0);
    }
    else {
     return Number(Math.random().toString().split(".0").join(".").slice(0, 3),Math.random().toString().split(".0").join(".").slice(0, 3),Math.random().toString().split(".0").join(".").slice(0, 3));
    }
   };
   if(pref == 'hex') {
    let result = [];
    let hexRef = ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9', 'a', 'b', 'c', 'd', 'e', 'f'];
    if(size) {
     for (let n = 0; n < size; n++) {
      result.push(hexRef[Math.floor(Math.random() * 16)]);
     }
     return '#' + result.join('');
    };
   if(!size) {
    for (let n = 0; n < 6; n++) {
      result.push(hexRef[Math.floor(Math.random() * 16)]);
     }
     return '#' + result.join('');
    };
   };
  };
  function getBodyByIndex(index) {
   return eval("scene.children["+index+"]");
  }
  function getCameraByIndex(index) {
   return eval("camera.children["+index+"]");
  }
  function getBodyByName(name) {
    return eval("scene.getObjectByName('"+name+"')");
  }
  function loadFavicon(){
  var link = document.querySelector("link[rel~='icon']");
  if (!link) {
  link = document.createElement('link');
  link.rel = 'icon';
  document.getElementsByTagName('head')[0].appendChild(link);
  }
  link.href = 'Images/my-Icon-VERYSMALL.png';
  }
  loadFavicon()
  if(localStorage.getItem("terminalPosition")) {
      _terminal.setAttribute("pos",localStorage.getItem("terminalPosition"))
    }
    function alwaysDisplayFPS() {
      if(localStorage.getItem("alwaysDisplay_FPS")=="no") {
       setTimeout(function(){localStorage.setItem("alwaysDisplay_FPS","yes")},3)
     }
     if(localStorage.getItem("alwaysDisplay_FPS")=="yes") {
        optionsTab.style.top="0%";
       setTimeout(function(){__fpsStats.domElement.style.visibility="hidden";graphBg.style.visibility="hidden";localStorage.setItem("alwaysDisplay_FPS","no")},3)
     }
    }
    function setFPSStyle() {
      if(localStorage.getItem("oldFPSStyle")=="no") {
       setTimeout(function(){localStorage.setItem("oldFPSStyle","yes")},3)
     }
     if(localStorage.getItem("oldFPSStyle")=="yes") {
      setTimeout(function(){localStorage.setItem("oldFPSStyle","no")},3)
     }
    }
    function alwaysDisplayData() {
     if(localStorage.getItem("alwaysDisplay")=="no") {
       setTimeout(function(){/*cth();*/if(alwaysDisplayBtn.style.color=="#0f0"){gdiTab.style.visibility="hidden"};localStorage.setItem("alwaysDisplay","yes")},3)
     }
     if(localStorage.getItem("alwaysDisplay")=="yes") {
       setTimeout(function(){localStorage.setItem("alwaysDisplay","no")},3)
     }
    }
  function checkStorage(){
    if(!localStorage.getItem("assets")) {
     localStorage.setItem("assets","")
    }
    if(!localStorage.getItem("gamepad_keys")) {
     localStorage.setItem("gamepad_keys","")
    }
    if(!localStorage.getItem("cd_speed")) {
     localStorage.setItem("cd_speed",CD_fps.value)
    }
    if(!localStorage.getItem("DCOOS")) {
     localStorage.setItem("DCOOS",gdiTab.style.visibility)
    }
    if(!localStorage.getItem("DFOOS")) {
     localStorage.setItem("DFOOS",alwaysDisplayFpsBtn.style.color)
    }
    if(!localStorage.getItem("terminalBackground")) {
     localStorage.setItem("terminalBackground",backgroundColorTerminal.value)
    }
    if(!localStorage.getItem("terminalColor")) {
     localStorage.setItem("terminalColor",colorTerminal.value)
    }
  
    if(localStorage.getItem("terminalBackground")) {
     backgroundColorTerminal.value=localStorage.getItem("terminalBackground")
    }
    if(localStorage.getItem("terminalColor")) {
     colorTerminal.value=localStorage.getItem("terminalColor")
    }
    // if(localStorage.getItem("stringColor")) {
    //  colorString.value=localStorage.getItem("stringColor")
    // }
    // if(localStorage.getItem("numberColor")) {
    //  colorNumber.value=localStorage.getItem("numberColor")
    // }
    // if(localStorage.getItem("keywordColor")) {
    //  colorKeyword.value=localStorage.getItem("keywordColor")
    // }
    // if(localStorage.getItem("propertyColor")) {
    //  colorProperty.value=localStorage.getItem("propertyColor")
    // }
    // if(localStorage.getItem("commentColor")) {
    //  colorComment.value=localStorage.getItem("commentColor")
    // }
  
    if(!localStorage.getItem("terminalPosition")) {
     localStorage.setItem("terminalPosition","down")
    }
    if(!localStorage.getItem("showingInfo")) {
     localStorage.setItem("showingInfo","Don't show")
    }
    if(!localStorage.getItem("terminalAO")) {
     localStorage.setItem("terminalAO","no")
    }
    if(!localStorage.getItem("alwaysDisplay")) {
     localStorage.setItem("alwaysDisplay","no")
    }
    if(!localStorage.getItem("alwaysDisplay_FPS")) {
     localStorage.setItem("alwaysDisplay_FPS","no")
    }
    if(!localStorage.getItem("oldFPSStyle")) {
     localStorage.setItem("oldFPSStyle","no")
    }
      if(!localStorage.getItem("assets"))
      var uyc_cursor;
      var uyc_cursor_color="blue";
      var uyc_cursor_theme="black";
      document.body.style.cursor='url("Cursors/'+uyc_cursor_theme+'_'+uyc_cursor_color+'.png"), auto';
    //   output.style.cursor='url("Cursors/'+uyc_cursor_theme+'_'+uyc_cursor_color+'.png"), auto';
      outputComp.style.cursor='url("Cursors/'+uyc_cursor_theme+'_'+uyc_cursor_color+'.png"), auto';
      // DOT_CURSOR_BLACK: https://i.ibb.co/rmQxXp3/dot.png
      // DOT_CURSOR_WHITE: https://i.ibb.co/5Lvy5sv/dot.png
//       setInterval(function() {
//       UYC = {
//       assets: [],
//       fullscreen:function() {
//         document.body.requestFullscreen();
//         document.getElementsByTagName("canvas")[0].width=1667;
//        },
//       cursor: {
//        change: function(c) {
//         uyc_cursor=c
//         this.info.cursor=uyc_cursor
//         document.body.style.cursor=c
//         output.style.cursor='url("Cursors/'+uyc_cursor_theme+'_'+uyc_cursor_color+'.png"), auto';
//         outputComp.style.cursor='url("Cursors/'+uyc_cursor_theme+'_'+uyc_cursor_color+'.png"), auto';
//        },
//        color: function(c) {
//         uyc_cursor_color=c
//         document.body.style.cursor='url("Cursors/'+uyc_cursor_theme+'_'+c+'.png"), auto';
//         output.style.cursor='url("Cursors/'+uyc_cursor_theme+'_'+uyc_cursor_color+'.png"), auto';
//         outputComp.style.cursor='url("Cursors/'+uyc_cursor_theme+'_'+uyc_cursor_color+'.png"), auto'; 
//       },
//        theme: function(t) {
//         uyc_cursor_theme=t
//         document.body.style.cursor='url("Cursors/'+t+'_'+this.info.color+'.png"), auto';
//         output.style.cursor='url("Cursors/'+uyc_cursor_theme+'_'+uyc_cursor_color+'.png"), auto';
//         outputComp.style.cursor='url("Cursors/'+uyc_cursor_theme+'_'+uyc_cursor_color+'.png"), auto';
//       },
//        info: {
//         cursor:"color: "+uyc_cursor_color+', theme: '+uyc_cursor_theme,//uyc_cursor,
//         color: uyc_cursor_color,
//         theme: uyc_cursor_theme,
//        }
//       },
//       camera: {
//         translate: function(x, y) {
//           output.style.transform+="translateX("+x+"px) translateY("+y+"px)";
//         },
//         zoom: function(amount){output.style.transform="scale("+amount+")";},
//     followBody:function(body,xV,yV) {
//   setInterval(function(){
//   // var xVal=engine.world.bodies[1].bounds.max.x-engine.world.bodies[1].bounds.max.x
//   // var yVal=engine.world.bodies[1].bounds.max.y-engine.world.bodies[1].bounds.max.y
//   followingBody=true
//   if(xV!=='def'&&yV!=='def'){
//   Render.lookAt(render, body, {
//   x: xV,
//   y: yV
//   })
//   }
  
//   if(xV=='def'&&yV=='def'){
//   Render.lookAt(render, body, {
//   x: xVal,
//   y: yVal
//   })
//   }
  
//   })
//   }
// },
//       convert: function (c) {
//  if(c.split(" ")[0]=="rgb_to_hex") {
//   return "#"+componentToHex(parseInt(c.split(",")[0].split("rgb_to_hex").join("").split("=>").join("").split(" ").join(""))) + componentToHex(parseInt(c.split(",")[1].split("rgb_to_hex").join("").split("=>").join("").split(" ").join(""))) + componentToHex(parseInt(c.split(",")[2].split("rgb_to_hex").join("").split("=>").join("").split(" ").join("")));
//  }
//  if(c.split(" ")[0]=="hex_to_rgb") {
//   let r=0,g=0,b=0;
//   if (c.split("hex_to_rgb").join("").split("=>").join("").split(" ").join("").length == 4) {
//     r = "0x" + c.split("hex_to_rgb").join("").split("=>").join("").split(" ").join("")[1] + c.split("hex_to_rgb").join("").split("=>").join("").split(" ").join("")[1];
//     g = "0x" + c.split("hex_to_rgb").join("").split("=>").join("").split(" ").join("")[2] + c.split("hex_to_rgb").join("").split("=>").join("").split(" ").join("")[2];
//     b = "0x" + c.split("hex_to_rgb").join("").split("=>").join("").split(" ").join("")[3] + c.split("hex_to_rgb").join("").split("=>").join("").split(" ").join("")[3];
//   } else if (c.split("hex_to_rgb").join("").split("=>").join("").split(" ").join("").length == 7) {
//     r = "0x" + c.split("hex_to_rgb").join("").split("=>").join("").split(" ").join("")[1] + c.split("hex_to_rgb").join("").split("=>").join("").split(" ").join("")[2];
//     g = "0x" + c.split("hex_to_rgb").join("").split("=>").join("").split(" ").join("")[3] + c.split("hex_to_rgb").join("").split("=>").join("").split(" ").join("")[4];
//     b = "0x" + c.split("hex_to_rgb").join("").split("=>").join("").split(" ").join("")[5] + c.split("hex_to_rgb").join("").split("=>").join("").split(" ").join("")[6];
//   }
//   return +r + "," + +g + "," + +b;
//  }
// },
//       transform: {
//   Int: function(t) {
//    return Math.trunc(t)
//   },
//   Float: function(t) {
//     // return Number(t.toString()[0]+"."+t.toString().slice(1))
//     return parseInt(t).toLocaleString().split(",").join(".")
//   },
//   Format: function(t) {
//    f=t.toString()[0]+"."+t.toString().slice(1);
//    return f;
//   }
//  },
//  generatedNumbers:"",
//  random: {
//   number: function(v1,v2) {
//    return Math.floor(Math.random()*v1)+v2
//   },
//   array: function(o) {
//   allowedRandomizations=["object"];
//   if(getDataType(o)==allowedRandomizations) {
//    return o[Math.floor(Math.random()*o.length)];
//   }
//   else {
//    return "You can't random a "+getDataType(o)+". Please try randomizing an "+allowedRandomizations+" instead";
//     }
//    }
//  },
//  generate: {
//  numbers: function(prop) {
//    if(this.num!=="") {
//    UYC.generatedNumbers="";
//    }
//    len=prop.split("length=").toString().split(", max=").toString().split(", min=").toString().split(",")[1]
//    max=prop.split("length=").toString().split(", max=").toString().split(", min=").toString().split(",")[2]
//    min=prop.split("length=").toString().split(", max=").toString().split(", min=").toString().split(",")[3].split("integer").join("").split("float").join("").split(" ").join("")
//    type=prop.split("min=")[1].split(" ")[1]
//    ff=""
//    if(type=="integer") {
//  for(var nums=0;nums<len;nums++) {
//      UYC.generatedNumbers+=Math.floor(Math.random()*max+min)
//     //  console.log("length="+len+"\nmax="+max+"\nmin="+min);
//     }
//    }
//    if(type=="float"&&len>1) {
//  for(var nums=0;nums<len;nums++) {
//      ff+=Math.floor((Math.random() * max) + min);
//      UYC.generatedNumbers=Number(ff[0][0]+"."+ff.slice(1));
//     }
//    }
//    if(type=="float"&&len==1) {
//     terminal.warn("You can't float a "+len+" length number.")
//    }
//    return Number(UYC.generatedNumbers);
//     }
//    }
//   }
// })}
//    if(localStorage.getItem('assets')){
   //UYC.assets.push(localStorage.getItem('assets'))
  //  function callChangeFn() {
  //   UYC.GUI.onchange("entity", function() { DoThis(); });
  //  }
   UYC = {
       controller: {
        status: cS
       },
       color: function(col) {
        return new THREE.Color(col);
       },
       getAttributes: function(obj, attr) {
        var attrs = "";
        for(var i = 0; i < obj.length; i++) {
         attrs += eval('obj[i]'+'.'+attr) + ",";
        };
        array('erpoatkp3oa4k5gjkljs65lk45j6lk', attrs.slice(0,-1));
        return eval('erpoatkp3oa4k5gjkljs65lk45j6lk');
       },
       add:function(props){
        if(getPropertiesType(props) == "progress_bar") {
         const progressBar=document.createElement("canvas");
        //  props['element']=progressBar;
        props['getValue']=function(v) {
          return progressBar.style.height.split("%").join("");
         };
         // x.setValue("from currentValue to currentValue + 10", 0.1, 0);
         props['setValue']=function(value,steps,speed) {
          if(!props.smooth) {
           progressBar.style.height=value+"%"
          };
          if(props.smooth) {
             // console.log(value.getCharBetween("from & t").split(" ").join("")+","+value.split("to ")[1].split(" ").join(""));
             var barPercentage;
             var targetPercentage;
             if(value.includes("currentValue")) {
              barPercentage = parseInt(value.getCharBetween("from & to").split(" ").join("").split("currentValue").join(props.getValue()));
              targetPercentage = value.split("to ")[1].split(" ").join("").split("currentValue").join(props.getValue());
             }
             else {
              barPercentage = value.getCharBetween("from & to").split(" ").join("");
              targetPercentage = value.split("to ")[1].split(" ").join("");
             };
             var _speed;
             if(speed&&speed!=="") {
              _speed=speed;
             };
             if(!speed) {
              _speed=0;
             };
             if(parseInt(barPercentage) > eval(targetPercentage)) {
              const decrement = setInterval(() => {
              barPercentage -= steps;
              progressBar.style.height=barPercentage+"%";
              // console.log(Math.trunc(props.getValue())+","+parseInt(value.split("to ")[1].split(" ").join("")));
             if(props.getValue()==eval(targetPercentage)) {
              clearInterval(decrement);
             };
            },_speed)};
             if(parseInt(barPercentage) < eval(targetPercentage)) {
              const increment = setInterval(() => {
              barPercentage += steps;
              progressBar.style.height=barPercentage+"%";
             if(props.getValue()==eval(targetPercentage)) {
              clearInterval(increment);
             };
            },_speed)};
          };
         };
         setInterval(() => {
          progressBar.style.background=props.color;
          progressBar.style.position="absolute";
          progressBar.style.zIndex=5;
          progressBar.style.left=props.position.x;
          progressBar.style.top=props.position.y;
          progressBar.id=props.id;
         });
         progressBar.style.width=props.scale.x+"%";
         progressBar.style.height=props.scale.y+"%";
         document.body.appendChild(progressBar);
        };
       },
       generate: {
        number: function(range) {
         if(range) {
          // f = range.substring(range.indexOf("range("), range.indexOf("-")).split("range(").join("").split(" ").join("");
          // s = range.substring(range.indexOf("-"), range.indexOf(")")).split("- ").join("").split("-").join("");
          f = range[0];
          s = range[1];
          // alert(f + " / " + s);
          return Math.floor(Math.random() * (s - f + 1) + f);
          // return Math.floor(Math.random() * (Number(s) - parseInt(f) + 1) + parseInt(f));
         }
         else {
          return Math.random();
         }
        }
       },
       assets: [],
       compiler: {
        code: fR
       },
       convert: {
         color: function (c, t) {
 if(c.split(" ")[0]=="hex_to_color") {
  return ntc.name(c.split("=> ")[1])[1];
//   if(c.split("=> ")[1].startsWith("#")) {
//   for(var h = 0; h < ntc.names.length; h++) {
//    if(c.split("=> ")[1].toUpperCase() == "#" + ntc.names[h][0].toUpperCase()) {
//     return ntc.names[h][1];
//    };
//   };
//  }
//  else {
//  for(var h = 0; h < ntc.names.length; h++) {
//   if(c.split("=> ")[1].toUpperCase() == ntc.names[h][0].toUpperCase()) {
//    return ntc.names[h][1];
//    };
//   };
//  };
 };
 if(c.split(" ")[0]=="rgb_to_color") {
  return UYC.convert.color("hex_to_color => " + UYC.convert.color('rgb_to_hex => ' + c.split(",")[0].split("rgb_to_color").join("").split("=>").join("").split(" ").join("") + "," + c.split(",")[1].split("rgb_to_color").join("").split("=>").join("").split(" ").join("") + "," + c.split(",")[2].split("rgb_to_color").join("").split("=>").join("").split(" ").join("")));
 };
 if(c.split(" ")[0]=="color_to_rgb") {
  // console.log(c.split("=>")[1].split(" ").join(""));
  return ntc.rgb(UYC.convert.color("color_to_hex => " + c.split("=>")[1].split(" ").join(""), true));
 };
 if(c.split(" ")[0]=="color_to_hex") {
  for(var i = 0; i < ntc.names.length; i++) {
   for(var y = 0; y < ntc.names[i].length; y++) {
    if(c.split("=> ")[1][0].toUpperCase() + c.split("=> ")[1].substr(1) == ntc.names[i][1] && t) {
     return "#" + ntc.names[i][0];
    };
    if(c.split("=> ")[1][0].toUpperCase() + c.split("=> ")[1].substr(1) == ntc.names[i][1] && !t) {
      return ntc.names[i][0];
    };
   };
  };
 };     
 if(c.split(" ")[0]=="rgb_to_hex") {
  if(c.split("=>")[1].split(" ").join("").startsWith("r")) {
   if(!t) {
    return "#"+componentToHex(parseInt(c.split("=>")[1].split(" ").join("").split("rgb").join("").split("(").join("").split(")").join("").split(",")[0])) + componentToHex(parseInt(c.split("=>")[1].split(" ").join("").split("rgb").join("").split("(").join("").split(")").join("").split(",")[1])) + componentToHex(parseInt(c.split("=>")[1].split(" ").join("").split("rgb").join("").split("(").join("").split(")").join("").split(",")[2]));
   };
   if(t) {
    return "0x"+componentToHex(parseInt(c.split("=>")[1].split(" ").join("").split("rgb").join("").split("(").join("").split(")").join("").split(",")[0])) + componentToHex(parseInt(c.split("=>")[1].split(" ").join("").split("rgb").join("").split("(").join("").split(")").join("").split(",")[1])) + componentToHex(parseInt(c.split("=>")[1].split(" ").join("").split("rgb").join("").split("(").join("").split(")").join("").split(",")[2]));
   };
  //  return "#"+componentToHex(parseInt(c.split("=>")[1].split(" ").join("").split("rgb").join("").split("(").join("").split(")").join("")));
  }
  else {
   if(!t) {
    return "#"+componentToHex(parseInt(c.split(",")[0].split("rgb_to_hex").join("").split("=>").join("").split(" ").join(""))) + componentToHex(parseInt(c.split(",")[1].split("rgb_to_hex").join("").split("=>").join("").split(" ").join(""))) + componentToHex(parseInt(c.split(",")[2].split("rgb_to_hex").join("").split("=>").join("").split(" ").join("")));
   };
   if(t) {
    return "0x"+componentToHex(parseInt(c.split(",")[0].split("rgb_to_hex").join("").split("=>").join("").split(" ").join(""))) + componentToHex(parseInt(c.split(",")[1].split("rgb_to_hex").join("").split("=>").join("").split(" ").join(""))) + componentToHex(parseInt(c.split(",")[2].split("rgb_to_hex").join("").split("=>").join("").split(" ").join("")));
   };
  };
 }
 if(c.split(" ")[0]=="hex_to_rgb") {
  let r=0,g=0,b=0;
  if (c.split("hex_to_rgb").join("").split("=>").join("").split(" ").join("").length == 4) {
    r = "0x" + c.split("hex_to_rgb").join("").split("=>").join("").split(" ").join("")[1] + c.split("hex_to_rgb").join("").split("=>").join("").split(" ").join("")[1];
    g = "0x" + c.split("hex_to_rgb").join("").split("=>").join("").split(" ").join("")[2] + c.split("hex_to_rgb").join("").split("=>").join("").split(" ").join("")[2];
    b = "0x" + c.split("hex_to_rgb").join("").split("=>").join("").split(" ").join("")[3] + c.split("hex_to_rgb").join("").split("=>").join("").split(" ").join("")[3];
  } else if (c.split("hex_to_rgb").join("").split("=>").join("").split(" ").join("").length == 7) {
    r = "0x" + c.split("hex_to_rgb").join("").split("=>").join("").split(" ").join("")[1] + c.split("hex_to_rgb").join("").split("=>").join("").split(" ").join("")[2];
    g = "0x" + c.split("hex_to_rgb").join("").split("=>").join("").split(" ").join("")[3] + c.split("hex_to_rgb").join("").split("=>").join("").split(" ").join("")[4];
    b = "0x" + c.split("hex_to_rgb").join("").split("=>").join("").split(" ").join("")[5] + c.split("hex_to_rgb").join("").split("=>").join("").split(" ").join("")[6];
  }
  return [+r, + +g, + +b];
  }
 }
},
       GUI: {
        open: function() {
         gui.open();
        },
        close: function() {
         gui.close();
        },
        visible: true,
        addNumber:function(customProp) {
         var num;
         name='';
         folder='';
         if(customProp&&customProp!=="") {
          eval(customProp);
         }
         
         var parameters = 
         {
         	number: num
         };
         _errorFound=false;
         if(folder!==''&&folder.length>0) {
          //  console.log(eval(folder));
          try {
            typeof eval(folder) === 'object'
          }
          catch(err) {
              _errorFound=true
              terminal.warn('Couldn\'t find folder: "'+folder+'". Please make sure you typed the folder name correctly and make sure that folder exists.');
          }
          if(_errorFound !== true) {
              eval(folder+".add( parameters, 'number' ).name(name);");
          }
         }
         else {
          if(typeof gui === 'object') {
           gui.add( parameters, 'number' ).name(name);
          }
          else {
           terminal.warn('Couldn\'t find GUI: Make sure you created a gui using the "UYC.GUI.create" function.')
          }
         }
         // gui.open();
        },
        addColor:function(customProp) {
          var color;
          var name;
          var folder="";
          if(customProp&&customProp!=="") {
          eval(customProp);
         }
	        var parameters = 
	        {
	        	hexColor: color
         	};
         _errorFound=false;
         if(folder!==''&&folder.length>0) {
          try {
            typeof eval(folder) === 'object'
          }
          catch(err) {
              _errorFound=true
              terminal.warn('Couldn\'t find folder: "'+folder+'". Please make sure you typed the folder name correctly and make sure that folder exists.');
          }
          if(_errorFound !== true) {
              eval(folder+".addColor( parameters, 'hexColor' ).name(name);");
          }
         }
         else {
          if(typeof gui === 'object') {
            gui.addColor( parameters, 'hexColor' ).name(name);
          }
          else {
           terminal.warn('Couldn\'t find GUI: Make sure you created a gui using the "UYC.GUI.create" function.')
          }
         }
      	  // gui.open();
        },
        addBoolean:function(customProp) {
        //   if(customProp&&customProp!=="") {
        //   eval(customProp);
        //  }
	        var parameters = 
       	  {
	       	 val: customProp.bool,
          }
	        _errorFound=false;
         if(customProp.folder!==''&&customProp.folder.length>0) {
          try {
            typeof eval(customProp.folder) === 'object'
          }
          catch(err) {
              _errorFound=true
              terminal.warn('Couldn\'t find folder: "'+folder+'". Please make sure you typed the folder name correctly and make sure that folder exists.');
          }
          if(_errorFound !== true) {
              // eval(customProp.folder+".add( parameters, 'val' ).name(customProp.text);");
              eval(customProp.folder+`.add( parameters, 'val' ).name(customProp.text)`);
          }
         }
         else {
          if(typeof gui === 'object') {
            gui.add( parameters, 'val' ).name(customProp.text);
          }
          else {
           terminal.warn('Couldn\'t find GUI: Make sure you created a gui using the "UYC.GUI.create" function.')
          }
         }
         setInterval(() => {
          if(typeof UYC.GUI.getByName(customProp.text) === 'object') {
           UYC.GUI.getByName(customProp.text)["checked"] = UYC.GUI.getByName(customProp.text).__checkbox.checked;
          };
         });
        //  UYC.GUI.getByName(customProp.text)["onchange"] = function(bool, func) {
        //   this.onclick = function() {
        //    if(this.__checkbox.checked == bool) {
        //     eval(code.toString().split("function(").join("function "+fncV+"(")+fncV+"();");
        //     console.log(code.toString().split("function(").join("function "+fncV+"(")+fncV+"();");
        //    };
        //   };
        //  };
	        // gui.open();
        },
        create:function() {
          gui = new dat.GUI();
        },
        exist: function(prop) {
         if(typeof this.getByName(prop) === "object") {
          return true;
         }
         else {
          return false;
         }
        },
        addButton:function(customProp)  {
          // if(customProp&&customProp!=="") {
          //  eval(customProp);
          // }
	        var parameters = 
	        {
	         func: customProp.onclick,
	        };
	        _errorFound=false;
         if(customProp.folder!==''&&customProp.folder.length>0) {
          try {
            typeof eval(customProp.folder) === 'object'
          }
          catch(err) {
              _errorFound=true
              terminal.warn('Couldn\'t find folder: "'+customProp.folder+'". Please make sure you typed the folder name correctly and make sure that folder exists.');
          }
          if(_errorFound !== true) {
              eval(customProp.folder+".add( parameters, 'func' ).name(customProp.text);");
          }
         }
         else {
          if(typeof gui === 'object') {
            gui.add( parameters, 'func' ).name(customProp.text);
          }
          else {
           terminal.warn('Couldn\'t find GUI: Make sure you created a gui using the "UYC.GUI.create" function.')
          }
         }
         var btnText = customProp.text;
        //  setInterval(() => {
        //   this.getByName(customProp.text)["text"]=this.getByName(customProp.text).domElement.parentElement.innerText;
        //  });
         this.getByName(btnText)["setText"]=function(text) {
          if(typeof UYC.GUI.getByName(btnText) === 'object') {
           UYC.GUI.getByName(btnText).__gui.domElement.children[0].children[1].children[0].children[0].innerText=text;
           setTimeout(() => { btnText = text; },3);
          };
         };
      	  // gui.open();
        },
        addFolder:function(customProp) { // [FIX]: just tell em' how to add a GUI option into a folder :\
          var folder = "";
          if(customProp&&customProp!=="") {
           eval(customProp);
          }
          _errorFound=false;
         if(customProp!==''&&customProp.length>0) {
          try {
            typeof eval(customProp) === 'object'
          }
          catch(err) {
              _errorFound=true
              terminal.warn('Couldn\'t find folder: "'+customProp+'". Please make sure you typed the folder name correctly and make sure that folder exists.');
          }
          if(_errorFound !== true) {
            __zmdfgiWEjfsiDJSow=eval(customProp).addFolder(customProp.text);
          const folderScript=document.createElement("script");
          folderScript.innerHTML="var "+customProp.name+"=__zmdfgiWEjfsiDJSow";
          document.body.appendChild(folderScript);
          }
         }
         else {
          if(typeof gui === 'object') {
          __zmdfgiWEjfsiDJSow=gui.addFolder(customProp.text);
          const folderScript=document.createElement("script");
          folderScript.innerHTML="var "+customProp.name+"=__zmdfgiWEjfsiDJSow";
          document.body.appendChild(folderScript);
          }
          else {
           terminal.warn('Couldn\'t find GUI: Make sure you created a gui using the "UYC.GUI.create" function.')
          }
         }
	        // gui.open();
        },
        addList:function(customProp){
          var items;
          var selectedItem;
          var name;
          var folder="";
          if(customProp&&customProp!=="") {
           eval(customProp);
          }
          var parameters = 
	        {
           sI: 0
	        };
          _errorFound=false;
         if(folder!==''&&folder.length>0) {
          try {
            typeof eval(folder) === 'object'
          }
          catch(err) {
              _errorFound=true
              terminal.warn('Couldn\'t find folder: "'+folder+'". Please make sure you typed the folder name correctly and make sure that folder exists.');
          }
          if(_errorFound !== true) {
              eval(folder+".add( parameters, 'sI', items ).name(name).setValue(selectedItem);");
          }
         }
         else {
          if(typeof gui === 'object') {
            gui.add( parameters, 'sI', items ).name(name).setValue(selectedItem);
          }
          else {
           terminal.warn('Couldn\'t find GUI: Make sure you created a gui using the "UYC.GUI.create" function.')
          }
         }
        	// gui.open();
        },
        addString:function(customProp) {
          // string='';
          // name='';
          // var folder="";
          // if(customProp&&customProp!=="") {
          //  eval(customProp);
          // }
          
	        var parameters = 
        	{
	        	str: customProp.string,
	        };
	        _errorFound=false;
         if(customProp.folder!==''&&customProp.folder.length>0) {
          try {
            typeof eval(customProp.folder) === 'object'
          }
          catch(err) {
              _errorFound=true
              terminal.warn('Couldn\'t find folder: "'+customProp.folder+'". Please make sure you typed the folder name correctly and make sure that folder exists.');
          }
          if(_errorFound !== true) {
              eval(customProp.folder+".add( parameters, 'str' ).name(name);");
          }
         }
         else {
          if(typeof gui === 'object') {
            gui.add( parameters, 'str' ).name(customProp.name);
          }
          else {
           terminal.warn('Couldn\'t find GUI: Make sure you created a gui using the "UYC.GUI.create" function.')
          }
         }
	        // gui.open();
        },
        addSlider:function(customProp) {
        //  min=0;
        //  max=100;
        //  value=50;
        //  step=1;
        //  name='...';
        //  folder="";
        //  if(customProp&&customProp!=="") {
        //   eval(customProp);
        //  } name
        var parameters;
        var sliderMin;
        var sliderMax;
        var sliderSteps;
        var sliderName;
        if(customProp&&customProp.value) {
         parameters = 
         {
         	value: customProp.value,
         };
        };
        if(!customProp||customProp&&!customProp.value) {
        parameters = {
          value: 5
         };
        };
        if(customProp&&customProp.min) {
         sliderMin = customProp.min;
        };
        if(!customProp||customProp&&!customProp.min) {
         sliderMin = 0;
        };
        if(customProp&&customProp.max) {
         sliderMax = customProp.max;
        };
        if(!customProp||customProp&&!customProp.max) {
         sliderMax = 10;
        };
        if(customProp&&customProp.steps) {
         sliderSteps = customProp.steps;
        };
        if(!customProp||customProp&&!customProp.steps) {
         sliderSteps = 1;
        };
        if(customProp&&customProp.text) {
         sliderName = customProp.text;
        };
        if(!customProp||customProp&&!customProp.text) {
         sliderName = "slider";
        };
         _errorFound=false;
         if(customProp&&customProp.folder&&customProp.folder!==''&&customProp.folder.length>0) {
          try {
            typeof eval(customProp.folder) === 'object'
          }
          catch(err) {
              _errorFound=true
              terminal.warn('Couldn\'t find folder: "'+customProp.folder+'". Please make sure you typed the folder name correctly and make sure that folder exists.');
          }
          if(_errorFound !== true) {
            eval(customProp.folder+".add( parameters, 'value' ).min(sliderMin).max(sliderMax).step(sliderSteps).name(sliderName);");
            this.getByName(sliderName)["onchange"] = function(code) {
             var changing;
             this.domElement.onmousedown = function() {
              // setTimeout(() = { changing = true; },3);
              var t = generateToken(5);
              setTimeout(() => {
              changing = setInterval(() => {
               eval(code.toString().split("function(").join("function "+t+"(")+t+"();");
              });
            },1);
             };
             this.domElement.onmouseup = function() {
              clearInterval(changing);
             };
            };
            setInterval(() => { if(typeof UYC.GUI.getByName(sliderName) === 'object') {
            this.getByName(sliderName)["value"] = this.getByName(sliderName).object.value;
            this.getByName(sliderName)["getColor"] = function() {
               return UYC.convert.color("rgb_to_hex => "+ getComputedStyle(UYC.GUI.getByName(sliderName).domElement.children[1].children[0]).backgroundColor.split("rgb(").join("").split(")").join(""), true);
            };
            this.getByName(sliderName)["setColor"] = function(color) {
             if(!color.includes(",")&&!color.startsWith("#")) {
              UYC.GUI.getByName(sliderName).domElement.children[1].children[0].style.background = color;
             };
             if(color.includes(",")) {
              UYC.GUI.getByName(sliderName).domElement.children[1].children[0].style.background = "rgb(" + color + ")";
             };
             if(color.startsWith("#")||color.startsWith("0x")) {
              UYC.GUI.getByName(sliderName).domElement.children[1].children[0].style.background = "#"+color.split("#").join("").split("0x").join("");
              };
             };
            };
           });
          }
         }
         else {
          if(typeof gui === 'object') {
            gui.add( parameters, 'value' ).min(sliderMin).max(sliderMax).step(sliderSteps).name(sliderName);
            this.getByName(sliderName)["getColor"] = function() {
               return UYC.convert.color("rgb_to_hex => "+ getComputedStyle(UYC.GUI.getByName(sliderName).domElement.children[1].children[0]).backgroundColor.split("rgb(").join("").split(")").join(""), true);
            };
            this.getByName(sliderName)["setColor"] = function(color) {
             if(!color.includes(",")&&!color.startsWith("#")) {
              UYC.GUI.getByName(sliderName).domElement.children[1].children[0].style.background = color;
             };
             if(color.includes(",")) {
              UYC.GUI.getByName(sliderName).domElement.children[1].children[0].style.background = "rgb(" + color + ")";
             };
             if(color.startsWith("#")||color.startsWith("0x")) {
              UYC.GUI.getByName(sliderName).domElement.children[1].children[0].style.background = "#"+color.split("#").join("").split("0x").join("");
             };
            };
          }
          else {
           terminal.warn('Couldn\'t find GUI: Make sure you created a gui using the "UYC.GUI.create" function.')
          }
         }
         // gui.open();
        },
        waitFor:function(code) { // [FIX]: Not really a fix, but maybe I should make a time for waitFor fn :I ?

         const b = code.toString().getCharBetween('function( & )').split("_").join(" ");
         // eval(code.toString().split(b).join(UYC.GUI.getByName(b)));
         //  console.log(UYC.GUI.getByName(b).domElement);
         const t = generateToken(5);
        //  console.log(code.toString().split(b).join('UYC.GUI.getByName("'+b+'").domElement').split('function('+'UYC.GUI.getByName("'+b+'").domElement'+')').join('function '+t+'('+b+')')+';'+t+'()');
        let it = setInterval(() => {
         if(typeof UYC.GUI.getByName(b) === 'object') { 
          clearInterval(it);
          terminal.info("Found: "+b);
          setTimeout(function(){terminal.clear()},3000);
          console.log(code.toString().split(code.toString().getCharBetween("function( & )")).join('UYC.GUI.getByName("'+b+'")').split('function(UYC.GUI.getByName("'+b+'"))').join('function '+t+'('+b+')').split(t+"("+b+")").join(t+'('+b.split(" ").join("")+')').split(b).join('UYC.GUI.getByName("'+b+'")'));
          eval(eval(code.toString().split(code.toString().getCharBetween("function( & )")).join('UYC.GUI.getByName("'+b+'")').split('function(UYC.GUI.getByName("'+b+'"))').join('function '+t+'('+b+')').split(t+"("+b+")").join(t+'('+b.split(" ").join("")+')').split(b).join('UYC.GUI.getByName("'+b+'")')));
          // eval(code.toString().split(b).join('UYC.GUI.getByName("'+b+'")').split('function('+'UYC.GUI.getByName("'+b+'")'+')').join('function '+t+'('+b+')').split("object").join("domElement")+';'+t+'()');
         }
        });

        //  var it = setInterval(() => {
        //   if(typeof UYC.GUI.getByName(body) === 'object') {
        //     clearInterval(it)
        //     terminal.info("Found: "+body);
        //     setTimeout(function(){terminal.clear()},3000);
        //     eval(code);
        //   };
        //  },0);
        },
        // [FIX]: Fix the onchange method of UYC.GUI
        // onchange: function(code) {
        //  // [FIX]: Find a method so whenever you call a parameter that contains space characters in the function, you don't use an underscore to define it. IK, it's a little bit frustrating lol xd.
        //  const b = code.toString().getCharBetween('function( & )').split("_").join(" ");
        //  // eval(code.toString().split(b).join(UYC.GUI.getByName(b)));
        //  //  console.log(UYC.GUI.getByName(b).domElement);
        //  const t = generateToken(5);
        // if(typeof UYC.GUI.getByName(b) === 'object') { 
        // UYC.GUI.getByName(b).domElement.onmouseup = function() {
        //   eval(code.toString().split("this").join("UYC.GUI.getByName('" + b + "')").split(b.split(" ").join("_")).join('UYC.GUI.getByName("'+b.split(" ").join("_")+'")').split('function('+'UYC.GUI.getByName("'+b.split(" ").join("_")+'")'+')').join('function '+t+'('+b.split(" ").join("_")+')').split("object").join("domElement")+';'+t+'()');
        //  };
        // }
        //  else {
        //   terminal.warn('Cannot find the ui named: "'+b+'"');
        //  };
        // },
        getByName:function(name) {

         // DETECTING SINGULAR UI'S

         // CHECK ALL UI'S (OUTSIDE OF THE FOLDERS)
         for(var c = 0; c < gui.__controllers.length; c++) {
          if(gui.__controllers[c].domElement.parentElement.innerText == name) {
           return gui.__controllers[c];
          };
         };
        
         // CHECK ALL UI'S (INSIDE OF THE FOLDERS)
        for(var f = 0; f < Object.keys(gui.__folders).length; f++) {
         for(var c = 0; c < gui.__folders[getKeyName(gui.__folders, f)].__controllers.length; c++) {
          if(typeof gui.__folders[getKeyName(gui.__folders, 
 f)].__controllers[c].domElement.parentElement === 'object') {
  if(typeof gui.__folders[getKeyName(gui.__folders, 
 f)].__controllers[c].domElement.parentElement === 'object' && typeof gui.__folders[getKeyName(gui.__folders, 
 f)].__controllers[c].domElement.parentElement.innerText === 'string') {        
  if(gui.__folders[getKeyName(gui.__folders, 
 f)].__controllers[c].domElement.parentElement.innerText == name) {
           return gui.__folders[getKeyName(gui.__folders, f)].__controllers[c];
          };
         };
        };
      };
        };

          // DETECTING MULTIPLE UI'S

          if(typeof name === 'string' && name.includes(",")) {
          // CHECK ALL UI'S (OUTSIDE OF THE FOLDERS)
          // [FIX]: Make sure it actually works to check multiple UI's outside of the folders. Ok bro ? :T
           var UIs = [];
           array("UIs_43okfeir5i4hjiuj", "name");
           for(var c = 0; c < gui.__controllers.length; c++) {
            for(var u = 0; u < UIs_43okfeir5i4hjiuj.length; u++) {
             if(gui.__controllers[c].domElement.parentElement.innerText == UIs_43okfeir5i4hjiuj[u]) {
              //  return gui.__controllers[c];
              UIs.push(gui.__controllers[c]);
             };
            };
           }; 
        // CHECK ALL UI'S (INSIDE OF THE FOLDERS)
        for(var i = 0; i < name.split(",").length; i++) {
          UIs.push(UYC.GUI.getByName(name.split(",")[i].split(" ").join("")));
         };
         return UIs;
        };
       }
      },
      //  texture(bgTexture) {
      //   return eval(`TL.load("`+bgTexture+`", function(texture) {scene.background = texture})`);
      //  },
      //  color(color) {
      //    return eval("new THREE.Color("+color+")");
      //  },
       background: {
        skybox: {
            color: new THREE.Color(0.5, 0.5, 0.5),
            getMaterials: function() {
             skyMaterials = [];
             for(var s = 0; s < game.bodies.length; s++) {
              if(getBodyByIndex(s).isSkybox) {
               for(var m = 0; m < 6; m++) {
                skyMaterials.push(getBodyByIndex(s).material[m].map.image.src);
               }
              };
             };
             return skyMaterials;
            },
            setColor: function (r,g,b) {
              if(r.startsWith("#")) {
                this.color=new THREE.Color(UYC.convert.color("hex_to_rgb => "+r)[0], UYC.convert.color("hex_to_rgb => "+r)[1], UYC.convert.color("hex_to_rgb => "+r)[2]);
              }
              if(r&&g&&b) {
               this.color=new THREE.Color(r,g,b);
              }
              // if(!r.startsWith("#")||!r&&!g&&!b) {
              //  this.color=r;
              // }
            }
          }
       },
       controls: {
        type: "",
        autoRotateSpeed: 2,
        keyPanSpeed: 7,
        zoomSpeed: 1,
        rotateSpeed: 1,
        maxPolarAngle: 3.141592653589793,
        minPolarAngle: 0,
        invertedX: false,
        invertedY: false,
        euler: function(prop) {
         if(!prop.x) {
          eulerX = false;
         }
         if(!prop.y) {
          eulerY = false;
         }
        },
        target:function(body,position,scale,customProp) {
         x=0;
         y=0;
         z=0;
         if(customProp&&customProp!=="") {
          eval(customProp);
         }
         if(OC) {
          controls.target.set(body.position.x+x,body.position.y+y,body.position.z+z);
         }
         else {
          terminal.warn("You can't target any object if control type is not Orbital.");
         }
        },
        smooth:function(status){if(status=="on"){controls.enableDamping=true;}else{controls.enableDamping=false;}},
        speed: {
         x: 1000,
         z: 1000,
         set: function(x,z) {
          if(UYC.controls.type=="Orbital") {
           terminal.warn("Speed is only available for Pointer Lock.")
          }
          this.x=x;
          this.z=x;
         }
        }
       },
       fullscreen:function() {
  document.body.requestFullscreen();
  renderer.setSize(window.innerWidth, window.innerHeight);
  // document.getElementsByTagName("canvas")[0].width=1667;
 },
 renderer: {
  refresh: function(delay) {
  if(!refreshInUse && delay && delay.toString().length > 0) {
   setTimeout(function() { refreshInUse = true; },3);
   var refreshTime = delay;
   var refreshTimeDecrement = setInterval(function() {
    refreshTime--;
   },1000);
   var refreshTimeCount = setInterval(() => {
    terminal.info("Refreshing (" + refreshTime + ")...");
   },0);
   setTimeout(() => {
    refreshInUse = false;
    for(var o = 0; o < game.bodies.length; o++) {
    removeBody(getBodyByIndex(0));
   }
    eval(fR) || window.eval(fR);
    clearInterval(refreshTimeDecrement);
    clearInterval(refreshTimeCount);
    terminal.success("Refreshed !");
    setTimeout(function() {
     terminal.clear();
    },1000);
   }, Number(delay + "000"));
  }
  if(!refreshInUse && !delay) {
   setTimeout(() => { refreshInUse = false; },3);
    for(var o = 0; o < game.bodies.length; o++) {
    removeBody(getBodyByIndex(o));
   }
    eval(fR) || window.eval(fR);
    terminal.success("Refreshed !");
    setTimeout(function() {
     terminal.clear();
    },1000);
  };
  if(refreshInUse) {
   terminal.warn("Can't refresh the scene while it's already refreshing.");
  };
  },
  time: {
   steps:function(steps) {
    scene.setFixedTimeStep(steps);
   }
  },
 effect: {
  rain: {
   enabled: true,
   position:{x:0,y:0,z:0},
   lightning: { 
     enabled: true,
     color: "#062d89"
   },
    clouds: { 
     enabled: true,
     density: 30,
     speed: 0.1,
     opacity: 0.6,
     color: "#062d89",
     static: false
    }
   },
  },
  antialias:function(status){
   renderer.antialias=status;
  //  if(status=="on") {
  //   renderer.antialias=true;
  //  }
  //  if(status=="off") {
  //   renderer.antialias=false;
  //  }
  },
castShadows:function() {
  setTimeout(() => {
   for(var b=0;b<scene.children.length;b++) {
    if(scene.children[b].castShadow==false) {
      scene.children[b].castShadow=true;
      scene.children[b].receiveShadow=true;
     }
    }
  }, 3);
 }
},
 cursor: {
      //  change: function(c) {
      //   uyc_cursor=c
      //   this.info.cursor=uyc_cursor
      //   document.body.style.cursor=c
      //   // output.style.cursor='url("Cursors/'+uyc_cursor_theme+'_'+uyc_cursor_color+'.png"), auto';
      //   outputComp.style.cursor='url("Cursors/'+uyc_cursor_theme+'_'+uyc_cursor_color+'.png"), auto';
      //  },
       hide: function() {
        for(var i = 0; i < document.querySelectorAll("*").length; i++) {
         document.querySelectorAll("*")[i].style.cursor="none";
        };
       },
       show: function() {
        for(var i = 0; i < document.querySelectorAll("*").length; i++) {
         document.querySelectorAll("*")[i].style.cursor='url("Cursors/'+uyc_cursor_theme+'_'+uyc_cursor_color+'.png"), auto';
        };
       },
       URL: function(src) {
        return 'url("'+src+'"), auto';
       },
       color: function(c, e) {
        uyc_cursor_color=c
        document.body.style.cursor='url("Cursors/'+uyc_cursor_theme+'_'+c+'.png"), auto';
        outputComp.style.cursor='url("Cursors/'+uyc_cursor_theme+'_'+uyc_cursor_color+'.png"), auto';
        if(e&&e!==""&&e!=="*") {
         e.style.cursor = 'url("Cursors/'+uyc_cursor_theme+'_'+uyc_cursor_color+'.png"), auto';
        };
        if(e&&e!==""&&e=="*") {
         for(var i = 0; i < document.querySelectorAll("*").length; i++) {
          document.querySelectorAll("*")[i].style.cursor='url("Cursors/'+uyc_cursor_theme+'_'+uyc_cursor_color+'.png"), auto';
         };
        };
        // output.style.cursor='url("Cursors/'+uyc_cursor_theme+'_'+uyc_cursor_color+'.png"), auto';
      },
       theme: function(t, e) {
        uyc_cursor_theme=t
        document.body.style.cursor='url("Cursors/'+t+'_'+this.info.color+'.png"), auto';
        outputComp.style.cursor='url("Cursors/'+uyc_cursor_theme+'_'+uyc_cursor_color+'.png"), auto';
        if(e&&e!==""&&e!=="*") {
         e.style.cursor = 'url("Cursors/'+uyc_cursor_theme+'_'+uyc_cursor_color+'.png"), auto';
        };
        if(e&&e!==""&&e=="*") {
         for(var i = 0; i < document.querySelectorAll("*").length; i++) {
          document.querySelectorAll("*")[i].style.cursor='url("Cursors/'+uyc_cursor_theme+'_'+uyc_cursor_color+'.png"), auto';
         };
        };
        // output.style.cursor='url("Cursors/'+uyc_cursor_theme+'_'+uyc_cursor_color+'.png"), auto';
       },
       info: {
        cursor:"color: "+uyc_cursor_color+', theme: '+uyc_cursor_theme,//uyc_cursor,
        color: uyc_cursor_color,
        theme: uyc_cursor_theme,
       }
      },
      detect: {
      Empty: function(input,custom) {
       if(!input.length>0&&!custom||input.value==""&&!custom||input.value==" "&&!custom) {
        return true;
       }
       if(input.length>0&&!custom||!input.value==""&&!custom||!input.value==" "&&!custom) {
        return false;
       }
        if(custom.startsWith("detectSpaceChars")) {
         if(!input.length>0||input.value==""||input.value==" "||input.includes(" ")) {
         return true;
        }
        else {
         return false;
        }
       }
       if(input.length>0&&!custom||!input.value==""&&!custom||!input.value==" "&&!custom) {
        return false;
       }
      },
      letters: function(input) {
       if (isNaN(input)) {
        return true;
       }
       else {
        return false;
       }
     },
     numbers: function(input) {
       if (isNaN(input)) {
        return false;
       }
       else {
        return true;
       }
     },
      Emojis:function(input) {
    if (typeof includeBasic == "undefined")
        includeBasic = true;
    for (var c of input) {
        var cHex = ("" + c).codePointAt(0).toString(16);
        var lHex = cHex.length;
        if (lHex > 3) {
            var prefix = cHex.substring(0, 2);
            if (lHex == 5 && prefix == "1f") {
                return true;
            }
            if (includeBasic && lHex == 4) {
                if (["20", "21", "23", "24", "25", "26", "27", "2B", "29", "30", "32"].indexOf(prefix) > -1)
                    return true;
            }
        }
    }
    return false;
},
      },
      object: {
       position: {
        x:function(body, start, end, speed, customProp){
         var inUse=false;
         var pX=start;
         var onEnd;
         if(customProp&&customProp!=="") {
          eval(customProp);
         }
         if(!inUse) {
         var updating=setInterval(function() {
         body.__dirtyPosition=true;
        //  body.__dirtyRotation=true;
         if(start<end) {
             pX+=0.1
             body.position.x=pX;
            //  console.log('>>>')
         }
         if(start>end) {
             pX-=0.1
             body.position.x=pX;
            //  console.log('<<<')
         }
          if(start<end&&pX>=end) {
             clearInterval(updating);
             _errorFound=false
     try {
      onEnd();
     }
     catch(err) {
      _errorFound=true;
      terminal.error(err+". The onEnd function was not executed.");
     }
     if(typeof onEnd === 'function' && !_errorFound) {
      onEnd();
     }
            //  console.log("DONE: position from "+start+" to "+end);
          }
          if(start>end&&pX<=end) {
              clearInterval(updating);
              try {
      onEnd();
     }
     catch(err) {
      _errorFound=true;
      terminal.error(err+". The onEnd function was not executed.");
     }
     if(typeof onEnd === 'function' && !_errorFound) {
      onEnd();
     }
              // console.log("DONE: position from "+start+" to "+end);
             }
            },speed);
          }
          if(inUse) {
           
          }
            // setInterval(function(){console.log(pX)});
        },
        y:function(body, start, end, speed, customProp) {
         var inUse=false;
         var pY=start;
         var onEnd;
         if(customProp&&customProp!=="") {
          eval(customProp);
         }
         if(!inUse) {
         var updating=setInterval(function() {
         body.__dirtyPosition=true;
        //  body.__dirtyRotation=true;
         if(start<end) {
             pY+=0.1
             body.position.y=pY;
            //  console.log('>>>')
         }
         if(start>end) {
             pY-=0.1
             body.position.y=pY;
            //  console.log('<<<')
         }
          if(start<end&&pY>=end) {
             clearInterval(updating);
             try {
      onEnd();
     }
     catch(err) {
      _errorFound=true;
      terminal.error(err+". The onEnd function was not executed.");
     }
     if(typeof onEnd === 'function' && !_errorFound) {
      onEnd();
     }
            //  console.log("DONE: position from "+start+" to "+end);
          }
          if(start>end&&pY<=end) {
              clearInterval(updating);
              try {
      onEnd();
     }
     catch(err) {
      _errorFound=true;
      terminal.error(err+". The onEnd function was not executed.");
     }
     if(typeof onEnd === 'function' && !_errorFound) {
      onEnd();
     }
              // console.log("DONE: position from "+start+" to "+end);
             }
            },speed);
          }
          if(inUse) {
           
          }
        },
        z:function(body, start, end, speed, customProp) {
         var inUse=false;
         var pZ=start;
         var onEnd;
         if(customProp&&customProp!=="") {
          eval(customProp);
         }
         if(!inUse) {
         var updating=setInterval(function() {
         body.__dirtyPosition=true;
        //  body.__dirtyRotation=true;
         if(start<end) {
             pZ+=0.1
             body.position.z=pZ;
            //  console.log('>>>')
         }
         if(start>end) {
             pZ-=0.1
             body.position.z=pZ;
            //  console.log('<<<')
         }
          if(start<end&&pZ>=end) {
             clearInterval(updating);
             try {
      onEnd();
     }
     catch(err) {
      _errorFound=true;
      terminal.error(err+". The onEnd function was not executed.");
     }
     if(typeof onEnd === 'function' && !_errorFound) {
      onEnd();
     }
            //  console.log("DONE: position from "+start+" to "+end);
          }
          if(start>end&&pZ<=end) {
              clearInterval(updating);
              try {
      onEnd();
     }
     catch(err) {
      _errorFound=true;
      terminal.error(err+". The onEnd function was not executed.");
     }
     if(typeof onEnd === 'function' && !_errorFound) {
      onEnd();
     }
              // console.log("DONE: position from "+start+" to "+end);
             }
            },speed);
          }
          if(inUse) {
           
          }
        },
        get:function(body){return new THREE.Vector3(body.position.x,body.position.y,body.position.z)},
        set:function(body,position){body.position.set(position.x,position.y,position.z)}
       }
      },
       transform: {
  Int: function(t) {
   return Math.trunc(t)
  },
  String: function(t) {
    var first=t.split("(")[0].split(" ").join("");
    var second=t.split(" to")[1].split(" ").join("");
    var bf=first.length;
    var third=t.split(")")[0].substring(bf).split("(").join("").split(" ").join("");
      console.log('f: '+first+', s: '+second+", t: "+third);
    if(first=="emoji"&&second=="unicode") {
      var comp;
    if (third.length === 1) {
        comp = third.charCodeAt(0);
    }
    comp = (
        (third.charCodeAt(0) - 0xD800) * 0x400
      + (third.charCodeAt(1) - 0xDC00) + 0x10000
    );
    // if (comp < 0) {
        comp = third.charCodeAt(0);
        return "\\u"+comp.toString("16");
      // };
    }
  },
  Float: function(t) {
    // return Number(t.toString()[0]+"."+t.toString().slice(1))
    return parseInt(t).toLocaleString().split(",").join(".")
  },
 },
//  vec2:function(v1,v2) {
//  return eval(v1+","+v2);
// },
//  vec3:function(v1,v2,v3) {
//  return eval(v1+","+v2+","+v3);
// },
 camera: {
  type: "Perspective",
  focalLength:11.130019818314413,
  filmGauce:35,
  smooth:false,
  //body,position,scale,customProp
  attachToBody:function(prop) {
   rotation=true;
   rotationCopy=false;
   x=0;
   y=2;
   z=4;
  //  b=body;
  //  if(prop&&prop!=="") {
  //   eval(prop);
  //  }
  if(UYC.controls.type == "") {
   terminal.warn("Cannot attach camera if control is not defined.");
  };
  if(UYC.controls.type !== "PointerLock" && UYC.controls.type !== "") {
   terminal.warn("Cannot attach camera while using " + UYC.controls.type + " controls. Camera can only be attached with PointerLock control.");
  };
  if(UYC.controls.type == "PointerLock") {
    if(prop.body == undefined) {
     terminal.error("Camera can't be attached. Body doesn't exist.");
    }
   if(typeof prop.body === 'object' && prop.body.type!=="Mesh") {
    terminal.error("You can't attach the camera to a " + prop.body.type + " . You can only attach camera to meshes.");
   }
   if(typeof prop.body === 'object' && prop.body.type=="Mesh") {
    previousXpos=camera.position.x;
    previousYpos=camera.position.y;
    previousZpos=camera.position.z;
    previousXrot=camera.rotation.x;
    previousYrot=camera.rotation.y;
    previousZrot=camera.rotation.z;
    setTimeout(function() {
    CameraAttach=setInterval(function() {
     cameraAttachment=true;
     camera.position.x=prop.body.position.x+prop.position.x;
     camera.position.y=prop.body.position.y+prop.position.y;
     camera.position.z=prop.body.position.z+prop.position.z;
     if(typeof controls === 'object' && typeof controls.getObject === 'function') {
      controls.getObject().position.x=prop.body.position.x+x;
      controls.getObject().position.y=prop.body.position.y+y;
      controls.getObject().position.z=prop.body.position.z+z;
     }
     if(prop.rotationCopy) {
       prop.body.rotation.x=camera.rotation.x;
       prop.body.rotation.y=camera.rotation.y;
       prop.body.rotation.z=camera.rotation.z;
      //  terminal.log(body.rotation.x + " / " + camera.rotation.x)
      }
     if(prop.rotation) {
       camera.rotation.x=prop.body.rotation.x;
       camera.rotation.y=prop.body.rotation.y;
       camera.rotation.z=prop.body.rotation.z;
       cameraAttachmentRotation=true;
       if(UYC.controls.type == "PointerLock") {
        controls.unlock();
        }
       };
      });
     },3);
    };
   }
  },
  unattach:function(prop) {
    returnToPreviousPosition=false;
    returnToPreviousRotation=false;
    cameraAttachment=false;
    cameraAttachmentRotation=false;
   clearInterval(CameraAttach);
   if(prop && prop.returnToPreviousPosition) {
    // should i make a particular x,y,z pos selection ?
    camera.position.set(previousXpos,previousYpos,previousZpos);
   }
   if(prop && prop.returnToPreviousRotation) {
    camera.rotation.set(previousXrot,previousYrot,previousZrot);
   }
  },
  create:function(position,scale,customProp) {
size={x:window.innerWidth,y:window.innerHeight};
if(customProp&&customProp!=="") {
 eval(customProp);
}
multipleCameras=true;
camera2 = new THREE.PerspectiveCamera(75,window.innerWidth/window.innerHeight,0.1,10000);
camera2["disable"]=function() {
  delete camera2;
  // delete camera.children[0];
  multipleCameras=false;
};
camera.add( camera2 );
function animate() {
  requestAnimationFrame( animate );
  if(multipleCameras) {
  renderer.setViewport( 0, 0, window.innerWidth, window.innerHeight );
  renderer.render(scene, camera);
  renderer.setScissorTest( true );
  renderer.setScissor( position.x, position.y, size.x, size.y );
  renderer.setViewport( position.x, position.y, size.x, size.y );
  if(typeof camera2 === 'object') {
   renderer.render( scene, camera2 );
  }
  renderer.setScissorTest( false );
 }
}
window.addEventListener( 'resize', onWindowResize, false );
onWindowResize();
function onWindowResize(){
    camera2.aspect = window.innerWidth / window.innerHeight;
    camera2.updateProjectionMatrix();
    camera.children[0].aspect = window.innerWidth / window.innerHeight;
    camera.children[0].updateProjectionMatrix();
    renderer.setSize(window.innerWidth, window.innerHeight);
    ASCIIEffect.setSize( window.innerWidth, window.innerHeight );
}
animate();
},
  fadeIn:function(color,position,scale,customProp) {
   var onEnd;
   var afterFade;
   if(customProp&&customProp!=="") {
    eval(customProp);
   }
   var fade=document.createElement("div");
   fade.style.position='absolute';
   fade.style.top=0;
   fade.style.left=0;
   fade.style.width='100%';
   fade.style.height='100%';
   fade.style.opacity=0;
   fade.style.background=color;
   fade.style.zIndex=6;
   fo=0;
   var fading=setInterval(function() {
    fo+=0.01;
    fade.style.opacity=fo;
    if(fade.style.opacity==1) {
     clearInterval(fading);
     _errorFound=false
     try {
      afterFade();
     }
     catch(err) {
      _errorFound=true;
      terminal.error(err+". The afterFade function was not executed.");
     }
     if(typeof afterFade === 'function' && !_errorFound) {
      afterFade();
     }
     
     setTimeout(function() {

     var unfading=setInterval(function() {
    fo-=0.01;
    fade.style.opacity=fo;
    if(fade.style.opacity<=0) {
     clearInterval(unfading);
     try {
      onEnd();
     }
     catch(err) {
      _errorFound=true;
      terminal.error(err+". The onEnd function was not executed.");
     }
     if(typeof onEnd === 'function' && !_errorFound) {
      onEnd();
     }
     fade.remove();
    }
   })
  },500)
    }
   })
   document.body.appendChild(fade);
  },
  position: {
    set: function(x,y,z){
      camera.position.set(x,y,z);
      if(typeof controls === 'object' && typeof controls !== undefined) {
       controls.getObject().position.set(x,y,z);
      }
    },
  },
  rotation: {
    set: function(x,y,z){
      camera.rotation.set(x,y,z);
      if(typeof controls === 'object' && typeof controls !== undefined) {
       controls.getObject().rotation.set(x,y,z);
      }
    },
  },
  axisBodyRotation:function(body, prop) {
    var cam_speed;
    if(prop.speed) {
     cam_speed = prop.speed;
    }
    else {
     cam_speed = 0.5;
    };
    var sp=0.1;
    currentObject=camera;
    currentObject.position.copy(body.position);
    function aR() {
    requestAnimationFrame(aR);
    sp+=cam_speed;
    currentObject.position.copy(body.position);
if(prop&&prop.axis&&prop.axis&&prop.axis.x) {
    currentObject.position.x = currentObject.position.x+Math.cos(sp) * body.scale.x + 2;
}
if(prop&&prop.axis&&prop.axis&&prop.axis.y) {
   currentObject.position.y = currentObject.position.y+Math.cos(sp) * body.scale.y;
}
if(prop&&prop.axis&&prop.axis&&prop.axis.z) {
    currentObject.position.z = currentObject.position.z+Math.sin(sp) * body.scale.z - 2;
}
   }
   aR();
  },
  axisRotation:function(position,customProp) {
    speed=0;
    sp=speed;
    angle=0;
    axis = {
     x: false,
     y: false,
     z: false,
    }
    if(customProp&&customProp!=="") {
     eval(customProp);
    }
    function aR() {
    requestAnimationFrame(aR);
    sp+=speed;
    if(axis.x) {
    camera.position.x = camera.position.x+Math.cos(sp) * angle;
    }
    if(axis.y) {
    camera.position.y = camera.position.y+Math.sin(sp) * angle;
    }
    if(axis.z) {
    camera.position.z = camera.position.z+Math.sin(sp) * angle;
    }
   }
   aR();
  },
  // activate:function(){camera.layers.set(0)},
  // deactivate:function(){camera.layers.set(1)},
  target:function(body){camera.lookAt(body.position)},
  translateX:function(start,end,steps,speed) {
    if(!this.smooth) {
 camera.translateX(start);
}
  if(this.smooth) {
 var tX=start;
 var translating=setInterval(function() {
 if(start<end) {
 tX+=steps;
 camera.translateX(tX);
 }
 if(start>end) {
 tX-=steps;
 camera.translateX(-tX);
 }
  if(start<end&&tX>=end) {
    // console.log("start: "+start+"\nend: "+end+"\nsteps: "+steps+"\nTX: "+tX+"\nresult: "+1)
   clearInterval(translating);
   // console.log("DONE: translated from "+start+" to "+end);
  }
  if(start>end&&tX<=end) {
    // console.log("start: "+start+"\nend: "+end+"\nsteps: "+steps+"\nTX: "+tX+"\nresult: "+2)
   clearInterval(translating);
   // console.log("DONE: translated from "+start+" to "+end);
   }
  },speed);
 }
},
translateY:function(start,end,steps,speed) {
  if(!this.smooth) {
    camera.translateY(start);
  }
  if(this.smooth) {
 var tY=start;
 var translating=setInterval(function() {
 if(start<end) {
 tY+=steps;
 camera.position.y=tY;
 }
 if(start>end) {
 tY-=steps;
 camera.position.y=tY;
 }
  if(start<end&&camera.position.y>=end) {
   clearInterval(translating);
   camera.position.y=end;
   // console.log("DONE: translated from "+start+" to "+end);
  }
  if(start>end&&camera.position.y<=end) {
   clearInterval(translating);
   camera.position.y=end;
   // console.log("DONE: translated from "+start+" to "+end);
   }
  },speed);
  // var _ra;
  // if(time&&time!=="") {
  //   setTimeout(function() {
  //    clearInterval(translating);
  //    _ra=setInterval(() => {
  //     if(start<end) {
  //      tY-=0.1;
  //      camera.translateY(tY);
  //     }
  //     if(start>end) {
  //      tY+=0.1;
  //      camera.translateY(tY);
  //     }
  //    }, 0);
  //    setTimeout(() => {
  //     clearInterval(_ra);
  //    }, time);
  //   },time);
  //  }
 }
},
translateZ:function(start,end,steps,speed) {
  if(!this.smooth) {
    camera.translateY(start);
  }
  if(this.smooth) {
 var tZ=start;
 var translating=setInterval(function() {
 if(start<end) {
 tZ+=steps;
 camera.position.z=tZ;
 }
 if(start>end) {
 tZ-=steps;
 camera.position.z=tZ;
 }
  if(start<end&&camera.position.z>=end) {
   clearInterval(translating);
   camera.position.z=end;
   // console.log("DONE: translated from "+start+" to "+end);
  }
  if(start>end&&camera.position.z<=end) {
   clearInterval(translating);
   camera.position.z=end;
   // console.log("DONE: translated from "+start+" to "+end);
   }
  },speed);
 }
}

//   var q_w=0;
// setInterval(function() {
//  console.log(q_w);
// });
// function nth() {
// var th=setInterval(function() {
//  q_w+=0.1;
//  camera.quaternion._w=q_w;
//  if(q_w>=3) {
//   clearInterval(th);
//   oth()
//  }
// },10);
// }
// nth();
// function oth() {
// var wth=setInterval(function() {
//   q_w-=0.1;
//  camera.quaternion._w=q_w;
//  if(q_w<=0) {
//   clearInterval(wth);
//   nth();
//   }
// },10)
// }




 },
//  generatedNumbers:"",
//  generate: {
//  numbers: function(position,scale,customProp) {
//    type="integer"; 
//    length=2;
//    min=10;
//    max=99;
//    if(customProp&&customProp!=="") {
//     eval(customProp);
//    }
//    if(this.num!=="") {
//    UYC.generatedNumbers="";
//    }
//   //  len=prop.split("length=").toString().split(", max=").toString().split(", min=").toString().split(",")[1]
//   //  max=prop.split("length=").toString().split(", max=").toString().split(", min=").toString().split(",")[2]
//   //  min=prop.split("length=").toString().split(", max=").toString().split(", min=").toString().split(",")[3]
//   //  type=prop.split("length=").toString().split(", max=").toString().split(", min=").toString().split(",")[4].split(" ").join("")
//    ff=""
//    console.log("type: "+type+"\nlength: "+length+"\nmin: "+min+"\nmax: "+max);
//    if(type=="integer") {
//  for(var nums=0;nums<length;nums++) {
//     rand1=Math.floor(Math.random() * max) + min;
//     UYC.generatedNumbers+=Math.floor(Math.random() * max) + min;
//     }
//    }
//    if(type=="float"&&length>1) {
//  for(var nums=0;nums<length;nums++) {
//      ff+=Math.floor(Math.random() * max) + min;
//      UYC.generatedNumbers=Number(ff[0][0]+"."+ff.slice(1));
//     }
//    }
//    if(type=="float"&&length==1) {
//     terminal.warn("You can't float a "+length+" length number.")
//    }
//    return UYC.generatedNumbers;
//   }
//  }
   }
   UYC.assets.push("asset_"+localStorage.getItem('assets'))
   }
  checkStorage()
  setInterval(function() {
   camera.setFocalLength(UYC.camera.focalLength);
   camera.filmGauge=UYC.camera.filmGauce;
  })
  // if(localStorage.getItem('assets').length==0){
  //   UYC = {
  //     assets: []
  //  }
  //  UYC.assets.push(localStorage.getItem('assets'))
  // }
  var id
  
  if(localStorage.getItem("code")){
      if(localStorage.getItem("code").length>0&&localStorage.getItem("_autoload")=="yes") {
          //alert('placing: code')
          setTimeout(function(){
          editor.setValue(localStorage.getItem("code"))
          },3)
          }
          //ts()
      }
  _terminal.style.visibility="hidden"
  spriteBtn.style.background="rgba(136,136,136,1)"
  CD_fps.value=localStorage.getItem("cd_speed")
  String.prototype.removeNumbers = function() {
 return this.split("0").join("").split("1").join("").split("2").join("").split("3").join("").split("4").join("").split("5").join("").split("6").join("").split("7").join("").split("8").join("").split("9").join("");
};
  String.prototype.getCharBetween = function(t, i) {
if(!i||i&i=="") {
  return this.split(t.split(" ").join("").split("&")[0]).pop().split(t.split(" ").join("").split("&")[1])[0];
 };
if(i) {
  // for(var i = 0; i < this.split(t.split(" &")[0]).length; i++) {
   return this.split(t.split(" &")[0])[i].split(t.split("& ")[1])[0];
  // };
 };
};
// function _fnInit(w, t) {
//  for(var i = 0; i < w.split(t.split(" &")[0]).length; i++) {
//   if(w.split(t.split(" &")[0])[i].split(t.split("& ")[1])[0].startsWith("(")) {
//    if(w.split(t.split(" &")[0])[i].split(t.split("& ")[1])[0].endsWith(" ")) {
//     return w.split(t.split(" &")[0])[i].split(t.split("& ")[1])[0].split(" ")[0];
//    }
//    else {
//     return w.split(t.split(" &")[0])[i].split(t.split("& ")[1])[0];
//    };
//    // .split("(").join("")
//   };
//  };
// };
String.prototype.getCharBefore = function(t) {
 return this.split(t)[0];
};
String.prototype.getCharAfter = function(t) {
 return this.split(t)[1];
};
// UYC.convert.color.getFirst = function() {
//  return true; // Fix...
// }
  if(typeof localStorage.getItem("lastScript") === 'string' || localStorage.getItem("lastScript") && typeof localStorage.getItem("lastScript").split("__DISPLAYASSET")[0] === 'string') {
   eval(localStorage.getItem("lastScript").split("__DISPLAYASSET")[0]);
  };
  if(localStorage.getItem("ID")) {
   a_ID = localStorage.getItem("ID")
  }
  window.onload=function(){
    // tutorialBg.style.visibility="hidden"
    document.getElementsByTagName("canvas")[0].style.width=960
    // document.getElementsByTagName("canvas")[0].style.height=window.innerHeight
    pluginBtn.style.background="rgb(136,136,136)"
    document.getElementsByClassName("loading-modal")[0].remove()
    if(!localStorage.getItem("assets")) {
    UYC.assets=[]
   localStorage.setItem("assets",UYC.assets)
  }
  if(localStorage.getItem("assets")) {
      UYC.assets = localStorage.getItem("assets")
  }
  
    //if(typeof UYC=="object"&&UYC.length>0&&UYC.assets[0].charAt(0)){console.log(UYC.assets);UYC.assets[0].substring(1)}
    if(typeof UYC=="object"&&localStorage.getItem("assets").startsWith(",")){localStorage.setItem("assets",UYC["assets"].substring(2));setTimeout(function(){UYC["assets"]=localStorage.getItem("assets")},3)}
    //if(typeof UYC=="object"&&UYC['assets'].startsWith(',')){eval('UYC["assets"].substring(2);/*setTimeout(function(){alert(UYC["assets"])},1000)*/');}
    if(localStorage.getItem("lastScript")==null&&localStorage.getItem("lastImg")==null||localStorage.getItem("lastScript")==''&&localStorage.getItem("lastImg")!==''||localStorage.getItem("lastImg")==null&&localStorage.getItem("lastScript")==null||localStorage.getItem("lastImg")==''&&localStorage.getItem("lastScript")=='') {
      id=1
    }
    else {
      id=2
    }
  if(localStorage.getItem("ID")>1&&localStorage.getItem("lastImg")!==null&&localStorage.getItem("lastScript")==null){
    // createSpriteAS()
   //localStorage.setItem("alp",0)
  }
  if(localStorage.getItem("ID")>1&&localStorage.getItem("lastScript")!==null&&localStorage.getItem("lastImg")==null){
    // createScriptAS()
   //localStorage.setItem("alp",0)
  }
  if(localStorage.getItem("ID")>1&&localStorage.getItem("lastScript")!==null&&localStorage.getItem("lastImg")!==null){
    // createSpriteAS()
    // createScriptAS()
   //localStorage.setItem("alp",0)
  }
  if(!localStorage.getItem("alp")) {
      loaa=0
   localStorage.setItem("alp", parseInt(loaa))
  }
  if(localStorage.getItem("alp")) {
      loaa = parseInt(localStorage.getItem("alp"))
  }
  
  if(document.getElementsByClassName("CodeMirror-hscrollbar")[0]){
      document.getElementsByClassName("CodeMirror-hscrollbar")[0].style.zIndex=4
  }
  if(!localStorage.getItem('usingTheme')) {
      localStorage.setItem('usingTheme', '3024-night')
  }
  if(localStorage.getItem("previewingTheme")){
      previewThemeBtn.innerText="Preview Theme: "+localStorage.getItem("previewingTheme")
   useThemeBtn.innerText="Use Theme: "+localStorage.getItem("previewingTheme")
  }
  else {
   previewThemeBtn.innerText="Preview Theme: Default (3024-night)"
   useThemeBtn.innerText="Use Theme: Default (3024-night)"
  }
      allCompilerArea.onselectstart=function(){return false}
      // if(localStorage.getItem("_autoload")=="yes"){
  
      // }
  
  //   themeSelectorBtn.innerHTML=themes[0]
  //   themeSelectorBtn2.innerHTML=themes[1]
  
    var month = new Array();
    month[0] = "January";
    month[1] = "February";
    month[2] = "March";
    month[3] = "April";
    month[4] = "May";
    month[5] = "June";
    month[6] = "July";
    month[7] = "August";
    month[8] = "September";
    month[9] = "October";
    month[10] = "November";
    month[11] = "December";
    var d = new Date();
    var n = month[d.getMonth()];
  var t
  //t = new Date(localStorage.getItem("latestUpdateHMS"));
  function updateTimer(t) {
      var time = t - new Date();
      return {
          'days': Math.floor(time / (1000 * 60 * 60 * 24*2)),
          'hours': Math.floor((time/(1000 * 60 * 60)) % 24),
          'minutes': Math.floor((time / 1000 / 60) % 60),
          'seconds': Math.floor((time / 1000) % 60),
          'total': time
      };
  };
  function startTimer(t) {
      var timerInterval = setInterval(function() {
          var timer = updateTimer(t);
          //timer.seconds//(/*timer.days+':'+timer.hours+":"+timer.minutes+":"+*/timer.seconds)
     
      }, 1000);
  };
      startTimer(t);
      // if(!localStorage.getItem("latestUpdateHMS")){
      //    //localStorage.setItem("lastUpdated",parseInt(new Date().getMonth()+1)+"/"+new Date().getDate()+"/"+new Date().getFullYear()+", "+new Date().getHours()+":"+new Date().getMinutes()+":"+new Date().getSeconds())
      //    localStorage.setItem("latestUpdateHMS",n+' '+new Date().getDate()+', '+new Date().getFullYear()+' '+new Date().getHours()+':'+new Date().getMinutes()+':'+new Date().getSeconds())
      // }
      tutTxt97.innerHTML="Latest update: "+localStorage.getItem("latestUpdate")
      if(!localStorage.getItem("latestUpdate")){
         localStorage.setItem("latestUpdate",parseInt(new Date().getMonth()+1)+"/"+new Date().getDate()+"/"+new Date().getFullYear()+", "+new Date().getHours()+":"+new Date().getMinutes()+":"+new Date().getSeconds())
      }
      else {
          return false
      }
      loadFavicon()
      //if(typeof localStorage.getItem("code") !== undefined)
      //if(typeof localStorage.getItem("code") !== undefined)
  }
  function showCurrentPlugins() {
   terminal.table(plugins)
  }
  __aFaS = ["audio.system.level","audio.microphone.level","showInfo","hideInfo","thirdPerson","createStaticCube","createDistortedObject","createBubble","SkyBox","createSpriteText","createSprite","createReflectiveObject","createWater","setGravity","setBodyQuality","GUI.addHeading","createText","setWireframe","addGlow","addTexture","body.rotation.axis","setEmissive","setOpacity","setTransparency","perspectiveCamera","orthographicCamera","createAmbientLight","createPointLight","createAreaLight","createLensflare","createHemisphereLight","createDirectionalLight","createAzimuth","createFog","createGroup","createTerrain","createGround","createGrid","createReflectiveBody","createShape","setShader","configShader","addHelper","addOutline","createGLTF","playObjectAnimation","createVideo","vehicleControl","unstring","getDefaultValuesFrom","createCollada","createStaticOBJ","importObj","createParticle","picker","createMTL","createOBJ","renderView","smoothControl","setText","createFrame","addButton","count","center","addImage","addAudio","playAudio","checkBody","variable","array","getDataType","showStatus","showStatus","controller.btnPressed","controller.vibration","setKeyFn","loadPlugin","createCloth","createSpotLight","createLaser","IMPORT","forLoop","timerLoop","createProgres","wait","createDialog","createTimer","timer.startTimer","timer.pauseTimer","timer.releaseTimer","timer.restartTimer","timer.get","timer.set","removeBody","importContext","addForce","attach","createStack","onRaycast","countRepeatedChars","getAnimationsFrom","displayAnimationFrom","getKeyValue","terminal.log","terminal.table","terminal.success","terminal.info","terminal.clear","terminal.warn","terminal.error","calc","loadScript","getBodyByIndex","getCameraByIndex","getBodyByName","UYC.convert.color","UYC.GUI.addNumber","UYC.GUI.addColor","UYC.GUI.addBoolean","UYC.GUI.create","UYC.GUI.addButton","UYC.GUI.addFolder","UYC.GUI.addList","UYC.GUI.addString","UYC.GUI.addSlider","background.skybox.setColor","UYC.controls.target","UYC.controls.smooth","UYC.fullscreen","UYC.renderer.time.steps","UYC.renderer.antialias","UYC.renderer.castShadows","UYC.cursor.color","UYC.detect.Emojis","UYC.detect.Empty","UYC.detect.letters","UYC.detect.numbers","UYC.object.position.x","UYC.object.position.y","UYC.object.position.z","UYC.object.position.get","UYC.object.position.set","UYC.transform.Int","UYC.transform.String","UYC.transform.Float","UYC.camera.attachToBody","UYC.camera.unattach","UYC.camera.create","UYC.camera.fadeIn","UYC.camera.position.set","UYC.camera.rotation.set","UYC.camera.axisRotation","UYC.camera.target","UYC.camera.translateX","UYC.camera.translateY","UYC.camera.translateZ","collisionDetection"];
  __aFaV = [`GUI.addHeading(\`
 text="";
 
 fontSize=16;
 stroke=1;
 this.autoTyping=false;
\`)`, `IMPORT(script, ...)`, `SkyBox(\`
 xpos="xpos";
 xneg="xneg";
 ypos="ypos";
 yneg="yneg";
 zpos="zpos";
 zneg="zneg";
\`)`, `UYC.GUI.addBoolean(\`
 bool=bool;
 name='...';
 folder="...";
\`)`, `UYC.GUI.addButton(\`
 text="...";
 onclick=function;
 folder="...";
\`)`, `UYC.GUI.addColor(\`
 color=color;
 name='...';
 folder="...";
\`)`, `UYC.GUI.addFolder(\`
 text="...";
 name="...";
 folder="...";
\`)`, `UYC.GUI.addList(\`
 items=[...];
 selectedItem="...";
 name="...";
 folder="...";
\`)`, `UYC.GUI.addNumber(\`
 num=number;
 name='...';
 folder="...";
\`)`, `UYC.GUI.addSlider(\`
 value=50;
 min=0;
 max=100;
 step=1;
 name='...';
 folder="...";
\`)`, `UYC.GUI.addString(\`
 string="...";
 name="...";
 folder="...";
\`)`, `UYC.GUI.create()`, `UYC.camera.attachToBody(body, \`
 rotation=true;
 rotationCopy=false;
 x=0;
 y=0;
 z=0;
\`)`, `UYC.camera.axisRotation(\`
 speed=0.1;
 angle=1;
 axis = {
  x: true,
  y: false,
  z: true,
 };
\`)`, `UYC.camera.create(\`
 size={x:window.innerWidth,y:window.innerHeight};
 
\`)`, `UYC.camera.fadeIn(color, \`
 afterFade=function() {
  ...
 }
 onEnd=function() {
  ...
 }
\`)`, `UYC.camera.position.set(x, y, z)`, `UYC.camera.rotation.set(x, y, z)`, `UYC.camera.target(body)`, `UYC.camera.translateX(start, end, steps, speed)`, `UYC.camera.translateY(start, end, steps, speed)`, `UYC.camera.translateZ(start, end, steps, speed)`, `UYC.camera.unattach(\`
 returnToPreviousPosition=false;
 cameraAttachment=false;
\`)`, `UYC.controls.smooth(status)`, `UYC.controls.target(body, \`
 x=x;
 y=y;
 z=z;
\`)`, `UYC.convert.color("conversion_to_conversion => value")`, `UYC.cursor.color(color)`, `UYC.detect.Emojis(input)`, `UYC.detect.Empty(input ,"detectSpaceChars")`, `UYC.detect.letters(input)`, `UYC.detect.numbers(input)`, `UYC.fullscreen()`, `UYC.object.position.get(body)`, `UYC.object.position.set(body, {x:0,y:0,z:0})`, `UYC.object.position.x(body, start, end, speed, \`
 onEnd=function() {
  ...
 }
\`)`, `UYC.object.position.y(body, start, end, steps, speed, \`
 onEnd=function() {
  ...
 }
\`)`, `UYC.object.position.z(body, start, end, steps, speed, \`
 onEnd=function() {
  ...
 }
\`)`, `UYC.renderer.antialias(status)`, `UYC.renderer.castShadows()`, `UYC.renderer.time.steps(steps)`, `UYC.transform.Float(number)`, `UYC.transform.Int(number)`, `UYC.transform.String("emoji (emoji) to unicode")`, `addAudio(\`
 currentTime=0;
 source="...";
 id="...";
\`)`, `addButon(\`
 
 scale={x:1,y:1};
 text="...";
 id="...";
\`)`, `addForce(body, {x:0,y:0,z:0})`, `addGlow(body, ...)`, `addHelper(body)`, `addImage(\`
 
 scale={x:1,y:1};
 stackOrder=true;
 source="...";
 id="...";
\`)`, `addOutline(body, \`
 color='white';
 name="...";
 group=bool;
\`)`, `addTexture(body, texture)`, `array(name, values)`, `attach(body, body, color)`, `audio.microphone.level()`, `audio.system.level(id).readAudio()`, `background.skybox.setColor(r, g, b)`, `body.rotation.axis(body, \`
 speed=0.1;
 axis.x=true;
 axis.y=false;
 axis.z=true;
\`);`, `calc("number between number and number")`, `center(element)`, `checkBody(body, ...)`, `collisionDetection(boolean, object, object, ...)`, `configShader(shader, configuration)`, `controller.btnPressed(button, ...)`, `controller.vibration(delay, duration, weakMagnitude, strongMagnitude)`, `count("... in ...")`, `countRepeatedChars(char)`, `createAmbientLight(color)`, `createAreaLight(\`
 position={x:0,y:0,z:-1};
 scale={x:1,y:1};
 intensity=1;
 visible=true;
 color="#ffffff";
\`)`, `createAzimuth(speed, color)`, `createBubble(\`
 source = [
  'Assets/Skybox/xpos.png', 'Assets/Skybox/xneg.png',
  'Assets/Skybox/ypos.png', 'Assets/Skybox/yneg.png',
  'Assets/Skybox/zpos.png', 'Assets/Skybox/zneg.png'
 ]
 scale.x=1;
 scale.y=1;
 scale.z=1;
 position.x=0;
 position.y=0;
 position.z=0;
\`)`, `createCloth(\`
 DAMPING = 0.03;
 DRAG = 1 - DAMPING;
 MASS = .1;
 restDistance = 25;
 xSegs = 10;
 ySegs = 10;
 clothFunction = plane(restDistance * xSegs, restDistance * ySegs);
\`)`, `createCollada(collada, ...)`, `createDialog(\`
 title="...";
 text="...";
 autoTyping=false;
\`)`, `createDirectionalLight(\`
 position={x:0.1,y:0,z:0};
 distance=5;
 intensity=1;
 color="#ffffff";
\`)`, `createDistortedObject(\`
 texture='';
 position.x=0;
 position.y=0;
 position.z=0;
 scale.x=0;
 scale.y=0;
 scale.z=0;
 noiseScale=0.5;
 blendSpeed=0.01;
 blendOffset=0.25;
 bumpSpeed=0.15;
 bumpSpeed=40.0
\`)`, `createFog(color, near, far)`, `createFrame(\`
 
 scale={x:1,y:1};
 color='white';
 id='...';
\`)`, `createGLTF(gltf, ...)`, `createGrid(\`
 
 scale={x:1,z:1};
 size=10;
 divisions=10;
\`)`, `createGround(\`
 
 size="5x5x5";
 color="#ffffff";
\`)`, `createGroup(name)`, `createHemisphereLight(\`
 
 intensity=1;
 skyColor='#ffffff';
 color="#ffffff";
\`)`, `createLaser(\`
 
 
\`)`, `createLensflare(\`
 
 color="#ffffff"
\`)`, `createMTL(object, mtl, ...)`, `createOBJ(object, ...)`, `createParticle(\`
 position = {x:0,y:0,z:0};
 size = 1;
 color: new THREE.Color();
 alpha = 1.0;
 velocity = new THREE.Vector3(0, 0, 0);
 texture="...";
 duration = ...;
 rotation = ...;
\`)`, `createPointLight(\`
 color='#ffffff';
 distance=5;
 
 
\`)`, `createProgress(\`
 position={x:"def",y:"def"};
 scale={x:"def",y:"def"};
 color='white';
 id="...";
\`)`, `createReflectiveBody("Shape(width, height, depth)", ...)`, `createReflectiveObject(\`
 shape="random";
 
 
\`)`, `createShape(\`
 shape='';
 
 
 color="gray";
\`)`, `createSpotLight(\`
 
 
 animated=false;
\`)`, `createSprite(\`
 texture="";
 
 
\`)`, `createSpriteText(\`
 text="";
 fontsize=24;
 size={x:100,y:50,z:1.0};
 borderColor={r:0, g:0, b:0, a:1.0};
 backgroundColor={r:0, g:0, b:0, a:0.8};
\`)`, `createStack(\`
 
 color="white";
 colums=5;
 rows=5;
\`)`, `createStaticOBJ(object, ...)`, `createTerrain(\`
 
 color="#ffffff";
 texture="...";
 textureRepeat=10;
\`)`, `createText(\`
 text="";
 font="https://unpkg.com/three@0.77.0/examples/fonts/helvetiker_bold.typeface.json";
 color="gray";
 letterSpacing=0;
 curveSegments=20;
 bevelThickness=0.1;
 bevelSize=0.1;
 bevelEnabled=false;
 
 
\`);`, `createTimer(minute, \'conversion[time]:...', \`
 position={x:"def",y:"def"};
 timeSpeed=1000;
 theme='random';
 fontSize=150;
\`)`, `createVideo(\`
 source='...';
 
 
\`)`, `createWater(\`
 texture="";
 fixed=true;
 
 
\`);`, `displayAnimationFrom(body)`, `forLoop(interval, intervalName, ...)`, `getAnimationsFrom(body)`, `getBodyByIndex(index)`, `getBodyByName(name)`, `getCameraByIndex(index)`, `getDataType(variable)`, `getDefaultValuesFrom(function)`, `getKeyValue(object, index)`, `hideInfo()`, `importContext(context)`, `importObj(object, ...)`, `loadPlugin(...)`, `loadScript(asset)`, `onRaycast(body, event, ...)`, `orthographicCamera()`, `perspectiveCamera()`, `picker(color, ...)`, `playAudio(id)`, `playObjectAnimation(body, animation)`, `removeBody(body)`, `renderView(status)`, `setBodyQuality(body,quality)`, `setEmissive(body, {r: 0, g:0, b:0})`, `setGravity(x,y,z)`, `setKeyFn(function)`, `setOpacity(body, 1)`, `setShader(shader, status)`, `setText(id, text)`, `setTransparency(body, bool)`, `setWireframe(body, boolean)`, `showInfo()`, `showStatus()`, `smoothControl(body, \`
 xVal=body.position.x;
 zVal=body.position.y;
 velXVal=0;
 velZVal=0;
 speedVal=0.5;
 frictionVal=0.98;
 keys = ["up", "down", "left", "right"];
\`)`, `terminal.clear()`, `terminal.error(text)`, `terminal.info(text)`, `terminal.log(text)`, `terminal.success(text)`, `terminal.table(array)`, `terminal.warn(text)`, `thirdPerson(body,\`
 time=0;velocity=0.0;
 movementSpeed=0.1;
 rotationSpeed=-0.05;
 stop=1;
 DEGTORAD=0.01745327
\`)`, `timer.get.theme()`, `timer.pauseTimer()`, `timer.releaseTimer()`, `timer.restartTimer()`, `timer.set.theme(theme)`, `timer.startTimer()`, `timerLoop(..., time)`, `unstring(string)`, `variable(name, value)`, `vehicleControl(body, \`
 moveSpeed = 200 * delta;
 rotateSpeed = Math.PI / 2 * delta;
\`)`, `wait(time, converison, ...)`];
  window.onerror=function(error){
      errorDetected=true
      //alert(error)
      //var zxc = error.split("Uncaught ReferenceError:").join("").split("is not defined").join("")
      //var newStorage=localStorage.getItem("code").split(zxc).join("")
      //alert(error)
      //localStorage.setItem("code",newStorage)
      //window.location.reload()
  }
  var i = -1
  // CodeMirror.defineMode("javascript", function() { // [FIX]: CHANGE "javascript" to "UYC_PROGRAMMING_LANGUAGE"
  //     return {
  //         token: function(stream,state) {
  //             if (stream.match("removeBody")||stream.match("collisionDetection")||stream.match("createDialog")||stream.match("setWireframe")||stream.match("getDataType")||stream.match("variable")||stream.match("addForceY")||stream.match("addForceX")||stream.match("setWireframe")||stream.match("createRect")||stream.match("createGround")||stream.match("wait")) {
  //                 return "style1";
  //             }
  //             else if (stream.match("0")||stream.match("1")||stream.match("2")||stream.match("3")||stream.match("4")||stream.match("5")||stream.match("6")||stream.match("7")||stream.match("8")||stream.match("9")) {
  //                 return "style2";
  //             } 
  //             else if (stream.match('UYC_render')||stream.match('getBody')||stream.match('def')||stream.match("true")||stream.match("false")||stream.match("elems")) {
  //                 return "style3";
  //             } 
  //             else {
  //                 stream.next();
  //                 return null;
  //             }
  //         }
  //     };
  // });
  
  var editor = CodeMirror.fromTextArea(document.getElementById("compilerTextArea"), {
    lineNumbers: true,
    styleActiveLine: true,
    mode: "javascript",
    indentWithTabs: true,
    gutters: ["CodeMirror-lint-markers"],
    lint: true,
  meta: {
     lineComment: 'COM'
   }
  });
  (function () {
    editor.setOption('extraKeys', {
      // 'Ctrl-E': function () {
      //   snippet();
      // } });
      // editor.on("keypress", function(event) {
      //   snippet();
      // })
    })
    editor.on("keypress", function(event) {
     snippet();
    })
//       editor.on('cursorActivity', function() {
//     var A1 = editor.getCursor().line;
//     var A2 = editor.getCursor().ch;

//     var B1 = editor.findWordAt({line: A1, ch: A2}).anchor.ch;
//     var B2 = editor.findWordAt({line: A1, ch: A2}).head.ch;

//     console.log(editor.getRange({line: A1,ch: B1}, {line: A1,ch: B2}));
// });
    var snippets = [
    // { text: 'createRect()', displayText: 'createRect' },
    // { text: 'removeBody()', displayText: 'removeBody' },
    // { text: 'collisionDetection()', displayText: 'collisionDetection' },
    // { text: 'createDialog()', displayText: 'createDialog' },
    // { text: 'setWireframe()', displayText: 'setWireframe' },
    // { text: 'getDataType()', displayText: 'getDataType' },
    // { text: 'getKey', displayText: 'getKey' },
    // { text: 'variable()', displayText: 'variable' },
    // { text: 'IMPORT()', displayText: 'IMPORT' },
    // { text: 'loop()', displayText: 'loop' },
    // { text: 'def', displayText: 'def' },
    // { text: 'getBody[]', displayText: 'getBody' },
    // { text: 'UYC_render', displayText: 'UYC_render' },
    // { text: 'addForceY()', displayText: 'addForceY' },
    // { text: 'addForceX()', displayText: 'addForceX' },
    // { text: 'loadPlugin()', displayText: 'loadPlugin' },
    // { text: 'variable()', displayText: 'variable' },
    // { text: 'createGround()', displayText: 'createGround' },
    // { text: 'wait()', displayText: 'wait' }
    { text: `GUI.addHeading(\`
 text="";
 
 fontSize=16;
 stroke=1;
 this.autoTyping=false;
\`)`, displayText: 'GUI.addHeading' },{ text: `IMPORT(script, ...)`, displayText: 'IMPORT' },{ text: `SkyBox(\`
 xpos="xpos";
 xneg="xneg";
 ypos="ypos";
 yneg="yneg";
 zpos="zpos";
 zneg="zneg";
\`)`, displayText: 'SkyBox' },{ text: `UYC.GUI.addBoolean(\`
 bool=bool;
 name='...';
 folder="...";
\`)`, displayText: 'UYC.GUI.addBoolean' },{ text: `UYC.GUI.addButton(\`
 text="...";
 onclick=function;
 folder="...";
\`)`, displayText: 'UYC.GUI.addButton' },{ text: `UYC.GUI.addColor(\`
 color=color;
 name='...';
 folder="...";
\`)`, displayText: 'UYC.GUI.addColor' },{ text: `UYC.GUI.addFolder(\`
 text="...";
 name="...";
 folder="...";
\`)`, displayText: 'UYC.GUI.addFolder' },{ text: `UYC.GUI.addList(\`
 items=[...];
 selectedItem="...";
 name="...";
 folder="...";
\`)`, displayText: 'UYC.GUI.addList' },{ text: `UYC.GUI.addNumber(\`
 num=number;
 name='...';
 folder="...";
\`)`, displayText: 'UYC.GUI.addNumber' },{ text: `UYC.GUI.addSlider(\`
 value=50;
 min=0;
 max=100;
 step=1;
 name='...';
 folder="...";
\`)`, displayText: 'UYC.GUI.addSlider' },{ text: `UYC.GUI.addString(\`
 string="...";
 name="...";
 folder="...";
\`)`, displayText: 'UYC.GUI.addString' },{ text: `UYC.GUI.create()`, displayText: 'UYC.GUI.create' },{ text: `UYC.camera.attachToBody(body, \`
 rotation=true;
 rotationCopy=false;
 x=0;
 y=0;
 z=0;
\`)`, displayText: 'UYC.camera.attachToBody' },{ text: `UYC.camera.axisRotation(\`
 speed=0.1;
 angle=1;
 axis = {
  x: true,
  y: false,
  z: true,
 };
\`)`, displayText: 'UYC.camera.axisRotation' },{ text: `UYC.camera.create(\`
 size={x:window.innerWidth,y:window.innerHeight};
 
\`)`, displayText: 'UYC.camera.create' },{ text: `UYC.camera.fadeIn(color, \`
 afterFade=function() {
  ...
 }
 onEnd=function() {
  ...
 }
\`)`, displayText: 'UYC.camera.fadeIn' },{ text: `UYC.camera.position.set(x, y, z)`, displayText: 'UYC.camera.position.set' },{ text: `UYC.camera.rotation.set(x, y, z)`, displayText: 'UYC.camera.rotation.set' },{ text: `UYC.camera.target(body)`, displayText: 'UYC.camera.target' },{ text: `UYC.camera.translateX(start, end, steps, speed)`, displayText: 'UYC.camera.translateX' },{ text: `UYC.camera.translateY(start, end, steps, speed)`, displayText: 'UYC.camera.translateY' },{ text: `UYC.camera.translateZ(start, end, steps, speed)`, displayText: 'UYC.camera.translateZ' },{ text: `UYC.camera.unattach(\`
 returnToPreviousPosition=false;
 cameraAttachment=false;
\`)`, displayText: 'UYC.camera.unattach' },{ text: `UYC.controls.smooth(status)`, displayText: 'UYC.controls.smooth' },{ text: `UYC.controls.target(body, \`
 x=x;
 y=y;
 z=z;
\`)`, displayText: 'UYC.controls.target' },{ text: `UYC.convert.color("conversion_to_conversion => value")`, displayText: 'UYC.convert.color' },{ text: `UYC.cursor.color(color)`, displayText: 'UYC.cursor.color' },{ text: `UYC.detect.Emojis(input)`, displayText: 'UYC.detect.Emojis' },{ text: `UYC.detect.Empty(input ,"detectSpaceChars")`, displayText: 'UYC.detect.Empty' },{ text: `UYC.detect.letters(input)`, displayText: 'UYC.detect.letters' },{ text: `UYC.detect.numbers(input)`, displayText: 'UYC.detect.numbers' },{ text: `UYC.fullscreen()`, displayText: 'UYC.fullscreen' },{ text: `UYC.object.position.get(body)`, displayText: 'UYC.object.position.get' },{ text: `UYC.object.position.set(body, {x:0,y:0,z:0})`, displayText: 'UYC.object.position.set' },{ text: `UYC.object.position.x(body, start, end, speed, \`
 onEnd=function() {
  ...
 }
\`)`, displayText: 'UYC.object.position.x' },{ text: `UYC.object.position.y(body, start, end, steps, speed, \`
 onEnd=function() {
  ...
 }
\`)`, displayText: 'UYC.object.position.y' },{ text: `UYC.object.position.z(body, start, end, steps, speed, \`
 onEnd=function() {
  ...
 }
\`)`, displayText: 'UYC.object.position.z' },{ text: `UYC.renderer.antialias(status)`, displayText: 'UYC.renderer.antialias' },{ text: `UYC.renderer.castShadows()`, displayText: 'UYC.renderer.castShadows' },{ text: `UYC.renderer.time.steps(steps)`, displayText: 'UYC.renderer.time.steps' },{ text: `UYC.transform.Float(number)`, displayText: 'UYC.transform.Float' },{ text: `UYC.transform.Int(number)`, displayText: 'UYC.transform.Int' },{ text: `UYC.transform.String("emoji (emoji) to unicode")`, displayText: 'UYC.transform.String' },{ text: `addAudio(\`
 currentTime=0;
 source="...";
 id="...";
\`)`, displayText: 'addAudio' },{ text: `addButon(\`
 
 scale={x:1,y:1};
 text="...";
 id="...";
\`)`, displayText: 'addButton' },{ text: `addForce(body, {x:0,y:0,z:0})`, displayText: 'addForce' },{ text: `addGlow(body, ...)`, displayText: 'addGlow' },{ text: `addHelper(body)`, displayText: 'addHelper' },{ text: `addImage(\`
 
 scale={x:1,y:1};
 stackOrder=true;
 source="...";
 id="...";
\`)`, displayText: 'addImage' },{ text: `addOutline(body, \`
 color='white';
 name="...";
 group=bool;
\`)`, displayText: 'addOutline' },{ text: `addTexture(body, texture)`, displayText: 'addTexture' },{ text: `array(name, values)`, displayText: 'array' },{ text: `attach(body, body, color)`, displayText: 'attach' },{ text: `audio.microphone.level()`, displayText: 'audio.microphone.level' },{ text: `audio.system.level(id).readAudio()`, displayText: 'audio.system.level' },{ text: `background.skybox.setColor(r, g, b)`, displayText: 'background.skybox.setColor' },{ text: `body.rotation.axis(body, \`
 speed=0.1;
 axis.x=true;
 axis.y=false;
 axis.z=true;
\`);`, displayText: 'body.rotation.axis' },{ text: `calc("number between number and number")`, displayText: 'calc' },{ text: `center(element)`, displayText: 'center' },{ text: `checkBody(body, ...)`, displayText: 'checkBody' },{ text: `collisionDetection(boolean, object, object, ...)`, displayText: 'collisionDetection' },{ text: `configShader(shader, configuration)`, displayText: 'configShader' },{ text: `controller.btnPressed(button, ...)`, displayText: 'controller.btnPressed' },{ text: `controller.vibration(delay, duration, weakMagnitude, strongMagnitude)`, displayText: 'controller.vibration' },{ text: `count("... in ...")`, displayText: 'count' },{ text: `countRepeatedChars(char)`, displayText: 'countRepeatedChars' },{ text: `createAmbientLight(color)`, displayText: 'createAmbientLight' },{ text: `createAreaLight(\`
 position={x:0,y:0,z:-1};
 scale={x:1,y:1};
 intensity=1;
 visible=true;
 color="#ffffff";
\`)`, displayText: 'createAreaLight' },{ text: `createAzimuth(speed, color)`, displayText: 'createAzimuth' },{ text: `createBubble(\`
 source = [
  'Assets/Skybox/xpos.png', 'Assets/Skybox/xneg.png',
  'Assets/Skybox/ypos.png', 'Assets/Skybox/yneg.png',
  'Assets/Skybox/zpos.png', 'Assets/Skybox/zneg.png'
 ]
 scale.x=1;
 scale.y=1;
 scale.z=1;
 position.x=0;
 position.y=0;
 position.z=0;
\`)`, displayText: 'createBubble' },{ text: `createCloth(\`
 DAMPING = 0.03;
 DRAG = 1 - DAMPING;
 MASS = .1;
 restDistance = 25;
 xSegs = 10;
 ySegs = 10;
 clothFunction = plane(restDistance * xSegs, restDistance * ySegs);
\`)`, displayText: 'createCloth' },{ text: `createCollada(collada, ...)`, displayText: 'createCollada' },{ text: `createDialog(\`
 title="...";
 text="...";
 autoTyping=false;
\`)`, displayText: 'createDialog' },{ text: `createDirectionalLight(\`
 position={x:0.1,y:0,z:0};
 distance=5;
 intensity=1;
 color="#ffffff";
\`)`, displayText: 'createDirectionalLight' },{ text: `createDistortedObject(\`
 texture='';
 position.x=0;
 position.y=0;
 position.z=0;
 scale.x=0;
 scale.y=0;
 scale.z=0;
 noiseScale=0.5;
 blendSpeed=0.01;
 blendOffset=0.25;
 bumpSpeed=0.15;
 bumpSpeed=40.0
\`)`, displayText: 'createDistortedObject' },{ text: `createFog(color, near, far)`, displayText: 'createFog' },{ text: `createFrame(\`
 
 scale={x:1,y:1};
 color='white';
 id='...';
\`)`, displayText: 'createFrame' },{ text: `createGLTF(gltf, ...)`, displayText: 'createGLTF' },{ text: `createGrid(\`
 
 scale={x:1,z:1};
 size=10;
 divisions=10;
\`)`, displayText: 'createGrid' },{ text: `createGround(\`
 
 size="5x5x5";
 color="#ffffff";
\`)`, displayText: 'createGround' },{ text: `createGroup(name)`, displayText: 'createGroup' },{ text: `createHemisphereLight(\`
 
 intensity=1;
 skyColor='#ffffff';
 color="#ffffff";
\`)`, displayText: 'createHemisphereLight' },{ text: `createLaser(\`
 
 
\`)`, displayText: 'createLaser' },{ text: `createLensflare(\`
 
 color="#ffffff"
\`)`, displayText: 'createLensflare' },{ text: `createMTL(object, mtl, \`
 position = {x:0,y:0,z:0};
 scale = {x:1,y:1,z:1}; 
\`)`, displayText: 'createMTL' },{ text: `createOBJ(object, \`
 var position = {
  x:0,
  y:0,
  z:0
 }
 var scale = {
  x:1,
  y:1,
  z:1
 }
 var texture="...";
\`)`, displayText: 'createOBJ' },{ text: `createParticle(\`
 position = {x:0,y:0,z:0};
 size = 1;
 color: new THREE.Color();
 alpha = 1.0;
 velocity = new THREE.Vector3(0, 0, 0);
 texture="...";
 duration = ...;
 rotation = ...;
\`)`, displayText: 'createParticle' },{ text: `createPointLight(\`
 color='#ffffff';
 distance=5;
 
 
\`)`, displayText: 'createPointLight' },{ text: `createProgress(\`
 position={x:"def",y:"def"};
 scale={x:"def",y:"def"};
 color='white';
 id="...";
\`)`, displayText: 'createProgres' },{ text: `createReflectiveBody("Shape(width, height, depth)", ...)`, displayText: 'createReflectiveBody' },{ text: `createReflectiveObject(\`
 shape="random";
 
 
\`)`, displayText: 'createReflectiveObject' },{ text: `createShape(\`
 shape='';
 
 
 color="gray";
\`)`, displayText: 'createShape' },{ text: `createSpotLight(\`
 
 
 animated=false;
\`)`, displayText: 'createSpotLight' },{ text: `createSprite(\`
 texture="";
 
 
\`)`, displayText: 'createSprite' },{ text: `createSpriteText(\`
 text="";
 fontsize=24;
 size={x:100,y:50,z:1.0};
 borderColor={r:0, g:0, b:0, a:1.0};
 backgroundColor={r:0, g:0, b:0, a:0.8};
\`)`, displayText: 'createSpriteText' },{ text: `createStack(\`
 
 color="white";
 colums=5;
 rows=5;
\`)`, displayText: 'createStack' },{ text: `createStaticOBJ(object, \`
 position = {
  x:0,
  y:0,
  z:0
 };
 scale = {
  x:1,
  y:1,
  z:1
 };
 texture="";
\`)`, displayText: 'createStaticOBJ' },{ text: `createTerrain(\`
 
 color="#ffffff";
 texture="...";
 textureRepeat=10;
\`)`, displayText: 'createTerrain' },{ text: `createText(\`
 text="";
 font="https://unpkg.com/three@0.77.0/examples/fonts/helvetiker_bold.typeface.json";
 color="gray";
 letterSpacing=0;
 curveSegments=20;
 bevelThickness=0.1;
 bevelSize=0.1;
 bevelEnabled=false;
 
 
\`);`, displayText: 'createText' },{ text: `createTimer(minute, 'conversion[time]:...', \`
 position={x:"def",y:"def"};
 timeSpeed=1000;
 theme='random';
 fontSize=150;
\`)`, displayText: 'createTimer' },{ text: `createVideo(\`
 source='...';
 
 
\`)`, displayText: 'createVideo' },{ text: `createWater(\`
 texture="";
 fixed=true;
 
 
\`);`, displayText: 'createWater' },{ text: `displayAnimationFrom(body)`, displayText: 'displayAnimationFrom' },{ text: `forLoop(interval, intervalName, ...)`, displayText: 'forLoop' },{ text: `getAnimationsFrom(body)`, displayText: 'getAnimationsFrom' },{ text: `getBodyByIndex(index)`, displayText: 'getBodyByIndex' },{ text: `getBodyByName(name)`, displayText: 'getBodyByName' },{ text: `getCameraByIndex(index)`, displayText: 'getCameraByIndex' },{ text: `getDataType(variable)`, displayText: 'getDataType' },{ text: `getDefaultValuesFrom(function)`, displayText: 'getDefaultValuesFrom' },{ text: `getKeyValue(object, index)`, displayText: 'getKeyValue' },{ text: `hideInfo()`, displayText: 'hideInfo' },{ text: `importContext(context)`, displayText: 'importContext' },{ text: `importObj(object, ...)`, displayText: 'importObj' },{ text: `loadPlugin(...)`, displayText: 'loadPlugin' },{ text: `loadScript(asset)`, displayText: 'loadScript' },{ text: `onRaycast(body, event, ...)`, displayText: 'onRaycast' },{ text: `orthographicCamera()`, displayText: 'orthographicCamera' },{ text: `perspectiveCamera()`, displayText: 'perspectiveCamera' },{ text: `picker(color, ...)`, displayText: 'picker' },{ text: `playAudio(id)`, displayText: 'playAudio' },{ text: `playObjectAnimation(body, animation)`, displayText: 'playObjectAnimation' },{ text: `removeBody(body)`, displayText: 'removeBody' },{ text: `renderView(status)`, displayText: 'renderView' },{ text: `setBodyQuality(body,quality)`, displayText: 'setBodyQuality' },{ text: `setEmissive(body, {r: 0, g:0, b:0})`, displayText: 'setEmissive' },{ text: `setGravity(x,y,z)`, displayText: 'setGravity' },{ text: `setKeyFn(function)`, displayText: 'setKeyFn' },{ text: `setOpacity(body, value)`, displayText: 'setOpacity' },{ text: `setShader(shader, status)`, displayText: 'setShader' },{ text: `setText(id, text)`, displayText: 'setText' },{ text: `setTransparency(body, bool)`, displayText: 'setTransparency' },{ text: `setWireframe(body, bool)`, displayText: 'setWireframe' },{ text: `showInfo()`, displayText: 'showInfo' },{ text: `showStatus()`, displayText: 'showStatus' },{ text: `smoothControl(body, \`
 xVal=body.position.x;
 zVal=body.position.y;
 velXVal=0;
 velZVal=0;
 speedVal=0.5;
 frictionVal=0.98;
 keys = ["up", "down", "left", "right"];
\`)`, displayText: 'smoothControl' },{ text: `terminal.clear()`, displayText: 'terminal.clear' },{ text: `terminal.error(text)`, displayText: 'terminal.error' },{ text: `terminal.info(text)`, displayText: 'terminal.info' },{ text: `terminal.log(text)`, displayText: 'terminal.log' },{ text: `terminal.success(text)`, displayText: 'terminal.success' },{ text: `terminal.table(array)`, displayText: 'terminal.table' },{ text: `terminal.warn(text)`, displayText: 'terminal.warn' },{ text: `thirdPerson(body,\`
 time=0;velocity=0.0;
 movementSpeed=0.1;
 rotationSpeed=-0.05;
 stop=1;
 DEGTORAD=0.01745327
\`)`, displayText: 'thirdPerson' },{ text: `timer.get.theme()`, displayText: 'timer.get' },{ text: `timer.pauseTimer()`, displayText: 'timer.pauseTimer' },{ text: `timer.releaseTimer()`, displayText: 'timer.releaseTimer' },{ text: `timer.restartTimer()`, displayText: 'timer.restartTimer' },{ text: `timer.set.theme(theme)`, displayText: 'timer.set.theme' },{ text: `timer.startTimer()`, displayText: 'timer.startTimer' },{ text: `timerLoop(..., time)`, displayText: 'timerLoop' },{ text: `unstring(string)`, displayText: 'unstring' },{ text: `variable(name, value)`, displayText: 'variable' },{ text: `vehicleControl(body, \`
 moveSpeed = 200 * delta;
 rotateSpeed = Math.PI / 2 * delta;
\`)`, displayText: 'vehicleControl' },{ text: `wait(time, converison, ...)`, displayText: 'wait' }
  ];

  // function snippet() {
  //     CodeMirror.showHint(editor, function () {
  //       var cursor = editor.getCursor();
  //       var token = editor.getTokenAt(cursor);
  //       var start = token.start;
  //       var end = cursor.ch;
  //       var line = cursor.line;
  //       var currentWord = token.string;
  //       var list = snippets.filter(function (item) {
  //         return item.text.indexOf(currentWord) >= 0;
  //       });
  //       return {
  //         list: list.length ? list : snippets,
  //         from: CodeMirror.Pos(line, start),
  //         to: CodeMirror.Pos(line, end) };
  //     }, { completeSingle: false });
  //   }
  // })();

  function snippet() {
    CodeMirror.showHint(editor, function () {
      // const cursor = editor.getCursor()
      // const token = editor.getTokenAt(cursor)
      // const start = token.start
      // const end = cursor.ch
      // const line = cursor.line
      // const currentWord = token.string
      var word = editor.findWordAt(editor.getCursor()); editor.getRange(word.anchor, word.head);
      const list = snippets.filter(function (item) {
        return item.text.indexOf(editor.getRange(word.anchor, word.head)) >= 0
      })
      return {
        list: list.length ? list : snippets,
        from: CodeMirror.Pos(editor.findWordAt(editor.getCursor()).anchor.line, editor.findWordAt(editor.getCursor()).anchor.ch),
        to: CodeMirror.Pos(editor.findWordAt(editor.getCursor()).anchor.line, editor.findWordAt(editor.getCursor()).anchor.ch+editor.getRange(word.anchor, word.head).length)
      }
    }, { completeSingle: false })
  }
})()
//   CodeMirror.defineSimpleMode('javascript', {
//   meta: {
//      lineComment: '#'
//    },
// });
  var themes = ['3024-night', 'abcdef', 'ambiance', 'base16-dark', 'bespin', 'blackboard', 'cobalt', 'colorforth', 'dracula', 'erlang-dark', 'hopscotch', 'icecoder', 'isotope', 'lesser-dark', 'liquibyte', 'material', 'mbo', 'mdn-like', 'monokai'];
  var theme = themes[Math.floor(Math.random() * themes.length)];
  /*
                                                                  * default
                                                                  * 3024-day
                                                                  * 3024-night
                                                                  * abcdef
                                                                  * ambiance
                                                                  * base16-dark
                                                                  * base16-light
                                                                  * bespin
                                                                  * blackboard
                                                                  * cobalt
                                                                  * colorforth
                                                                  * dracula
                                                                  * duotone-dark
                                                                  * duotone-light
                                                                  * eclipse
                                                                  * elegant
                                                                  * erlang-dark
                                                                  * hopscotch
                                                                  * icecoder
                                                                  * isotope
                                                                  * lesser-dark
                                                                  * liquibyte
                                                                  * material
                                                                  * mbo
                                                                  * mdn-like
                                                                  * midnight
                                                                  * monokai
                                                                  * neat
                                                                  * neo
                                                                  * night
                                                                  * panda-syntax
                                                                  * paraiso-dark
                                                                  * paraiso-light
                                                                  * pastel-on-dark
                                                                  * railscasts
                                                                  * rubyblue
                                                                  * seti
                                                                  * solarized dark
                                                                  * solarized light
                                                                  * the-matrix
                                                                  * tomorrow-night-bright
                                                                  * tomorrow-night-eighties
                                                                  * ttcn
                                                                  * twilight
                                                                  * vibrant-ink
                                                                  * xq-dark
                                                                  * xq-light
                                                                  * yeti
                                                                  * zenburn
                                                                  *
  */
  editor.setOption('theme', themes[0])
  var a="CodeMirror cm-s-"+themes[0]
  var _a="CodeMirror cm-s-"+localStorage.getItem('usingTheme');
  document.getElementsByClassName(a)[0].style.position="absolute"
  document.getElementsByClassName(a)[0].style.left="0%"
  document.getElementsByClassName(a)[0].style.bottom="0%"
  document.getElementsByClassName(a)[0].style.width="100%"
  document.getElementsByClassName(a)[0].style.height="95%"
  
  
  
  
  
  const allRanges = document.querySelectorAll(".range-wrap");
allRanges.forEach(wrap => {
  const range = wrap.querySelector("#CD_fps");
  const bubble = wrap.querySelector(".bubble");
  range.addEventListener("input", () => {
    setBubble(range, bubble);
  });
  setBubble(range, bubble);
});
function setBubble(range, bubble) {
  const val = range.value;
  const min = range.min ? range.min : 0;
  const max = range.max ? range.max : 100;
  const newVal = Number((val - min) * 100 / (max - min));
  bubble.innerHTML = val.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",")+"s";
  bubble.style.left = `calc(${newVal}% + (${8 - newVal * 0.15}px))`;
}
  
  
  
  
  //document.getElementsByClassName("CodeMirror cm-s-"+themes[btnCounter-1]).style.position="absolute"
  var currentTheme
  var btnCounter=0
  var currentThemeNum=0
  var selectedTheme
  function createThemeButtons() {
  for(var i=0;i<themes.length;i++){
   var fs=document.createElement("a")
   var btn=document.createElement("button")
   btnCounter++
   btn.id="themeSelectorBtn"+btnCounter
   btn.innerHTML=themes[btnCounter-1]
   btn.setAttribute("class", "_themeBtn")
   btn.style.background="#000"
   btn.style.width="100%"
   btn.style.height="50"
   btn.style.fontSize="20"
   btn.style.outline="none"
   btn.style.left="0%"
   btn.style.border="none"
   btn.style.cursor="pointer"
   btn.style.position="absolute"
   btn.style.color="#ffffff"
   btn.style.boxShadow="inset 0 0 10px gray"
   btn.onclick=function(event){
       //editor2.options.theme=themes[event.target.id.slice(-1).toString()]
       //editor2.options.theme=themes[themes.indexOf(event.target.innerHTML)]
       var x=themes.indexOf(event.target.innerHTML)
       selectedTheme=x
       previewThemeBtn.innerHTML="Preview Theme: "+event.target.innerHTML
       useThemeBtn.innerHTML="Use Theme: "+event.target.innerHTML
      //  localStorage.setItem('previewingTheme', themes[x])
      //  window.open("themePreview.html")
      }
   btn.style.opacity=0.8
  //  var val = btn.id
  //  function isNumeric(n) {
  //   return !isNaN(parseFloat(n)) && isFinite(n);
  // }
  //  if(isNumeric(val.split("themeSelectorBtn").join(""))){
  //     fs.href="#"+btn.id.slice(0,-2)+parseInt(btnCounter+1)
  //  }
  //  if(isNumeric(val.split("themeSelectorBtn").join(""))){
  //     fs.href="#"+btn.id.slice(0,-1)+parseInt(btnCounter+1)
  //  }
   fs.href="#"+"themeSelectorBtn"+parseInt(btnCounter+1)
   themesTab.appendChild(fs)
   fs.appendChild(btn)
   }
  setTimeout(function(){
   for(var y=0;y<document.getElementsByClassName("_themeBtn").length;y++){
    document.getElementsByClassName("_themeBtn")[y].style.top+=y*937+"px"
    document.getElementsByClassName("_themeBtn")[y].style.color="#ffffff"
   }
  },3)
  }
  function openMyAssets() {
    optionsBtn.style.visibility="hidden"
    themesBtn.style.visibility="hidden"
    challengesBtn.style.visibility="hidden"
    assetsLength=(localStorage.getItem("assets").match(new RegExp("asset_", "g")) || []).length
    if(assetsLength==0){numOfAssets.innerHTML="You don't have any assets. Go to <button id='assetsBtn' onclick='openAssets()'>Assets</button> to get some !"}
    if(assetsLength==1){
      numOfAssets.innerHTML="You have "+(localStorage.getItem("assets").match(new RegExp("asset_", "g")) || []).length+" asset ("+localStorage.getItem("assets").split("asset_").join("")+")"
      for(var i=0;i<localStorage.getItem("assets").split(",").length;i++){
      var z=document.createElement("button");
      var zx=(localStorage.getItem("assets").split(",")[i].split(",").join("").split(" ").join("").replace(","," and ").split("asset_"))
      z.setAttribute("class", "assetBtn");
      z.onclick = function() {
       if(localStorage.getItem("assets").includes(",")) {
        localStorage.setItem("assets", localStorage.getItem("assets").replace("asset_"+this.innerHTML+",", ""));
       }
       else {
        localStorage.setItem("assets", localStorage.getItem("assets").replace("asset_"+this.innerHTML, ""));
       };
       if(assetsLength == 1) {
        numOfAssets.innerHTML="You don't have any assets. Go to <button id='assetsBtn' onclick='openAssets()'>Assets</button> to get some !";
       };
       this.remove();
      };
      z.innerHTML=zx
      setTimeout(function(){z.innerHTML=z.innerHTML.split(",").join("")},3)
      myAssetsBg.appendChild(z)
    }
  }
    if(assetsLength>1) {
      for(var i=0;i<localStorage.getItem("assets").split(",").length;i++){
      var z=document.createElement("button");
      myAssetsBg.appendChild(z)
      z.href="OK"
      z.style.margin="25px"
      z.style.cursor="pointer"
      var zx=(localStorage.getItem("assets").split(",")[i].split(",").join("").replace(","," and ").split("asset_").join(""))
      z.setAttribute("class", "assetBtn");
      z.onclick = function() {
        if(localStorage.getItem("assets").includes(",")) {
        localStorage.setItem("assets", localStorage.getItem("assets").replace("asset_"+this.innerHTML+",", ""));
       }
       else {
        localStorage.setItem("assets", localStorage.getItem("assets").replace("asset_"+this.innerHTML, ""));
       };
       if(assetsLength == 1) {
        numOfAssets.innerHTML="You don't have any assets. Go to <button id='assetsBtn' onclick='openAssets()'>Assets</button> to get some !";
       };
       this.remove();
      };
      z.innerHTML=/*"Info: "+*/zx
    }
    numOfAssets.innerHTML="You have "+(localStorage.getItem("assets").match(new RegExp("asset_", "g")) || []).length+" assets ("+localStorage.getItem("assets").split("asset_").join("")+")"
    }
    myAssetsTab.style.visibility="visible"
    allCompilerArea.style.visibility="hidden"
    document.getElementsByTagName("canvas")[0].style.left="-999"
  }
  var bC=0
  function openThemes() {
   bC++
   optionsBtn.style.visibility="hidden"
   challengesBtn.style.visibility="hidden"
   if(bC==1){createThemeButtons()}
   useScript=false
   document.getElementsByTagName("canvas")[0].style.visibility="hidden"
   themesTab.style.visibility="visible"
   themesBtn.style.visibility="hidden"
   allCompilerArea.style.visibility="hidden"
   document.body.style.backgroundRepeat="no-repeat"
   document.body.style.background="-webkit-gradient(linear, left top, left bottom, from(rgb(70,70,70)), to(#000000)) fixed"
   document.body.style.overflowY="visible"
  }
  function openOptions() {
    document.getElementsByTagName("canvas")[0].style.visibility="hidden";
    allCompilerArea.style.visibility="hidden"
    optionsTab.style.visibility="visible"
    themesBtn.style.visibility="hidden"
    optionsBtn.style.visibility="hidden"
    challengesBtn.style.visibility="hidden"
  }
  function openChallenges() {
   window.open("Challenges.html")
  }
  setInterval(function(){
   if(cao.style.visibility=="hidden") {
    presstxt.innerHTML=""
   }
   if(createAssetBg.style.visibility=="visible"&&!caBg.style.visibility=="hidden") {
      canGoBack4=true
   }
   if(allCompilerArea.style.visibility=="visible") {
    canShowControllerData=false
   }
   if(allCompilerArea.style.visibility=="hidden") {
    canShowControllerData=true
   }
   if(CI_Tab.style.visibility=="visible") {
    canGoBack8=true
   }
   if(CI_Tab.style.visibility=="hidden") {
    canGoBack8=false
   }
   if(vScr.style.visibility=="visible") {
    canGoBack9=true
   }
   if(vScr.style.visibility=="hidden") {
    canGoBack9=false
   }
   if(optionsTab.style.visibility=="visible") {
    canGoBack6=true
   }
   if(optionsTab.style.visibility=="hidden") {
    canGoBack6=false
   }
   if(myAssetsTab.style.visibility=="visible") {
    canGoBack5=true
   }
   if(myAssetsTab.style.visibility=="hidden") {
    canGoBack5=false
   }
   if(themesTab.style.visibility=="hidden") {
       canGoBack2=false
   }
   if(themesTab.style.visibility=="visible") {
       canGoBack2=true
   }
   if(assetsTab.style.visibility=="hidden") {
       canGoBack3=false
   }
   if(assetsTab.style.visibility=="visible") {
       canGoBack3=true
   }
   if(caBg.style.visibility=='visible') {
    backToAsset=true
   }
   if(caBg.style.visibility=='hidden') {
    backToAsset=false
   }
  })
  function previewTheme(){
       localStorage.setItem('previewingTheme', themes[selectedTheme])
       window.open("themePreview.html")
  }
  function useTheme(){
   localStorage.setItem('usingTheme', themes[selectedTheme])
   window.scrollTo(0,0)
   checkYposition=setInterval(function(){
   if(window.scrollY==0){
     clearInterval(checkYposition) 
     window.location.reload()
    }
   })
  }
  setInterval(()=>{
  if(localStorage.getItem('usingTheme')) {
   editor.setOption('theme', localStorage.getItem('usingTheme'));
   }
  },0);
  function openAssets() {
   useScript=false
   //console.clear()
   optionsBtn.style.visibility="hidden"
   challengesBtn.style.visibility="hidden"
   document.getElementsByTagName("canvas")[0].style.left=960
   myAssetsTab.style.visibility="hidden"
   createAssetBtn.style.visibility="visible"
   themesBtn.style.visibility="hidden"
   assetsTab.style.visibility="visible"
   assetsBg.style.visibility="visible"
   allCompilerArea.style.visibility="hidden"
   document.getElementsByTagName("canvas")[0].style.visibility="hidden"
  }
  function createAD(id,txt) {
  eval(id+".style.visibility='visible'")
  $(function(){
  $("#assetDialog1").dialog()
  })
  purchasingAsset1.innerHTML=txt
  }
  function buyAsset1() {
   //createAD("assetDialog1",'Would you like to buy "'+asset1title.innerHTML+'" from '+asset1author.innerHTML.split("Author: ").join("")+' for '+asset1price.innerHTML.split("Price: ").join("")+' ?')
   assetDialog1.innerHTML='Would you like to buy "'+asset1title.innerHTML+'" from '+asset1author.innerHTML.split("Author: ").join("")+' for '+asset1price.innerHTML.split("Price: ").join("")+' ?'
   assetDialog1.style.visibility='visible'
   setTimeout(function(){document.getElementsByClassName("ui-dialog ui-corner-all ui-widget ui-widget-content ui-front ui-dialog-buttons ui-draggable ui-resizable")[0].style.visibility="visible"},3)
   $("#assetDialog1").dialog({
      buttons : {
        "Confirm" : function() {
          if(assetDialog1.innerHTML=="You already purchased this asset ! You can't buy the same asset again."){
              setTimeout(function(){document.getElementsByClassName("ui-dialog ui-corner-all ui-widget ui-widget-content ui-front ui-dialog-buttons ui-draggable ui-resizable")[0].style.visibility="hidden";assetDialog1.style.visibility="hidden"},3)
          }
          if(typeof UYC=='object'){
          if(!UYC.assets.includes(asset1title.innerHTML)){
          console.log("asset_"+asset1title.innerHTML);
          UYC.assets.push("asset_"+asset1title.innerHTML)
  
      var asset_fn = document.getElementById("asset1img");
      var imgCanvas = document.createElement("canvas"),
      imgContext = imgCanvas.getContext("2d");
      imgCanvas.style.visibility="hidden"
      imgCanvas.style.position="absolute"
      imgCanvas.style.left="-10000"
      imgCanvas.style.top="-10000"
      document.body.appendChild(imgCanvas)
      imgCanvas.width = asset_fn.width;
      imgCanvas.height = asset_fn.height;
      imgContext.drawImage(asset_fn, 0, 0, asset_fn.width, asset_fn.height);
      var imgAsDataURL = imgCanvas.toDataURL("image/png");
      var _d=document.createElement("a");
      _d.href=imgAsDataURL
      _d.download=asset1title.innerHTML
      _d.click()
  
          localStorage.setItem("assets",UYC.assets)
           $(this).dialog("close")
          }
          else {if(assetDialog1.innerHTML=="You already purchased this asset ! You can't buy the same asset again."===true){return false}else{$(this).dialog("close");$("#assetDialog1").dialog();document.getElementsByClassName("ui-button ui-corner-all ui-widget")[2].remove();assetDialog1.innerHTML="You already purchased this asset ! You can't buy the same asset again."}}
      }
      else {
          alert('option #2: false')
          UYC = {
            assets: [],
            transform: {
  Int: function(t) {
   return Math.trunc(t)
  },
  Float: function(t) {
    // return Number(t.toString()[0]+"."+t.toString().slice(1))
    return parseInt(t).toLocaleString().split(",").join(".")
  },
 },
 generatedNumbers:"",
 generate: {
 numbers: function(prop) {
   if(this.num!=="") {
   UYC.generatedNumbers="";
   }
   len=prop.split("length=").toString().split(", max=").toString().split(", min=").toString().split(",")[1]
   max=prop.split("length=").toString().split(", max=").toString().split(", min=").toString().split(",")[2]
   min=prop.split("length=").toString().split(", max=").toString().split(", min=").toString().split(",")[3]
   type=prop.split("length=").toString().split(", max=").toString().split(", min=").toString().split(",")[4].split(" ").join("")
   ff=""
   if(type=="integer") {
 for(var nums=0;nums<len;nums++) {
    UYC.generatedNumbers+=Math.floor((Math.random() * max) + min);
    }
   }
   if(type=="float"&&len>1) {
 for(var nums=0;nums<len;nums++) {
     ff+=Math.floor((Math.random() * max) + min);
     UYC.generatedNumbers=Number(ff[0][0]+"."+ff.slice(1));
    }
   }
   if(type=="float"&&len==1) {
    terminal.warn("You can't float a "+len+" length number.")
   }
  }
 }
          }
          UYC.assets.push("asset_"+localStorage.getItem('assets'))
      }
          // var downloadProcess=document.createElement("a")
          // downloadProcess.setAttribute("download", "TESTSUBJECT#1")
          // downloadProcess.setAttribute("href", "Images/smileyface.png")
          // setTimeout(function(){downloadProcess.click()},500)
          // downloadProcess.style.position="absolute"
          // downloadProcess.style.left=10
          // downloadProcess.style.top=10
          // downloadProcess.style.zIndex=9999
          // assetsTab.appendChild(downloadProcess)
      },
        "Cancel" : function() {
          $(this).dialog("close");
        }
      }
    });
    $("#assetDialog1").dialog("open");
  
  }
  function createAsset() {
      creatingOptions.style.visibility="visible"
      createAssetBtn.style.visibility="hidden"
      assetsTabTitle.innerHTML="Create asset"
      assetsBg.style.visibility="hidden"
      createAssetBg.style.visibility="visible"
      caBg.style.visibility="visible"
  }
  var assetMessage = {
      error: function(errorText, fS, x, y) {
       assetMSG.innerHTML=errorText
       assetMSG.style.color="#ff0000"
       assetMSG.style.left=x+'%'
       assetMSG.style.top=y+'%'
       assetMSG.style.fontSize=fS+'px'
       assetMSG2.innerHTML=errorText
       assetMSG2.style.color="#ff0000"
       assetMSG2.style.left=x+'%'
       assetMSG2.style.top=y+'%'
       assetMSG2.style.fontSize=fS+'px'
      },
      success: function(successText, fS, x, y) {
       assetMSG.innerHTML=successText
       assetMSG.style.color="#0f0000"
       assetMSG.style.left=x+'%'
       assetMSG.style.top=y+'%'
       assetMSG.style.fontSize=fS+'px'
       assetMSG2.innerHTML=successText
       assetMSG2.style.color="#0f0000"
       assetMSG2.style.left=x+'%'
       assetMSG2.style.top=y+'%'
       assetMSG2.style.fontSize=fS+'px'
      }
  }
  var priceSelected=false
  var priceSelected2=false
  setInterval(function(){
   if(document.getElementById("freeCB").checked===true||!priceVal.value=='') {
    priceSelected=true
   }
   else {
       priceSelected=false
   }
  
   if(document.getElementById("freeCB2").checked===true||!priceVal2.value=='') {
    priceSelected2=true
   }
   else {
       priceSelected2=false
   }
  
  })
  var scriptText
  function displayControllerInfo_onscreen() {
   DCDI()
  }
  function createNewSprite() {
  if(titleVal.value=='') {
   assetMessage.error("You need a name for your asset !", 25, 34, 3)
  }
  if(document.getElementsByClassName("input")[0].value=='') {
   assetMessage.error("You need to select an image for your sprite !", 20, 32.5, 3)
  }
  if(priceSelected===false) {
      assetMessage.error('You need to add a price to your asset or you can sell it for free if you select the "free" checkbox !', 20, 20, 3)
  }
  if(!titleVal.value==''&&!document.getElementsByClassName("input")[0].value==''&&priceSelected===true) {
  typeTxt.innerHTML="Type: "+assetType
  idTxt.innerHTML="ID: "+localStorage.getItem("ID")
  titleTxt.innerHTML="Title: "+titleVal.value
  if(descVal.value !== "") {
   descTxt.innerHTML="Description: "+descVal.value
  }
  else {
   descTxt.innerHTML="Description: No description."
  }
  imagepathTxt.innerHTML="Image path: "+document.getElementsByClassName("input")[0].value
  presstxt.innerHTML='Press "ENTER" to confirm or "backslash (\\)" to go back'
  if(document.getElementById("freeCB").checked===true) {
  priceTxt.innerHTML="Price: "+freeCBtxt.innerHTML
  }
  else {
  priceTxt.innerHTML="Price: "+priceVal.value+"$"
  }
  cao.style.visibility="visible"
  createSpriteTab.style.visibility="hidden"
   }
  }
  var _sV;
  function createNewScript(event) {
  
  
  
  
  
  
  if(titleVal2.value=='') {
   assetMessage.error("You need a name for your asset !",25,33.5,3)
  }
  if(scriptVal.value=='') {
   assetMessage.error("You need to select a script for your script asset !",20,31.6,4)
  }
  if(priceSelected2===false) {
      assetMessage.error('You need to add a price to your asset or you can sell it for free if you select the "free" checkbox !', 20, 20, 3)
  }
  if(!titleVal2.value==''&&!scriptVal.value==''&&priceSelected2===true) {

    var input = scriptVal;
      var reader = new FileReader();
      reader.onload = function(){
        var arrayBuffer = reader.result;
        scriptsizeTxt.innerHTML="Script size: "+ formatBytes(input.files[0].size) //arrayBuffer.byteLength+" KB"
      };
      reader.readAsArrayBuffer(input.files[0]);
      var reader2 = new FileReader();
      reader2.onload = function(){
        var text = reader2.result;
        scriptText=reader2.result;
      };
      reader2.readAsText(input.files[0]);

  cao2.style.visibility="visible"
  createPluginTab.style.visibility="hidden"
  typeTxt2.innerHTML="Type: "+assetType
  if(localStorage.getItem("ID") && typeof localStorage.getItem("ID") === 'number') {
   idTxt2.innerHTML="ID: "+localStorage.getItem("ID")
  }
  else {
   idTxt2.innerHTML="ID: 1";
  };
  titleTxt2.innerHTML="Title: "+titleVal2.value
  if(descVal2.value !== "") {
   descTxt2.innerHTML="Description: "+descVal2.value
  }
  else {
   descTxt2.innerHTML="Description: No description."
  }
  _sV = scriptVal.value;
  scriptpathTxt.innerHTML="File path: "+scriptVal.value
  presstxt2.innerHTML='Press "ENTER" to confirm or "backslash (\\)" to go back'
  if(document.getElementById("freeCB2").checked===true) {
  priceTxt2.innerHTML="Price: "+freeCBtxt2.innerHTML
   }
  else {
  priceTxt2.innerHTML="Price: "+priceVal2.value+"$"
    }
   }
  }
  function readControllerData(){
    cd=setInterval(function(){
      if(Gamepad.type=="Controller") {
      gamepad_aPressed.innerHTML="a: "+JSON.parse(localStorage.getItem("gamepad_keys"))["a"]
    gamepad_bPressed.innerHTML="b: "+JSON.parse(localStorage.getItem("gamepad_keys"))["b"]
    gamepad_xPressed.innerHTML="x: "+JSON.parse(localStorage.getItem("gamepad_keys"))["x"]
    gamepad_yPressed.innerHTML="y: "+JSON.parse(localStorage.getItem("gamepad_keys"))["y"]
    gamepad_upPressed.innerHTML="up: "+JSON.parse(localStorage.getItem("gamepad_keys"))["up"]
    gamepad_downPressed.innerHTML="down: "+JSON.parse(localStorage.getItem("gamepad_keys"))["down"]
    gamepad_leftPressed.innerHTML="left: "+JSON.parse(localStorage.getItem("gamepad_keys"))["left"]
    gamepad_rightPressed.innerHTML="right: "+JSON.parse(localStorage.getItem("gamepad_keys"))["right"]
    gamepad_leftAxisMoving.innerHTML="left axis: "+JSON.parse(localStorage.getItem("gamepad_keys"))["left axis"]
    gamepad_rightAxisMoving.innerHTML="right axis: "+JSON.parse(localStorage.getItem("gamepad_keys"))["right axis"]
    gamepad_leftAxisX.innerHTML="left axis (X): "+JSON.parse(localStorage.getItem("gamepad_keys"))["left axis (X)"]
    gamepad_leftAxisY.innerHTML="left axis (Y): "+JSON.parse(localStorage.getItem("gamepad_keys"))["left axis (Y)"]
    gamepad_rightAxisX.innerHTML="right axis (X): "+JSON.parse(localStorage.getItem("gamepad_keys"))["right axis (X)"]
    gamepad_rightAxisY.innerHTML="right axis (Y): "+JSON.parse(localStorage.getItem("gamepad_keys"))["right axis (Y)"]
    gamepad_lbPressed.innerHTML="LB: "+JSON.parse(localStorage.getItem("gamepad_keys"))["LB"]
    gamepad_rbPressed.innerHTML="RB: "+JSON.parse(localStorage.getItem("gamepad_keys"))["RB"]
    gamepad_ltPressed.innerHTML="LT: "+JSON.parse(localStorage.getItem("gamepad_keys"))["LT"]
    gamepad_rtPressed.innerHTML="RT: "+JSON.parse(localStorage.getItem("gamepad_keys"))["RT"]
    gamepad_ltValue.innerHTML="LT (value): "+JSON.parse(localStorage.getItem("gamepad_keys"))["LT (value)"]
    gamepad_rtValue.innerHTML="RT (value): "+JSON.parse(localStorage.getItem("gamepad_keys"))["RT (value)"]
    }
    if(Gamepad.type=="Steering Wheel") {
      gamepad_aPressed.innerHTML="a: "+JSON.parse(localStorage.getItem("gamepad_keys"))["a"]
    gamepad_bPressed.innerHTML="b: "+JSON.parse(localStorage.getItem("gamepad_keys"))["b"]
    gamepad_xPressed.innerHTML="x: "+JSON.parse(localStorage.getItem("gamepad_keys"))["x"]
    gamepad_yPressed.innerHTML="y: "+JSON.parse(localStorage.getItem("gamepad_keys"))["y"]
    gamepad_upPressed.innerHTML="up: "+JSON.parse(localStorage.getItem("gamepad_keys"))["up"]
    gamepad_downPressed.innerHTML="down: "+JSON.parse(localStorage.getItem("gamepad_keys"))["down"]
    gamepad_leftPressed.innerHTML="left: "+JSON.parse(localStorage.getItem("gamepad_keys"))["left"]
    gamepad_rightPressed.innerHTML="right: "+JSON.parse(localStorage.getItem("gamepad_keys"))["right"]
    gamepad_leftAxisMoving.innerHTML="left axis: "+JSON.parse(localStorage.getItem("gamepad_keys"))["left axis"]
    gamepad_rightAxisMoving.innerHTML="right axis: "+JSON.parse(localStorage.getItem("gamepad_keys"))["right axis"]
    gamepad_leftAxisX.innerHTML="left axis (X): "+JSON.parse(localStorage.getItem("gamepad_keys"))["left axis (X)"]
    gamepad_leftAxisY.innerHTML="left axis (Y): "+JSON.parse(localStorage.getItem("gamepad_keys"))["left axis (Y)"]
    gamepad_rightAxisX.innerHTML="right axis (X): "+JSON.parse(localStorage.getItem("gamepad_keys"))["right axis (X)"]
    gamepad_rightAxisY.innerHTML="right axis (Y): "+JSON.parse(localStorage.getItem("gamepad_keys"))["right axis (Y)"]
    gamepad_lbPressed.innerHTML="LB: "+JSON.parse(localStorage.getItem("gamepad_keys"))["LB"]
    gamepad_rbPressed.innerHTML="RB: "+JSON.parse(localStorage.getItem("gamepad_keys"))["RB"]
    gamepad_ltPressed.innerHTML="LT: "+JSON.parse(localStorage.getItem("gamepad_keys"))["LT"]
    gamepad_rtPressed.innerHTML="RT: "+JSON.parse(localStorage.getItem("gamepad_keys"))["RT"]
    gamepad_ltValue.innerHTML="LT (value): "+JSON.parse(localStorage.getItem("gamepad_keys"))["LT (value)"]
    gamepad_rtValue.innerHTML="RT (value): "+JSON.parse(localStorage.getItem("gamepad_keys"))["RT (value)"]
    }
  },localStorage.getItem("cd_speed"))
}
  var _sTgP = "";
  function showControllerInformations() {
   optionsTab.style.visibility="hidden"
   CI_Tab.style.visibility="visible"
   if(gamepad && gamepad.mapping !== "") {
   controllerInfo.innerHTML="Gamepads connected: " + index +
    ",<br>Gamepad name: " + id + _sTgP +
    "buttons: "+nbButtons+", " +
    "axes: "+nbAxes+",<br>Mapping: "+gamepad.mapping +
    ",<br>";
   };
   if(gamepad && gamepad.mapping == "") {
    controllerInfo.innerHTML="Gamepads connected: " + index +
    ",<br>Gamepad name: " + id + ", <img src='Images/UpArrow.png' id='stWheel' width='50' height='50'><br>" +
    "buttons: "+nbButtons+", " +
    "axes: "+nbAxes+",<br>Mapping: none"+
    ",<br>";
   };
    readControllerData()
  }
  function setDataSpeed() {
    clearInterval(cd)
    localStorage.setItem("cd_speed",CD_fps.value)
    setTimeout(function(){
    cd=setInterval(function(){
    if(!gamepad.id.includes("WHEEL")) {
    gamepad_aPressed.innerHTML="a: "+gamepad.buttons[0].pressed
    gamepad_bPressed.innerHTML="b: "+gamepad.buttons[1].pressed
    gamepad_xPressed.innerHTML="x: "+gamepad.buttons[2].pressed
    gamepad_yPressed.innerHTML="y: "+gamepad.buttons[3].pressed
    gamepad_upPressed.innerHTML="up: "+gamepad.buttons[12].pressed
    gamepad_downPressed.innerHTML="down: "+gamepad.buttons[13].pressed
    gamepad_leftPressed.innerHTML="left: "+gamepad.buttons[14].pressed
    gamepad_rightPressed.innerHTML="right: "+gamepad.buttons[15].pressed
    gamepad_leftAxisMoving.innerHTML="left axis: "+left_axesMoved
    gamepad_rightAxisMoving.innerHTML="right axis: "+right_axesMoved
    gamepad_leftAxisX.innerHTML="left axis (X): "+gamepad.axes[0]
    gamepad_leftAxisY.innerHTML="left axis (Y): "+gamepad.axes[1]
    gamepad_rightAxisX.innerHTML="right axis (X): "+gamepad.axes[2]
    gamepad_rightAxisY.innerHTML="right axis (Y): "+gamepad.axes[3]
    gamepad_lbPressed.innerHTML="LB: "+gamepad.buttons[4].pressed
    gamepad_rbPressed.innerHTML="RB: "+gamepad.buttons[5].pressed
    gamepad_ltPressed.innerHTML="LT: "+gamepad.buttons[6].pressed
    gamepad_rtPressed.innerHTML="RT: "+gamepad.buttons[7].pressed
    gamepad_ltValue.innerHTML="LT (value): "+gamepad.buttons[6].value
    gamepad_rtValue.innerHTML="RT (value): "+gamepad.buttons[7].value
    };
    if(gamepad && gamepad.id.includes("WHEEL")) {
      gamepad_aPressed.innerHTML="a: "+gamepad.buttons[0].pressed
    gamepad_bPressed.innerHTML="b: "+gamepad.buttons[1].pressed
    gamepad_xPressed.innerHTML="x: "+gamepad.buttons[2].pressed
    gamepad_yPressed.innerHTML="y: "+gamepad.buttons[3].pressed
    gamepad_leftAxisMoving.innerHTML="left axis: "+left_axesMoved
    gamepad_rightAxisMoving.innerHTML="right axis: "+right_axesMoved
    gamepad_leftAxisX.innerHTML="left axis (X): "+gamepad.axes[0]
    gamepad_leftAxisY.innerHTML="left axis (Y): "+gamepad.axes[1]
    gamepad_rightAxisX.innerHTML="right axis (X): "+gamepad.axes[2]
    gamepad_rightAxisY.innerHTML="right axis (Y): "+gamepad.axes[3]
    gamepad_lbPressed.innerHTML="LB: "+gamepad.buttons[4].pressed
    gamepad_rbPressed.innerHTML="RB: "+gamepad.buttons[5].pressed
    gamepad_ltPressed.innerHTML="LT: "+gamepad.buttons[6].pressed
    gamepad_rtPressed.innerHTML="RT: "+gamepad.buttons[7].pressed
    gamepad_ltValue.innerHTML="LT (value): "+gamepad.buttons[6].value
    gamepad_rtValue.innerHTML="RT (value): "+gamepad.buttons[7].value
    };
  },CD_fps.value)
    },3)
  }
  function resetDataSpeed() {
    CD_fps.value = 1000;
    setDataSpeed();
    setBubble(CD_fps, document.getElementsByClassName('bubble')[0]);
  };
  function viewScript() {
    //var scriptWin = window.open("", "", "width=initial,height=initial");
    //scriptWin.document.write(/*"<title>Code Previewer</title>*/"<h3 id='sT'></h3><script>sT.innerHTML='"+scriptText.replace(/(\r\n|\n|\r)/gm,";").split("'").join("\\'").split(";;;;;").join(";").split(";;;;").join(";").split(";;;").join(";").split(";;").join(";")+"'</\script>");


    // //console.clear()
    // setTimeout(() => {
    //   console.log(scriptText)
    // }, 3);  


    vScr.style.visibility = "visible";
    vScr.value = scriptText;
    assetsTabTitle.innerHTML = _sV.split("\\")[count('\\ in _sV')];
    // createAssetBg.style.overflow="none";
  }
  window.addEventListener('load', function() {
    if(document.getElementsByClassName("input")[0]){
    document.getElementsByClassName("input")[0].addEventListener('change', function() {
        if (this.files && this.files[0]) {
            var img = document.querySelector('#imagePreview')
            img.src = URL.createObjectURL(this.files[0])
            img.onload=getSize
        }
    })}
  })
  function getSize() {
        var imgpath=document.getElementsByClassName("input")[0];
        if (!imgpath.value==""){
          var img=imgpath.files[0].size;
          var imgsize=img/1024; 
          imagesizeTxt.innerHTML="Image size: "+Math.trunc(imgsize)+"KB";
        }
      }
  function cbPrice() {
    if (document.getElementById("freeCB").checked===true){
      priceVal.disabled=true
    } else {
      priceVal.disabled=false
    }
  }
  function cbPrice2() {
    if (document.getElementById("freeCB2").checked===true){
      priceVal2.disabled=true
    } else {
      priceVal2.disabled=false
    }
  }
  var assetTypes=['sprite','plugin','theme']
  function selSprite() {
   spriteBtn.style.background="rgb(200, 200, 200)"
   spriteBtn.style.color="#000000"
   pluginBtn.style.background="rgba(136,136,136,1)"
   pluginBtn.style.color="#ffffff"
   themeBtn.style.background="rgba(136,136,136,1)"
   themeBtn.style.color="#ffffff"
   assetType=assetTypes[0]
   createSpriteTab.style.visibility="visible"
   createPluginTab.style.visibility="hidden"
   caBg.style.visibility="hidden"
   assetsTabTitle.innerHTML="Creating sprite"
  }
  function unselSprite() {
   assetsTabTitle.innerHTML='Create asset'
   spriteBtn.style.background="rgb(136, 136, 136)"
   spriteBtn.style.color="#ffffff"
   pluginBtn.style.background="rgba(136,136,136,1)"
   pluginBtn.style.color="#ffffff"
   themeBtn.style.background="rgba(136,136,136,1)"
   themeBtn.style.color="#ffffff"
   assetType=''
   createSpriteTab.style.visibility="hidden"
   caBg.style.visibility="visible"
   assetType=null
   titleVal.value=''
   descVal.value=''
   imageVal.value=''
   priceVal.value=''
   priceVal.disabled=false
   freeCB.checked=false
  }
  assetType="";
  function selPlugin() {
   pluginBtn.style.background="rgb(200, 200, 200)"
   pluginBtn.style.color="#000000"
   spriteBtn.style.background="rgb(136, 136, 136)"
   spriteBtn.style.color="#ffffff"
   themeBtn.style.background="rgb(136, 136, 136)"
   themeBtn.style.color="#ffffff"
   assetType=assetTypes[1]
   createPluginTab.style.visibility="visible"
   createSpriteTab.style.visibility="hidden"
   caBg.style.visibility="hidden"
   assetsTabTitle.innerHTML="Creating plugin"
  }
  function unselPlugin() {
   pluginBtn.style.background="rgb(136, 136, 136)"
   pluginBtn.style.color="#ffffff"
   spriteBtn.style.background="rgb(136, 136, 136)"
   spriteBtn.style.color="#ffffff"
   themeBtn.style.background="rgb(136, 136, 136)"
   themeBtn.style.color="#ffffff"
   assetType=null
   createPluginTab.style.visibility="hidden"
   createSpriteTab.style.visibility="hidden"
   caBg.style.visibility="visible"
   assetsTabTitle.innerHTML="Create asset"
   setTimeout(function() {
    titleVal2.value=''
    priceVal2.value=''
   },3);
   descVal2.value=''
   scriptVal.value=''
   priceVal2.disabled=false
   freeCB2.checked=false
  }
  function selectSprite() {
  if(spriteBtn.style.background=="rgb(136, 136, 136)") {
  setTimeout(() => {
      selSprite()
  }, 3)
  }
  
  if(spriteBtn.style.background=='rgb(200, 200, 200)') {
  setTimeout(() => {
      unselSprite()
  }, 3);
  }
  
  }
  function selectScript() {
  if(getComputedStyle(pluginBtn).background.split(")")[0]+")"=="rgb(136, 136, 136)" || getComputedStyle(pluginBtn).background.split(")")[0]+")"=="rgb(128, 128, 128)") {
  setTimeout(() => {
      selPlugin()
  }, 3)
  }
  if(getComputedStyle(pluginBtn).background.split(")")[0]+")"=='rgb(200, 200, 200)') {
  setTimeout(() => {
      unselPlugin()
  }, 3);
  }
  }
  function selectPlugin() {
   spriteBtn.style.background="rgba(136,136,136,1)"
   spriteBtn.style.color="#ffffff"
   pluginBtn.style.background="rgba(136,136,136,1)"
   pluginBtn.style.color="#ffffff"
   themeBtn.style.background="rgba(136,136,136,1)"
   themeBtn.style.color="#ffffff"
  }
  function selectTheme() {
   spriteBtn.style.background="rgba(136,136,136,1)"
   spriteBtn.style.color="#ffffff"
   pluginBtn.style.background="rgba(136,136,136,1)"
   pluginBtn.style.color="#ffffff"
   themeBtn.style.background="rgba(200,200,200,1)"
   themeBtn.style.color="#000000"
  }
  function _nA(assetData) {
    a_ID++;
    localStorage.setItem("ID", a_ID)
if(assetData.type == "script") {
  var _abgID=document.createElement("div");
  var _aimg=document.createElement("img");
  var _atitle=document.createElement("h2");
  var _adesc=document.createElement("h6");
  var _aauthor=document.createElement("h6");
  var _aprice=document.createElement("h6");
  var _apriceD=document.createElement("span");
  _aprice.id="asset"+localStorage.getItem("ID")+"price";
  _aprice.style.position="absolute";
  _aprice.style.bottom="1%";
  _aprice.style.right='1%';
  _aprice.style.margin=0;
  _aprice.innerHTML = "Price: ";
  if(assetData.price == "FREE") {
   _apriceD.innerHTML = assetData.price;
   _apriceD.style.color="lime";
  }
  if(assetData.price !== "FREE") {
   _apriceD.innerHTML = assetData.price + "$";
  }
  _aprice.appendChild(_apriceD);
  _aauthor.id="asset"+localStorage.getItem("ID")+"author";
  _aauthor.style.opacity=1;
  _aauthor.style.position="absolute";
  _aauthor.style.left="1%";
  _aauthor.style.fontSize="12";
  _aauthor.style.top="65%";
  _aauthor.innerHTML="Author: "+assetData.author;
  _adesc.id="asset"+localStorage.getItem("ID")+"desc";
  _adesc.style.opacity=1;
  _adesc.style.position="absolute";
  _adesc.style.left='1%';
  _adesc.style.top="52%";
  _adesc.innerHTML=assetData.desc;
  _atitle.id="asset"+localStorage.getItem("ID")+"title";
  _atitle.style.opacity=1;
  _atitle.style.position="absolute";
  _atitle.style.left='35%'; // parseInt(localStorage.getItem("alp"))+5+"%";
  _atitle.style.top='32%';
  _atitle.innerHTML=assetData.title;
  _aimg.id="asset"+localStorage.getItem("ID")+"img";
  _aimg.style.border="2px solid #000000";
  _aimg.style.opacity=0.6;
  _aimg.style.position='absolute';
  _aimg.style.left="25%"; // parseInt(localStorage.getItem("alp"))+11+"%";
  _aimg.style.top="5%";
  _aimg.style.width="100";
  _aimg.style.height="100";
  _aimg.crossOrigin="annonymous";
  _aimg.src="https://i.ibb.co/RN6VrNZ/test2.png";
  _abgID.style.background="rgb(90, 90, 90)";
  _abgID.setAttribute("class","___asset");
  _abgID.style.width=200;
  _abgID.style.height=300;
  _abgID.style.overflow="auto";
  _abgID.style.display="inline-block";
  _abgID.style.cursor="pointer";
  _abgID.style.opacity=0.8;
  _abgID.style.justifyContent="center";
  _abgID.style.alignItems="center";
  _abgID.style.position="absolute";
  // _abgID.style.left=parseInt(localStorage.getItem("alp"))+"%";
  _abgID.setAttribute('asset-type', "script");
  _abgID.id="asset"+localStorage.getItem("ID")+"Bg"+"_"+assetData.name;
  _abgID.onmouseover=function(){_abgID.style.opacity=1};
  _abgID.onmouseout=function(){_abgID.style.opacity=0.8};
  _abgID.onclick=function() {;
     //  download(localStorage.getItem("lastTitle2"),scriptText);
     //  UYC["assets"]+=", asset_"+localStorage.getItem("lastTitle2");
     UYC.assets.push("asset_" + this.getAttribute("id").split("_")[1]);
     console.log(this.getAttribute("id").split("_")[1]);
     localStorage.setItem("assets", UYC["assets"]);
   };
  assetsBg.appendChild(_abgID);
  _abgID.appendChild(_aimg);
  _abgID.appendChild(_atitle);
  _abgID.appendChild(_adesc);
  _abgID.appendChild(_aauthor);
  _abgID.appendChild(_aprice);
 };
};
  function createSpriteAS() {
  setTimeout(function(){
    //id++
    // localStorage.setItem("ID", a_ID)
  
   var _abgID=document.createElement("div")
   var _aimg=document.createElement("img")
   var _atitle=document.createElement("h2")
   var _adesc=document.createElement("h6")
   var _aauthor=document.createElement("h6")
   var _aprice=document.createElement("h6")
  
  
   _aprice.id="asset"+localStorage.getItem("ID")+"price"
  
   _aprice.style.position="absolute"
   _aprice.style.bottom="1%"
   _aprice.style.right='1%'
   _aprice.style.margin=0
   _aprice.innerHTML="Price: "+localStorage.getItem("lastPrice")+"$"
   
   _aauthor.id="asset"+localStorage.getItem("ID")+"author"
   _aauthor.style.opacity=1
   _aauthor.style.position="absolute"
   _aauthor.style.left="1%"
   _aauthor.style.fontSize="12"
   _aauthor.style.top="65%"
   _aauthor.innerHTML="Author: "+localStorage.getItem("u_s")
  
  
   _adesc.id="asset"+localStorage.getItem("ID")+"desc"
   _adesc.style.opacity=1
   _adesc.style.position="absolute"
   _adesc.style.left='1%'
   _adesc.style.top="52%"
   _adesc.innerHTML=localStorage.getItem("lastDesc")
  
   
   _atitle.id="asset"+localStorage.getItem("ID")+"title"
   _atitle.style.opacity=1
   _atitle.style.position="absolute"
   _atitle.style.top='32%'
   _atitle.innerHTML=localStorage.getItem("lastTitle")
  
  
   _aimg.id="asset"+localStorage.getItem("ID")+"img"
   _aimg.style.border="2px solid #000000"
   _aimg.style.opacity=0.6
   _aimg.style.position='absolute'
   _aimg.style.top="5%"
   _aimg.style.width="100"
   _aimg.style.height="100"
   _aimg.crossOrigin="annonymous"
   _aimg.src=localStorage.getItem("lastImg")
  
  
   _abgID.style.background="rgb(90, 90, 90)"
   _abgID.style.width=200
   _abgID.style.height=300
   _abgID.style.overflow="auto"
   _abgID.style.display="inline-block"
   _abgID.style.cursor="pointer"
   _abgID.style.opacity=0.8
   _abgID.style.justifyContent="center"
   _abgID.style.alignItems="center"
   _abgID.style.position="absolute"
   _abgID.setAttribute("class","___asset")
   //_abgID.style.left=parseInt(localStorage.getItem("alp"))+"%"
   //_abgID.style.padding="25px"
   _abgID.setAttribute('asset-type', "sprite")
   _abgID.id="asset"+localStorage.getItem("ID")+"Bg"
   _abgID.onmouseover=function(){_abgID.style.opacity=1}
   _abgID.onmouseout=function(){_abgID.style.opacity=0.8}
   _abgID.onclick=function(){
  var asset_fn = document.getElementById("asset2img");
      var imgCanvas = document.createElement("canvas"),
      imgContext = imgCanvas.getContext("2d");
      imgCanvas.style.visibility="hidden"
      imgCanvas.style.position="absolute"
      imgCanvas.style.left="-10000"
      imgCanvas.style.top="-10000"
      document.body.appendChild(imgCanvas)
      imgCanvas.width = asset_fn.width;
      imgCanvas.height = asset_fn.height;
      imgContext.drawImage(asset_fn, 0, 0, asset_fn.width, asset_fn.height);
      var imgAsDataURL = imgCanvas.toDataURL("image/png");
      var _d=document.createElement("a");
      _d.href=imgAsDataURL
      _d.download=localStorage.getItem("lastTitle")
      _d.click()
      UYC["assets"]+=", asset_"+localStorage.getItem("lastTitle")
      localStorage.setItem("assets",UYC["assets"])
    }
  
   assetsBg.appendChild(_abgID)
   _abgID.appendChild(_aimg)
   _abgID.appendChild(_atitle)
   _abgID.appendChild(_adesc)
   _abgID.appendChild(_aauthor)
   _abgID.appendChild(_aprice)
   },3)
  }
  
  
  
  
  
  
  
  
  
  
  
  
  
  function download(fileName,fileValue) {
   var d_a=document.createElement("a")
   d_a.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(fileValue))
   d_a.setAttribute('download', fileName)
   document.body.appendChild(d_a)
   d_a.click()
  }
  function createScriptAS() {
  setTimeout(function(){
    //id++
    // localStorage.setItem("ID", a_ID)
  
   var _abgID=document.createElement("div")
   var _aimg=document.createElement("img")
   var _atitle=document.createElement("h2")
   var _adesc=document.createElement("h6")
   var _aauthor=document.createElement("h6")
   var _aprice=document.createElement("h6")
  
  
   _aprice.id="asset"+localStorage.getItem("ID")+"price"
  
   _aprice.style.position="absolute"
   _aprice.style.bottom="1%"
   _aprice.style.right='1%'
   _aprice.style.margin=0
   _aprice.innerHTML="Price: "+localStorage.getItem("lastPrice2")+"$"
   
   _aauthor.id="asset"+localStorage.getItem("ID")+"author"
   _aauthor.style.opacity=1
   _aauthor.style.position="absolute"
   _aauthor.style.left="1%"
   _aauthor.style.fontSize="12"
   _aauthor.style.top="65%"
   _aauthor.innerHTML="Author: "+localStorage.getItem("u_s")
  
  
   _adesc.id="asset"+localStorage.getItem("ID")+"desc"
   _adesc.style.opacity=1
   _adesc.style.position="absolute"
   _adesc.style.left='1%'
   _adesc.style.top="52%"
   _adesc.innerHTML=localStorage.getItem("lastDesc2")
  
   
   _atitle.id="asset"+localStorage.getItem("ID")+"title"
   _atitle.style.opacity=1
   _atitle.style.position="absolute"
   _atitle.style.top='32%'
   setTimeout(() => {
    _atitle.innerHTML=localStorage.getItem("lastTitle2").split(',')[count(", in localStorage.getItem('lastTitle2')")]
    console.log(localStorage.getItem("lastTitle2").split(',')[count(", in localStorage.getItem('lastTitle2')")]);
   },100);
  
  
   _aimg.id="asset"+localStorage.getItem("ID")+"img"
   _aimg.style.border="2px solid #000000"
   _aimg.style.opacity=0.6
   _aimg.style.position='absolute'
   _aimg.style.top="5%"
   _aimg.style.width="100"
   _aimg.style.height="100"
   _aimg.crossOrigin="annonymous"
   _aimg.src="https://i.ibb.co/RN6VrNZ/test2.png"
  
  
   _abgID.style.background="rgb(90, 90, 90)"
   _abgID.setAttribute("class","___asset")
   _abgID.style.width=200
   _abgID.style.height=300
   _abgID.style.overflow="auto"
   _abgID.style.display="inline-block"
   _abgID.style.cursor="pointer"
   _abgID.style.opacity=0.8
   _abgID.style.justifyContent="center"
   _abgID.style.alignItems="center"
   _abgID.style.position="absolute"
  //  _abgID.style.left=parseInt(localStorage.getItem("alp"))+"%"
   _abgID.setAttribute('asset-type', "script")
   _abgID.id="asset"+localStorage.getItem("ID")+"Bg"
   _abgID.onmouseover=function(){_abgID.style.opacity=1}
   _abgID.onmouseout=function(){_abgID.style.opacity=0.8}
   _abgID.onclick=function(){
    download(localStorage.getItem("lastTitle2"),scriptText)
      UYC["assets"]+=", asset_"+localStorage.getItem("lastTitle2")
      localStorage.setItem("assets",UYC["assets"])
    }
  
   assetsBg.appendChild(_abgID)
   _abgID.appendChild(_aimg)
   _abgID.appendChild(_atitle)
   _abgID.appendChild(_adesc)
   _abgID.appendChild(_aauthor)
   _abgID.appendChild(_aprice)
   },3)
  }
  
  
  
  
  
  
  
  
  

  
  
  
  
  
  
  
  
  setInterval(function(){
  if(createSpriteTab.style.visibility=="visible"&&document.getElementsByClassName("input")[0]){
  document.getElementsByClassName("input")[0].style.position="absolute"
  document.getElementsByClassName("input")[0].style.left="39.1%"
  document.getElementsByClassName("input")[0].style.cursor="pointer"
  document.getElementsByClassName("input")[0].style.zIndex=4
  document.getElementsByClassName("input")[0].style.top="32.3%"
  document.getElementsByClassName("input")[0].style.width=500
  document.getElementsByClassName("input")[0].style.height=50
  document.getElementsByClassName("input")[0].style.textAlign="center"
  document.getElementsByClassName("input")[0].style.outline="none"
  document.getElementsByClassName("input")[0].style.fontSize=25
  document.getElementsByClassName("input")[0].style.borderRadius="5%"
  document.getElementsByClassName("input")[0].style.opacity=0
  document.getElementsByClassName("input")[0].style.background="transparent"
   }
   else {
     if(document.getElementsByClassName("input")[0]){
    document.getElementsByClassName("input")[0].style.position="absolute"
    document.getElementsByClassName("input")[0].style.left=-1000
  }}
   if(document.getElementsByClassName("status bg-success")[0]){
    document.getElementsByClassName("status bg-success")[0].style.position="absolute"
    document.getElementsByClassName("status bg-success")[0].style.left=-1000
   }
   if(document.getElementsByClassName("img")[0]) {
     document.getElementsByClassName("img")[0].remove()
   }
  })
  //UYC FILE ????
  
  
  
  
  
  
  
  
  
  
  
  
  
  var Gamepad = {
   type:gamepad
  }
  setInterval(function() {
   if(typeof gamepad === 'object' && gamepad.id.includes("Controller")) {
    Gamepad.type="Controller";
   }
   if(typeof gamepad === 'object' && gamepad.id.includes("WHEEL")) {
    Gamepad.type="Steering Wheel";
   }
  })
  var gamepad;
  var inputStates = {};
  window.onload = function init() {
    buttonStatusDiv = document.querySelector("#buttonStatus");
    requestAnimationFrame(mainloop);
  };
  function mainloop() {
    scangamepads();
    checkButtons(gamepad);
    checkAxes(gamepad);
    updatePlayerPosition()
    requestAnimationFrame(mainloop);
  }
  var cS="not connected"
  var index
  // var id
  var nbButtons
  var nbAxes 
  window.addEventListener("gamepadconnected", function (e) {
    readControllerData()
    gamepad = e.gamepad;
    index = gamepad.index + 1;
    id = gamepad.id;
    nbButtons = gamepad.buttons.length;
    nbAxes = gamepad.axes.length;
    cS="connected"
    if(controller){
    controller.status=cS
    }
    //controller["axes"]="{x:"+gamepad.axes.entries().next().value[1]+",y:"+gamepad.axes.entries().next().value[1]+"}"
    /*console.log("Gamepad No " + index +
    ", with id " + id + " is connected. It has " +
    nbButtons + " buttons and " +
    nbAxes + " axes.");*/
  });
  window.addEventListener("gamepaddisconnected", function (e) {
    var gamepad = e.gamepad;
    var index = gamepad.index;
    //console.log("Gamepad No " + index + " has been disconnected.");
  });
  function scangamepads() {
    var gamepads = navigator.getGamepads();
    for (var i = 0; i < gamepads.length; i++) {
      if (gamepads[i])
      gamepad = gamepads[i];
    }
  }
  function updatePlayerPosition() {
    if (inputStates.left) {
      btnLeft = 'red';
      gK="LEFT AXIS"
    }
    if (inputStates.right) {
      btnRight = 'red';
      gK="RIGHT AXIS"
    }
    if (inputStates.up) {
      btnUp = 'red';
      gK="UP AXIS"
    }
    if (inputStates.down) {
      btnDown = 'red';
      gK="DOWN AXIS"
    }
  }
  function checkAxes(gamepad) {
    if (gamepad === undefined) return;
    if (!gamepad.connected) return;
    inputStates.left = inputStates.right = inputStates.up = inputStates.down = false;
    btnUp = btnDown = btnLeft = btnRight = 'black';
    if (gamepad.axes[0] > 0.5) {
      inputStates.right = true;
      inputStates.left = false;
    } else if (gamepad.axes[0] < -0.5) {
      inputStates.left = true;
      inputStates.right = false;
    }
    if (gamepad.axes[1] > 0.5) {
      inputStates.down = true;
      inputStates.up = false;
    } else if (gamepad.axes[1] < -0.5) {
      inputStates.up = true;
      inputStates.down = false;
    }
  }
  // function onGamepadBtnPressed(btn, code) {
  //  generateToken()
  //  var theID=rID.split("undefined").join("")
  //  eval("gamepadBtnAPI();function gamepadBtnAPI(){var"+theID+"=setInterval(function(){if(controller.getBtn=='"+btn+"'||gK=='"+btn+"'){setTimeout(function(){gamepadBtnAPI();gK='';controller.getBtn=gK;},3);clearInterval("+theID+");"+code+"}})}")
  //  console.log("gamepadBtnAPI();function gamepadBtnAPI(){var "+theID+"=setInterval(function(){if(controller.getBtn=='"+btn+"'||gK=='"+btn+"'){setTimeout(function(){gamepadBtnAPI();gK='';controller.getBtn=gK;},3);clearInterval("+theID+");"+code+"}})}")
  // }
  function checkButtons(gamepad) {
    if (gamepad === undefined) return;
    if (!gamepad.connected) return;
    var atLeastOneButtonPressed = false;
    for (var i = 0; i < gamepad.buttons.length; i++) {
      var b = gamepad.buttons[i];
      if (b.pressed) {
        atLeastOneButtonPressed = true;
        switch (i) {
          case 0:
          gK="A"
            break;
          case 1:
          gK="B"
            break;
          case 2:
          gK="X"
            break;
            gK="LB"
          case 3:
          gK="Y"
            break;
          case 4:
          break;
          case 6:
          gK="LT"
            break;
          case 5:
          gK="RB"
          break;
          case 7:
            gK="RT"
            break;
          case 8:
            gK="BACK"
            break;
          case 9:
            gK="START"
            break;
          case 12:
            gK="UP"
            break;
          case 13:
            gK="DOWN"
            break;
          case 14:
            gK="LEFT"
            break;
          case 15:
            gK="RIGHT"
            break;
          // case 16:
          //   gK=""
          //   break;
          default:
        }
      }
    }
    if (!atLeastOneButtonPressed) {
      btnCircle = btnTriangle = btnSquare = $_btn4 = $_btn5 = $_btn8 = $_btn9 = $_btn10 = $_btn11 = 'black';
    }
  }  
  

  var graphLineColor="#6ff8fc"
var startTime=Date.now()
var frame=0
var fps=true
var ms=false
var frameCounter = {
 pause:false
}
function changeCounter() {
if(fps&&!lowFps){
setTimeout(function(){
  graph.innerHTML=''
  ms=true;
 });
 fps=false
 }
if(ms&&!lowFps){
 graph.innerHTML=''
//  ms=false
//  graphLineColor="#6ff8fc"
//  graph.style.background="#1d324b"
//  graphBg.style.background="#191d37"
//  graph.style.boxShadow="inset 0px 0px 10px cyan"
//  fpsTxt.style.color="#6ff8fc"
//  graphLineShadow="cyan"
 ms=false
 fpsLoading=true;
 fpsTxt.innerHTML="Loading..."
setTimeout(function() {
 fps=true;
//  alert('fps')
},1)
 }
}
function fpsCounter() {
  requestAnimationFrame(fpsCounter)
if(fps&&!frameCounter.pause){
  var time=Date.now()
  frame++
if(time-startTime>1000){
  fpsLoading=false;
  fpsTxt.innerHTML="FPS ("+Math.trunc((frame/((time-startTime)/1000)).toFixed(1))+")"
  startTime=time
  frame=0
  }
 }
if(ms&&!frameCounter.pause){
  var time=Date.now()
  frame++
if(time-startTime>100){
  fpsLoading=false;
  fpsTxt.innerHTML="FPMS ("+Math.trunc((frame/((time-startTime)/100)).toFixed(1))+")"
  startTime=time
  frame=0
  }
 }
}
fpsCounter()
function createStatsRenderer(position,scale,customProp) {
  updateFcts=[];
  
  theme="red";
  if(customProp&&customProp!=="") {
   eval(customProp);
  }
var rendererStats	= new THREEx.RendererStats()
	rendererStats.domElement.style.position	= 'absolute'
	rendererStats.domElement.style.left	= position.x+'px'
  rendererStats.domElement.id = "__statsRenderer"
  rendererStats.domElement.setAttribute("theme",theme);
  statsRenderer.position.x=position.x
  statsRenderer.position.y=position.y
  statsRenderer.theme=theme;
  statsRenderer.position.set=function(x,y) { statsRenderer.position.x=x;statsRenderer.position.y=y;__statsRenderer.style.left=statsRenderer.position.x; __statsRenderer.style.top=statsRenderer.position.y; }
	rendererStats.domElement.style.top = position.y+'px'
	document.body.appendChild( rendererStats.domElement )
	updateFcts.push(function(delta, now){
		rendererStats.update(renderer);
	})
var lastTimeMsec= null
	requestAnimationFrame(function animate(nowMsec){
		requestAnimationFrame( animate );
		lastTimeMsec	= lastTimeMsec || nowMsec-1000/60
		var deltaMsec	= Math.min(200, nowMsec - lastTimeMsec)
		lastTimeMsec	= nowMsec
		updateFcts.forEach(function(updateFn){
			updateFn(deltaMsec/1000, nowMsec/1000)
		})
	})
}
function createLine() {
 requestAnimationFrame(createLine)
 if(!frameCounter.pause) {
 hasHorizontalScrollbar=graph.scrollWidth>graph.clientWidth
 hasVerticalScrollbar=graph.scrollHeight>graph.clientHeight
 graphicLine=document.createElement("div")
 graphicLine.style.width='10px';
 graphicLine.setAttribute("name", "performanceLine");
 graphicLine.setAttribute("id", "PERF_LINE");
//  setTimeout(function() { graphicLine.setAttribute("data", graphicLine.offsetHeight); },3)
 graphicLine.setAttribute("date", new Date().getHours()+":"+new Date().getMinutes()+":"+new Date().getSeconds());
 var boxBackground;
 var textBox;
 graphicLine.onclick=function(event) {
  //  if(!FB) {
  // event.target.setAttribute("data", event.target.style.height);
  // setTimeout(function(){FB=true},3);
  // frameCounter.pause=true;
  // boxBackground=document.createElement("div");
  // textBox=document.createElement("h3");
  // textBox.style.color="#ffffff";
  // textBox.id="fps_textBox";
  // textBox.style.margin="0px 0px 0px 15px";
  // textBox.style.fontSize="14px";
  // boxBackground.style.background="rgb(48, 48, 48)";
  // boxBackground.style.width=150;
  // boxBackground.style.height=50;
  // boxBackground.style.position="absolute";
  // boxBackground.style.opacity=1;
  // boxBackground.style.left=event.clientX;
  // boxBackground.style.top=event.clientY;
  // boxBackground.style.display="flex";
  // boxBackground.style.alignItems="center";
  // boxBackground.id="boxBackground"
  // boxBackground.style.zIndex=20;
  // textBox.style.position="absolute";
  // textBox.innerHTML="("+event.target.getAttribute("date")+"): "+event.target.getAttribute("data")+" FPS";
  // document.body.appendChild(boxBackground);
  // boxBackground.appendChild(textBox);
  //  }
 }
 graphicLine.onmouseout=function() {
  // if(typeof boxBackground === 'object') {
  //  document.body.removeChild(boxBackground);
  // }
  return false;
 }
if(fps&&!frameCounter.pause){
 graphicLine.style.height=parseInt(fpsTxt.innerHTML.split("FPS (").join("").split(")").join(""))+"%"
 //  parseInt(fpsTxt.innerHTML.split("FPS (").join("").split(")").join(""));
}
if(ms&&!frameCounter.pause){
 graphicLine.style.height=parseInt(fpsTxt.innerHTML.split("FPMS (").join("").split(")").join(""))+"%"
}
 if(!lowFps) {
 graphicLine.style.background=graphLineColor//#76ec22
 graphicLine.style.boxShadow="0 0 13px "+graphLineColor
}
 if(fpsLoading) {
  graphicLine.style.background="#737373";
  graphicLine.style.boxShadow="0 0 13px #737373";
  graph.style.background="gray";
  graphBg.style.background="#676767";
  graph.style.boxShadow="inset 0px 0px 10px darkgray";
  fpsTxt.style.color="darkgray";
 }
 if(lowFps&&!fpsLoading) {
  graphicLine.style.background="#ff0000";
  graphicLine.style.boxShadow="0 0 13px #ff0000";
  graph.style.background="darkred";
  graphBg.style.background="#720000";
  graph.style.boxShadow="inset 0px 0px 10px #ff0000";
  fpsTxt.style.color="#ff0000";
 }
 if(hasHorizontalScrollbar){graph.innerHTML=''}
 graph.appendChild(graphicLine)
 }
}
function displayFps_onscreen() {
  if(fpsStyle=="old") {
   DCDI2()
  }
  if(fpsStyle=="new"&&displayFpsBtn.innerHTML!=="Concealment FPS") {
   setTimeout(function(){displayFpsBtn.innerHTML="Concealment FPS"},3)
   DCDI3()
  }
  if(displayFpsBtn.innerHTML=="Concealment FPS") {
    __fpsStats.domElement.style.visibility="hidden";
    graphBg.style.visibility="hidden"
  }
  if(fpsStyle=="new"&&displayFpsBtn.innerHTML=="Concealment FPS") {
    setTimeout(function(){displayFpsBtn.innerHTML="Display FPS"},3)
    __fpsStats.domElement.style.visibility="hidden";
  }
  if(!alreadyDisplayed){
   //createLine()
  }
 }
createLine()

var notificationTopic
setInterval(function(){
notificationTopic = {
  challenge: {
    title: "Challenge",
    currentChallenge: "You are currently in a challenge: <span style='text-decoration:underline'>"+localStorage.getItem("challenge")+"</span>",
    finish: 'Congratulations ! You finished "'+localStorage.getItem("challenge")+'" challenge !'
  }
 }
})

function displayNotification(NT_txt,NI_txt) {
 var notificationBackground=document.createElement("div")
 notificationBackground.style.background="#061940"
 notificationBackground.style.width=500
 notificationBackground.style.height=200
 notificationBackground.style.position="absolute"
 notificationBackground.style.zIndex=100
 notificationBackground.style.right=50
 notificationBackground.style.borderRadius="10%"
 notificationBackground.style.bottom=-200
 setTimeout(function(){notificationBackground.style.bottom=20},1000)
 notificationBackground.style.transition="1s"
 notificationBackground.id="NotificationTab"
 notificationBackground.style.display="flex"
 notificationBackground.style.justifyContent="center"
 notificationBackground.style.alignItems="center"

 var notificationFocus=document.createElement("div")
 notificationFocus.style.width=window.innerWidth
 notificationFocus.style.height=window.innerHeight
 notificationFocus.style.position="absolute"
 notificationFocus.style.opacity=0.8
 notificationFocus.style.zIndex=50
 notificationFocus.style.background="rgb(0, 0, 0)"
 notificationFocus.style.left=0
 notificationFocus.style.top=0
 notificationFocus.id="bodyLayer"
 setInterval(function(){
if(typeof NotificationTab === 'object') {
  if(NotificationTab.style.bottom==20+'px'){
  notificationFocus.style.visibility="visible"
  }
}
else {
  notificationFocus.style.visibility="hidden"
 }
})

 var notificationTitle=document.createElement("h2")
 notificationTitle.style.color="#4f85bd"
 notificationTitle.style.fontSize=20
 notificationTitle.innerHTML=NT_txt
 notificationTitle.style.position="absolute"
 notificationTitle.style.textAlign="center"
 notificationTitle.style.top="-7%"

 var notificationInfo=document.createElement("h2")
 notificationInfo.style.color="lightslategray"
 notificationInfo.style.fontSize=20
 notificationInfo.innerHTML=NI_txt
 notificationInfo.style.position="absolute"
 notificationInfo.style.textAlign="center"
 notificationInfo.style.top="10%"
 notificationInfo.id="notificationInfo"

 var notificationBtn_Confirm=document.createElement("button")
 notificationBtn_Confirm.style.color="#ffffff"
 notificationBtn_Confirm.style.fontSize=20
 notificationBtn_Confirm.style.outline="none"
 notificationBtn_Confirm.style.border='none'
 notificationBtn_Confirm.style.cursor="pointer"
 notificationBtn_Confirm.style.zIndex=101
 notificationBtn_Confirm.style.width=100
 notificationBtn_Confirm.style.height=50
//  notificationBtn_Confirm.style.boxShadow="10px 10px 0px -1px #1e2a41"
 notificationBtn_Confirm.id="notific_con_btn"
 notificationBtn_Confirm.style.background="#2b3c5d"
 notificationBtn_Confirm.innerHTML="ok"
 notificationBtn_Confirm.style.textTransform="UpperCase"
 notificationBtn_Confirm.style.position="absolute"
 notificationBtn_Confirm.style.textAlign="center"
 notificationBtn_Confirm.style.top="55%"
 notificationBtn_Confirm.style.left="10%"

 var notificationBtn_Decline=document.createElement("button")
 notificationBtn_Decline.style.color="#ffffff"
 notificationBtn_Decline.style.fontSize=20
 notificationBtn_Decline.style.outline="none"
 notificationBtn_Decline.style.border='none'
 notificationBtn_Decline.style.cursor="pointer"
//  notificationBtn_Decline.style.boxShadow="10px 10px 0px -1px #610000"
 notificationBtn_Decline.id="notific_dec_btn"
 notificationBtn_Decline.style.zIndex=101
 notificationBtn_Decline.style.width=100
 notificationBtn_Decline.style.height=50
 notificationBtn_Decline.style.background="darkred"
 notificationBtn_Decline.innerHTML="decline"
 notificationBtn_Decline.style.textTransform="UpperCase"
 notificationBtn_Decline.style.position="absolute"
 notificationBtn_Decline.style.textAlign="center"
 notificationBtn_Decline.style.top="55%"
 notificationBtn_Decline.style.right="10%"

setTimeout(function(){
if(typeof notific_con_btn === 'object' && !notificationInfo.innerText.includes("Congratulations")) {
notific_con_btn.onmouseover=function() {
  notific_con_btn.style.opacity=0.7
}
notific_con_btn.onmouseout=function() {
  notific_con_btn.style.opacity=1
}
notific_con_btn.onclick=function() {
  closeNotification()
 }
}
if(typeof notific_con_btn === 'object' && notificationInfo.innerText.includes("Congratulations")) {
notific_con_btn.onmouseover=function() {
  notific_con_btn.style.opacity=0.7
}
notific_con_btn.onmouseout=function() {
  notific_con_btn.style.opacity=1
}
notific_con_btn.onclick=function() {
  finishChallenge(localStorage.getItem("challenge"))
 }
}
if(typeof notific_dec_btn === 'object') {
notific_dec_btn.onclick=function() {
if(NotificationTab.children[2].innerText.includes("challenge")) {
  declineChallenge()
}
}
notific_dec_btn.onmouseover=function() {
  notific_dec_btn.style.opacity=0.7
}
notific_dec_btn.onmouseout=function() {
  notific_dec_btn.style.opacity=1
}}
},550)

if(!notificationInfo.innerText.includes("Congratulations")) {
 notificationBackground.appendChild(notificationBtn_Decline)
}
else {
  notificationBtn_Decline.style.visibility="hidden"
  notificationBtn_Confirm.style.left="35%"
}
 notificationBackground.appendChild(notificationBtn_Confirm)
 notificationBackground.appendChild(notificationInfo)
 notificationBackground.appendChild(notificationTitle)
 document.body.appendChild(notificationBackground)
 document.body.appendChild(notificationFocus)
}
function closeNotification() {
  NotificationTab.style.bottom=-Math.abs(parseInt(NotificationTab.style.height.split("px").join("")))
  setTimeout(function(){NotificationTab.remove();bodyLayer.remove()},1000)
}
function finishChallenge(challenge) {
  NotificationTab.style.bottom=-Math.abs(parseInt(NotificationTab.style.height.split("px").join("")))
  localStorage.setItem("challenge","")
  document.body.style.cursor="progress"
  setTimeout(function(){NotificationTab.remove();document.body.style.cursor="default";window.location.reload()},1000)
}
function declineChallenge() {
 localStorage.setItem("challenge","")
 closeNotification()
}
if(localStorage.getItem("challenge")!==null) {
  setTimeout(function(){displayNotification(notificationTopic.challenge.title,notificationTopic.challenge.currentChallenge)},50)
}
// notific_con_btn.onmouseover=function() {
//   notific_con_btn.style.opacity=0.7
// }
// notific_con_btn.onmouseout=function() {
//   notific_con_btn.style.opacity=1
// }
// notific_con_btn.onclick=function() {
//   closeNotification()
// }
// notific_dec_btn.onclick=function() {
// if(NotificationTab.children[2].innerText.includes("challenge")) {
//   declineChallenge()
// }
// }
// notific_dec_btn.onmouseover=function() {
//   notific_dec_btn.style.opacity=0.7
// }
// notific_dec_btn.onmouseout=function() {
//   notific_dec_btn.style.opacity=1
// }
function loadChallenge(challenge) {
 if(challenge=="Terminal message") {
  if(terminalBox.value=="Hello, World!"||terminalBox.value=="Hello, World !"||terminalBox.value=="hello, world!"||terminalBox.value=="hello, world !"||terminalBox.value=="Hello World!"||terminalBox.value=="Hello World !"||terminalBox.value=="hello world!"||terminalBox.value=="hello world !"||terminalBox.value=="Hello, world!"||terminalBox.value=="Hello, world !"||terminalBox.value=="Hello world!"||terminalBox.value=="Hello world !") {
    displayNotification(notificationTopic.challenge.title,notificationTopic.challenge.finish)
  }
 }
 if(challenge=="Create a body") {
  if(engine.world.bodies.length>=1) {
    displayNotification(notificationTopic.challenge.title,notificationTopic.challenge.finish)
  }
 }

 if(challenge=="Audio System") {
  if(document.getElementsByTagName("audio")[0].currentTime>0) {
    displayNotification(notificationTopic.challenge.title,notificationTopic.challenge.finish)
  }
 }
 if(challenge=="Microphone System") {
  if(terminalBox.value==gTV) {
    displayNotification(notificationTopic.challenge.title,notificationTopic.challenge.finish)
  }
 }

 if(challenge=="Microphone Level") {
  if(microphoneLevel.innerHTML==audio.microphone.level()) {
    displayNotification(notificationTopic.challenge.title,notificationTopic.challenge.finish)
  }
 }

}





function copyTutorial(str) {
   // Create new element
   var el = document.createElement('textarea');
   // Set value (string to be copied)
   el.value = str;
   // Set non-editable to avoid focus and move outside of view
   el.setAttribute('readonly', '');
   el.style = {position: 'absolute', left: '-9999px'};
   document.body.appendChild(el);
   // Select text inside element
   el.select();
   // Copy text to clipboard
   document.execCommand('copy');
   // Remove temporary element
   document.body.removeChild(el);
}
var firstCollidedBody;
var secondCollidedBody;
// function collisionDetection(fo,oo,rv,rf,cn,code) {

// // `this` has collided with `other_object` with an impact speed of `relative_velocity` and a rotational force of `relative_rotation` and at normal `contact_normal`

//  if(fo.startsWith("byIndex")&&oo.startsWith("byIndex")) {
//   var firstObject=fo.split("byIndex").join("").split("=").join("");
//   var otherObject=oo.split("byIndex").join("").split("=").join("");
//   scene.children[firstObject].addEventListener( 'collision', function( otherObject, rv, rf, cn ) {
//    eval(code);
//   });
//  }

//  if(fo.startsWith("byName")&&oo.startsWith("byName")) {
//   var firstObject=fo.split("byName").join("").split("=").join("");
//   var otherObject=oo.split("byName").join("").split("=").join("");
//   scene.getObjectByName[fo].addEventListener( 'collision', function( oo, rv, rf, cn ) {
//    eval(code);
//   });
//  }

// }

function collisionDetection(collide, first,second,code) {

// if(collide) {
// setInterval(() => {
//   if(firstObject.startsWith("byIndex")&&otherObject.startsWith("byIndex")) {
//   let d = [scene.children[parseInt(otherObject.split("byIndex").join("").split("=").join(""))]]; 
//   let e = scene.children[parseInt(firstObject.split("byIndex").join("").split("=").join(""))].position.clone();
//   let f = scene.children[parseInt(firstObject.split("byIndex").join("").split("=").join(""))].geometry.vertices.length;
//   let g = scene.children[parseInt(firstObject.split("byIndex").join("").split("=").join(""))].position;
//   let h = scene.children[parseInt(firstObject.split("byIndex").join("").split("=").join(""))].matrix;
//   let i = scene.children[parseInt(firstObject.split("byIndex").join("").split("=").join(""))].geometry.vertices;
//   for (var vertexIndex = f-1; vertexIndex >= 0; vertexIndex--) {      
//         let localVertex = i[vertexIndex].clone();
//         let globalVertex = localVertex.applyMatrix4(h);
//         let directionVector = globalVertex.sub(g);
//         let ray = new THREE.Raycaster(e,directionVector.clone().normalize());
//         let collisionResults = ray.intersectObjects(d);
//         if ( collisionResults.length > 0 && collisionResults[0].distance < directionVector.length() ) { 
//             eval(code);
//     }
//    }
//   }
  
//   if(firstObject.startsWith("byName")&&otherObject.startsWith("byName")) {
//   let d = [scene.getObjectByName[otherObject.split("byName").join("").split("=").join("")]]; 
//   let e = scene.getObjectByName[firstObject.split("byName").join("").split("=").join("")].position.clone();
//   let f = scene.getObjectByName[firstObject.split("byName").join("").split("=").join("")].geometry.vertices.length;
//   let g = scene.getObjectByName[firstObject.split("byName").join("").split("=").join("")].position;
//   let h = scene.getObjectByName[firstObject.split("byName").join("").split("=").join("")].matrix;
//   let i = scene.getObjectByName[firstObject.split("byName").join("").split("=").join("")].geometry.vertices;
//   for (var vertexIndex = f-1; vertexIndex >= 0; vertexIndex--) {      
//         let localVertex = i[vertexIndex].clone();
//         let globalVertex = localVertex.applyMatrix4(h);
//         let directionVector = globalVertex.sub(g);
//         let ray = new THREE.Raycaster(e,directionVector.clone().normalize());
//         let collisionResults = ray.intersectObjects(d);
//         if ( collisionResults.length > 0 && collisionResults[0].distance < directionVector.length() ) { 
//             eval(code);
//     }
//    }
//   }

//   if(firstObject.startsWith("byIndex")&&otherObject.startsWith("byName")) {
//     let d = [scene.children[parseInt(otherObject.split("byIndex").join("").split("=").join(""))]]; 
//   let e = scene.children[parseInt(firstObject.split("byIndex").join("").split("=").join(""))].position.clone();
//   let f = scene.children[parseInt(firstObject.split("byIndex").join("").split("=").join(""))].geometry.vertices.length;
//   let g = scene.children[parseInt(firstObject.split("byIndex").join("").split("=").join(""))].position;
//   let h = scene.children[parseInt(firstObject.split("byIndex").join("").split("=").join(""))].matrix;
//   let i = scene.children[parseInt(firstObject.split("byIndex").join("").split("=").join(""))].geometry.vertices;
//   for (var vertexIndex = f-1; vertexIndex >= 0; vertexIndex--) {      
//         let localVertex = i[vertexIndex].clone();
//         let globalVertex = localVertex.applyMatrix4(h);
//         let directionVector = globalVertex.sub(g);
//         let ray = new THREE.Raycaster(e,directionVector.clone().normalize());
//         let collisionResults = ray.intersectObjects(d);
//         if ( collisionResults.length > 0 && collisionResults[0].distance < directionVector.length() ) { 
//             eval(code);
//     }
//    }
//   }

//   if(firstObject.startsWith("byName")&&otherObject.startsWith("byIndex")) {
//   let d = [scene.getObjectByName[otherObject.split("byName").join("").split("=").join("")]]; 
//   let e = scene.getObjectByName[firstObject.split("byName").join("").split("=").join("")].position.clone();
//   let f = scene.getObjectByName[firstObject.split("byName").join("").split("=").join("")].geometry.vertices.length;
//   let g = scene.getObjectByName[firstObject.split("byName").join("").split("=").join("")].position;
//   let h = scene.getObjectByName[firstObject.split("byName").join("").split("=").join("")].matrix;
//   let i = scene.getObjectByName[firstObject.split("byName").join("").split("=").join("")].geometry.vertices;
//   for (var vertexIndex = f-1; vertexIndex >= 0; vertexIndex--) {      
//         let localVertex = i[vertexIndex].clone();
//         let globalVertex = localVertex.applyMatrix4(h);
//         let directionVector = globalVertex.sub(g);
//         let ray = new THREE.Raycaster(e,directionVector.clone().normalize());
//         let collisionResults = ray.intersectObjects(d);
//         if ( collisionResults.length > 0 && collisionResults[0].distance < directionVector.length() ) { 
//             eval(code);
//     }
//    }
//   }
// })
// }
// alert(!collide && typeof first === 'object' && typeof second === 'object')
if(typeof first !== 'object' && typeof second === 'object' && typeof first.name === 'string') {
 terminal.warn("Not found: "+first.name+" can't be found. Please make sure you typed the name correctly and make sure the object exists.");
}
if(typeof first !== 'object' && typeof second === 'object' && typeof first.name !== 'string') {
 terminal.warn('Not found: "'+first.name+'" can\'t be found. Please make sure you typed the name correctly and make sure the object exists.');
}
if(typeof first === 'object' && typeof second !== 'object' && typeof second.name === 'string') {
 terminal.warn("Not found: "+second.name+" can't be found. Please make sure you typed the name correctly and make sure the object exists.");
}
if(typeof first !== 'object' && typeof second !== 'object' && typeof first.name === 'string' && typeof second.name === 'string') {
 terminal.warn("Not found: "+first.name+" and "+second.name+" can't be found. Please make sure you typed the name correctly and make sure the object exists.");
}
if(typeof first !== 'object' && typeof second !== 'object' && typeof first.name !== 'string' && typeof second.name !== 'string') {
 terminal.warn('Not found: id: "'+first.id+'" and id: "'+second.id+'" can\'t be found. Please make sure you typed the name correctly and make sure the object exists.');
}
if(typeof first !== 'object' && typeof second !== 'object' && typeof first.name === 'string' && typeof second.name !== 'string') {
 terminal.warn("Not found: "+first.name+' and id:"'+second.id+'" can\'t be found. Please make sure you typed the name correctly and make sure the object exists.');
}
if(typeof first !== 'object' && typeof second !== 'object' && typeof first.name !== 'string' && typeof second.name === 'string') {
 terminal.warn('Not found: id: "'+first.id+'" and '+second.name+' can\'t be found. Please make sure you typed the name correctly and make sure the object exists.');
}
if(collide && typeof eval(first)._physijs === 'object' && collide && typeof eval(second)._physijs === 'object') {
  setInterval(function() {
  // var secondObject = scene.children[parseInt(second.split("byIndex").join("").split("=").join(""))];
  // var secondObject = scene.children[parseInt(second.split("byIndex").join("").split("=").join(""))];
  // uncomment above if broken...
  var firstObject = first; 
  var secondObject = second
  // console.log(fo);
  // console.log(oo);
  // console.log(!fo._physijs.touches[0]==otherObject.split("byIndex").join("").split("=").join(""))
  // for(var o=0;o<scene.children.length;o++) {
    for(var o=0;o<eval(first)._physijs.touches.length;o++) {
  // console.log(second.id);
      
      if(eval(first)._physijs.touches[o]==eval(second)._physijs.id) {
      // eval(code);
      if(code.toString().includes("function(")) {
 var fncV = generateToken(5);
 eval(code.toString().split("function(").join("function "+fncV+"(")+";"+fncV+"();");
};
if(code.toString().includes("function (")) {
 var fncV = generateToken(5);
 eval(code.toString().split("function (").join("function "+fncV+"(")+";"+fncV+"();");
};
  };
  // uncommemt above if it's broken :/

  // if(firstObject._physijs.touches[o]!==second.split("byIndex").join("").split("=").join("")) {
  //  eval(code);
  // }
}
// if(!collide && typeof first === 'object' && typeof second === 'object') {
//   // console.log('beep boop')
//   alert('boom')
//   for(var o=0;o<first._physijs.touches.length;o++) {
// //  console.log(getBodyByIndex(getBodyByName('player')._physijs.touches[o]).name);
//  if(getBodyByIndex(first._physijs.touches[o]).name!==second.name) {
//   eval(code);
//   alert('e')
//  }
// }
//  }
//  if(collide && typeof first === 'object' && typeof second === 'object') {
//   // console.log('beep boop')
//   for(var o=0;o<first._physijs.touches.length;o++) {
// //  console.log(getBodyByIndex(getBodyByName('player')._physijs.touches[o]).name);
//  if(getBodyByIndex(first._physijs.touches[o]).name==second.name) {
//   eval(code);
//  }
// }
//  }
 if(typeof first !== 'object' && first.startsWith("byName")&&second.startsWith("byName")) {
  var firstObject = scene.getObjectByName(first.split("byName").join("").split("=").join("")); 
  var secondObject = scene.getObjectByName(second.split("byName").join("").split("=").join(""));
 for(var o=0;o<firstObject._physijs.touches.length;o++) {
  if(firstObject._physijs.touches[o]==secondObject._physijs.id) {
    eval(code);
  };
 }
}
 if(typeof first !== 'object' && first.startsWith("byIndex")&&second.startsWith("byName")) {
  var firstObject = first; 
  var secondObject = scene.getObjectByName(second.split("byName").join("").split("=").join(""));
  // console.log(fo._physijs.touches[0] + " / " + oo._physijs.id)
//  for(var o=0;o<fo._physijs.touches.length;o++) {
  if(typeof firstObject === 'object'&&typeof secondObject === 'object') {
  if(firstObject._physijs.touches[0]==secondObject._physijs.id) {
    eval(code);
  };
}
//  }
}
if(typeof first !== 'object' && first.startsWith("byName")&&second.startsWith("byIndex")) {
  var firstObject = scene.getObjectByName(first.split("byName").join("").split("=").join("")); 
  var secondObject = second
 for(var o=0;o<firstObject._physijs.touches.length;o++) {
  if(firstObject._physijs.touches[o]==second.split("byIndex").join("").split("=").join("")) {
    eval(code);
  };
    }
   }
  })
 }
 if(!collide && typeof first._physijs === 'object' && !collide && typeof second._physijs === 'object') {
  setInterval(function() {
  var firstObject = first; 
  var secondObject = second
  // console.log(fo);
  // console.log(oo);
  // console.log(!fo._physijs.touches[0]==otherObject.split("byIndex").join("").split("=").join(""))
  // for(var o=0;o<scene.children.length;o++) {
  if(first._physijs.touches.length==0) {
    if(code.toString().includes("function(")) {
 var fncV = generateToken(5);
 eval(code.toString().split("function(").join("function "+fncV+"(")+";"+fncV+"();");
};
if(code.toString().includes("function (")) {
 var fncV = generateToken(5);
 eval(code.toString().split("function (").join("function "+fncV+"(")+";"+fncV+"();");
};
  }
  else {
    for(var o=0;o<first._physijs.touches.length;o++) {
  if(first._physijs.touches[o]!==second._physijs.id) {
    if(code.toString().includes("function(")) {
 var fncV = generateToken(5);
 eval(code.toString().split("function(").join("function "+fncV+"(")+";"+fncV+"();");
};
if(code.toString().includes("function (")) {
 var fncV = generateToken(5);
 eval(code.toString().split("function (").join("function "+fncV+"(")+";"+fncV+"();");
};
  };
};
 }
 if(typeof first !== 'object' && first.startsWith("byName")&&second.startsWith("byName")) {
  var firstObject = scene.getObjectByName(first.split("byName").join("").split("=").join("")); 
  var secondObject = scene.getObjectByName(second.split("byName").join("").split("=").join(""));
  // terminal.log(firstObject._physijs.touches[0]!==secondObject._physijs.id)
  // if(firstObject._phyisijs.touches.length>1) {
  // for(var o=0;o<firstObject._physijs.touches.length;o++) {
  if(firstObject._physijs.touches[0]!==secondObject._physijs.id) {
    eval(code);
  };
// }
//  }
}
 if(typeof first !== 'object' && first.startsWith("byIndex")&&second.startsWith("byName")) {
  var firstObject = first; 
  var secondObject = scene.getObjectByName(second.split("byName").join("").split("=").join(""));
  if(!firstObject._physijs.touches[0]==secondObject._physijs.id) {
   eval(code);
  }
 }
if(typeof first !== 'object' && first.startsWith("byName")&&second.startsWith("byIndex")) {
  var firstObject = scene.getObjectByName(first.split("byName").join("").split("=").join("")); 
  var secondObject = second
 for(var o=0;o<firstObject._physijs.touches.length;o++) {
  if(!firstObject._physijs.touches[o]==second.split("byIndex").join("").split("=").join("")) {
      eval(code);
     };
    }
   }
  })
 }
//  console.log(collide && typeof eval(first)._physijs !== 'object' || collide && typeof eval(second)._physijs !== 'object')
 if(collide && typeof eval(first)._physijs !== 'object' || collide && typeof eval(second)._physijs !== 'object') {
  var col=setInterval(function() {
for (var vertexIndex = 0; vertexIndex < first.geometry.vertices.length; vertexIndex++)
{       
    var localVertex = first.geometry.vertices[vertexIndex].clone();
    var globalVertex = first.matrix.multiplyVector4(localVertex);
    var directionVector = globalVertex.sub( first.position );

    var ray = new THREE.Raycaster( first.position, directionVector.clone().normalize() );
    var collisionResults = ray.intersectObjects( scene.children );
    if ( collisionResults.length > 0 && collisionResults[0].distance < directionVector.length() && collisionResults[0].object == second ) {
      eval(code.split('end').join('clearInterval(col)'));
    }
    // else {
    //     terminal.clear()
    // }
 }
})
  }
  if(!collide && typeof first._physijs !== 'object' || !collide && typeof second._physijs !== 'object') {
    setInterval(function() {
for (var vertexIndex = 0; vertexIndex < first.geometry.vertices.length; vertexIndex++)
{       
    var localVertex = first.geometry.vertices[vertexIndex].clone();
    var globalVertex = first.matrix.multiplyVector4(localVertex);
    var directionVector = globalVertex.sub( first.position );

    var ray = new THREE.Raycaster( first.position, directionVector.clone().normalize() );
    var collisionResults = ray.intersectObjects( scene.children ); 
    // if ( collisionResults.length > 0 && collisionResults[0].distance < directionVector.length() ) {
      // console.log(collisionResults[0].object !== second)
      // console.log(collisionResults[0].object !== second)
      if( collisionResults.length > 0 && collisionResults[0].object == second ) {
       return false
      }
      if( collisionResults.length > 0 && collisionResults[0].object !== second ) {
        if(scene.children.length>0) {
            eval(code);
          }
      }
    // }
    // else {
    //     terminal.clear()
    // }
 }
})
  }
}


var tutorial = {
 copyDesc: {
  getKey: "function functionname() {\n if(game.getKey=='key') {\n ...\n }\n};\nengine.addEventListener(\"eventListener\", function(){functionname()});",
  addHeading:'addHeading("{x:x position, y:y position}","heading","text","property => property value","id");',
  createTimer:'createTimer(time, \'conversion[endTime]:...","autotype=boolean")\', 1550, 0, 1000, "theme")',
  removeBody:'removeBody(getBody[])',
  addForceX:'addForceX(getBody[], value)',
  addForceY:'addForceY(getBody[], value)',
  setWireframe:'setWireframe(boolean)',
  variable:'variable(name, value)',
  getDataType:'getDataType(object)',
  loadPlugin:'loadPlugin(plugin)',
  IMPORT:'IMPORT(source)',
  loop:'loop(interval, name, ...)',
  wait:'wait(time, conversion, "{code}")',
  createDialog:'createDialog(title, text)',
  collisionDetection:'collisionDetection(getBody[], getBody[], "...")',
  smoothControl:'smoothControl("getBody[]", x, y, velocity X, velocity Y, speed, friction, "left: , right: , down: , up: ");',
  addFriction:'addFriction("getBody[]",friction, friction air, restitution);',
  setText:"setText(id, text);",
  addAudio:'addAudio(src, id, current time);',
  playAudio:'playAudio(id);',
  addLight:'addLight(x, y, width, height, light color, light intensity);',
  addLightToBody:'addLightToBody(body, x, y, light color, light intensity);',
  checkBody:'checkBody(getBody[], "...");',
  forLoop:'forLoop(interval, interval condition, ...);',
  createProgress:'createProgress(id, x, y, width, height, color);',
  particleTo:'particleTo(getBody[], number of particles, size, color, function (optional));',
  jointLength:'jointLength(joint)',
  removeJoint:'removeJoint(joint, jointBody);',
  getJoint:'getJoint[joint]',
  getJointBody:'getJointBody[body]',
  setStatic:'setStatic(getBody[]);',
  setRotation:'setRotation(getBody[], rotation value);',
  setMass:'setMass(getBody[], value);',
  setVelocity:'setVelocity(getBody[], value);',
  setInertia:'setInertia(getBody[], value);',
  setSensor:'setSensor(getBody[], value);',
  scaleBody:'scaleBody(getBody[], scale X, scale Y);',
  followBody:'UYC.camera.followBody(getBody[], x, y);',
  loadScript:'loadScript(asset);',
  createOBJ:'createOBJ(obj, x, y, size (optional));',
  terminalLog:'terminal.log(message);',
  terminalInfinityLog:'terminal.infinityLog(message);',
  terminalHelp:'terminal.help();',
  getBody:'getBody[]',
  gameBodiesLength:'game.bodies.length'
 }
}
var toastInUse=false;
function toast(title, msg) {
if(!toastInUse) {
 var x = document.getElementById("toast")
 toastInUse=true;
 toastImg.innerHTML=title;
 toastMsg.innerHTML=msg;
 setTimeout(function(){
  toastMsg.style.transition="1s"
  toastMsg.style.opacity=1
 },600)
 setTimeout(function(){
  setTimeout(function(){toastMsg.style.transition="0s"},100)
  toastMsg.style.opacity=0
 },3500)
 x.className = "show";
 setTimeout(function(){ x.className = x.className.replace("show", ""); toastInUse=false; }, 5000);
 }
}
function openContextMenuCreation() {
 window.open("ContextMenuCreation.html");
}
function openCustomGeometryCreation() {
  window.open("GC.html");
}
var firebaseConfig = {
  apiKey: "AIzaSyAU1SfPbznKgLHheHSwjIntthqEMJ-9-Mg",
  authDomain: "uycapp.firebaseapp.com",
  databaseURL: "https://uycapp-default-rtdb.firebaseio.com",
  projectId: "uycapp",
  storageBucket: "uycapp.appspot.com",
  messagingSenderId: "399926574750",
  appId: "1:399926574750:web:a51bf10177f076f444058f",
  measurementId: "G-1ZNCE11F3V"
};
var app = firebase.initializeApp(firebaseConfig);
var database = firebase.database();
var data = firebase.database().ref('users');
function getNameById(id) {
 for(var i = 0; i < Object.keys(__accounts).length; i++) {
  if(__accounts[Object.keys(__accounts)[i]].id == id) {
   return {
	name: __accounts[Object.keys(__accounts)[i]].username,
	password: __accounts[Object.keys(__accounts)[i]].password,
  email: __accounts[Object.keys(__accounts)[i]].email,
	id: __accounts[Object.keys(__accounts)[i]].id,
	token: Object.keys(__accounts)[i]
   };
  };
 };
};
function getIdByName(name) {
 for(var i = 0; i < Object.keys(__accounts).length; i++) {
  if(__accounts[Object.keys(__accounts)[i]].username == name) {
   return {
	name: __accounts[Object.keys(__accounts)[i]].username,
	password: __accounts[Object.keys(__accounts)[i]].password,
  email: __accounts[Object.keys(__accounts)[i]].email,
	id: __accounts[Object.keys(__accounts)[i]].id,
	token: Object.keys(__accounts)[i]
   };
  };
 };
};
function getPassByName(pass) {
 for(var i = 0; i < Object.keys(__accounts).length; i++) {
  if(__accounts[Object.keys(__accounts)[i]].password == pass) {
   return {
	name: __accounts[Object.keys(__accounts)[i]].username,
	password: __accounts[Object.keys(__accounts)[i]].password,
	id: __accounts[Object.keys(__accounts)[i]].id,
	token: Object.keys(__accounts)[i]
   };
  };
 };
};
function ban(user, reason, duration) {
 firebase.database().ref('users/'+getIdByName(user).token).set({
  email: getIdByName(user).email,
  id: getIdByName(user).id,
  password: getIdByName(user).password,
  username: getIdByName(user).username,
  isBanned: true,
  ban: {
   reason: reason,
   duration: duration
  }
 });
};
var $_dlc = setInterval(function() {
  if(typeof __accounts === 'object') {
  clearInterval($_dlc);
  if(typeof __accounts == 'object' && localStorage.getItem('token') !== null &&  __accounts[localStorage.getItem('token')].isBanned) {
   window.location.href='Banned.html';
  };
 };
});
function unban(user) {
  firebase.database().ref('users/'+getIdByName(user).token).set({
  email: getIdByName(user).email,
  id: getIdByName(user).id,
  password: getIdByName(user).password,
  username: getIdByName(user).username,
  isBanned: false,
  ban: {
   reason: 'false',
   duration: 'false'
  }
 });
};
var __accounts;
data.on('value', displayDatas, displayError);
function displayDatas(data) {
 __accounts = data.val();
};
function displayError(err) {
 console.log(err);
};
function changeUsername(user, username) {
 firebase.database().ref('users/'+getIdByName(user).token).set({
  email: getIdByName(user).email,
  id: getIdByName(user).id,
  password: getIdByName(user).password,
  username: username,
 });
};

</script>
  
  
  
 <!-- <div class="dropzone">
  <script type="text/javascript" src="/Data/spriteAPI/imgur.js"></script>
  <script type="text/javascript" src="/Data/spriteAPI/upload.js"></script>
  </div> -->
</body>
</head>